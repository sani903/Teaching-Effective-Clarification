const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CrQvIqxM.js","assets/features-animation-DdLQEqdl.js","assets/gestures-BcGXZsOZ.js","assets/chunk-NISHYRIK-CgksP-ke.js","assets/index-BBSevn_K.js","assets/utils-C5iw9p3M.js"])))=>i.map(i=>d[i]);
import{r as c,p as a,R as ee,w as Kt}from"./chunk-NISHYRIK-CgksP-ke.js";import{q as me}from"./query-client-config-D_0Qd0_c.js";import{O as Dt}from"./option-service.api-L97_35Hu.js";import{I as p}from"./declaration-BLNM_M5s.js";import{S as kt}from"./question-circle-BYpHJBA-.js";import{D as ue,c as Z,u as De,v as Lt,w as Ft,x as ke,y as Vt,z as ge,A as Ut,B as at,F as Le,G as Bt,H as zt}from"./utils-C5iw9p3M.js";import{u as $}from"./useTranslation-BhtO8iYN.js";import{c as Ht,G as Wt}from"./optimistic-user-message-store-BLUkFBLR.js";import{a as Ie}from"./use-config-BtaDlBUv.js";import{G as nt}from"./git-service.api-C9ZaYUVf.js";import{o as qt}from"./open-hands-axios-DsgPCc-0.js";import{f as rt,j as Qt,$ as _e,g as he,v as Yt,w as Zt,x as Xt,n as Jt,i as ot,k as es,l as ts,d as it,r as ss,o as as,s as te}from"./useSingleSelectListState-D8PQAT0i.js";import{j as pe}from"./index-CQq-b-9n.js";import{m as ns,T as rs}from"./tooltip-button-CGDIzzom.js";import{_ as os}from"./preload-helper-BhQ1_4_d.js";import{aa as is,ab as Fe,ac as ls,ad as ds,w as cs,ae as us,t as je,G as se,d as Ae,I as lt,$ as ae,J as dt,_ as fs,j as Oe,u as re,N as ct,o as ut,b as J,m as Y,n as j,af as Ve,e as ft,f as oe,L as Te,g as Re,h as Ue,A as ms,Q as ps,q as bs,v as gs,ag as hs,k as xs}from"./index-BBSevn_K.js";import{f as vs,M as ys}from"./gestures-BcGXZsOZ.js";import{r as Be,u as Ns,c as Ms,d as ze,e as Cs}from"./use-search-repositories-D5GOcXmI.js";import{l as Es,d as As,M as Ts,z as Rs,B as Is,G as _s,H as js,C as Os,D as Ps,E as Ss,a6 as mt,V as ws,W as $s,Y as ne,Z as Pe,A as Se,P as pt,_ as Gs,q as Ks,c as Ds,r as ks,a as Ls,R as Fs,a5 as Vs}from"./parse-pr-url-CCSuKL2A.js";import{d as Us}from"./features-animation-DdLQEqdl.js";import{B as z}from"./brand-button-BLaTuvKj.js";import{M as bt}from"./modal-backdrop-CfHRd2ER.js";import{M as gt}from"./modal-body-DfkwqNDR.js";import{a as He,d as fe}from"./custom-toast-handlers-B_1yfMGT.js";import{u as Bs}from"./use-user-providers-CPbKIWnc.js";import"./i18next-Lgj2Bm8L.js";import"./retrieve-axios-error-message-CYr77e_f.js";import"./infiniteQueryBehavior-D4OZgA3F.js";import"./module-CWLbpm_7.js";import"./feature-flags-1f3MRGYs.js";import"./useInfiniteQuery-DoKcZZP5.js";import"./use-is-authed-CJdzFdqm.js";import"./index-DJ6Yt2gU.js";import"./close-_PwA9ZeD.js";import"./index-DastLBCt.js";import"./use-settings-y2Eq7ITW.js";const zs=new Set(["opacity","clipPath","filter","transform"]),Hs=c.createContext(null);function Ws(){const e=c.useRef(!1);return is(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function qs(){const e=Ws(),[t,s]=c.useState(0),n=c.useCallback(()=>{e.current&&s(t+1)},[t]);return[c.useCallback(()=>vs.postRender(n),[n]),t]}const Qs=e=>!e.isLayoutDirty&&e.willUpdate(!1);function We(){const e=new Set,t=new WeakMap,s=()=>e.forEach(Qs);return{add:n=>{e.add(n),t.set(n,n.addEventListener("willUpdate",s))},remove:n=>{e.delete(n);const r=t.get(n);r&&(r(),t.delete(n)),s()},dirty:s}}const ht=e=>e===!0,Ys=e=>ht(e===!0)||e==="id",xt=({children:e,id:t,inherit:s=!0})=>{const n=c.useContext(Fe),r=c.useContext(Hs),[i,o]=qs(),d=c.useRef(null),l=n.id||r;d.current===null&&(Ys(s)&&l&&(t=t?l+"-"+t:l),d.current={id:t,group:ht(s)&&n.group||We()});const u=c.useMemo(()=>({...d.current,forceRender:i}),[o]);return a.jsx(Fe.Provider,{value:u,children:e})},Zs={...Us,...As,...Es};class Xs extends ys{constructor(){super(...arguments),this.isEnabled=!1}add(t){(ls.has(t)||zs.has(t))&&(this.isEnabled=!0,this.update())}update(){this.set(this.isEnabled?"transform":"auto")}}function Js(){return ds(()=>new Xs("auto"))}function ea(e,t){let s=t?.isDisabled,[n,r]=c.useState(!1);return cs(()=>{if(e?.current&&!s){let i=()=>{if(e.current){let d=us(e.current,{tabbable:!0});r(!!d.nextNode())}};i();let o=new MutationObserver(i);return o.observe(e.current,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabIndex","disabled"]}),()=>{o.disconnect()}}}),s?!1:n}var qe=je({slots:{base:"inline-flex",tabList:["flex","p-1","h-fit","gap-2","items-center","flex-nowrap","overflow-x-scroll","scrollbar-hide","bg-default-100"],tab:["z-0","w-full","px-3","py-1","flex","group","relative","justify-center","items-center","outline-solid outline-transparent","cursor-pointer","transition-opacity","tap-highlight-transparent","data-[disabled=true]:cursor-not-allowed","data-[disabled=true]:opacity-30","data-[hover-unselected=true]:opacity-disabled",...Ae],tabContent:["relative","z-10","text-inherit","whitespace-nowrap","transition-colors","text-default-500","group-data-[selected=true]:text-foreground"],cursor:["absolute","z-0","bg-white"],panel:["py-3","px-1","outline-solid outline-transparent","data-[inert=true]:hidden",...Ae],tabWrapper:[]},variants:{variant:{solid:{cursor:"inset-0"},light:{tabList:"bg-transparent dark:bg-transparent",cursor:"inset-0"},underlined:{tabList:"bg-transparent dark:bg-transparent",cursor:"h-[2px] w-[80%] bottom-0 shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]"},bordered:{tabList:"bg-transparent dark:bg-transparent border-medium border-default-200 shadow-xs",cursor:"inset-0"}},color:{default:{},primary:{},secondary:{},success:{},warning:{},danger:{}},size:{sm:{tabList:"rounded-medium",tab:"h-7 text-tiny rounded-small",cursor:"rounded-small"},md:{tabList:"rounded-medium",tab:"h-8 text-small rounded-small",cursor:"rounded-small"},lg:{tabList:"rounded-large",tab:"h-9 text-medium rounded-medium",cursor:"rounded-medium"}},radius:{none:{tabList:"rounded-none",tab:"rounded-none",cursor:"rounded-none"},sm:{tabList:"rounded-medium",tab:"rounded-small",cursor:"rounded-small"},md:{tabList:"rounded-medium",tab:"rounded-small",cursor:"rounded-small"},lg:{tabList:"rounded-large",tab:"rounded-medium",cursor:"rounded-medium"},full:{tabList:"rounded-full",tab:"rounded-full",cursor:"rounded-full"}},fullWidth:{true:{base:"w-full",tabList:"w-full"}},isDisabled:{true:{tabList:"opacity-disabled pointer-events-none"}},disableAnimation:{true:{tab:"transition-none",tabContent:"transition-none"}},placement:{top:{},start:{tabList:"flex-col",panel:"py-0 px-3",tabWrapper:"flex"},end:{tabList:"flex-col",panel:"py-0 px-3",tabWrapper:"flex flex-row-reverse"},bottom:{tabWrapper:"flex flex-col-reverse"}}},defaultVariants:{color:"default",variant:"solid",size:"md",fullWidth:!1,isDisabled:!1},compoundVariants:[{variant:["solid","bordered","light"],color:"default",class:{cursor:["bg-background","dark:bg-default","shadow-small"],tabContent:"group-data-[selected=true]:text-default-foreground"}},{variant:["solid","bordered","light"],color:"primary",class:{cursor:se.solid.primary,tabContent:"group-data-[selected=true]:text-primary-foreground"}},{variant:["solid","bordered","light"],color:"secondary",class:{cursor:se.solid.secondary,tabContent:"group-data-[selected=true]:text-secondary-foreground"}},{variant:["solid","bordered","light"],color:"success",class:{cursor:se.solid.success,tabContent:"group-data-[selected=true]:text-success-foreground"}},{variant:["solid","bordered","light"],color:"warning",class:{cursor:se.solid.warning,tabContent:"group-data-[selected=true]:text-warning-foreground"}},{variant:["solid","bordered","light"],color:"danger",class:{cursor:se.solid.danger,tabContent:"group-data-[selected=true]:text-danger-foreground"}},{variant:"underlined",color:"default",class:{cursor:"bg-foreground",tabContent:"group-data-[selected=true]:text-foreground"}},{variant:"underlined",color:"primary",class:{cursor:"bg-primary",tabContent:"group-data-[selected=true]:text-primary"}},{variant:"underlined",color:"secondary",class:{cursor:"bg-secondary",tabContent:"group-data-[selected=true]:text-secondary"}},{variant:"underlined",color:"success",class:{cursor:"bg-success",tabContent:"group-data-[selected=true]:text-success"}},{variant:"underlined",color:"warning",class:{cursor:"bg-warning",tabContent:"group-data-[selected=true]:text-warning"}},{variant:"underlined",color:"danger",class:{cursor:"bg-danger",tabContent:"group-data-[selected=true]:text-danger"}},{disableAnimation:!0,variant:"underlined",class:{tab:["after:content-['']","after:absolute","after:bottom-0","after:h-[2px]","after:w-[80%]","after:opacity-0","after:shadow-[0_1px_0px_0_rgba(0,0,0,0.05)]","data-[selected=true]:after:opacity-100"]}},{disableAnimation:!0,color:"default",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-default data-[selected=true]:text-default-foreground"}},{disableAnimation:!0,color:"primary",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-primary data-[selected=true]:text-primary-foreground"}},{disableAnimation:!0,color:"secondary",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-secondary data-[selected=true]:text-secondary-foreground"}},{disableAnimation:!0,color:"success",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-success data-[selected=true]:text-success-foreground"}},{disableAnimation:!0,color:"warning",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-warning data-[selected=true]:text-warning-foreground"}},{disableAnimation:!0,color:"danger",variant:["solid","bordered","light"],class:{tab:"data-[selected=true]:bg-danger data-[selected=true]:text-danger-foreground"}},{disableAnimation:!0,color:"default",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-foreground"}},{disableAnimation:!0,color:"primary",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-primary"}},{disableAnimation:!0,color:"secondary",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-secondary"}},{disableAnimation:!0,color:"success",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-success"}},{disableAnimation:!0,color:"warning",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-warning"}},{disableAnimation:!0,color:"danger",variant:"underlined",class:{tab:"data-[selected=true]:after:bg-danger"}}],compoundSlots:[{variant:"underlined",slots:["tab","tabList","cursor"],class:["rounded-none"]}]}),ta=je({base:"px-2",variants:{variant:{light:"",shadow:"px-4 shadow-medium rounded-medium bg-content1",bordered:"px-4 border-medium border-divider rounded-medium",splitted:"flex flex-col gap-2"},fullWidth:{true:"w-full"}},defaultVariants:{variant:"light",fullWidth:!0}}),sa=je({slots:{base:"",heading:"",trigger:["flex py-4 w-full h-full gap-3 outline-solid outline-transparent items-center tap-highlight-transparent",...Ae],startContent:"shrink-0",indicator:"text-default-400",titleWrapper:"flex-1 flex flex-col text-start",title:"text-foreground text-medium",subtitle:"text-small text-foreground-500 font-normal",content:"py-2"},variants:{variant:{splitted:{base:"px-4 bg-content1 shadow-medium rounded-medium"}},isCompact:{true:{trigger:"py-2",title:"text-medium",subtitle:"text-small",indicator:"text-medium",content:"py-1"}},isDisabled:{true:{base:"opacity-disabled pointer-events-none"}},hideIndicator:{true:{indicator:"hidden"}},disableAnimation:{true:{content:"hidden data-[open=true]:block"},false:{indicator:"transition-transform",trigger:"transition-opacity"}},disableIndicatorAnimation:{true:{indicator:"transition-none"},false:{indicator:"rotate-0 data-[open=true]:-rotate-90 rtl:-rotate-180 rtl:data-[open=true]:-rotate-90"}}},defaultVariants:{size:"md",radius:"lg",isDisabled:!1,hideIndicator:!1,disableIndicatorAnimation:!1}});function aa(e,t){let{elementType:s="button",isDisabled:n,onPress:r,onPressStart:i,onPressEnd:o,onPressUp:d,onPressChange:l,preventFocusOnPress:u,allowFocusWhenDisabled:f,onClick:b,href:N,target:C,rel:x,type:g="button"}=e,y;s==="button"?y={type:g,disabled:n,form:e.form,formAction:e.formAction,formEncType:e.formEncType,formMethod:e.formMethod,formNoValidate:e.formNoValidate,formTarget:e.formTarget,name:e.name,value:e.value}:y={role:"button",href:s==="a"&&!n?N:void 0,target:s==="a"?C:void 0,type:s==="input"?g:void 0,disabled:s==="input"?n:void 0,"aria-disabled":!n||s==="input"?void 0:n,rel:s==="a"?x:void 0};let{pressProps:E,isPressed:m}=rt({onPressStart:i,onPressEnd:o,onPressChange:l,onPress:r,onPressUp:d,onClick:b,isDisabled:n,preventFocusOnPress:u,ref:t}),{focusableProps:M}=lt(e,t);f&&(M.tabIndex=n?-1:M.tabIndex);let A=ae(M,E,dt(e,{labelable:!0}));return{isPressed:m,buttonProps:ae(y,A,{"aria-haspopup":e["aria-haspopup"],"aria-expanded":e["aria-expanded"],"aria-controls":e["aria-controls"],"aria-pressed":e["aria-pressed"],"aria-current":e["aria-current"],"aria-disabled":e["aria-disabled"]})}}function na(e,t,s){let{item:n,isDisabled:r}=e,i=n.key,o=t.selectionManager,d=c.useId(),l=c.useId(),u=t.disabledKeys.has(n.key)||r;c.useEffect(()=>{i===t.focusedKey&&document.activeElement!==s.current&&s.current&&fs(s.current)},[s,i,t.focusedKey]);let f=c.useCallback(g=>{o.canSelectItem(i)&&(o.select(i,g),t.toggleKey(i))},[i,o]);const b=c.useCallback(g=>{o.selectionBehavior==="replace"&&o.extendSelection(g),o.setFocusedKey(g)},[o]),N=c.useCallback(g=>{const E={ArrowDown:()=>{const m=t.collection.getKeyAfter(i);if(m&&t.disabledKeys.has(m)){const M=t.collection.getKeyAfter(m);M&&b(M)}else m&&b(m)},ArrowUp:()=>{const m=t.collection.getKeyBefore(i);if(m&&t.disabledKeys.has(m)){const M=t.collection.getKeyBefore(m);M&&b(M)}else m&&b(m)},Home:()=>{const m=t.collection.getFirstKey();m&&b(m)},End:()=>{const m=t.collection.getLastKey();m&&b(m)}}[g.key];E&&(g.preventDefault(),o.canSelectItem(i)&&E(g))},[i,o]);let{buttonProps:C}=aa({id:d,elementType:"button",isDisabled:u,onKeyDown:N,onPress:f},s),x=t.selectionManager.isSelected(n.key);return{buttonProps:{...C,"aria-expanded":x,"aria-controls":x?l:void 0},regionProps:{id:l,role:"region","aria-labelledby":d}}}function ra(e,t,s){let{listProps:n}=Qt({...e,...t,allowsTabNavigation:!0,disallowSelectAll:!0,ref:s});return delete n.onKeyDownCapture,{accordionProps:{...n,tabIndex:void 0}}}function oa(e){var t,s;const n=Oe(),{ref:r,as:i,item:o,onFocusChange:d}=e,{state:l,className:u,indicator:f,children:b,title:N,subtitle:C,startContent:x,motionProps:g,focusedKey:y,variant:E,isCompact:m=!1,classNames:M={},isDisabled:A=!1,hideIndicator:T=!1,disableAnimation:h=(t=n?.disableAnimation)!=null?t:!1,keepContentMounted:O=!1,disableIndicatorAnimation:v=!1,HeadingComponent:R=i||"h2",onPress:_,onPressStart:G,onPressEnd:w,onPressChange:k,onPressUp:U,onClick:P,...F}=e,q=i||"div",X=typeof q=="string",W=re(r),S=l.disabledKeys.has(o.key)||A,K=l.selectionManager.isSelected(o.key),{buttonProps:ie,regionProps:le}=na({item:o,isDisabled:S},{...l,focusedKey:y},W),{onFocus:H,onBlur:xe,...ve}=ie,{isFocused:ye,isFocusVisible:Ne,focusProps:B}=_e({autoFocus:(s=o.props)==null?void 0:s.autoFocus}),{isHovered:Q,hoverProps:de}=ct({isDisabled:S}),{pressProps:ce,isPressed:Rt}=rt({ref:W,isDisabled:S,onPress:_,onPressStart:G,onPressEnd:w,onPressChange:k,onPressUp:U}),It=c.useCallback(()=>{d?.(!0,o.key)},[]),_t=c.useCallback(()=>{d?.(!1,o.key)},[]),I=c.useMemo(()=>({...M}),[ut(M)]),L=c.useMemo(()=>sa({isCompact:m,isDisabled:S,hideIndicator:T,disableAnimation:h,disableIndicatorAnimation:v,variant:E}),[m,S,T,h,v,E]),$e=J(I?.base,u),jt=c.useCallback((V={})=>({"data-open":j(K),"data-disabled":j(S),"data-slot":"base",className:L.base({class:$e}),...Y(he(F,{enabled:X}),V)}),[$e,X,F,L,o.props,K,S]),Ot=(V={})=>{var Ge,Ke;return{ref:W,"data-open":j(K),"data-focus":j(ye),"data-focus-visible":j(Ne),"data-disabled":j(S),"data-hover":j(Q),"data-pressed":j(Rt),"data-slot":"trigger",className:L.trigger({class:I?.trigger}),onFocus:Ve(It,H,B.onFocus,F.onFocus,(Ge=o.props)==null?void 0:Ge.onFocus),onBlur:Ve(_t,xe,B.onBlur,F.onBlur,(Ke=o.props)==null?void 0:Ke.onBlur),...Y(ve,de,ce,V,{onClick:ft(ce.onClick,P)})}},Pt=c.useCallback((V={})=>({"data-open":j(K),"data-disabled":j(S),"data-slot":"content",className:L.content({class:I?.content}),...Y(le,V)}),[L,I,le,K,S,I?.content]),St=c.useCallback((V={})=>({"aria-hidden":j(!0),"data-open":j(K),"data-disabled":j(S),"data-slot":"indicator",className:L.indicator({class:I?.indicator}),...V}),[L,I?.indicator,K,S,I?.indicator]),wt=c.useCallback((V={})=>({"data-open":j(K),"data-disabled":j(S),"data-slot":"heading",className:L.heading({class:I?.heading}),...V}),[L,I?.heading,K,S,I?.heading]),$t=c.useCallback((V={})=>({"data-open":j(K),"data-disabled":j(S),"data-slot":"title",className:L.title({class:I?.title}),...V}),[L,I?.title,K,S,I?.title]),Gt=c.useCallback((V={})=>({"data-open":j(K),"data-disabled":j(S),"data-slot":"subtitle",className:L.subtitle({class:I?.subtitle}),...V}),[L,I,K,S,I?.subtitle]);return{Component:q,HeadingComponent:R,item:o,slots:L,classNames:I,domRef:W,indicator:f,children:b,title:N,subtitle:C,startContent:x,isOpen:K,isDisabled:S,hideIndicator:T,keepContentMounted:O,disableAnimation:h,motionProps:g,getBaseProps:jt,getHeadingProps:wt,getButtonProps:Ot,getContentProps:Pt,getIndicatorProps:St,getTitleProps:$t,getSubtitleProps:Gt}}var Qe=e=>a.jsx("svg",{"aria-hidden":"true",fill:"none",focusable:"false",height:"1em",role:"presentation",viewBox:"0 0 24 24",width:"1em",...e,children:a.jsx("path",{d:"M15.5 19l-7-7 7-7",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5"})}),Ye=()=>os(()=>import("./index-CrQvIqxM.js"),__vite__mapDeps([0,1,2,3,4,5])).then(e=>e.default),vt=oe((e,t)=>{const{Component:s,HeadingComponent:n,classNames:r,slots:i,indicator:o,children:d,title:l,subtitle:u,startContent:f,isOpen:b,isDisabled:N,hideIndicator:C,keepContentMounted:x,disableAnimation:g,motionProps:y,getBaseProps:E,getHeadingProps:m,getButtonProps:M,getTitleProps:A,getSubtitleProps:T,getContentProps:h,getIndicatorProps:O}=oa({...e,ref:t}),v=Js(),_=c.useMemo(()=>typeof o=="function"?o({indicator:a.jsx(Qe,{}),isOpen:b,isDisabled:N}):o||null,[o,b,N])||a.jsx(Qe,{}),G=c.useMemo(()=>{if(g)return x?a.jsx("div",{...h(),children:d}):b&&a.jsx("div",{...h(),children:d});const w={exit:{...Ue.collapse.exit,overflowY:"hidden"},enter:{...Ue.collapse.enter,overflowY:"unset"}};return x?a.jsx(Te,{features:Ye,children:a.jsx(Re.section,{animate:b?"enter":"exit",exit:"exit",initial:"exit",style:{willChange:v},variants:w,onKeyDown:k=>{k.stopPropagation()},...y,children:a.jsx("div",{...h(),children:d})},"accordion-content")}):a.jsx(ms,{initial:!1,children:b&&a.jsx(Te,{features:Ye,children:a.jsx(Re.section,{animate:"enter",exit:"exit",initial:"exit",style:{willChange:v},variants:w,onKeyDown:k=>{k.stopPropagation()},...y,children:a.jsx("div",{...h(),children:d})},"accordion-content")})})},[b,g,x,d,y]);return a.jsxs(s,{...E(),children:[a.jsx(n,{...m(),children:a.jsxs("button",{...M(),children:[f&&a.jsx("div",{className:i.startContent({class:r?.startContent}),children:f}),a.jsxs("div",{className:i.titleWrapper({class:r?.titleWrapper}),children:[l&&a.jsx("span",{...A(),children:l}),u&&a.jsx("span",{...T(),children:u})]}),!C&&_&&a.jsx("span",{...O(),children:_})]})}),G]})});vt.displayName="HeroUI.AccordionItem";var ia=vt;class la{*[Symbol.iterator](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(t){let s=this.keyMap.get(t);var n;return s&&(n=s.prevKey)!==null&&n!==void 0?n:null}getKeyAfter(t){let s=this.keyMap.get(t);var n;return s&&(n=s.nextKey)!==null&&n!==void 0?n:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(t){var s;return(s=this.keyMap.get(t))!==null&&s!==void 0?s:null}at(t){const s=[...this.getKeys()];return this.getItem(s[t])}constructor(t,{expandedKeys:s}={}){this.keyMap=new Map,this.firstKey=null,this.lastKey=null,this.iterable=t,s=s||new Set;let n=d=>{if(this.keyMap.set(d.key,d),d.childNodes&&(d.type==="section"||s.has(d.key)))for(let l of d.childNodes)n(l)};for(let d of t)n(d);let r=null,i=0;for(let[d,l]of this.keyMap)r?(r.nextKey=d,l.prevKey=r.key):(this.firstKey=d,l.prevKey=void 0),l.type==="item"&&(l.index=i++),r=l,r.nextKey=void 0;var o;this.lastKey=(o=r?.key)!==null&&o!==void 0?o:null}}function da(e){let{onExpandedChange:t}=e,[s,n]=ps(e.expandedKeys?new Set(e.expandedKeys):void 0,e.defaultExpandedKeys?new Set(e.defaultExpandedKeys):new Set,t),r=Yt(e),i=c.useMemo(()=>e.disabledKeys?new Set(e.disabledKeys):new Set,[e.disabledKeys]),o=Zt(e,c.useCallback(l=>new la(l,{expandedKeys:s}),[s]),null);return c.useEffect(()=>{r.focusedKey!=null&&!o.getItem(r.focusedKey)&&r.setFocusedKey(null)},[o,r.focusedKey]),{collection:o,expandedKeys:s,disabledKeys:i,toggleKey:l=>{n(ca(s,l))},setExpandedKeys:n,selectionManager:new Xt(o,r)}}function ca(e,t){let s=new Set(e);return s.has(t)?s.delete(t):s.add(t),s}function ua(e){var t;const s=Oe(),{ref:n,as:r,className:i,items:o,variant:d,motionProps:l,expandedKeys:u,disabledKeys:f,selectedKeys:b,children:N,defaultExpandedKeys:C,selectionMode:x="single",selectionBehavior:g="toggle",keepContentMounted:y=!1,disallowEmptySelection:E,defaultSelectedKeys:m,onExpandedChange:M,onSelectionChange:A,dividerProps:T={},isCompact:h=!1,isDisabled:O=!1,showDivider:v=!0,hideIndicator:R=!1,disableAnimation:_=(t=s?.disableAnimation)!=null?t:!1,disableIndicatorAnimation:G=!1,itemClasses:w,...k}=e,[U,P]=c.useState(null),F=r||"div",q=typeof F=="string",X=re(n),W=c.useMemo(()=>ta({variant:d,className:i}),[d,i]),K={children:c.useMemo(()=>{let B=[];return ee.Children.map(N,Q=>{var de;if(ee.isValidElement(Q)&&typeof((de=Q.props)==null?void 0:de.children)!="string"){const ce=ee.cloneElement(Q,{hasChildItems:!1});B.push(ce)}else B.push(Q)}),B},[N]),items:o},ie={expandedKeys:u,defaultExpandedKeys:C,onExpandedChange:M},le={disabledKeys:f,selectedKeys:b,selectionMode:x,selectionBehavior:g,disallowEmptySelection:E,defaultSelectedKeys:m??C,onSelectionChange:A,...K,...ie},H=da(le);H.selectionManager.setFocusedKey=B=>{P(B)};const{accordionProps:xe}=ra({...K,...ie},H,X),ve=c.useMemo(()=>({state:H,focusedKey:U,motionProps:l,isCompact:h,isDisabled:O,hideIndicator:R,disableAnimation:_,keepContentMounted:y,disableIndicatorAnimation:G}),[U,h,O,R,b,_,y,H?.expandedKeys.values,G,H.expandedKeys.size,H.disabledKeys.size,l]),ye=c.useCallback((B={})=>({ref:X,className:W,"data-orientation":"vertical",...Y(xe,he(k,{enabled:q}),B)}),[]),Ne=c.useCallback((B,Q)=>{B&&P(Q)},[]);return{Component:F,values:ve,state:H,focusedKey:U,getBaseProps:ye,isSplitted:d==="splitted",classNames:W,showDivider:v,dividerProps:T,disableAnimation:_,handleFocusChanged:Ne,itemClasses:w}}var yt=oe((e,t)=>{const{Component:s,values:n,state:r,isSplitted:i,showDivider:o,getBaseProps:d,disableAnimation:l,handleFocusChanged:u,itemClasses:f,dividerProps:b}=ua({...e,ref:t}),N=c.useCallback((x,g)=>u(x,g),[u]),C=c.useMemo(()=>[...r.collection].map((x,g)=>{const y={...f,...x.props.classNames||{}};return a.jsxs(c.Fragment,{children:[a.jsx(ia,{item:x,variant:e.variant,onFocusChange:N,...n,...x.props,classNames:y}),!x.props.hidden&&!i&&o&&g<r.collection.size-1&&a.jsx(Jt,{...b})]},x.key)}),[n,f,N,i,o,r.collection]);return a.jsx(s,{...d(),children:l?C:a.jsx(xt,{children:C})})});yt.displayName="HeroUI.Accordion";var fa=yt,ma=ot,pa=ma;const ba=e=>e===!1?{block:"end",inline:"nearest"}:(t=>t===Object(t)&&Object.keys(t).length!==0)(e)?e:{block:"start",inline:"nearest"};function ga(e,t){if(!e.isConnected||!(n=>{let r=n;for(;r&&r.parentNode;){if(r.parentNode===document)return!0;r=r.parentNode instanceof ShadowRoot?r.parentNode.host:r.parentNode}return!1})(e))return;if((n=>typeof n=="object"&&typeof n.behavior=="function")(t))return t.behavior(Be(e,t));const s=typeof t=="boolean"||t==null?void 0:t.behavior;for(const{el:n,top:r,left:i}of Be(e,ba(t)))n.scroll({top:r,left:i,behavior:s})}function ha(e={}){const{rerender:t=!1,delay:s=0}=e,n=c.useRef(!1),[r,i]=c.useState(!1);return c.useEffect(()=>{n.current=!0;let o=null;return t&&(s>0?o=setTimeout(()=>{i(!0)},s):i(!0)),()=>{n.current=!1,t&&i(!1),o&&clearTimeout(o)}},[t]),[c.useCallback(()=>n.current,[]),r]}const Nt=new WeakMap;function be(e,t,s){return e?(typeof t=="string"&&(t=t.replace(/\s+/g,"")),`${Nt.get(e)}-${s}-${t}`):""}function xa(e,t,s){let{key:n,isDisabled:r,shouldSelectOnPressUp:i}=e,{selectionManager:o,selectedKey:d}=t,l=n===d,u=r||t.isDisabled||t.selectionManager.isDisabled(n),{itemProps:f,isPressed:b}=es({selectionManager:o,key:n,ref:s,isDisabled:u,shouldSelectOnPressUp:i,linkBehavior:"selection"}),N=be(t,n,"tab"),C=be(t,n,"tabpanel"),{tabIndex:x}=f,g=t.collection.getItem(n),y=dt(g?.props,{labelable:!0});delete y.id;let E=ts(g?.props),{focusableProps:m}=lt({isDisabled:u},s);return{tabProps:ae(y,m,E,f,{id:N,"aria-selected":l,"aria-disabled":u||void 0,"aria-controls":l?C:void 0,tabIndex:u?void 0:x,role:"tab"}),isSelected:l,isDisabled:u,isPressed:b}}function va(e,t,s){let n=ea(s)?void 0:0;var r;const i=be(t,(r=e.id)!==null&&r!==void 0?r:t?.selectedKey,"tabpanel"),o=it({...e,id:i,"aria-labelledby":be(t,t?.selectedKey,"tab")});return{tabPanelProps:ae(o,{tabIndex:n,role:"tabpanel","aria-describedby":e["aria-describedby"],"aria-details":e["aria-details"]})}}class ya{getKeyLeftOf(t){return this.flipDirection?this.getNextKey(t):this.getPreviousKey(t)}getKeyRightOf(t){return this.flipDirection?this.getPreviousKey(t):this.getNextKey(t)}isDisabled(t){var s,n;return this.disabledKeys.has(t)||!!(!((n=this.collection.getItem(t))===null||n===void 0||(s=n.props)===null||s===void 0)&&s.isDisabled)}getFirstKey(){let t=this.collection.getFirstKey();return t!=null&&this.isDisabled(t)&&(t=this.getNextKey(t)),t}getLastKey(){let t=this.collection.getLastKey();return t!=null&&this.isDisabled(t)&&(t=this.getPreviousKey(t)),t}getKeyAbove(t){return this.tabDirection?null:this.getPreviousKey(t)}getKeyBelow(t){return this.tabDirection?null:this.getNextKey(t)}getNextKey(t){let s=t;do s=this.collection.getKeyAfter(s),s==null&&(s=this.collection.getFirstKey());while(s!=null&&this.isDisabled(s));return s}getPreviousKey(t){let s=t;do s=this.collection.getKeyBefore(s),s==null&&(s=this.collection.getLastKey());while(s!=null&&this.isDisabled(s));return s}constructor(t,s,n,r=new Set){this.collection=t,this.flipDirection=s==="rtl"&&n==="horizontal",this.disabledKeys=r,this.tabDirection=n==="horizontal"}}function Na(e,t,s){let{orientation:n="horizontal",keyboardActivation:r="automatic"}=e,{collection:i,selectionManager:o,disabledKeys:d}=t,{direction:l}=bs(),u=c.useMemo(()=>new ya(i,l,n,d),[i,d,n,l]),{collectionProps:f}=ss({ref:s,selectionManager:o,keyboardDelegate:u,selectOnFocus:r==="automatic",disallowEmptySelection:!0,scrollRef:s,linkBehavior:"selection"}),b=gs();Nt.set(t,b);let N=it({...e,id:b});return{tabListProps:{...ae(f,N),role:"tablist","aria-orientation":n,tabIndex:void 0}}}var Mt=oe((e,t)=>{var s,n;const{as:r,tabKey:i,destroyInactiveTabPanel:o,state:d,className:l,slots:u,classNames:f,...b}=e,N=r||"div",C=re(t),{tabPanelProps:x}=va({...e,id:String(i)},d,C),{focusProps:g,isFocused:y,isFocusVisible:E}=_e(),m=d.selectedItem,M=d.collection.getItem(i).props.children,A=J(f?.panel,l,(s=m?.props)==null?void 0:s.className),T=i===m?.key;return!M||!T&&o?null:a.jsx(N,{ref:C,"data-focus":y,"data-focus-visible":E,"data-inert":T?void 0:"true",inert:hs(!T),...T&&Y(x,g,b),className:(n=u.panel)==null?void 0:n.call(u,{class:A}),"data-slot":"panel",children:M})});Mt.displayName="HeroUI.TabPanel";var Ma=Mt,Ct=oe((e,t)=>{var s,n;const{className:r,as:i,item:o,state:d,classNames:l,isDisabled:u,listRef:f,slots:b,motionProps:N,disableAnimation:C,disableCursorAnimation:x,shouldSelectOnPressUp:g,tabRef:y,...E}=e,{key:m}=o,M=re(t),A=i||(e.href?"a":"button"),T=typeof A=="string",{tabProps:h,isSelected:O,isDisabled:v,isPressed:R}=xa({key:m,isDisabled:u,shouldSelectOnPressUp:g},d,M);e.children==null&&delete h["aria-controls"];const _=u||v,{focusProps:G,isFocused:w,isFocusVisible:k}=_e(),{hoverProps:U,isHovered:P}=ct({isDisabled:_}),F=J(l?.tab,r),[,q]=ha({rerender:!0}),X=((s=M?.current)==null?void 0:s.closest('[aria-modal="true"]'))!==null,W=()=>{!M?.current||!f?.current||ga(M.current,{scrollMode:"if-needed",behavior:"smooth",block:"end",inline:"end",boundary:f?.current})};return a.jsxs(A,{ref:ns(M,y),"data-disabled":j(v),"data-focus":j(w),"data-focus-visible":j(k),"data-hover":j(P),"data-hover-unselected":j((P||R)&&!O),"data-pressed":j(R),"data-selected":j(O),"data-slot":"tab",...Y(h,_?{}:{...G,...U},he(E,{enabled:T,omitPropNames:new Set(["title"]),omitEventNames:new Set(["onClick"])}),{onClick:ft(W,h.onClick)}),className:(n=b.tab)==null?void 0:n.call(b,{class:F}),title:E?.titleValue,type:A==="button"?"button":void 0,children:[O&&!C&&!x&&q&&!X?a.jsx(Te,{features:Zs,children:a.jsx(Re.span,{className:b.cursor({class:l?.cursor}),"data-slot":"cursor",layoutDependency:!1,layoutId:"cursor",transition:{type:"spring",bounce:.15,duration:.5},...N})}):null,a.jsx("div",{className:b.tabContent({class:l?.tabContent}),"data-slot":"tabContent",children:o.rendered})]})});Ct.displayName="HeroUI.Tab";var Ca=Ct;function Ea(e){var t,s;let n=as({...e,onSelectionChange:e.onSelectionChange?l=>{var u;l!=null&&((u=e.onSelectionChange)===null||u===void 0||u.call(e,l))}:void 0,suppressTextValueWarning:!0,defaultSelectedKey:(s=(t=e.defaultSelectedKey)!==null&&t!==void 0?t:Ze(e.collection,e.disabledKeys?new Set(e.disabledKeys):new Set))!==null&&s!==void 0?s:void 0}),{selectionManager:r,collection:i,selectedKey:o}=n,d=c.useRef(o);return c.useEffect(()=>{let l=o;e.selectedKey==null&&(r.isEmpty||l==null||!i.getItem(l))&&(l=Ze(i,n.disabledKeys),l!=null&&r.setSelectedKeys([l])),(l!=null&&r.focusedKey==null||!r.isFocused&&l!==d.current)&&r.setFocusedKey(l),d.current=l}),{...n,isDisabled:e.isDisabled||!1}}function Ze(e,t){let s=null;if(e){var n,r,i,o;for(s=e.getFirstKey();s!=null&&(t.has(s)||!((r=e.getItem(s))===null||r===void 0||(n=r.props)===null||n===void 0)&&n.isDisabled)&&s!==e.getLastKey();)s=e.getKeyAfter(s);s!=null&&(t.has(s)||!((o=e.getItem(s))===null||o===void 0||(i=o.props)===null||i===void 0)&&i.isDisabled)&&s===e.getLastKey()&&(s=e.getFirstKey())}return s}function Aa(e){var t,s,n;const r=Oe(),[i,o]=xs(e,qe.variantKeys),{ref:d,as:l,className:u,classNames:f,children:b,disableCursorAnimation:N,motionProps:C,isVertical:x=!1,shouldSelectOnPressUp:g=!0,destroyInactiveTabPanel:y=!0,...E}=i,m=l||"div",M=typeof m=="string",A=re(d),T=(s=(t=e?.disableAnimation)!=null?t:r?.disableAnimation)!=null?s:!1,h=Ea({children:b,...E}),{tabListProps:O}=Na(E,h,A),v=c.useMemo(()=>qe({...o,disableAnimation:T,...x?{placement:"start"}:{}}),[ut(o),T,x]),R=J(f?.base,u),_=c.useMemo(()=>({state:h,slots:v,classNames:f,motionProps:C,disableAnimation:T,listRef:A,shouldSelectOnPressUp:g,disableCursorAnimation:N,isDisabled:e?.isDisabled}),[h,v,A,C,T,N,g,e?.isDisabled,f]),G=c.useCallback(P=>({"data-slot":"base",className:v.base({class:J(R,P?.className)}),...Y(he(E,{enabled:M}),P)}),[R,E,v]),w=(n=o.placement)!=null?n:x?"start":"top",k=c.useCallback(P=>({"data-slot":"tabWrapper",className:v.tabWrapper({class:J(f?.tabWrapper,P?.className)}),"data-placement":w,"data-vertical":x||w==="start"||w==="end"?"vertical":"horizontal"}),[f,v,w,x]),U=c.useCallback(P=>({ref:A,"data-slot":"tabList",className:v.tabList({class:J(f?.tabList,P?.className)}),...Y(O,P)}),[A,O,f,v]);return{Component:m,domRef:A,state:h,values:_,destroyInactiveTabPanel:y,getBaseProps:G,getTabListProps:U,getWrapperProps:k}}var Ta=oe(function(t,s){var n;const{Component:r,values:i,state:o,domRef:d,destroyInactiveTabPanel:l,getBaseProps:u,getTabListProps:f,getWrapperProps:b}=Aa({...t,ref:s}),N=c.useId(),C=((n=d?.current)==null?void 0:n.closest('[aria-modal="true"]'))!==null,x=!t.disableAnimation&&!t.disableCursorAnimation&&!C,g={state:o,listRef:i.listRef,slots:i.slots,classNames:i.classNames,isDisabled:i.isDisabled,motionProps:i.motionProps,disableAnimation:i.disableAnimation,shouldSelectOnPressUp:i.shouldSelectOnPressUp,disableCursorAnimation:i.disableCursorAnimation},y=[...o.collection].map(m=>a.jsx(Ca,{item:m,...g,...m.props},m.key)),E=a.jsxs(a.Fragment,{children:[a.jsx("div",{...u(),children:a.jsx(r,{...f(),children:x?a.jsx(xt,{id:N,children:y}):y})}),[...o.collection].map(m=>a.jsx(Ma,{classNames:i.classNames,destroyInactiveTabPanel:l,slots:i.slots,state:i.state,tabKey:m.key},m.key))]});return"placement"in t||"isVertical"in t?a.jsx("div",{...b(),children:E}):E}),Ra=Ta,Ia=ot,Me=Ia;function _a(){const{t:e}=$();return a.jsxs("div",{children:[a.jsx("h1",{className:"text-white text-[28px] font-bold",children:e(p.MICROAGENT_MANAGEMENT$DESCRIPTION)}),a.jsxs("p",{className:"text-white text-sm font-normal leading-[20px] pt-2",children:[e(p.MICROAGENT_MANAGEMENT$USE_MICROAGENTS),a.jsx("a",{href:ue.MICROAGENTS.MICROAGENTS_OVERVIEW,target:"_blank",rel:"noopener noreferrer",children:a.jsx(kt,{className:"inline-block ml-1"})})]})]})}const D=Ht(e=>({addMicroagentModalVisible:!1,updateMicroagentModalVisible:!1,learnThisRepoModalVisible:!1,selectedRepository:null,personalRepositories:[],organizationRepositories:[],repositories:[],selectedMicroagentItem:null,setAddMicroagentModalVisible:t=>e({addMicroagentModalVisible:t}),setUpdateMicroagentModalVisible:t=>e({updateMicroagentModalVisible:t}),setLearnThisRepoModalVisible:t=>e({learnThisRepoModalVisible:t}),setSelectedRepository:t=>e({selectedRepository:t}),setPersonalRepositories:t=>e({personalRepositories:t}),setOrganizationRepositories:t=>e({organizationRepositories:t}),setRepositories:t=>e({repositories:t}),setSelectedMicroagentItem:t=>e({selectedMicroagentItem:t})}));function Xe({microagent:e,conversation:t,repository:s}){const{t:n}=$(),{selectedMicroagentItem:r,setSelectedMicroagentItem:i,setSelectedRepository:o}=D(),{status:d,runtime_status:l,pr_number:u}=t??{},f=!!(u&&u.length>0),b=c.useMemo(()=>f?n(p.COMMON$READY_FOR_REVIEW):d==="STARTING"||l==="STATUS$STARTING_RUNTIME"?n(p.COMMON$STARTING):d==="STOPPED"||l==="STATUS$STOPPED"?n(p.COMMON$STOPPED):l==="STATUS$ERROR"?n(p.MICROAGENT$STATUS_ERROR):d==="RUNNING"?n(l==="STATUS$READY"?p.MICROAGENT$STATUS_OPENING_PR:p.COMMON$STARTING):"",[d,l,n,f]),N=e?.name??t?.title,C=c.useMemo(()=>e&&r?.microagent?r.microagent.name===e.name:t&&r?.conversation?r.conversation.conversation_id===t.conversation_id:!1,[e,t,r]),x=()=>{i(e?{microagent:e,conversation:void 0}:{microagent:void 0,conversation:t}),o(s)};return a.jsx("div",{className:Z("rounded-lg bg-[#ffffff0d] border border-[#ffffff33] p-4 cursor-pointer hover:bg-[#ffffff33] hover:border-[#C9B974] transition-all duration-300",C&&"bg-[#ffffff33] border-[#C9B974]"),onClick:x,children:a.jsxs("div",{className:"flex flex-col items-start gap-2",children:[b&&a.jsx("div",{className:"px-[6px] py-[2px] text-[11px] font-medium bg-[#C9B97433] text-white rounded-2xl",children:b}),a.jsx("div",{className:"text-white text-[16px] font-semibold",children:N}),!!e&&a.jsx("div",{className:"text-white text-sm font-normal",children:e.path})]})})}function Je({repository:e}){const{setLearnThisRepoModalVisible:t,setSelectedRepository:s}=D(),{t:n}=$(),r=()=>{t(!0),s(e)};return a.jsx("div",{className:"flex items-center justify-center rounded-lg bg-[#ffffff0d] border border-dashed border-[#ffffff4d] p-4 hover:bg-[#ffffff33] hover:border-[#C9B974] transition-all duration-300 cursor-pointer",onClick:r,"data-testid":"learn-this-repo-trigger",children:a.jsx("span",{className:"text-[16px] font-normal text-[#8480FF]",children:n(p.MICROAGENT_MANAGEMENT$LEARN_THIS_REPO)})})}const ja=(e,t,s=!1)=>Ie({queryKey:["repository","microagents",e,t],queryFn:()=>nt.getRepositoryMicroagents(e,t),enabled:!!e&&!!t,staleTime:s?0:1e3*60*5,gcTime:s?0:1e3*60*15});class Oa{static async getMicroagentManagementConversations(t,s,n=100){const r={limit:n,selected_repository:t};s&&(r.page_id=s);const{data:i}=await qt.get("/api/microagent-management/conversations",{params:r});return i.results}}const Pa=(e,t,s=100,n=!1)=>Ie({queryKey:["conversations","microagent-management",t,s,e],queryFn:()=>Oa.getMicroagentManagementConversations(e,t,s),enabled:!!e,staleTime:n?0:1e3*60*5,gcTime:n?0:1e3*60*15});function Sa({repository:e}){const{selectedMicroagentItem:t,setSelectedMicroagentItem:s}=D(),{t:n}=$(),{full_name:r}=e,[i,o]=r.split("/"),{data:d,isLoading:l,isError:u}=ja(i,o,!0),{data:f,isLoading:b,isError:N}=Pa(r,void 0,1e3,!0);c.useEffect(()=>{const A=f&&f.length>0,T=t?.conversation;if(A&&T){const h=f.find(O=>O.conversation_id===T.conversation_id);h&&s({microagent:void 0,conversation:h})}},[f]),c.useEffect(()=>()=>{s({microagent:void 0,conversation:void 0})},[s]);const C=l||b,x=u||N;if(C)return a.jsx("div",{className:"pb-4 flex justify-center",children:a.jsx(te,{size:"sm","data-testid":"loading-spinner"})});if(x)return a.jsx("div",{children:a.jsx(Je,{repository:e})});const g=d?.length||0,y=f?.length||0,E=g+y,m=g>0,M=y>0;return a.jsxs("div",{children:[E===0&&a.jsx(Je,{repository:e}),m&&a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-md text-white font-medium leading-5 mb-4",children:n(p.MICROAGENT_MANAGEMENT$EXISTING_MICROAGENTS)}),d?.map(A=>a.jsx("div",{className:"pb-4 last:pb-0",children:a.jsx(Xe,{microagent:A,repository:e})},A.name))]}),M&&a.jsxs("div",{className:Z("flex flex-col",m&&"mt-4"),children:[a.jsx("span",{className:"text-md text-white font-medium leading-5 mb-4",children:n(p.COMMON$IN_PROGRESS)}),f?.map(A=>a.jsx("div",{className:"pb-4 last:pb-0",children:a.jsx(Xe,{conversation:A,repository:e})},A.conversation_id))]})]})}function Ce({title:e,documentationUrl:t}){return a.jsx("div",{className:"flex items-center justify-center pt-10",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:"text-white text-sm font-medium",children:e}),a.jsx("a",{href:t,target:"_blank",rel:"noopener noreferrer",children:a.jsx(pe,{className:"text-primary"})})]})})}function wa({repository:e}){const{t}=$(),{addMicroagentModalVisible:s,setAddMicroagentModalVisible:n,setSelectedRepository:r}=D(),i=o=>{o.stopPropagation(),n(!s),r(e)};return a.jsx("button",{type:"button",onClick:i,className:"translate-y-[-1px]","data-testid":"add-microagent-button",children:a.jsx("span",{className:"text-sm font-normal leading-5 text-[#8480FF] cursor-pointer hover:text-[#6C63FF] transition-colors duration-200",children:t(p.COMMON$ADD_MICROAGENT)})})}function $a({repository:e}){return a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Wt,{gitProvider:e.git_provider}),a.jsx(rs,{tooltip:e.full_name,ariaLabel:e.full_name,className:"text-white text-base font-normal bg-transparent p-0 min-w-0 h-auto cursor-pointer truncate max-w-[194px] translate-y-[-1px]",testId:"repository-name-tooltip",placement:"bottom",children:a.jsx("span",{children:e.full_name})})]}),a.jsx(wa,{repository:e})]})}function Ee({repositories:e,tabType:t,isSearchLoading:s=!1}){const{t:n}=$(),r=e.length;if(s)return a.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 py-8",children:[a.jsx(te,{size:"sm"}),a.jsx("span",{className:"text-sm text-white",children:n("HOME$SEARCHING_REPOSITORIES")})]});if(r===0){if(t==="personal")return a.jsx(Ce,{title:n(p.MICROAGENT_MANAGEMENT$YOU_DO_NOT_HAVE_USER_LEVEL_MICROAGENTS),documentationUrl:ue.MICROAGENTS.MICROAGENTS_OVERVIEW});if(t==="repositories")return a.jsx(Ce,{title:n(p.MICROAGENT_MANAGEMENT$YOU_DO_NOT_HAVE_MICROAGENTS),documentationUrl:ue.MICROAGENTS.MICROAGENTS_OVERVIEW});if(t==="organizations")return a.jsx(Ce,{title:n(p.MICROAGENT_MANAGEMENT$YOU_DO_NOT_HAVE_ORGANIZATION_LEVEL_MICROAGENTS),documentationUrl:ue.MICROAGENTS.ORGANIZATION_AND_USER_MICROAGENTS})}return a.jsx("div",{className:"flex flex-col gap-4 w-full",children:a.jsx(fa,{variant:"splitted",className:"w-full px-0 gap-3",itemClasses:{base:"shadow-none bg-transparent cursor-pointer px-0",trigger:"cursor-pointer gap-2 py-3",indicator:"flex items-center justify-center p-0.5 pr-[3px] text-white hover:bg-[#454545] rounded transition-colors duration-200 rotate-180"},selectionMode:"multiple",children:e.map(i=>a.jsx(pa,{"aria-label":i.full_name,title:a.jsx($a,{repository:i}),children:a.jsx(Sa,{repository:i})},i.id))})})}function Ga({isSearchLoading:e=!1}){const{t}=$(),{repositories:s,personalRepositories:n,organizationRepositories:r}=D();return a.jsx("div",{className:"flex w-full flex-col",children:a.jsxs(Ra,{"aria-label":"Options",classNames:{base:"py-6",tabList:"w-full bg-transparent border border-[#ffffff40] rounded-[6px]",tab:"px-2 h-[22px]",tabContent:"text-white text-[12px] font-normal",panel:"p-0",cursor:"bg-[#C9B97480] rounded-sm"},children:[a.jsx(Me,{title:t(p.COMMON$PERSONAL),children:a.jsx(Ee,{repositories:n,tabType:"personal",isSearchLoading:e})},"personal"),a.jsx(Me,{title:t(p.COMMON$REPOSITORIES),children:a.jsx(Ee,{repositories:s,tabType:"repositories",isSearchLoading:e})},"repositories"),a.jsx(Me,{title:t(p.COMMON$ORGANIZATIONS),children:a.jsx(Ee,{repositories:r,tabType:"organizations",isSearchLoading:e})},"organizations")]})})}function et({isSmallerScreen:e=!1,providers:t}){const[s,n]=c.useState(t.length>0?t[0]:null),[r,i]=c.useState(""),o=Ns(r,300),{setPersonalRepositories:d,setOrganizationRepositories:l,setRepositories:u}=D(),{t:f}=$(),{data:b,fetchNextPage:N,hasNextPage:C,isLoading:x,isFetchingNextPage:g}=Ms({provider:s,pageSize:30,enabled:!!s}),{data:y,isLoading:E}=ze(o,s,!1,500),{data:m,isLoading:M}=ze(Ft(s),s,!1,500);c.useEffect(()=>{t.length>0&&!s&&n(t[0])},[t,s]);const A=v=>{n(v),i("")},T=(v,R)=>{if(!R.trim())return v;const _=ke(R);return v.filter(G=>ke(G.full_name).includes(_))},h=c.useMemo(()=>{if(o&&y&&y.length>0)return T(y,o);if(!b?.pages)return[];const v=b.pages.flatMap(R=>R.data);return T(v,o)},[b,o,y]);c.useEffect(()=>{if(!m?.length){d([]),l([]);return}const v=[],R=[];m?.length&&m.forEach(_=>{De(_,s)&&Lt(_,o)&&(_.owner_type==="user"?v.push(_):_.owner_type==="organization"&&R.push(_))}),d(v),l(R)},[m,s,o,d,l]),c.useEffect(()=>{if(!h?.length){u([]);return}const v=[];h.forEach(R=>{De(R,s)||v.push(R)}),u(v)},[h,s,u]);const O=v=>{if(o&&y)return;const{scrollTop:R,scrollHeight:_,clientHeight:G}=v.currentTarget;R+G>=_-10&&C&&!g&&N()};return a.jsxs("div",{className:Z("w-[418px] h-full max-h-full overflow-y-auto overflow-x-hidden border-r border-[#525252] bg-[#24272E] rounded-tl-lg rounded-bl-lg py-10 px-6 flex flex-col custom-scrollbar-always",e&&"w-full border-none"),onScroll:O,children:[a.jsx(_a,{}),t.length>1&&a.jsx("div",{className:"mt-6",children:a.jsx(Cs,{providers:t,value:s,placeholder:"Select Provider",onChange:A,className:"w-full",inputClassName:"w-full h-10 min-h-10 max-h-10 text-sm placeholder:text-tertiary-alt pl-6.5",toggleButtonClassName:"w-10 h-10 translate-y-[1px]",itemClassName:"text-sm"})}),a.jsxs("div",{className:"flex flex-col gap-2 w-full mt-6",children:[a.jsx("label",{htmlFor:"repository-search",className:"sr-only",children:f(p.COMMON$SEARCH_REPOSITORIES)}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"repository-search",name:"repository-search",type:"text",placeholder:`${f(p.COMMON$SEARCH_REPOSITORIES)}...`,value:r,onChange:v=>i(v.target.value),className:Z("bg-tertiary border border-[#717888] bg-[#454545] w-full rounded-sm p-2 placeholder:text-tertiary-alt","disabled:bg-[#2D2F36] disabled:border-[#2D2F36] disabled:cursor-not-allowed h-10 box-shadow-none outline-none","pr-10")}),E&&a.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:a.jsx(te,{size:"sm"})})]})]}),x||M?a.jsxs("div",{className:"flex flex-col items-center justify-center gap-4 flex-1",children:[a.jsx(te,{size:"sm"}),a.jsx("span",{className:"text-sm text-white",children:f("HOME$LOADING_REPOSITORIES")})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ga,{isSearchLoading:E}),g&&!o&&a.jsxs("div",{className:"flex justify-center pt-2",children:[a.jsx(te,{size:"sm"}),a.jsx("span",{className:"text-sm text-white ml-2",children:f("HOME$LOADING_MORE_REPOSITORIES")})]})]})]})}function tt(){const{t:e}=$();return a.jsxs("div",{className:"flex-1 flex flex-col h-full items-center justify-center",children:[a.jsx("div",{className:"text-[#F9FBFE] text-xl font-bold pb-4",children:e(p.MICROAGENT_MANAGEMENT$READY_TO_ADD_MICROAGENT)}),a.jsx("div",{className:"text-white text-sm font-normal text-center max-w-[455px]",children:e(p.MICROAGENT_MANAGEMENT$OPENHANDS_CAN_LEARN_ABOUT_REPOSITORIES)})]})}function we({size:e="medium",className:t}){const n={small:"w-3 h-3",medium:"w-4 h-4",large:"w-5 h-5"}[e];return a.jsx("div",{"data-testid":"loader",className:Z("flex items-center justify-center",t),children:a.jsx("div",{className:Z("loader rounded-full",n)})})}function Ka(){const{t:e}=$(),{selectedMicroagentItem:t}=D(),{conversation:s}=t??{},{conversation_id:n}=s??{};return n?a.jsxs("div",{className:"flex-1 flex flex-col h-full items-center justify-center",children:[a.jsxs("div",{className:"text-[#ffffff99] text-[22px] font-semibold pb-2",children:[e(p.COMMON$WORKING_ON_IT),"!"]}),a.jsx("div",{className:"text-[#ffffff99] text-[18px] font-normal text-center max-w-[518px] pb-[22px]",children:e(p.MICROAGENT_MANAGEMENT$WE_ARE_WORKING_ON_IT)}),a.jsx(we,{size:"small",className:"pb-[22px]"}),a.jsx("a",{href:`/conversations/${n}`,target:"_blank",rel:"noopener noreferrer",children:a.jsx(z,{type:"button",variant:"secondary",testId:"view-conversation-button",children:e(p.MICROAGENT$VIEW_CONVERSATION)})})]}):null}function Da(){const{t:e}=$(),{selectedMicroagentItem:t}=D(),{conversation:s}=t??{},{conversation_id:n,selected_repository:r,git_provider:i,pr_number:o}=s??{};return n?a.jsxs("div",{className:"flex-1 flex flex-col h-full items-center justify-center",children:[a.jsx("div",{className:"text-[#ffffff99] text-[22px] font-bold pb-[22px] text-center max-w-[455px]",children:e(p.MICROAGENT_MANAGEMENT$YOUR_MICROAGENT_IS_READY)}),a.jsxs("div",{className:"flex gap-[22px]",children:[a.jsx("a",{href:`/conversations/${n}`,target:"_blank",rel:"noopener noreferrer",children:a.jsx(z,{type:"button",variant:"secondary",testId:"view-conversation-button",children:e(p.MICROAGENT$VIEW_CONVERSATION)})}),a.jsx("a",{href:r&&i&&o&&o.length>0?Vt(o[0],i,r):"/#",target:"_blank",rel:"noopener noreferrer",children:a.jsx(z,{type:"button",variant:"primary",testId:"view-conversation-button",children:`${e(p.COMMON$REVIEW_PR_IN)} ${ge(i)}`})})]})]}):null}function ka(){const{t:e}=$(),{selectedMicroagentItem:t,selectedRepository:s,setUpdateMicroagentModalVisible:n}=D(),{microagent:r}=t??{};if(!r||!s)return null;const i=Ut(s.git_provider,s.full_name,r.path),o=()=>{n(!0)};return a.jsxs("div",{className:"flex items-center justify-between pb-2",children:[a.jsx("span",{className:"text-sm text-[#ffffff99]",children:s.full_name}),a.jsxs("div",{className:"flex items-center justify-end gap-2",children:[a.jsx("a",{href:i,target:"_blank",rel:"noopener noreferrer",children:a.jsx(z,{type:"button",variant:"secondary",testId:"edit-in-git-button",className:"py-1 px-2",children:`${e(p.COMMON$EDIT_IN)} ${ge(s.git_provider)}`})}),a.jsx(z,{type:"button",variant:"primary",onClick:o,testId:"learn-button",className:"py-1 px-2",children:e(p.COMMON$LEARN_SOMETHING_NEW)})]})]})}const Et=(e,t,s,n=!1)=>Ie({queryKey:["repository","microagent","content",e,t,s],queryFn:()=>nt.getRepositoryMicroagentContent(e,t,s),enabled:!!e&&!!t&&!!s,staleTime:n?0:1e3*60*5,gcTime:n?0:1e3*60*15});function La(){const{t:e}=$(),{selectedMicroagentItem:t,selectedRepository:s}=D(),{microagent:n}=t??{},{owner:r,repo:i,filePath:o}=at(s,n),{data:d,isLoading:l,error:u}=Et(r,i,o,!0);return!n||!s?null:a.jsxs("div",{className:"w-full h-full p-6 bg-[#ffffff1a] rounded-2xl text-white text-sm",children:[l&&a.jsx("div",{className:"flex items-center justify-center w-full h-full",children:a.jsx(te,{size:"lg","data-testid":"loading-microagent-content-spinner"})}),u&&a.jsx("div",{className:"flex items-center justify-center w-full h-full",children:e(p.MICROAGENT_MANAGEMENT$ERROR_LOADING_MICROAGENT_CONTENT)}),d&&!l&&!u&&a.jsx(Ts,{components:{code:Ss,ul:Ps,ol:Os,a:js,p:_s},remarkPlugins:[Rs,Is],children:d.content})]})}function Fa(){const{selectedMicroagentItem:e,selectedRepository:t}=D(),{microagent:s}=e??{};return!s||!t?null:a.jsxs("div",{className:"flex flex-col w-full h-full p-6 overflow-auto",children:[a.jsx(ka,{}),a.jsx("span",{className:"text-white text-2xl font-medium pb-2",children:s.name}),a.jsx("span",{className:"text-white text-lg font-medium pb-6",children:s.path}),a.jsx("div",{className:"flex-1",children:a.jsx(La,{})})]})}function Va(){const{t:e}=$(),{selectedMicroagentItem:t}=D(),{conversation:s}=t??{},{conversation_id:n}=s??{};return n?a.jsxs("div",{className:"flex-1 flex flex-col h-full items-center justify-center",children:[a.jsx("div",{className:"text-[#ffffff99] text-[22px] font-bold pb-[22px] text-center max-w-[455px]",children:e(p.MICROAGENT_MANAGEMENT$ERROR)}),a.jsx(we,{size:"small",className:"pb-[22px]"}),a.jsx("a",{href:`/conversations/${n}`,target:"_blank",rel:"noopener noreferrer",children:a.jsx(z,{type:"button",variant:"secondary",testId:"view-conversation-button",children:e(p.MICROAGENT$VIEW_CONVERSATION)})})]}):null}function Ua(){const{t:e}=$(),{selectedMicroagentItem:t}=D(),{conversation:s}=t??{},{conversation_id:n}=s??{};return n?a.jsxs("div",{className:"flex-1 flex flex-col h-full items-center justify-center",children:[a.jsx("div",{className:"text-[#ffffff99] text-[22px] font-bold pb-[22px] text-center max-w-[455px]",children:e(p.MICROAGENT_MANAGEMENT$CONVERSATION_STOPPED)}),a.jsx(we,{size:"small",className:"pb-[22px]"}),a.jsx("a",{href:`/conversations/${n}`,target:"_blank",rel:"noopener noreferrer",children:a.jsx(z,{type:"button",variant:"secondary",testId:"view-conversation-button",children:e(p.MICROAGENT$VIEW_CONVERSATION)})})]}):null}function st(){const{selectedMicroagentItem:e}=D(),{microagent:t,conversation:s}=e??{};if(t)return a.jsx(Fa,{});if(s){if(s.pr_number&&s.pr_number.length>0)return a.jsx(Da,{});const n=s.status==="STARTING"||s.runtime_status==="STATUS$STARTING_RUNTIME",r=s.status==="RUNNING"&&s.runtime_status==="STATUS$READY";return n||r?a.jsx(Ka,{}):s.runtime_status==="STATUS$ERROR"?a.jsx(Va,{}):s.status==="STOPPED"||s.runtime_status==="STATUS$STOPPED"?a.jsx(Ua,{}):a.jsx(tt,{})}return a.jsx(tt,{})}function Ba({onConfirm:e,onCancel:t,isLoading:s=!1,isUpdate:n=!1}){const{t:r}=$(),[i,o]=c.useState([]),[d,l]=c.useState(""),{selectedRepository:u,selectedMicroagentItem:f}=D(),{microagent:b}=f??{},{owner:N,repo:C,filePath:x}=at(u,b),{data:g,isLoading:y}=Et(N,C,x,!0);c.useEffect(()=>{n&&g&&(l(g.content),o(g.triggers||[]))},[n,g]);const E=c.useMemo(()=>n?r(p.MICROAGENT_MANAGEMENT$UPDATE_MICROAGENT):u?`${r(p.MICROAGENT_MANAGEMENT$ADD_A_MICROAGENT_TO)} ${u.full_name}`:r(p.MICROAGENT_MANAGEMENT$ADD_A_MICROAGENT),[n,u,r]),m=c.useMemo(()=>r(n?p.MICROAGENT_MANAGEMENT$UPDATE_MICROAGENT_MODAL_DESCRIPTION:p.MICROAGENT_MANAGEMENT$ADD_MICROAGENT_MODAL_DESCRIPTION),[n,r]),M=T=>{T.preventDefault(),d.trim()&&e({query:d.trim(),triggers:i,microagentPath:b?.path||""})},A=()=>{d.trim()&&e({query:d.trim(),triggers:i,microagentPath:b?.path||""})};return a.jsx(bt,{onClose:t,children:a.jsxs(gt,{className:"items-start rounded-[12px] p-6 min-w-[611px]",children:[a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:"text-white text-xl font-medium",children:E}),a.jsx("a",{href:"https://docs.all-hands.dev/usage/prompting/microagents-overview#microagents-overview",target:"_blank",rel:"noopener noreferrer",children:a.jsx(pe,{className:"text-primary"})})]}),a.jsx("button",{type:"button",onClick:t,className:"cursor-pointer",children:a.jsx(mt,{width:24,height:24,color:"#F9FBFE"})})]}),a.jsx("span",{className:"text-white text-sm font-normal",children:m})]}),a.jsxs("form",{"data-testid":"add-microagent-modal",onSubmit:M,className:"flex flex-col gap-6 w-full",children:[a.jsxs("label",{htmlFor:"query-input",className:"flex flex-col gap-2 w-full text-sm font-normal",children:[r(p.MICROAGENT_MANAGEMENT$WHAT_TO_DO),a.jsx("textarea",{required:!0,"data-testid":"query-input",name:"query-input",value:d,onChange:T=>l(T.target.value),placeholder:r(p.MICROAGENT_MANAGEMENT$DESCRIBE_WHAT_TO_DO),rows:6,className:Z("bg-tertiary border border-[#717888] bg-[#454545] w-full rounded-sm p-2 placeholder:italic placeholder:text-tertiary-alt resize-none","disabled:bg-[#2D2F36] disabled:border-[#2D2F36] disabled:cursor-not-allowed")})]}),a.jsxs("label",{htmlFor:"trigger-input",className:"flex flex-col gap-2.5 w-full text-sm",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[r(p.MICROAGENT_MANAGEMENT$ADD_TRIGGERS),a.jsx("a",{href:"https://docs.all-hands.dev/usage/prompting/microagents-keyword",target:"_blank",rel:"noopener noreferrer",children:a.jsx(pe,{className:"text-primary"})})]}),a.jsx(ws,{name:"trigger-input",value:i,placeholder:r("MICROAGENT$TYPE_TRIGGER_SPACE"),onChange:o}),a.jsx("span",{className:"text-xs text-[#ffffff80] font-normal",children:r(p.MICROAGENT_MANAGEMENT$HELP_TEXT_DESCRIBING_VALID_TRIGGERS)})]})]}),a.jsxs("div",{className:"flex items-center justify-end gap-2 w-full",onClick:T=>T.stopPropagation(),children:[a.jsx(z,{type:"button",variant:"secondary",onClick:t,testId:"cancel-button",children:r(p.BUTTON$CANCEL)}),a.jsx(z,{type:"button",variant:"primary",onClick:A,testId:"confirm-button",isDisabled:!d.trim()||s||n&&y,children:r(s||n&&y?p.HOME$LOADING:p.MICROAGENT$LAUNCH)})]})]})})}function za({onConfirm:e,onCancel:t,isLoading:s=!1}){const{t:n}=$(),[r,i]=c.useState(""),{selectedRepository:o}=D(),d=u=>{u.preventDefault();const f=Le(o?.git_provider||"github",r.trim());e({query:f})},l=()=>{const u=Le(o?.git_provider||"github",r.trim());e({query:u})};return a.jsx(bt,{onClose:t,children:a.jsxs(gt,{className:"items-start rounded-[12px] p-6 min-w-[611px]","data-testid":"learn-this-repo-modal",children:[a.jsxs("div",{className:"flex flex-col gap-2 w-full",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("h2",{className:"text-white text-xl font-medium","data-testid":"modal-title",children:n(p.MICROAGENT_MANAGEMENT$LEARN_THIS_REPO_MODAL_TITLE)}),a.jsx("a",{href:"https://docs.all-hands.dev/usage/prompting/microagents-overview#microagents-overview",target:"_blank",rel:"noopener noreferrer","data-testid":"modal-info-link",children:a.jsx(pe,{className:"text-primary"})})]}),a.jsx("button",{type:"button",onClick:t,className:"cursor-pointer","data-testid":"modal-close-button",children:a.jsx(mt,{width:24,height:24,color:"#F9FBFE"})})]}),a.jsx("span",{className:"text-white text-sm font-normal","data-testid":"modal-description",children:n(p.MICROAGENT_MANAGEMENT$LEARN_THIS_REPO_MODAL_DESCRIPTION)})]}),a.jsx("form",{"data-testid":"learn-this-repo-form",onSubmit:d,className:"flex flex-col gap-6 w-full",children:a.jsxs("label",{htmlFor:"query-input",className:"flex flex-col gap-2 w-full text-sm font-normal",children:[n(p.MICROAGENT_MANAGEMENT$WHAT_YOU_WOULD_LIKE_TO_KNOW_ABOUT_THIS_REPO),a.jsx("textarea",{required:!0,"data-testid":"query-input",name:"query-input",value:r,onChange:u=>i(u.target.value),placeholder:n(p.MICROAGENT_MANAGEMENT$DESCRIBE_WHAT_TO_KNOW_ABOUT_THIS_REPO),rows:6,className:Z("bg-tertiary border border-[#717888] bg-[#454545] w-full rounded-sm p-2 placeholder:italic placeholder:text-tertiary-alt resize-none","disabled:bg-[#2D2F36] disabled:border-[#2D2F36] disabled:cursor-not-allowed")})]})}),a.jsxs("div",{className:"flex items-center justify-end gap-2 w-full",onClick:u=>u.stopPropagation(),"data-testid":"modal-actions",children:[a.jsx(z,{type:"button",variant:"secondary",onClick:t,testId:"cancel-button",children:n(p.BUTTON$CANCEL)}),a.jsx(z,{type:"button",variant:"primary",onClick:l,testId:"confirm-button",isDisabled:s,children:n(s?p.HOME$LOADING:p.MICROAGENT$LAUNCH)})]})]})})}const At=e=>typeof e=="object"&&e!==null&&"error"in e&&e.error===!0,Tt=e=>ne(e)&&Pe(e)&&e.extras.agent_state===Se.ERROR,Ha=e=>{const t=At(e)||Tt(e),s=ne(e)&&Pe(e),n=ne(e)&&pt(e);return t||s||n},Wa=(e,t,s,n,r)=>`Create a microagent for the repository ${e} by following the steps below:

- Step 1: Create a markdown file inside the .openhands/microagents folder with the name of the microagent (The microagent must be created in the .openhands/microagents folder and should be able to perform the described task when triggered). This is the instructions about what the microagent should do: ${t.query}. ${t.triggers&&t.triggers.length>0?`This is the triggers of the microagent: ${t.triggers.join(", ")}`:"Please be noted that the microagent doesn't have any triggers."}

- Step 2: Create a new branch for the repository ${e}, must avoid duplicated branches.

- Step 3: Please push the changes to your branch on ${ge(r)} and create a ${s}. Please create a meaningful branch name that describes the changes. If a ${s} template exists in the repository, please follow it when creating the ${n} description.
`,qa=(e,t,s,n,r)=>`Update the microagent for the repository ${e} by following the steps below:


- Step 1: Update the microagent. This is the path of the microagent: ${t.microagentPath} (The updated microagent must be in the .openhands/microagents folder and should be able to perform the described task when triggered). This is the updated instructions about what the microagent should do: ${t.query}. ${t.triggers&&t.triggers.length>0?`This is the triggers of the microagent: ${t.triggers.join(", ")}`:"Please be noted that the microagent doesn't have any triggers."}

- Step 2: Create a new branch for the repository ${e}, must avoid duplicated branches.

- Step 3: Please push the changes to your branch on ${ge(r)} and create a ${s}. Please create a meaningful branch name that describes the changes. If a ${s} template exists in the repository, please follow it when creating the ${n} description.
`;function Qa(){const[e,t]=c.useState(window.innerWidth),{addMicroagentModalVisible:s,updateMicroagentModalVisible:n,selectedRepository:r,learnThisRepoModalVisible:i,setAddMicroagentModalVisible:o,setUpdateMicroagentModalVisible:d,setLearnThisRepoModalVisible:l}=D(),{providers:u}=Bs(),{t:f}=$(),{createConversationAndSubscribe:b,isPending:N}=$s();function C(){t(window.innerWidth)}c.useEffect(()=>(window.addEventListener("resize",C),()=>{window.removeEventListener("resize",C)}),[]);const x=(h=!1)=>{h?d(!1):o(!1)},g=ee.useCallback(h=>{me.invalidateQueries({queryKey:["conversations","search",h,"microagent_management"]})},[]),y=ee.useCallback(h=>{const O=r&&typeof r=="object"?r.full_name:"";ne(h)&&Pe(h)&&h.extras.agent_state===Se.RUNNING&&He(f(p.MICROAGENT_MANAGEMENT$OPENING_PR_TO_CREATE_MICROAGENT)),ne(h)&&pt(h)&&(Gs(h.args.final_thought||"")||He(f(p.MICROAGENT_MANAGEMENT$PR_NOT_CREATED))),(At(h)||Tt(h))&&fe(f(p.MICROAGENT_MANAGEMENT$ERROR_CREATING_MICROAGENT)),Ha(h)&&g(O)},[g,r]),E=(h,O=!1)=>{if(!r||typeof r!="object")return;const v=r,R=v.full_name,_=v.git_provider,G=_==="gitlab",w=zt(G),k=Bt(G),U=O?qa(R,h,w,k,_):Wa(R,h,w,k,_),P={repo:R,git_provider:_,title:h.query};b({query:U,conversationInstructions:U,repository:{name:R,gitProvider:_},createMicroagent:P,onSuccessCallback:()=>{g(R);const[F,q]=R.split("/");me.invalidateQueries({queryKey:["repository-microagents",F,q]}),x(O)},onEventCallback:F=>{y(F)}})},m=()=>{l(!1)},M=h=>{if(!r||typeof r!="object")return;const O=r,v=O.full_name,R=O.git_provider,_={repo:v,git_provider:R,title:h.query};b({query:h.query,conversationInstructions:h.query,repository:{name:v,gitProvider:R},createMicroagent:_,onSuccessCallback:()=>{m()}})},A=()=>a.jsxs(a.Fragment,{children:[(s||n)&&a.jsx(Ba,{onConfirm:h=>E(h,n),onCancel:()=>x(n),isLoading:N,isUpdate:n}),i&&a.jsx(za,{onCancel:m,onConfirm:M,isLoading:N})]}),T=u.length>0;return e<1024?a.jsxs("div",{className:"w-full h-full flex flex-col gap-6",children:[a.jsx("div",{className:"w-full rounded-lg border border-[#525252] bg-[#24272E] max-h-[494px] min-h-[494px]",children:T&&a.jsx(et,{isSmallerScreen:!0,providers:u})}),a.jsx("div",{className:"w-full rounded-lg border border-[#525252] bg-[#24272E] flex-1 min-h-[494px]",children:a.jsx(st,{})}),A()]}):a.jsxs("div",{className:"w-full h-full flex rounded-lg border border-[#525252] bg-[#24272E] overflow-hidden",children:[T&&a.jsx(et,{providers:u}),a.jsx("div",{className:"flex-1",children:a.jsx(st,{})}),A()]})}const Ya=e=>"error"in e,Za=()=>{const{send:e}=Ks(),t=Ds(s=>s.events);ee.useEffect(()=>{if(!t.length)return;const s=t[t.length-1];if(Ya(s)){if(s.error_code===401){fe("Session expired.");return}typeof s.error=="string"?fe(s.error):fe(s.message);return}"type"in s&&s.type==="error"&&`${s.message}`.startsWith("Agent reached maximum")&&e(ks(Se.PAUSED))},[t.length])},Xa=()=>{const{curAgentState:e}=Ls();return{runtimeActive:!Fs.includes(e)}};function Ja({children:e}){return Za(),Xa(),e}const Dn=async()=>{let e=me.getQueryData(["config"]);return e||(e=await Dt.getConfig(),me.setQueryData(["config"],e)),null};function en(){return a.jsx(Vs,{children:a.jsx(Ja,{children:a.jsx(Qa,{})})})}const kn=Kt(en);export{Dn as clientLoader,kn as default};
