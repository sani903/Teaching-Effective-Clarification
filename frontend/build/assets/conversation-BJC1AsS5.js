const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-CrQvIqxM.js","assets/features-animation-DdLQEqdl.js","assets/gestures-BcGXZsOZ.js","assets/chunk-NISHYRIK-CgksP-ke.js","assets/index-BBSevn_K.js","assets/utils-C5iw9p3M.js","assets/changes-tab-C6F2rPI2.js","assets/index-CQq-b-9n.js","assets/use-config-BtaDlBUv.js","assets/open-hands-axios-DsgPCc-0.js","assets/option-service.api-L97_35Hu.js","assets/git-service.api-C9ZaYUVf.js","assets/feature-flags-1f3MRGYs.js","assets/parse-pr-url-CCSuKL2A.js","assets/module-CWLbpm_7.js","assets/index-DJ6Yt2gU.js","assets/optimistic-user-message-store-BLUkFBLR.js","assets/brand-button-BLaTuvKj.js","assets/declaration-BLNM_M5s.js","assets/query-client-config-D_0Qd0_c.js","assets/i18next-Lgj2Bm8L.js","assets/retrieve-axios-error-message-CYr77e_f.js","assets/custom-toast-handlers-B_1yfMGT.js","assets/infiniteQueryBehavior-D4OZgA3F.js","assets/use-user-providers-CPbKIWnc.js","assets/use-settings-y2Eq7ITW.js","assets/use-is-authed-CJdzFdqm.js","assets/close-_PwA9ZeD.js","assets/index-DastLBCt.js","assets/useTranslation-BhtO8iYN.js","assets/useSingleSelectListState-D8PQAT0i.js","assets/preload-helper-BhQ1_4_d.js","assets/middleware-BNIo_uWn.js","assets/index-JS6LK1M2.js","assets/index-0urWFDHv.js","assets/base-modal-LOTJhsuL.js","assets/modal-body-DfkwqNDR.js","assets/modal-backdrop-CfHRd2ER.js","assets/tooltip-button-CGDIzzom.js","assets/typography-DvyHXuI5.js","assets/repo-forked-Bc3iCQ5X.js","assets/index-Cfwn16jo.js","assets/Trans-CSq1Url9.js","assets/settings-dropdown-input-DCArA_yj.js","assets/optional-tag-C2att6n-.js","assets/chunk-S6H5EOGR-BBckzTk7.js","assets/loading-spinner-CE6B7tvy.js","assets/browser-tab-DCq5XuNj.js","assets/served-tab-Cyy7ezoG.js","assets/use-batch-sandboxes-BSkeku7q.js","assets/server-process-BvykxQDk.js","assets/vscode-tab-Dc7Cgb0U.js"])))=>i.map(i=>d[i]);
import{r as B,p as u,R as pe,y as wr,x as Is,o as mo,H as Cs,I as go,t as vo,w as Co}from"./chunk-NISHYRIK-CgksP-ke.js";import{l as bo,d as So,u as Ie,a as Di,A as ve,R as Ns,b as nt,c as Kt,e as js,f as xr,i as As,g as Bs,h as yo,j as Rt,k as Er,m as wo,n as xo,o as Eo,p as ko,q as kr,r as Ar,s as Ao,t as To,v as Ii,w as Ts,x as Ms,y as Mo,M as Tr,z as Mr,B as Rr,C as Or,D as Lr,E as Dr,S as hr,F as Ir,G as Ro,H as Oo,I as Ft,J as as,K as Nr,L as ur,N as Ni,O as Ps,P as jr,Q as ji,T as Bi,U as Pi,V as Lo,W as Do,X as Io,Y as dr,Z as Fi,_ as No,$ as jo,a0 as Bo,a1 as ts,a2 as Po,a3 as Fo,a4 as Ho,a5 as $o}from"./parse-pr-url-CCSuKL2A.js";import{d as Uo,S as Br}from"./middleware-BNIo_uWn.js";import{c as Fs,a as Hs,G as Wo}from"./optimistic-user-message-store-BLUkFBLR.js";import{u as us,a as qt}from"./use-config-BtaDlBUv.js";import{u as Zt,a as Vo}from"./open-hands-axios-DsgPCc-0.js";import{C as vt,b as zo,V as $s,a as Go}from"./feature-flags-1f3MRGYs.js";import{d as Ye,a as Ko}from"./custom-toast-handlers-B_1yfMGT.js";import{u as qo}from"./use-is-authed-CJdzFdqm.js";import{u as ss}from"./use-user-providers-CPbKIWnc.js";import{g as Hi,u as Pr,C as ds,S as Zo,a as Ue,D as xs,f as $i,e as Ui,k as Yo,l as Wi,t as Vi,q as Jo,r as Xo,s as Qo,v as ea,w as ta,x as sa,y as ra,p as fr,z as zi,c as Ut,d as ia,h as na,i as oa,j as aa,m as la,b as ca,n as ha,o as ua}from"./index-JS6LK1M2.js";import{D as Qt}from"./module-CWLbpm_7.js";import{I as K}from"./declaration-BLNM_M5s.js";import{t as Fr,T as Hr}from"./tooltip-button-CGDIzzom.js";import{u as me}from"./useTranslation-BhtO8iYN.js";import{a as $r,E as pr,e as _r,s as Gi,C as da,c as we,f as fa,h as Be,j as Ki,k as qi,l as Zi,m as pa,J as mr,n as _a,o as ma,p as ga,q as va,r as Ca}from"./utils-C5iw9p3M.js";import{u as Lt,B as cs}from"./brand-button-BLaTuvKj.js";import{M as Us}from"./modal-backdrop-CfHRd2ER.js";import{M as fs}from"./modal-body-DfkwqNDR.js";import{a as Ur,b as ba}from"./base-modal-LOTJhsuL.js";import{T as Le}from"./typography-DvyHXuI5.js";import{c as Sa}from"./index-0urWFDHv.js";import{S as ya}from"./repo-forked-Bc3iCQ5X.js";import{z as si}from"./index-DJ6Yt2gU.js";import{_ as ps,r as wa}from"./preload-helper-BhQ1_4_d.js";import"./index-Cfwn16jo.js";import{i as He}from"./i18next-Lgj2Bm8L.js";import{$ as xa,s as gr}from"./useSingleSelectListState-D8PQAT0i.js";import{b as Ea,c as ka,d as Aa}from"./index-DastLBCt.js";import{S as Yi}from"./close-_PwA9ZeD.js";import{T as Rs}from"./Trans-CSq1Url9.js";import{j as ri}from"./index-CQq-b-9n.js";import{S as Ta}from"./settings-dropdown-input-DCArA_yj.js";import{c as Ma,t as Ra,d as Oa,a as La,f as Ws,u as Vs,b as hs,T as or,m as vr,e as Da,L as ii,g as ni,h as Ia,i as Na,$ as ja,j as Ba,k as Pa,l as Fa,o as Ha,n as bs,p as $a,A as Ji}from"./index-BBSevn_K.js";import{g as Ua,a as Wa,c as Va}from"./gestures-BcGXZsOZ.js";import{L as oi}from"./loading-spinner-CE6B7tvy.js";import{u as za}from"./use-settings-y2Eq7ITW.js";import{$ as Ga,C as Ka,b as ai,c as qa,d as Za,e as Ya,u as Ja,f as Xa,g as Qa}from"./chunk-S6H5EOGR-BBckzTk7.js";const el={...Wa,...Ua,...So,...bo},tl=Ma(el,Va);var li=Ra({slots:{wrapper:["flex","w-screen","h-[100dvh]","fixed","inset-0","z-50","overflow-x-auto","justify-center","h-[--visual-viewport-height]"],base:["flex","flex-col","relative","bg-white","z-50","w-full","box-border","bg-content1","outline-solid outline-transparent","mx-1","my-1","sm:mx-6","sm:my-16"],backdrop:"z-50",header:"flex py-4 px-6 flex-initial text-large font-semibold",body:"flex flex-1 flex-col gap-3 px-6 py-2",footer:"flex flex-row gap-2 px-6 py-4 justify-end",closeButton:["absolute","appearance-none","outline-solid outline-transparent","select-none","top-1","end-1","p-2","text-foreground-500","rounded-full","hover:bg-default-100","active:bg-default-200","tap-highlight-transparent",...Oa]},variants:{size:{xs:{base:"max-w-xs"},sm:{base:"max-w-sm"},md:{base:"max-w-md"},lg:{base:"max-w-lg"},xl:{base:"max-w-xl"},"2xl":{base:"max-w-2xl"},"3xl":{base:"max-w-3xl"},"4xl":{base:"max-w-4xl"},"5xl":{base:"max-w-5xl"},full:{base:"my-0 mx-0 sm:mx-0 sm:my-0 max-w-full h-[100dvh] min-h-[100dvh] !rounded-none"}},radius:{none:{base:"rounded-none"},sm:{base:"rounded-small"},md:{base:"rounded-medium"},lg:{base:"rounded-large"}},placement:{auto:{wrapper:"items-end sm:items-center"},center:{wrapper:"items-center sm:items-center"},top:{wrapper:"items-start sm:items-start"},"top-center":{wrapper:"items-start sm:items-center"},bottom:{wrapper:"items-end sm:items-end"},"bottom-center":{wrapper:"items-end sm:items-center"}},shadow:{none:{base:"shadow-none"},sm:{base:"shadow-small"},md:{base:"shadow-medium"},lg:{base:"shadow-large"}},backdrop:{transparent:{backdrop:"hidden"},opaque:{backdrop:"bg-overlay/50 backdrop-opacity-disabled"},blur:{backdrop:"backdrop-blur-md backdrop-saturate-150 bg-overlay/30"}},scrollBehavior:{normal:{base:"overflow-y-hidden"},inside:{base:"max-h-[calc(100%_-_8rem)]",body:"overflow-y-auto"},outside:{wrapper:"items-start sm:items-start overflow-y-auto",base:"my-16"}},disableAnimation:{false:{wrapper:["[--scale-enter:100%]","[--scale-exit:100%]","[--slide-enter:0px]","[--slide-exit:80px]","sm:[--scale-enter:100%]","sm:[--scale-exit:103%]","sm:[--slide-enter:0px]","sm:[--slide-exit:0px]"]}}},defaultVariants:{size:"md",radius:"lg",shadow:"sm",placement:"auto",backdrop:"opaque",scrollBehavior:"normal"},compoundVariants:[{backdrop:["opaque","blur"],class:{backdrop:"w-screen h-screen fixed inset-0"}}]}),[sl,zs]=La({name:"ModalContext",errorMessage:"useModalContext: `context` is undefined. Seems you forgot to wrap all popover components within `<Modal />`"}),Xi=Ws((e,h)=>{const{as:g,children:y,className:x,...L}=e,{slots:D,classNames:o,bodyId:i,setBodyMounted:d}=zs(),v=Vs(h),c=g||"div";return B.useEffect(()=>(d(!0),()=>d(!1)),[d]),u.jsx(c,{ref:v,className:D.body({class:hs(o?.body,x)}),id:i,...L,children:y})});Xi.displayName="HeroUI.ModalBody";var rl=Xi,il={enter:{scale:"var(--scale-enter)",y:"var(--slide-enter)",opacity:1,willChange:"auto",transition:{scale:{duration:.4,ease:or.ease},opacity:{duration:.4,ease:or.ease},y:{type:"spring",bounce:0,duration:.6}}},exit:{scale:"var(--scale-exit)",y:"var(--slide-exit)",opacity:0,willChange:"transform",transition:{duration:.3,ease:or.ease}}},Mt=typeof document<"u"&&window.visualViewport,nl=pe.createContext(!1);function ol(){return!1}function al(){return!0}function ll(e){return()=>{}}function cl(){return typeof pe.useSyncExternalStore=="function"?pe.useSyncExternalStore(ll,ol,al):B.useContext(nl)}function hl(){let e=cl(),[h,g]=B.useState(()=>e?{width:0,height:0}:ci());return B.useEffect(()=>{let y=()=>{g(x=>{let L=ci();return L.width===x.width&&L.height===x.height?x:L})};return Mt?Mt.addEventListener("resize",y):window.addEventListener("resize",y),()=>{Mt?Mt.removeEventListener("resize",y):window.removeEventListener("resize",y)}},[]),h}function ci(){return{width:Mt&&Mt?.width||window.innerWidth,height:Mt&&Mt?.height||window.innerHeight}}var hi=()=>ps(()=>import("./index-CrQvIqxM.js"),__vite__mapDeps([0,1,2,3,4,5])).then(e=>e.default),Qi=e=>{const{as:h,children:g,role:y="dialog",...x}=e,{Component:L,domRef:D,slots:o,classNames:i,motionProps:d,backdrop:v,closeButton:c,hideCloseButton:_,disableAnimation:C,getDialogProps:S,getBackdropProps:m,getCloseButtonProps:l,onClose:r}=zs(),t=h||L||"div",s=hl(),{dialogProps:n}=Ga({role:y},D),p=B.isValidElement(c)?B.cloneElement(c,l()):u.jsx("button",{...l(),children:u.jsx(Ka,{})}),a=B.useCallback(O=>{O.key==="Tab"&&O.nativeEvent.isComposing&&(O.stopPropagation(),O.preventDefault())},[]),b=S(vr(n,x)),f=u.jsxs(t,{...b,onKeyDown:Da(b.onKeyDown,a),children:[u.jsx(ai,{onDismiss:r}),!_&&p,typeof g=="function"?g(r):g,u.jsx(ai,{onDismiss:r})]}),w=B.useMemo(()=>v==="transparent"?null:C?u.jsx("div",{...m()}):u.jsx(ii,{features:hi,children:u.jsx(ni.div,{animate:"enter",exit:"exit",initial:"exit",variants:Ia.fade,...m()})}),[v,C,m]),M={"--visual-viewport-height":s.height+"px"},N=C?u.jsx("div",{className:o.wrapper({class:i?.wrapper}),"data-slot":"wrapper",style:M,children:f}):u.jsx(ii,{features:hi,children:u.jsx(ni.div,{animate:"enter",className:o.wrapper({class:i?.wrapper}),"data-slot":"wrapper",exit:"exit",initial:"exit",variants:il,...d,style:M,children:f})});return u.jsxs("div",{tabIndex:-1,children:[w,N]})};Qi.displayName="HeroUI.ModalContent";var ul=Qi,en=Ws((e,h)=>{const{as:g,children:y,className:x,...L}=e,{slots:D,classNames:o}=zs(),i=Vs(h),d=g||"footer";return u.jsx(d,{ref:i,className:D.footer({class:hs(o?.footer,x)}),...L,children:y})});en.displayName="HeroUI.ModalFooter";var dl=en,tn=Ws((e,h)=>{const{as:g,children:y,className:x,...L}=e,{slots:D,classNames:o,headerId:i,setHeaderMounted:d}=zs(),v=Vs(h),c=g||"header";return B.useEffect(()=>(d(!0),()=>d(!1)),[d]),u.jsx(c,{ref:v,className:D.header({class:hs(o?.header,x)}),id:i,...L,children:y})});tn.displayName="HeroUI.ModalHeader";var fl=tn;function pl(e={shouldBlockScroll:!0},h,g){let{overlayProps:y,underlayProps:x}=Na({...e,isOpen:h.isOpen,onClose:h.close},g);return qa({isDisabled:!h.isOpen||!e.shouldBlockScroll}),Za(),B.useEffect(()=>{if(h.isOpen&&g.current)return Ya([g.current])},[h.isOpen,g]),{modalProps:ja(y),underlayProps:x}}function _l(e){var h,g,y;const x=Ba(),[L,D]=Pa(e,li.variantKeys),{ref:o,as:i,className:d,classNames:v,isOpen:c,defaultOpen:_,onOpenChange:C,motionProps:S,closeButton:m,isDismissable:l=!0,hideCloseButton:r=!1,shouldBlockScroll:t=!0,portalContainer:s,isKeyboardDismissDisabled:n=!1,onClose:p,...a}=L,b=i||"section",f=Vs(o),w=B.useRef(null),[M,N]=B.useState(!1),[O,I]=B.useState(!1),z=(g=(h=e.disableAnimation)!=null?h:x?.disableAnimation)!=null?g:!1,Y=B.useId(),ne=B.useId(),U=B.useId(),se=Fa({isOpen:c,defaultOpen:_,onOpenChange:J=>{C?.(J),J||p?.()}}),{modalProps:T,underlayProps:P}=pl({isDismissable:l,shouldBlockScroll:t,isKeyboardDismissDisabled:n},se,f),{buttonProps:F}=Ja({onPress:se.close},w),{isFocusVisible:W,focusProps:Q}=xa(),ce=hs(v?.base,d),ee=B.useMemo(()=>li({...D,disableAnimation:z}),[Ha(D),z]),_e=(J={},re=null)=>{var he;return{ref:$a(re,f),...vr(T,a,J),className:ee.base({class:hs(ce,J.className)}),id:Y,"data-open":bs(se.isOpen),"data-dismissable":bs(l),"aria-modal":bs(!0),"data-placement":(he=e?.placement)!=null?he:"right","aria-labelledby":M?ne:void 0,"aria-describedby":O?U:void 0}},V=B.useCallback((J={})=>({className:ee.backdrop({class:v?.backdrop}),...P,...J}),[ee,v,P]),j=()=>({role:"button",tabIndex:0,"aria-label":"Close","data-focus-visible":bs(W),className:ee.closeButton({class:v?.closeButton}),...vr(F,Q)});return{Component:b,slots:ee,domRef:f,headerId:ne,bodyId:U,motionProps:S,classNames:v,isDismissable:l,closeButton:m,hideCloseButton:r,portalContainer:s,shouldBlockScroll:t,backdrop:(y=e.backdrop)!=null?y:"opaque",isOpen:se.isOpen,onClose:se.close,disableAnimation:z,setBodyMounted:I,setHeaderMounted:N,getDialogProps:_e,getBackdropProps:V,getCloseButtonProps:j}}var sn=Ws((e,h)=>{const{children:g,...y}=e,x=_l({...y,ref:h}),L=u.jsx(Xa,{portalContainer:x.portalContainer,children:g});return u.jsx(sl,{value:x,children:x.disableAnimation&&x.isOpen?L:u.jsx(Ji,{children:x.isOpen?L:null})})});sn.displayName="HeroUI.Modal";var ml=sn;const gl=()=>{const e=localStorage.getItem("conversation-right-panel-shown");return e!==null?JSON.parse(e):!0},ot=Fs()(Uo(e=>({isRightPanelShown:gl(),selectedTab:"editor",images:[],files:[],loadingFiles:[],loadingImages:[],messageToSend:null,shouldShownAgentLoading:!1,submittedMessage:null,shouldHideSuggestions:!1,hasRightPanelToggled:!0,setIsRightPanelShown:h=>e({isRightPanelShown:h},!1,"setIsRightPanelShown"),setSelectedTab:h=>e({selectedTab:h},!1,"setSelectedTab"),setShouldShownAgentLoading:h=>e({shouldShownAgentLoading:h},!1,"setShouldShownAgentLoading"),setShouldHideSuggestions:h=>e({shouldHideSuggestions:h},!1,"setShouldHideSuggestions"),addImages:h=>e(g=>({images:[...g.images,...h]}),!1,"addImages"),addFiles:h=>e(g=>({files:[...g.files,...h]}),!1,"addFiles"),removeImage:h=>e(g=>{const y=[...g.images];return y.splice(h,1),{images:y}},!1,"removeImage"),removeFile:h=>e(g=>{const y=[...g.files];return y.splice(h,1),{files:y}},!1,"removeFile"),clearImages:()=>e({images:[]},!1,"clearImages"),clearFiles:()=>e({files:[]},!1,"clearFiles"),clearAllFiles:()=>e({images:[],files:[],loadingFiles:[],loadingImages:[]},!1,"clearAllFiles"),addFileLoading:h=>e(g=>g.loadingFiles.includes(h)?g:{loadingFiles:[...g.loadingFiles,h]},!1,"addFileLoading"),removeFileLoading:h=>e(g=>({loadingFiles:g.loadingFiles.filter(y=>y!==h)}),!1,"removeFileLoading"),addImageLoading:h=>e(g=>g.loadingImages.includes(h)?g:{loadingImages:[...g.loadingImages,h]},!1,"addImageLoading"),removeImageLoading:h=>e(g=>({loadingImages:g.loadingImages.filter(y=>y!==h)}),!1,"removeImageLoading"),clearAllLoading:()=>e({loadingFiles:[],loadingImages:[]},!1,"clearAllLoading"),setMessageToSend:h=>e({messageToSend:{text:h,timestamp:Date.now()}},!1,"setMessageToSend"),setSubmittedMessage:h=>e({submittedMessage:h},!1,"setSubmittedMessage"),resetConversationState:()=>e({shouldHideSuggestions:!1},!1,"resetConversationState"),setHasRightPanelToggled:h=>e({hasRightPanelToggled:h},!1,"setHasRightPanelToggled")}),{name:"conversation-store"})),rn=Fs(e=>({agent_status:null,setAgentStatus:h=>e({agent_status:h}),reset:()=>e({agent_status:null})}));var Pt=(e=>(e.UNKNOWN="UNKNOWN",e.LOW="LOW",e.MEDIUM="MEDIUM",e.HIGH="HIGH",e))(Pt||{}),Vt=(e=>(e.IDLE="idle",e.RUNNING="running",e.PAUSED="paused",e.WAITING_FOR_CONFIRMATION="waiting_for_confirmation",e.FINISHED="finished",e.ERROR="error",e.STUCK="stuck",e))(Vt||{});function vl(e){if(!e)return ve.LOADING;switch(e){case Vt.IDLE:return ve.AWAITING_USER_INPUT;case Vt.RUNNING:return ve.RUNNING;case Vt.PAUSED:return ve.PAUSED;case Vt.WAITING_FOR_CONFIRMATION:return ve.AWAITING_USER_CONFIRMATION;case Vt.FINISHED:return ve.FINISHED;case Vt.ERROR:return ve.ERROR;case Vt.STUCK:return ve.ERROR;default:return ve.LOADING}}function Ct(){const{data:e}=Ie(),h=Di(L=>L.curAgentState),g=rn(L=>L.agent_status),y=e?.conversation_version==="V1";return{curAgentState:B.useMemo(()=>y?vl(g):h,[y,g,h])}}const nn=()=>{const{data:e}=Ie(),{curAgentState:h}=Ct();return e?.status==="RUNNING"&&!Ns.includes(h)},Xt=e=>["feedback","data",e],Cl=(e,h)=>["feedback","exists",e,h],bl=()=>{const{conversationId:e}=nt(),{data:h}=us(),g=Zt(),y=nn(),x=qt({queryKey:Xt(e),queryFn:()=>vt.getBatchFeedback(e),enabled:y&&!!e&&h?.APP_MODE==="saas",staleTime:1e3*60*5,gcTime:1e3*60*15});return pe.useEffect(()=>{x.data&&e&&Object.entries(x.data).forEach(([L,D])=>{g.setQueryData(Cl(e,parseInt(L,10)),D)})},[x.data,e,g]),x},Sl=(e,h)=>{const[g,y]=pe.useState(!1),[x,L]=pe.useState(null),[D,o]=pe.useState([]),[i,d]=pe.useState(null),[v,c]=pe.useState(!1),_=pe.useRef(null),C=pe.useRef(0),S=pe.useRef(null),m=pe.useRef(!0),l=pe.useRef(new WeakSet),r=pe.useRef(h);pe.useEffect(()=>{r.current=h},[h]);const t=pe.useCallback(()=>{let p=e;if(r.current?.queryParams){const b=Object.entries(r.current.queryParams).reduce((w,[M,N])=>(w[M]=String(N),w),{}),f=new URLSearchParams(b);p=`${e}?${f.toString()}`}const a=new WebSocket(p);_.current=a,l.current.add(a),a.onopen=b=>{y(!0),d(null),c(!1),C.current=0,r.current?.onOpen?.(b)},a.onmessage=b=>{L(b.data),o(f=>[...f,b.data]),r.current?.onMessage?.(b)},a.onclose=b=>{const f=l.current.has(a);y(!1),b.code!==1e3&&(d(new Error(`WebSocket closed with code ${b.code}: ${b.reason||"Connection closed unexpectedly"}`)),f&&r.current?.onError?.(b)),r.current?.onClose?.(b);const w=r.current?.reconnect?.enabled??!1,M=r.current?.reconnect?.maxAttempts??1/0;w&&f&&m.current&&C.current<M?(c(!0),C.current+=1,S.current=setTimeout(()=>{t()},3e3)):c(!1)},a.onerror=b=>{y(!1),r.current?.onError?.(b)}},[e]);pe.useEffect(()=>(m.current=!0,C.current=0,e&&e.trim()!==""&&t(),()=>{if(m.current=!1,S.current&&(clearTimeout(S.current),S.current=null),_.current){const{readyState:p}=_.current;l.current.delete(_.current),(p===WebSocket.CONNECTING||p===WebSocket.OPEN)&&_.current.close(),_.current=null}}),[e,t]);const s=pe.useCallback(p=>{_.current&&_.current.readyState===WebSocket.OPEN&&_.current.send(p)},[]),n=pe.useCallback(()=>{m.current=!1,c(!1),S.current&&(clearTimeout(S.current),S.current=null),_.current&&(l.current.delete(_.current),_.current.close())},[]);return{isConnected:g,lastMessage:x,messages:D,error:i,socket:_.current,sendMessage:s,isReconnecting:v,attemptCount:C.current,disconnect:n}},yl=e=>{const h=e.match(/^\/workspace\/[^/]+\/(.*)$/);return h?h[1]:e},wl=(e,h,g)=>{const{action:y}=e;if((y.kind==="StrReplaceEditorAction"||y.kind==="FileEditorAction"||y.kind==="ExecuteBashAction")&&g.invalidateQueries({queryKey:["file_changes",h]},{cancelRefetch:!1}),(y.kind==="StrReplaceEditorAction"||y.kind==="FileEditorAction")&&y.path){const x=yl(y.path);g.invalidateQueries({queryKey:["file_diff",h,x]})}},on=B.createContext(void 0);function xl({children:e,conversationId:h,conversationUrl:g,sessionApiKey:y}){const[x,L]=B.useState("CONNECTING"),D=pe.useRef(!1),o=Zt(),{addEvent:i}=Kt(),{setErrorMessage:d,removeErrorMessage:v}=js(),{removeOptimisticUserMessage:c}=Hs(),{setAgentStatus:_}=rn(),{appendInput:C,appendOutput:S}=xr(),[m,l]=B.useState(!0),[r,t]=B.useState(null),s=B.useRef(0),n=B.useMemo(()=>!h||!g?null:zo(h,g),[h,g]);B.useEffect(()=>{D.current=!1,l(!0),t(null),s.current=0},[h]),B.useEffect(()=>{r!==null&&s.current>=r&&m&&l(!1)},[r,m]);const p=B.useCallback(N=>{try{const O=JSON.parse(N.data);m&&(s.current+=1,r!==null&&s.current>=r&&l(!1)),As(O)&&(i(O),Bs(O)&&d(O.error),yo(O)&&c(),Rt(O)&&wl(O,h||"test-conversation-id",o),Er(O)&&(wo(O)&&_(O.value.agent_status),xo(O)&&_(O.value)),Eo(O)&&C(O.action.command),ko(O)&&S(O.observation.output))}catch(O){console.warn("Failed to parse WebSocket message as JSON:",O)}},[i,m,r,d,c,o,h,_,C,S]),a=B.useMemo(()=>{const N={resend_all:!0};return y&&(N.session_api_key=y),{queryParams:N,reconnect:{enabled:!0},onOpen:async()=>{if(L("OPEN"),D.current=!0,v(),h)try{const O=await $s.getEventCount(h);t(O),O===0&&l(!1)}catch{l(!1)}},onClose:O=>{L("CLOSED"),O.code!==1e3&&D.current&&d(`Connection lost: ${O.reason||"Unexpected disconnect"}`)},onError:()=>{L("CLOSED"),D.current&&d("Failed to connect to server")},onMessage:p}},[p,d,v,y,h]),b=n,{socket:f}=Sl(b||"",a),w=B.useCallback(async N=>{if(!f||f.readyState!==WebSocket.OPEN){const O="WebSocket is not connected";throw d(O),new Error(O)}try{f.send(JSON.stringify(N))}catch(O){const I=O instanceof Error?O.message:"Failed to send message";throw d(I),O}},[f,d]);B.useEffect(()=>{f&&n&&(()=>{switch(f.readyState){case WebSocket.CONNECTING:L("CONNECTING");break;case WebSocket.OPEN:L("OPEN");break;case WebSocket.CLOSING:L("CLOSING");break;case WebSocket.CLOSED:L("CLOSED");break;default:L("CLOSED");break}})()},[f,n]);const M=B.useMemo(()=>({connectionState:x,sendMessage:w,isLoadingHistory:m}),[x,w,m]);return u.jsx(on.Provider,{value:M,children:e})}const Wr=()=>B.useContext(on)||null;function Gs(){const{data:e}=Ie(),{send:h}=kr(),g=Wr(),y=e?.conversation_version==="V1";return{send:B.useCallback(async L=>{if(y&&g){const{action:D,args:o}=L;if(D==="message"&&o?.content){const i=[{type:"text",text:o.content}];o.image_urls&&o.image_urls.length>0&&o.image_urls.forEach(d=>{i.push({type:"image_url",image_url:{url:d}})}),await g.sendMessage({role:"user",content:i})}else h(L)}else h(L)},[y,g,h])}}const El=e=>"error"in e,kl=()=>{const{send:e}=Gs(),h=Kt(g=>g.events);pe.useEffect(()=>{if(!h.length)return;const g=h[h.length-1];if(El(g)){if(g.error_code===401){Ye("Session expired.");return}typeof g.error=="string"?Ye(g.error):Ye(g.message);return}"type"in g&&g.type==="error"&&`${g.message}`.startsWith("Agent reached maximum")&&e(Ar(ve.PAUSED))},[h.length])},an=()=>{const{curAgentState:e}=Ct();return{runtimeActive:!Ns.includes(e)}};function Al({children:e}){return kl(),an(),e}const Tl=()=>{const{conversationId:e}=nt(),{data:h}=Ie(),g=nn(),y=h?.conversation_version==="V1",x=qt({queryKey:["conversation_config",e,y],queryFn:()=>{if(!e)throw new Error("No conversation ID");return y?$s.getConversationConfig(e):vt.getRuntimeId(e)},enabled:g&&!!e&&h!==void 0,staleTime:1e3*60*5,gcTime:1e3*60*15});return pe.useEffect(()=>{if(x.data){const{runtime_id:L}=x.data;console.log("Runtime ID: %c%s","background: #444; color: #ffeb3b; font-weight: bold; padding: 2px 4px; border-radius: 4px;",L)}},[x.data]),x},Ml=Tl,Ks=()=>{const{conversationId:e}=nt(),h=wr(),g=e.startsWith("task-"),y=g?e.replace("task-",""):null,x=qt({queryKey:["start-task",y],queryFn:async()=>y?$s.getStartTask(y):null,enabled:!!y,refetchInterval:L=>{const D=L.state.data;return!D||D.status==="READY"||D.status==="ERROR"?!1:3e3},retry:!1});return B.useEffect(()=>{const L=x.data;L?.status==="READY"&&L.app_conversation_id&&h(`/conversations/${L.app_conversation_id}`,{replace:!0})},[x.data,h]),{isTask:g,taskId:y,conversationId:g?null:e,task:x.data,taskStatus:x.data?.status,taskDetail:x.data?.detail,taskError:x.error,isLoadingTask:x.isLoading,repositoryInfo:{selectedRepository:x.data?.request?.selected_repository,selectedBranch:x.data?.request?.selected_branch,gitProvider:x.data?.request?.git_provider}}};function Rl(e="OpenHands"){const{data:h}=Ie(),g=B.useRef(null);B.useEffect(()=>(h?.title?(g.current=h.title,document.title=`${h.title} | ${e}`):document.title=e,()=>{document.title=e}),[h?.title,e])}const Ol=e=>new Promise((h,g)=>{const y=new FileReader;y.onloadend=()=>{h(y.result)},y.onerror=g,y.readAsDataURL(e)}),Ll=e=>B.createElement("svg",{width:15,height:16,viewBox:"0 0 15 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B.createElement("path",{d:"M13.3125 6.80003C13.1369 6.58918 12.9171 6.41945 12.6687 6.30282C12.4204 6.18619 12.1494 6.1255 11.875 6.12503H9.025L9.375 5.23128C9.52058 4.83995 9.56907 4.41916 9.51629 4.00498C9.46351 3.5908 9.31106 3.19561 9.07199 2.8533C8.83293 2.51099 8.51439 2.23178 8.14371 2.03962C7.77303 1.84746 7.36127 1.74809 6.94375 1.75003C6.82352 1.75028 6.70592 1.7852 6.60504 1.8506C6.50417 1.91601 6.42429 2.00912 6.375 2.11878L4.59375 6.12503H3.125C2.62772 6.12503 2.15081 6.32257 1.79917 6.6742C1.44754 7.02583 1.25 7.50275 1.25 8.00003V12.375C1.25 12.8723 1.44754 13.3492 1.79917 13.7009C2.15081 14.0525 2.62772 14.25 3.125 14.25H11.0812C11.5199 14.2499 11.9446 14.096 12.2815 13.815C12.6183 13.5341 12.846 13.144 12.925 12.7125L13.7188 8.33753C13.7678 8.06714 13.7569 7.78927 13.6867 7.52358C13.6165 7.25788 13.4887 7.01087 13.3125 6.80003ZM4.375 13H3.125C2.95924 13 2.80027 12.9342 2.68306 12.817C2.56585 12.6998 2.5 12.5408 2.5 12.375V8.00003C2.5 7.83427 2.56585 7.6753 2.68306 7.55809C2.80027 7.44088 2.95924 7.37503 3.125 7.37503H4.375V13ZM12.5 8.11253L11.7062 12.4875C11.6796 12.6331 11.6022 12.7646 11.4877 12.8584C11.3733 12.9523 11.2292 13.0024 11.0812 13H5.625V6.88128L7.325 3.05628C7.49999 3.10729 7.6625 3.19403 7.80229 3.31102C7.94207 3.428 8.05608 3.57269 8.13712 3.73596C8.21817 3.89923 8.26449 4.07752 8.27316 4.25959C8.28183 4.44166 8.25266 4.62355 8.1875 4.79378L7.85625 5.68753C7.78567 5.87644 7.76184 6.07962 7.7868 6.27973C7.81176 6.47985 7.88476 6.67095 7.99958 6.83674C8.11441 7.00253 8.26763 7.13807 8.44619 7.2318C8.62475 7.32554 8.82333 7.37468 9.025 7.37503H11.875C11.9668 7.37488 12.0575 7.39496 12.1407 7.43385C12.2239 7.47274 12.2975 7.52948 12.3563 7.60003C12.4165 7.66961 12.4606 7.75162 12.4854 7.84021C12.5103 7.9288 12.5152 8.02179 12.5 8.11253Z",fill:"white"})),Dl=e=>B.createElement("svg",{width:15,height:16,viewBox:"0 0 15 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B.createElement("path",{d:"M11.8749 1.75H3.91861C3.47998 1.75015 3.05528 1.90407 2.71841 2.18499C2.38154 2.4659 2.15382 2.85603 2.07486 3.2875L1.28111 7.6625C1.23166 7.93277 1.2422 8.21062 1.31201 8.47636C1.38182 8.74211 1.50917 8.98927 1.68507 9.20035C1.86097 9.41142 2.08111 9.58126 2.32991 9.69785C2.57872 9.81443 2.8501 9.87491 3.12486 9.875H5.97486L5.62486 10.7688C5.47928 11.1601 5.4308 11.5809 5.48357 11.995C5.53635 12.4092 5.68881 12.8044 5.92787 13.1467C6.16694 13.489 6.48547 13.7683 6.85615 13.9604C7.22683 14.1526 7.63859 14.2519 8.05611 14.25C8.17634 14.2497 8.29394 14.2148 8.39482 14.1494C8.4957 14.084 8.57557 13.9909 8.62486 13.8813L10.4061 9.875H11.8749C12.3721 9.875 12.8491 9.67746 13.2007 9.32583C13.5523 8.97419 13.7499 8.49728 13.7499 8V3.625C13.7499 3.12772 13.5523 2.65081 13.2007 2.29917C12.8491 1.94754 12.3721 1.75 11.8749 1.75ZM9.37486 9.11875L7.67486 12.9438C7.50092 12.8911 7.3396 12.8034 7.20083 12.6861C7.06206 12.5688 6.94878 12.4242 6.86798 12.2615C6.78717 12.0987 6.74055 11.9211 6.73099 11.7396C6.72143 11.5581 6.74912 11.3766 6.81236 11.2062L7.14361 10.3125C7.2142 10.1236 7.23803 9.92041 7.21307 9.72029C7.18811 9.52018 7.1151 9.32907 7.00028 9.16329C6.88546 8.9975 6.73223 8.86196 6.55367 8.76823C6.37511 8.67449 6.17653 8.62535 5.97486 8.625H3.12486C3.03304 8.62515 2.94232 8.60507 2.85914 8.56618C2.77597 8.52729 2.70238 8.47055 2.64361 8.4C2.58341 8.33042 2.5393 8.24841 2.51445 8.15982C2.4896 8.07123 2.48462 7.97824 2.49986 7.8875L3.29361 3.5125C3.32024 3.3669 3.39767 3.23548 3.51212 3.14162C3.62657 3.04777 3.77062 2.99759 3.91861 3H9.37486V9.11875ZM12.4999 8C12.4999 8.16576 12.434 8.32473 12.3168 8.44194C12.1996 8.55915 12.0406 8.625 11.8749 8.625H10.6249V3H11.8749C12.0406 3 12.1996 3.06585 12.3168 3.18306C12.434 3.30027 12.4999 3.45924 12.4999 3.625V8Z",fill:"white"}));function ui({testId:e,onClick:h,icon:g,tooltip:y}){const x=u.jsx("button",{type:"button","data-testid":e,onClick:h,className:"flex items-center justify-center w-[26px] h-[26px] rounded-lg cursor-pointer bg-[#25272D] hover:bg-tertiary",children:g});return y?u.jsx(Fr,{content:y,closeDelay:100,className:"bg-white text-black hover:bg-transparent",children:x}):x}function Il({onPositiveFeedback:e,onNegativeFeedback:h,isSaasMode:g=!1}){const{t:y}=me();return u.jsx("div",{"data-testid":"feedback-actions",className:"flex gap-1",children:!g&&u.jsxs(u.Fragment,{children:[u.jsx(ui,{testId:"positive-feedback",onClick:e,icon:u.jsx(Ll,{width:15,height:15}),tooltip:y(K.BUTTON$MARK_HELPFUL)}),u.jsx(ui,{testId:"negative-feedback",onClick:h,icon:u.jsx(Dl,{width:15,height:15}),tooltip:y(K.BUTTON$MARK_NOT_HELPFUL)})]})})}function Nl(e,h,g,y){return{action:Ao.MESSAGE,args:{content:e,image_urls:h,file_urls:g,timestamp:y}}}const di=e=>e.type.startsWith("image/"),jl=3*1024*1024,Bl=3*1024*1024;function Pl(e){const h=e.filter(g=>g.size>jl);if(h.length>0){const g=h.map(y=>y.name);return{isValid:!1,errorMessage:`Files exceeding 3MB are not allowed: ${g.join(", ")}`,oversizedFiles:g}}return{isValid:!0}}function Fl(e,h=[]){const g=h.reduce((L,D)=>L+D.size,0),y=e.reduce((L,D)=>L+D.size,0),x=g+y;return x>Bl?{isValid:!1,errorMessage:`Total file size would be ${(x/1048576).toFixed(1)}MB, exceeding the 3MB limit. Please select fewer or smaller files.`}:{isValid:!0}}function ln(e,h=[]){const g=Pl(e);return g.isValid?Fl(e,h):g}const cn=e=>e?(e.innerText||e.textContent||"").trim()==="":!0,Cr=e=>{e&&cn(e)&&(e.innerHTML="",e.textContent="")},fi=e=>e?.innerText||"",pi=e=>{e&&(e.textContent="")},_i=e=>{e&&(e.value="")},Hl=e=>{if(!e)return;const h=window.getSelection();if(!h||h.rangeCount===0)return;const g=h.getRangeAt(0);if(!g.getBoundingClientRect||!e.getBoundingClientRect)return;const y=g.getBoundingClientRect(),x=e.getBoundingClientRect();y.bottom>x.bottom&&(e.scrollTop=e.scrollHeight-e.clientHeight)},$l=()=>{const e=B.useRef(null),{messageToSend:h,hasRightPanelToggled:g,setMessageToSend:y,setIsRightPanelShown:x}=ot();B.useEffect(()=>{if(e.current){const i=fi(e.current);y(i),x(g)}},[g,y,x]);const L=B.useCallback(()=>cn(e.current),[]),D=B.useCallback(()=>{Cr(e.current)},[]),o=B.useCallback(()=>fi(e.current),[]);return{chatInputRef:e,messageToSend:h,checkIsContentEmpty:L,clearEmptyContentHandler:D,getCurrentMessage:o}},Ul=e=>{const h=B.useRef(null),g=B.useRef(null),[y,x]=B.useState(!1),L=B.useCallback(c=>{e&&c.length>0&&e(c)},[e]);B.useEffect(()=>{const c=_=>{const C=_.detail.files;C&&C.length>0&&L(C)};return document.addEventListener("pasteFiles",c),()=>{document.removeEventListener("pasteFiles",c)}},[L]);const D=B.useCallback(c=>{!c&&h.current&&h.current.click()},[]),o=B.useCallback(c=>{const _=Array.from(c.target.files||[]);L(_)},[L]),i=B.useCallback((c,_)=>{_||(c.preventDefault(),x(!0))},[]),d=B.useCallback((c,_)=>{_||g.current?.contains(c.relatedTarget)||(c.preventDefault(),x(!1))},[]),v=B.useCallback((c,_)=>{if(_)return;c.preventDefault(),x(!1);const C=Array.from(c.dataTransfer.files);L(C)},[L]);return{fileInputRef:h,chatContainerRef:g,isDragOver:y,handleFileIconClick:D,handleFileInputChange:o,handleDragOver:i,handleDragLeave:d,handleDrop:v}},Wl=({elementRef:e,minHeight:h,maxHeight:g,onGripDragStart:y,onGripDragEnd:x,onHeightChange:L,onReachedMinHeight:D})=>{const o=m=>"touches"in m&&m.touches.length>0?m.touches[0].clientY:m.clientY,i=(m,l)=>t=>{t.preventDefault();const s=o(t)-m,n=Math.max(h,Math.min(g,l-s)),p=e.current;if(!p)return;p.style.height=`${n}px`;const b=p.scrollHeight>n||n>=g;p.style.overflowY=b?"auto":"hidden",L&&L(n),D&&Math.abs(n-h)<=pr&&D()},d=(m,l)=>{const r=()=>{if(x?.(),m){const t=document.getElementById("resize-grip");if(!t)return;t.removeEventListener("mousemove",l),t.removeEventListener("mouseup",r),t.removeEventListener("touchmove",l),t.removeEventListener("touchend",r)}else document.removeEventListener("mousemove",l),document.removeEventListener("mouseup",r),document.removeEventListener("touchmove",l),document.removeEventListener("touchend",r)};return r},v=(m,l)=>{const r=document.getElementById("resize-grip");r&&(r.addEventListener("touchmove",m,{passive:!1,capture:!0}),r.addEventListener("touchend",l,{capture:!0}))},c=(m,l)=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",l)},_=m=>{y?.();const l=$r(),r=e.current?.offsetHeight||h,t=i(m,r),s=d(l,t);l?v(t,s):c(t,s)};return{handleGripMouseDown:m=>{m.preventDefault(),_(m.clientY)},handleGripTouchStart:m=>{m.preventDefault(),_(m.touches[0].clientY)}}},Vl=20,zl=120,Gl=20,Kl=50,ql=()=>{const e=B.useRef(!1),h=B.useRef(null);return{hasUserResizedRef:e,manualHeightRef:h}},Zl=(e,h,g)=>{const{minHeight:y,maxHeight:x}=g,L=Math.max(y,Math.min(h,x));return e.style.setProperty("height",`${L}px`),e.style.setProperty("overflow-y",L>=x?"auto":"hidden"),L},Yl=(e,h,g=Kl)=>e>h+g,Jl=(e,h)=>{const g=_r(e,h),y=g;e.style.setProperty("height","auto");const x=e.scrollHeight;return Gi(e,g),{currentHeight:y,currentStyleHeight:g,contentHeight:x}},ns=(e,h)=>{const{finalHeight:g,overflowY:y}=h,x=e;x.style.height=`${g}px`,x.style.overflowY=y},Gt=(e,h)=>{h&&h(e)},Xl=(e,h={})=>{const g=B.useRef(null),{minHeight:y=Vl,maxHeight:x=zl,enableManualResize:L=!1,value:D,onGripDragStart:o,onGripDragEnd:i,onHeightChange:d}=h,v={minHeight:y,maxHeight:x},{hasUserResizedRef:c,manualHeightRef:_}=ql(),C=()=>{c.current=!1,_.current=null},S=B.useCallback(w=>{d?.(w),c.current&&(_.current=w)},[d]),m=B.useCallback(()=>{c.current=!0,o?.()},[o]),l=B.useCallback(()=>{const w=e.current;if(w){const M=_r(w,y);Math.abs(M-y)<=pr&&(c.current=!1,_.current=null)}i?.()},[y,i]),{handleGripMouseDown:r,handleGripTouchStart:t}=Wl({elementRef:e,minHeight:y,maxHeight:x,onGripDragStart:L?m:void 0,onGripDragEnd:L?l:void 0,onHeightChange:S}),s=B.useCallback((w,M,N)=>{if(c.current&&M>y){ns(w,{finalHeight:M,overflowY:"hidden"}),Gt(M,d);return}const O=Math.max(N,y);ns(w,{finalHeight:O,overflowY:"hidden"}),Gt(O,d)},[y,d]),n=B.useCallback((w,M,N)=>{if(!Yl(M,N)){const O=Math.max(N,y);ns(w,{finalHeight:O,overflowY:"hidden"}),Gt(O,d);return}ns(w,{finalHeight:M,overflowY:"auto"}),Gt(M,d)},[y,d]),p=B.useCallback(w=>{ns(w,{finalHeight:x,overflowY:"auto"}),Gt(x,d)},[x,d]),a=B.useCallback(()=>{const w=e.current;if(!w)return;if((w.textContent??"").trim().length===0&&c.current&&_.current&&_.current>y+pr){Gi(w,_.current),w.style.overflowY="hidden",Gt(_.current,d);return}const N=Jl(w,y),{currentHeight:O,contentHeight:I}=N;if(I<=O){s(w,O,I);return}if(I<=x){n(w,O,I);return}p(w)},[e,y,x,d,s,n,p]),b=B.useCallback(()=>{g.current&&cancelAnimationFrame(g.current),g.current=requestAnimationFrame(()=>{g.current=null,a()})},[a]),f=()=>{const w=e.current;if(!w)return;const M=_r(w,y),N=Math.min(M+Gl,x);if(N>M){const O=Zl(w,N,v);Gt(O,d),c.current=!0,_.current=O}};return B.useEffect(()=>{const w=e.current;w&&D!==void 0&&(w.textContent=D.text,b())},[D,b]),B.useEffect(()=>{b()},[b]),{smartResize:b,handleGripMouseDown:r,handleGripTouchStart:t,increaseHeightForEmptyContent:f,resetManualResize:C}},Ql=(e,h)=>{const[g,y]=B.useState(!1),{setShouldHideSuggestions:x}=ot(),L=B.useRef(null),D=B.useCallback(()=>{L.current&&(L.current.classList.add("opacity-100"),L.current.classList.remove("opacity-0"))},[]),o=B.useCallback(()=>{L.current&&(L.current.classList.remove("opacity-100"),L.current.classList.add("opacity-0"))},[]),i=B.useCallback(m=>{m.stopPropagation(),y(l=>!l)},[]),d=B.useCallback(m=>{const l=m>da.HEIGHT_THRESHOLD;x(l)},[x]),{smartResize:v,handleGripMouseDown:c,handleGripTouchStart:_,increaseHeightForEmptyContent:C,resetManualResize:S}=Xl(e,{minHeight:20,maxHeight:400,onHeightChange:d,onGripDragStart:D,onGripDragEnd:o,value:h??void 0,enableManualResize:!0});return{gripRef:L,isGripVisible:g,handleTopEdgeClick:i,smartResize:v,handleGripMouseDown:c,handleGripTouchStart:_,increaseHeightForEmptyContent:C,resetManualResize:S}},ec=(e,h,g,y,x,L,D)=>{const o=B.useCallback(()=>{h(),e.current&&Cr(e.current),Hl(e.current)},[h,e]),i=B.useCallback(_=>{_.preventDefault();const C=Array.from(_.clipboardData.files);if(C.length>0){const l=new CustomEvent("pasteFiles",{detail:{files:C}});document.dispatchEvent(l);return}const m=_.clipboardData.getData("text/plain");m&&(document.execCommand("insertText",!1,m),setTimeout(h,0))},[h]),d=B.useCallback((_,C,S)=>{if(_.key==="Enter"){if(y()){_.preventDefault(),g();return}!$r()&&!_.shiftKey&&!C&&(_.preventDefault(),S())}},[y,g]),v=B.useCallback(()=>{e.current&&Cr(e.current),D&&D()},[e,D]),c=B.useCallback(()=>{L&&L()},[L]);return{handleInput:o,handlePaste:i,handleKeyDown:d,handleBlur:v,handleFocus:c}},tc=(e,h,g,y,x)=>{const L=B.useCallback(()=>{const i=e.current?.innerText||"";i.trim()&&(y(i),pi(e.current),_i(h.current),g(),x?.())},[e,h,g,y,x]),D=B.useCallback(()=>{const i=e.current?.innerText||"continue";y(i.trim()),pi(e.current),_i(h.current),g(),x?.()},[e,h,g,y,x]),o=B.useCallback(i=>{i&&i()},[]);return{handleSubmit:L,handleResumeAgent:D,handleStop:o}};function sc({gripRef:e,isGripVisible:h,handleTopEdgeClick:g,handleGripMouseDown:y,handleGripTouchStart:x}){return u.jsx("div",{className:"absolute -top-[12px] left-0 w-full h-6 lg:h-3 z-20 group",id:"resize-grip",onClick:g,children:u.jsx("div",{ref:e,className:we("absolute top-[4px] left-0 w-full h-[3px] bg-white cursor-ns-resize z-10 transition-opacity duration-200",h?"opacity-100":"opacity-0 group-hover:opacity-100"),onMouseDown:y,onTouchStart:x,style:{userSelect:"none"}})})}const rc=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",...e},B.createElement("path",{d:"M15.5 10C16.3284 10 17 9.32843 17 8.5C17 7.67157 16.3284 7 15.5 7C14.6716 7 14 7.67157 14 8.5C14 9.32843 14.6716 10 15.5 10Z",fill:"currentColor"}),B.createElement("path",{d:"M3 5C3 3.89543 3.89543 3 5 3H19C20.1046 3 21 3.89543 21 5V19C21 20.1046 20.1046 21 19 21H5C3.89543 21 3 20.1046 3 19V5ZM19 5H5V12.9194L8.37534 10.2191C8.74056 9.92696 9.25951 9.92696 9.62473 10.2191L13.9258 13.66L15.2929 12.2929C15.6835 11.9024 16.3166 11.9024 16.7071 12.2929L19 14.5857V5ZM5 19H19V17.4142L16 14.4142L14.7071 15.7071C14.3468 16.0674 13.7732 16.0992 13.3753 15.7809L9.00004 12.2806L5 15.4807V19Z",fill:"currentColor"})),ic=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:17,height:17,viewBox:"0 0 17 17",fill:"none",...e},B.createElement("path",{d:"M14.2541 0.99075C15.0629 0.811957 15.8642 1.32275 16.0432 2.13138C16.222 2.94015 15.7113 3.74145 14.9026 3.92044C10.5163 4.8902 8.31751 8.22203 8.09593 11.8745L10.343 9.62942C10.863 9.10947 11.7057 9.10867 12.2258 9.62845C12.7459 10.1486 12.7459 10.9921 12.2258 11.5122L7.52073 16.2173C7.03316 16.7049 6.26163 16.7357 5.73851 16.3091L5.63694 16.2173L0.93089 11.5122C0.411068 10.9922 0.411047 10.1485 0.93089 9.62845C1.45095 9.10851 2.29457 9.10859 2.81468 9.62845L5.09691 11.9107C5.32362 7.06867 8.20704 2.32786 14.2541 0.99075Z",fill:"currentColor"}));function nc(){const{t:e}=me();return u.jsx("div",{className:"drag-over",children:u.jsxs("div",{className:"drag-over-content-wrapper",children:[u.jsxs("div",{className:"relative",children:[u.jsx(rc,{width:36,height:36,className:"rotate-[-27deg] absolute top-[-40px] left-[-10px]"}),u.jsx(ic,{width:16,height:16,className:"absolute top-[-16px] left-[-20px]"})]}),u.jsx("div",{className:"drag-over-content",children:u.jsx("p",{children:e(K.COMMON$DROP_YOUR_FILES_HERE)})})]})})}/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oc=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ac=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(h,g,y)=>y?y.toUpperCase():g.toLowerCase()),mi=e=>{const h=ac(e);return h.charAt(0).toUpperCase()+h.slice(1)},hn=(...e)=>e.filter((h,g,y)=>!!h&&h.trim()!==""&&y.indexOf(h)===g).join(" ").trim(),lc=e=>{for(const h in e)if(h.startsWith("aria-")||h==="role"||h==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cc={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hc=B.forwardRef(({color:e="currentColor",size:h=24,strokeWidth:g=2,absoluteStrokeWidth:y,className:x="",children:L,iconNode:D,...o},i)=>B.createElement("svg",{ref:i,...cc,width:h,height:h,stroke:e,strokeWidth:y?Number(g)*24/Number(h):g,className:hn("lucide",x),...!L&&!lc(o)&&{"aria-hidden":"true"},...o},[...D.map(([d,v])=>B.createElement(d,v)),...Array.isArray(L)?L:[L]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=(e,h)=>{const g=B.forwardRef(({className:y,...x},L)=>B.createElement(hc,{ref:L,iconNode:h,className:hn(`lucide-${oc(mi(e))}`,`lucide-${e}`,y),...x}));return g.displayName=mi(e),g};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uc=[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]],dc=_s("arrow-up",uc);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fc=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],un=_s("chevron-down",fc);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pc=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],dn=_s("chevron-right",pc);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _c=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],qs=_s("loader-circle",_c);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mc=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],gc=_s("refresh-cw",mc),vc=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",...e},B.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.565 6.435L16.065 1.935L15 1.5H6L4.5 3V21L6 22.5H19.5L21 21V7.5L20.565 6.435ZM19.5 21H6V3H13.5V9H19.5V21ZM15 7.5V3L19.5 7.5H15Z",fill:"currentColor"}));function fn({onClick:e}){const h=$r();return u.jsx("button",{type:"button",onClick:e,className:we("flex w-4 h-4 rounded-full items-center justify-center bg-[#25272D] hover:bg-[#A1A1A1] cursor-pointer absolute top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity duration-200",h&&"opacity-100"),children:u.jsx(Hi,{width:10,height:10,color:"#ffffff"})})}function gi({file:e,onRemove:h,isLoading:g=!1}){const y=fa(e.name);return u.jsxs("div",{className:"group flex gap-2 rounded-lg bg-[#525252] max-w-[160px] px-3 py-1 relative",children:[u.jsxs("div",{className:"flex flex-col justify-center gap-0.25",children:[u.jsx(fn,{onClick:h}),u.jsx("div",{className:"flex items-center gap-2 w-full",children:u.jsx("span",{className:we("text-sm font-normal leading-5 flex-1 max-w-[136px] truncate",g?"max-w-[108px] text-[#A7A7A7]":"text-white"),children:e.name})}),u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(vc,{width:12,height:12,color:"#A7A7A7"}),u.jsx("span",{className:"text-[9px] font-normal leading-5 text-[#A7A7A7]",children:y})]})]}),g&&u.jsx("div",{className:"flex items-center justify-center",children:u.jsx(qs,{className:"animate-spin w-5 h-5",color:"white"})})]})}function vi({image:e,onRemove:h,isLoading:g=!1}){const[y,x]=pe.useState("");return pe.useEffect(()=>{const L=URL.createObjectURL(e);return x(L),()=>{URL.revokeObjectURL(L)}},[e]),u.jsxs("div",{className:"group min-w-[51px] min-h-[49px] w-[51px] h-[49px] rounded-lg bg-[#525252] relative flex items-center justify-center",children:[u.jsx(fn,{onClick:h}),g?u.jsx(qs,{className:"animate-spin w-5 h-5",color:"white"}):y&&u.jsx("img",{src:y,alt:e.name,className:"w-full h-full object-cover rounded-lg"})]})}function Cc(){const{images:e,files:h,loadingFiles:g,loadingImages:y,removeFile:x,removeImage:L}=ot(),D=i=>{x(i)},o=i=>{L(i)};return e.length===0&&h.length===0&&g.length===0&&y.length===0?null:u.jsxs("div",{className:"flex items-center gap-4 w-full overflow-x-auto custom-scrollbar",children:[h.map((i,d)=>u.jsx(gi,{file:i,onRemove:()=>D(d),isLoading:g.includes(i.name)},`file-${d}-${i.name}`)),g.map((i,d)=>{const v=new File([],i);return u.jsx(gi,{file:v,onRemove:()=>{},isLoading:!0},`loading-file-${d}-${i}`)}),e.map((i,d)=>u.jsx(vi,{image:i,onRemove:()=>o(d),isLoading:y.includes(i.name)},`image-${d}-${i.name}`)),y.map((i,d)=>{const v=new File([],i);return u.jsx(vi,{image:v,onRemove:()=>{},isLoading:!0},`loading-image-${d}-${i}`)})]})}const bc=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:13,height:25,viewBox:"0 0 13 25",fill:"none",...e},B.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.64286 1.92308C3.10435 1.92308 1.85714 3.21456 1.85714 4.80769V18.2692C1.85714 20.9244 3.93582 23.0769 6.5 23.0769C9.06418 23.0769 11.1429 20.9244 11.1429 18.2692V6.08974H13V18.2692C13 21.9865 10.0899 25 6.5 25C2.91015 25 0 21.9865 0 18.2692V4.80769C0 2.15248 2.07868 0 4.64286 0C7.20704 0 9.28572 2.15248 9.28572 4.80769V17.6282C9.28572 19.2213 8.03851 20.5128 6.5 20.5128C4.96149 20.5128 3.71429 19.2213 3.71429 17.6282V6.08974H5.57143V17.6282C5.57143 18.1592 5.98716 18.5897 6.5 18.5897C7.01284 18.5897 7.42857 18.1592 7.42857 17.6282V4.80769C7.42857 3.21456 6.18136 1.92308 4.64286 1.92308Z",fill:"currentColor"}));function Sc({handleFileIconClick:e,disabled:h=!1}){return u.jsx("button",{type:"button",className:we("h-[25px] relative shrink-0 w-[13px] cursor-pointer transition-all duration-200 hover:scale-110 active:scale-95",h&&"cursor-not-allowed"),"data-name":"Shape","data-testid":"paperclip-icon",onClick:e,children:u.jsx(bc,{className:"block max-w-none w-[13px] h-[25px]",color:h?"#959CB2":"white"})})}function yc({buttonClassName:e,handleSubmit:h,disabled:g}){return u.jsx("button",{type:"button",className:we("flex items-center justify-center rounded-full border border-white size-[35px]",g?"cursor-not-allowed border-neutral-600":"cursor-pointer hover:bg-[#959CB2]",e),"data-name":"arrow-up-circle-fill","data-testid":"submit-button",onClick:h,disabled:g,children:u.jsx(dc,{color:g?"#959CB2":"white"})})}function wc({chatInputRef:e,onInput:h,onPaste:g,onKeyDown:y,onFocus:x,onBlur:L}){const{t:D}=me();return u.jsx("div",{className:"box-border content-stretch flex flex-row items-center justify-start min-h-6 p-0 relative shrink-0 flex-1","data-name":"Text & caret",children:u.jsx("div",{className:"basis-0 flex flex-col font-normal grow justify-center leading-[0] min-h-px min-w-px overflow-ellipsis overflow-hidden relative shrink-0 text-[#d0d9fa] text-[16px] text-left",children:u.jsx("div",{ref:e,className:"chat-input bg-transparent text-white text-[16px] font-normal leading-[20px] outline-none resize-none custom-scrollbar min-h-[20px] max-h-[400px] [text-overflow:inherit] [text-wrap-mode:inherit] [white-space-collapse:inherit] block whitespace-pre-wrap",contentEditable:!0,"data-placeholder":D("SUGGESTIONS$WHAT_TO_BUILD"),"data-testid":"chat-input",onInput:h,onPaste:g,onKeyDown:y,onFocus:x,onBlur:L})})})}function xc({chatInputRef:e,disabled:h,showButton:g,buttonClassName:y,handleFileIconClick:x,handleSubmit:L,onInput:D,onPaste:o,onKeyDown:i,onFocus:d,onBlur:v}){return u.jsxs("div",{className:"box-border content-stretch flex flex-row items-end justify-between p-0 relative shrink-0 w-full pb-[18px] gap-2",children:[u.jsxs("div",{className:"basis-0 box-border content-stretch flex flex-row gap-4 grow items-end justify-start min-h-px min-w-px p-0 relative shrink-0",children:[u.jsx(Sc,{disabled:h,handleFileIconClick:()=>x(h)}),u.jsx(wc,{chatInputRef:e,onInput:D,onPaste:o,onKeyDown:i,onFocus:d,onBlur:v})]}),g&&u.jsx(yc,{buttonClassName:we(y,"translate-y-[3px]"),handleSubmit:L,disabled:h})]})}const Ec=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",...e},B.createElement("path",{d:"M15 12C15 12.7956 14.6839 13.5587 14.1213 14.1213C13.5587 14.6839 12.7956 15 12 15C11.2044 15 10.4413 14.6839 9.87868 14.1213C9.31607 13.5587 9 12.7956 9 12C9 11.2044 9.31607 10.4413 9.87868 9.87868C10.4413 9.31607 11.2044 9 12 9C12.7956 9 13.5587 9.31607 14.1213 9.87868C14.6839 10.4413 15 11.2044 15 12Z",fill:"currentColor"})),kc=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",...e},B.createElement("path",{d:"M9 9H15V15H9V9Z",fill:"currentColor"}),B.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.9 1.50004C15.3 1.65004 17.55 2.85004 19.2 4.50004C21.15 6.60004 22.2 9.15004 22.2 12.15C22.2 14.55 21.3 16.8 19.8 18.75C18.3 20.55 16.2 21.9 13.8 22.35C11.4 22.8 9 22.5 6.9 21.3C4.8 20.1 3.15 18.3 2.25 16.05C1.35 13.8 1.2 11.25 1.95 9.00004C2.7 6.60004 4.05 4.65004 6.15 3.30004C8.1 1.95004 10.5 1.35004 12.9 1.50004ZM13.65 20.85C15.6 20.4 17.4 19.35 18.75 17.7C19.95 16.05 20.7 14.1 20.55 12C20.55 9.60004 19.65 7.20004 18 5.55004C16.5 4.05004 14.7 3.15004 12.6 3.00004C10.65 2.85004 8.55 3.30004 6.9 4.50004C5.25 5.70004 4.05 7.35004 3.45 9.45004C2.85 11.4 2.85 13.5 3.75 15.45C4.65 17.4 6 18.9 7.8 19.95C9.6 21 11.7 21.3 13.65 20.85Z",fill:"currentColor"})),Ac=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",...e},B.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.9 1.50004C15.3 1.65004 17.55 2.85004 19.2 4.50004C21.15 6.60004 22.2 9.15004 22.2 12.15C22.2 14.55 21.3 16.8 19.8 18.75C18.3 20.55 16.2 21.9 13.8 22.35C11.4 22.8 9 22.5 6.9 21.3C4.8 20.1 3.15 18.3 2.25 16.05C1.35 13.8 1.2 11.25 1.95 9.00004C2.7 6.60004 4.05 4.65004 6.15 3.30004C8.1 1.95004 10.5 1.35004 12.9 1.50004ZM13.65 20.85C15.6 20.4 17.4 19.35 18.75 17.7C19.95 16.05 20.7 14.1 20.55 12C20.55 9.60004 19.65 7.20004 18 5.55004C16.5 4.05004 14.7 3.15004 12.6 3.00004C10.65 2.85004 8.55 3.30004 6.9 4.50004C5.25 5.70004 4.05 7.35004 3.45 9.45004C2.85 11.4 2.85 13.5 3.75 15.45C4.65 17.4 6 18.9 7.8 19.95C9.6 21 11.7 21.3 13.65 20.85Z",fill:"currentColor"}),B.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9 7.49998L10.1655 6.87598L16.9155 11.376V12.624L10.1655 17.124L9 16.5V7.49998ZM10.5 8.90098V15.099L15.1485 12L10.5 8.90098Z",fill:"currentColor"}));function Ci({icon:e,text:h,onClick:g,testId:y}){return u.jsxs("button",{className:"flex items-center gap-2 p-2 hover:bg-[#5C5D62] rounded text-sm text-white font-normal leading-5 cursor-pointer w-full",onClick:g,"data-testid":y,type:"button",children:[h,e]})}function Tc({onClose:e,onStopServer:h,onStartServer:g,conversationStatus:y,position:x="top"}){const{t:L}=me(),D=Pr(e);return u.jsxs(ds,{ref:D,testId:"server-status-context-menu",position:x,alignment:"left",size:"default",className:"left-2 w-fit min-w-max",children:[y==="RUNNING"&&h&&u.jsx(Ci,{icon:u.jsx(kc,{width:18,height:18}),text:L(K.COMMON$STOP_RUNTIME),onClick:h,testId:"stop-server-button"}),y==="STOPPED"&&g&&u.jsx(Ci,{icon:u.jsx(Ac,{width:18,height:18}),text:L(K.COMMON$START_RUNTIME),onClick:g,testId:"start-server-button"})]})}function Mc({className:e="",conversationStatus:h,isPausing:g=!1,handleStop:y,handleResumeAgent:x}){const[L,D]=B.useState(!1),{curAgentState:o}=Ct(),{t:i}=me(),{isTask:d,taskStatus:v,taskDetail:c}=Ks(),_=o===ve.LOADING||o===ve.INIT,C=h==="STOPPED",S=()=>g?"#FFD600":d&&v?v==="ERROR"?"#FF684E":"#FFD600":_?"#FFD600":C?"#ffffff":o===ve.ERROR?"#FF684E":"#BCFF8C",m=()=>g?i(K.COMMON$STOPPING):d&&v?v==="ERROR"?c||i(K.CONVERSATION$ERROR_STARTING_CONVERSATION):v==="READY"?i(K.CONVERSATION$READY):c||v.toLowerCase().replace(/_/g," ").replace(/\b\w/g,a=>a.toUpperCase()):_?i(K.COMMON$STARTING):C?i(K.COMMON$SERVER_STOPPED):o===ve.ERROR?i(K.COMMON$ERROR):i(K.COMMON$RUNNING),l=()=>{(h==="RUNNING"||h==="STOPPED")&&D(!0)},r=()=>{D(!1)},t=a=>{a.preventDefault(),y(),D(!1)},s=a=>{a.preventDefault(),x(),D(!1)},n=S(),p=m();return u.jsxs("div",{className:`relative ${e}`,children:[u.jsxs("div",{className:"flex items-center cursor-pointer",onClick:l,children:[u.jsx(Ec,{className:"w-6 h-6",color:n}),u.jsx("span",{className:"text-[11px] text-white font-normal leading-5",children:p})]}),L&&u.jsx(Tc,{onClose:r,onStopServer:t,onStartServer:s,conversationStatus:h,position:"top"})]})}const Rc={[ve.LOADING]:K.AGENT_STATUS$INITIALIZING,[ve.INIT]:K.AGENT_STATUS$INITIALIZING,[ve.AWAITING_USER_INPUT]:K.AGENT_STATUS$WAITING_FOR_TASK,[ve.AWAITING_USER_CONFIRMATION]:K.AGENT_STATUS$WAITING_FOR_USER_CONFIRMATION,[ve.USER_CONFIRMED]:K.AGENT_STATUS$WAITING_FOR_TASK,[ve.USER_REJECTED]:K.AGENT_STATUS$WAITING_FOR_TASK,[ve.FINISHED]:K.AGENT_STATUS$WAITING_FOR_TASK,[ve.RUNNING]:K.AGENT_STATUS$RUNNING_TASK,[ve.PAUSED]:K.AGENT_STATUS$AGENT_STOPPED,[ve.STOPPED]:K.AGENT_STATUS$AGENT_STOPPED,[ve.REJECTED]:K.AGENT_STATUS$AGENT_STOPPED,[ve.ERROR]:K.AGENT_STATUS$ERROR_OCCURRED,[ve.RATE_LIMITED]:K.AGENT_STATUS$ERROR_OCCURRED};function Oc(e,h,g,y,x){if(g==="STOPPED"||y==="STATUS$STOPPED")return K.CHAT_INTERFACE$STOPPED;const L=x&&[ve.AWAITING_USER_INPUT,ve.RUNNING,ve.FINISHED,ve.PAUSED,ve.AWAITING_USER_CONFIRMATION,ve.USER_CONFIRMED,ve.USER_REJECTED].includes(x);if(y&&!["STATUS$READY","STATUS$RUNTIME_STARTED"].includes(y)&&!L){const D=K[y];return D||y}return h==="DISCONNECTED"?K.CHAT_INTERFACE$DISCONNECTED:h==="CONNECTING"?K.CHAT_INTERFACE$CONNECTING:x?Rc[x]:y&&y!=="STATUS$READY"&&!x?y:K.CHAT_INTERFACE$AGENT_ERROR_MESSAGE}const Lc=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",...e},B.createElement("path",{d:"M9 6C9.55228 6 10 6.44772 10 7V17C10 17.5523 9.55228 18 9 18C8.44772 18 8 17.5523 8 17V7C8 6.44772 8.44772 6 9 6ZM15 6C15.5523 6 16 6.44772 16 7V17C16 17.5523 15.5523 18 15 18C14.4477 18 14 17.5523 14 17V7C14 6.44772 14.4477 6 15 6Z",fill:"currentColor"}));function Dc({handleStop:e}){return u.jsx("button",{type:"button",onClick:e,"data-testid":"stop-button",className:"cursor-pointer",children:u.jsx(Lc,{className:"block max-w-none w-4 h-4"})})}const Ic=e=>B.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B.createElement("path",{d:"M15 11H13V7C13 6.73478 12.8946 6.48043 12.7071 6.29289C12.5196 6.10536 12.2652 6 12 6C11.7348 6 11.4804 6.10536 11.2929 6.29289C11.1054 6.48043 11 6.73478 11 7V12C11 12.2652 11.1054 12.5196 11.2929 12.7071C11.4804 12.8946 11.7348 13 12 13H15C15.2652 13 15.5196 12.8946 15.7071 12.7071C15.8946 12.5196 16 12.2652 16 12C16 11.7348 15.8946 11.4804 15.7071 11.2929C15.5196 11.1054 15.2652 11 15 11ZM12 2C10.0222 2 8.08879 2.58649 6.4443 3.6853C4.79981 4.78412 3.51809 6.3459 2.76121 8.17317C2.00433 10.0004 1.8063 12.0111 2.19215 13.9509C2.578 15.8907 3.53041 17.6725 4.92894 19.0711C6.32746 20.4696 8.10929 21.422 10.0491 21.8079C11.9889 22.1937 13.9996 21.9957 15.8268 21.2388C17.6541 20.4819 19.2159 19.2002 20.3147 17.5557C21.4135 15.9112 22 13.9778 22 12C22 10.6868 21.7413 9.38642 21.2388 8.17317C20.7363 6.95991 19.9997 5.85752 19.0711 4.92893C18.1425 4.00035 17.0401 3.26375 15.8268 2.7612C14.6136 2.25866 13.3132 2 12 2ZM12 20C10.4178 20 8.87104 19.5308 7.55544 18.6518C6.23985 17.7727 5.21447 16.5233 4.60897 15.0615C4.00347 13.5997 3.84504 11.9911 4.15372 10.4393C4.4624 8.88743 5.22433 7.46197 6.34315 6.34315C7.46197 5.22433 8.88743 4.4624 10.4393 4.15372C11.9911 3.84504 13.5997 4.00346 15.0615 4.60896C16.5233 5.21447 17.7727 6.23984 18.6518 7.55544C19.5308 8.87103 20 10.4177 20 12C20 14.1217 19.1572 16.1566 17.6569 17.6569C16.1566 19.1571 14.1217 20 12 20Z",fill:"currentColor"})),Nc=e=>B.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B.createElement("path",{d:"M8 8.37911C8 7.31633 9.15785 6.65415 10.0798 7.18966L16.3139 10.8105C17.2287 11.3419 17.2287 12.6581 16.3139 13.1895L10.0798 16.8103C9.15785 17.3459 8 16.6837 8 15.6209V8.37911Z",fill:"currentColor"}));function jc({onAgentResumed:e,disabled:h=!1}){return u.jsx("button",{type:"button",onClick:e,"data-testid":"play-button",disabled:h,className:we("cursor-pointer",h&&"cursor-not-allowed"),children:u.jsx(Nc,{className:"block max-w-none w-4 h-4"})})}function Bc(){return u.jsx("div",{"data-testid":"agent-loading-spinner",children:u.jsx(qs,{className:"animate-spin w-4 h-4",color:"white"})})}function pn(){const{data:e}=Ie(),h=kr(),g=Wr(),y=e?.conversation_version==="V1";return B.useMemo(()=>{if(y){if(!g)return"DISCONNECTED";switch(g.connectionState){case"OPEN":return"CONNECTED";case"CONNECTING":return"CONNECTING";case"CLOSED":case"CLOSING":return"DISCONNECTED";default:return"DISCONNECTED"}}return h.webSocketStatus},[y,g,h.webSocketStatus])}function Pc({className:e="",handleStop:h,handleResumeAgent:g,disabled:y=!1,isPausing:x=!1}){const{t:L}=me(),{setShouldShownAgentLoading:D}=ot(),{curAgentState:o}=Ct(),{curStatusMessage:i}=To(),d=pn(),{data:v}=Ie(),c=Oc(i,d,v?.status||null,v?.runtime_status||null,o),_=x||o===ve.INIT||o===ve.LOADING||d==="CONNECTING",C=o===ve.ERROR||o===ve.RATE_LIMITED,S=o===ve.RUNNING,m=o===ve.STOPPED;return B.useEffect(()=>{D(_)},[_,D]),u.jsxs("div",{className:we("flex items-center gap-1 min-w-0",e),children:[u.jsx("span",{className:"text-[11px] text-white font-normal leading-5 flex-1 min-w-0 max-w-full whitespace-normal break-words",title:L(c),children:L(c)}),u.jsxs("div",{className:we("bg-[#525252] box-border content-stretch flex flex-row gap-[3px] items-center justify-center overflow-clip px-0.5 py-1 relative rounded-[100px] shrink-0 size-6 transition-all duration-200 active:scale-95",!_&&(S||m)&&"hover:bg-[#737373] cursor-pointer"),children:[_&&u.jsx(Bc,{}),!_&&S&&u.jsx(Dc,{handleStop:h}),!_&&m&&u.jsx(jc,{onAgentResumed:g,disabled:y}),!_&&C&&u.jsx(Zo,{className:"w-4 h-4"}),!_&&!S&&!m&&!C&&u.jsx(Ic,{className:"w-4 h-4"})]})]})}const Fc=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",...e},B.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M22.1595 5.22752L20.9895 4.95152L17.8275 8.09552L16.0365 6.27152L19.1205 3.03602L18.8505 1.84802C18.1988 1.62999 17.5172 1.51461 16.83 1.50602C16.0804 1.49449 15.3365 1.63746 14.6445 1.92602C13.9764 2.22843 13.3725 2.65616 12.8655 3.18602C12.3011 3.72063 11.8542 4.36683 11.553 5.08352C10.9732 6.50984 10.9732 8.10619 11.553 9.53252C8.42587 12.609 5.3391 15.7263 2.29351 18.8835C1.97851 19.296 1.82851 19.8105 1.86751 20.328C1.89825 20.8846 2.14856 21.4063 2.56351 21.7785C2.74951 21.981 2.97151 22.149 3.21901 22.2705C3.47401 22.383 3.74851 22.4475 4.02601 22.461C4.50001 22.452 4.95451 22.272 5.30701 21.9555C7.62901 19.77 12.078 15.2805 14.6055 12.6495C15.291 12.9405 16.0275 13.0905 16.7715 13.089C17.5204 13.0884 18.2616 12.9377 18.9513 12.6458C19.641 12.3539 20.2652 11.9267 20.787 11.3895C21.8588 10.2964 22.4575 8.82543 22.4535 7.29452C22.4708 6.59398 22.3715 5.89544 22.1595 5.22752ZM4.39951 20.892C4.34178 20.9433 4.27218 20.9794 4.19701 20.997C4.12306 21.0098 4.04746 21.0098 3.97351 20.997C3.89598 20.9852 3.82213 20.956 3.75751 20.9115C3.68817 20.8709 3.62955 20.8144 3.58651 20.7465C3.37651 20.532 3.18001 20.124 3.37651 19.8945C5.43151 17.709 9.66301 13.437 12.309 10.8255C12.459 11.0235 12.624 11.2125 12.801 11.3895C12.978 11.574 13.1685 11.745 13.371 11.901C10.812 14.526 6.63901 18.747 4.40101 20.892H4.39951ZM21.0765 7.29452C21.0795 8.44202 20.6325 9.54452 19.8285 10.3665C19.0262 11.1536 17.9472 11.5944 16.8233 11.5944C15.6994 11.5944 14.6203 11.1536 13.818 10.3665C13.23 9.75286 12.8283 8.98485 12.6597 8.15183C12.4911 7.31882 12.5624 6.45505 12.8655 5.66102C13.0673 5.12062 13.3802 4.62858 13.784 4.21671C14.1879 3.80485 14.6737 3.48233 15.21 3.27002C15.7192 3.05688 16.266 2.94774 16.818 2.94902H17.199L14.4735 5.75852V6.80252L17.316 9.63152H18.306L21.0765 6.90752V7.29452ZM4.86001 10.032H7.15651L8.21401 11.1075L9.23101 10.0965L8.23351 9.07952V9.01502L8.31901 6.54152L7.98901 5.88602L3.69901 3.06302L2.81251 3.16202L1.56601 4.43552L1.46701 5.33402L4.22401 9.71102L4.86001 10.0335V10.032ZM3.44251 4.58402L6.91351 6.87002L6.85501 8.55452H5.24101L3.00301 5.01152L3.44251 4.58402ZM14.1 15.024L15.111 14.0145L19.77 18.792C20.1624 19.2045 20.3813 19.752 20.3813 20.3213C20.3813 20.8906 20.1624 21.4381 19.77 21.8505C19.4749 22.1535 19.0955 22.3605 18.6811 22.4448C18.2667 22.5291 17.8365 22.4866 17.4465 22.323C17.1976 22.2126 16.9744 22.0517 16.791 21.8505L12.078 17.046L13.0965 16.029L17.7945 20.82C17.8577 20.8897 17.9363 20.9436 18.024 20.9775C18.1967 21.0476 18.3899 21.0476 18.5625 20.9775C18.6502 20.9436 18.7288 20.8897 18.792 20.82C18.8577 20.755 18.9088 20.6768 18.942 20.5905C18.9764 20.5025 18.9947 20.409 18.996 20.3145C18.9945 20.2202 18.9767 20.1268 18.9435 20.0385C18.9103 19.9523 18.8592 19.8741 18.7935 19.809L14.1 15.024Z",fill:"currentColor"})),Hc=e=>B.createElement("svg",{width:29,height:28,viewBox:"0 0 29 28",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B.createElement("path",{d:"M14.5 18.375C12.085 18.375 10.125 16.415 10.125 14C10.125 11.585 12.085 9.625 14.5 9.625C16.915 9.625 18.875 11.585 18.875 14C18.875 16.415 16.915 18.375 14.5 18.375ZM14.5 11.375C13.0533 11.375 11.875 12.5533 11.875 14C11.875 15.4467 13.0533 16.625 14.5 16.625C15.9467 16.625 17.125 15.4467 17.125 14C17.125 12.5533 15.9467 11.375 14.5 11.375Z",fill:"currentColor"}),B.createElement("path",{d:"M18.245 25.8883C18 25.8883 17.755 25.8533 17.51 25.795C16.7867 25.5967 16.18 25.1417 15.795 24.5L15.655 24.2667C14.9667 23.0767 14.0217 23.0767 13.3333 24.2667L13.205 24.4883C12.82 25.1417 12.2133 25.6083 11.49 25.795C10.755 25.9933 9.99668 25.8883 9.35501 25.5033L7.34834 24.3483C6.63668 23.94 6.12334 23.275 5.90168 22.47C5.69168 21.665 5.79668 20.8367 6.20501 20.125C6.54334 19.53 6.63668 18.9933 6.43834 18.655C6.24001 18.3167 5.73834 18.1183 5.05001 18.1183C3.34668 18.1183 1.95834 16.73 1.95834 15.0267V12.9733C1.95834 11.27 3.34668 9.88168 5.05001 9.88168C5.73834 9.88168 6.24001 9.68334 6.43834 9.34501C6.63668 9.00668 6.55501 8.47001 6.20501 7.87501C5.79668 7.16334 5.69168 6.32334 5.90168 5.53001C6.11168 4.72501 6.62501 4.06001 7.34834 3.65168L9.36668 2.49668C10.685 1.71501 12.4233 2.17001 13.2167 3.51168L13.3567 3.74501C14.045 4.93501 14.99 4.93501 15.6783 3.74501L15.8067 3.52334C16.6 2.17001 18.3383 1.71501 19.6683 2.50834L21.675 3.66334C22.3867 4.07168 22.9 4.73668 23.1217 5.54168C23.3317 6.34668 23.2267 7.17501 22.8183 7.88668C22.48 8.48168 22.3867 9.01834 22.585 9.35668C22.7833 9.69501 23.285 9.89334 23.9733 9.89334C25.6767 9.89334 27.065 11.2817 27.065 12.985V15.0383C27.065 16.7417 25.6767 18.13 23.9733 18.13C23.285 18.13 22.7833 18.3283 22.585 18.6667C22.3867 19.005 22.4683 19.5417 22.8183 20.1367C23.2267 20.8483 23.3433 21.6883 23.1217 22.4817C22.9117 23.2867 22.3983 23.9517 21.675 24.36L19.6567 25.515C19.2133 25.76 18.735 25.8883 18.245 25.8883ZM14.5 21.5717C15.5383 21.5717 16.5067 22.225 17.1717 23.38L17.3 23.6017C17.44 23.8467 17.6733 24.0217 17.9533 24.0917C18.2333 24.1617 18.5133 24.1267 18.7467 23.9867L20.765 22.82C21.0683 22.645 21.3017 22.3533 21.395 22.0033C21.4883 21.6533 21.4417 21.2917 21.2667 20.9883C20.6017 19.845 20.52 18.6667 21.0333 17.7683C21.5467 16.87 22.6083 16.3567 23.9383 16.3567C24.685 16.3567 25.28 15.7617 25.28 15.015V12.9617C25.28 12.2267 24.685 11.62 23.9383 11.62C22.6083 11.62 21.5467 11.1067 21.0333 10.2083C20.52 9.31001 20.6017 8.13168 21.2667 6.98834C21.4417 6.68501 21.4883 6.32334 21.395 5.97334C21.3017 5.62334 21.08 5.34334 20.7767 5.15668L18.7583 4.00168C18.2567 3.69834 17.5917 3.87334 17.2883 4.38668L17.16 4.60834C16.495 5.76334 15.5267 6.41668 14.4883 6.41668C13.45 6.41668 12.4817 5.76334 11.8167 4.60834L11.6883 4.37501C11.3967 3.88501 10.7433 3.71001 10.2417 4.00168L8.22334 5.16834C7.92001 5.34334 7.68668 5.63501 7.59334 5.98501C7.50001 6.33501 7.54668 6.69668 7.72168 7.00001C8.38668 8.14334 8.46834 9.32168 7.95501 10.22C7.44168 11.1183 6.38001 11.6317 5.05001 11.6317C4.30334 11.6317 3.70834 12.2267 3.70834 12.9733V15.0267C3.70834 15.7617 4.30334 16.3683 5.05001 16.3683C6.38001 16.3683 7.44168 16.8817 7.95501 17.78C8.46834 18.6783 8.38668 19.8567 7.72168 21C7.54668 21.3033 7.50001 21.665 7.59334 22.015C7.68668 22.365 7.90834 22.645 8.21168 22.8317L10.23 23.9867C10.475 24.1383 10.7667 24.1733 11.035 24.1033C11.315 24.0333 11.5483 23.8467 11.7 23.6017L11.8283 23.38C12.4933 22.2367 13.4617 21.5717 14.5 21.5717Z",fill:"currentColor"})),bi=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",...e},B.createElement("path",{d:"M18.2099 13.1289L9.98776 20.3232C9.01788 21.1719 7.5 20.4831 7.5 19.1943L7.5 4.80565C7.5 3.51691 9.01788 2.82815 9.98775 3.67678L18.2099 10.8711C18.8929 11.4688 18.8929 12.5312 18.2099 13.1289Z",fill:"currentColor"}));function mt({icon:e,text:h,rightIcon:g,className:y}){return u.jsxs("div",{className:we("flex items-center justify-between p-2 hover:bg-[#5C5D62] rounded",y),children:[u.jsxs("div",{className:"flex items-center gap-2",children:[e,h]}),g&&u.jsx("div",{className:"flex items-center",children:g})]})}const _n=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",...e},B.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M20.781 10.5L13.281 3H12.2205L4.72049 10.5L5.78099 11.5605L12 5.3415V21H13.5V5.34L19.719 11.5605L20.781 10.5Z",fill:"currentColor"})),mn=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",...e},B.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M4.72049 13.5L12.2205 21H13.281L20.781 13.5L19.7205 12.4395L13.5 18.6585V3H12V18.66L5.78099 12.438L4.72049 13.5Z",fill:"currentcolor"})),gn=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 12 14",fill:"none",...e},B.createElement("path",{d:"M9.79249 10.1936C10.2876 10.1936 10.6902 10.5962 10.6902 11.0913C10.6902 11.5864 10.2876 11.989 9.79249 11.989C9.29739 11.989 8.89478 11.5864 8.89478 11.0913C8.89478 10.5962 9.29739 10.1936 9.79249 10.1936ZM9.79249 9.10547C8.69891 9.10547 7.80664 9.99774 7.80664 11.0913C7.80664 12.1849 8.69891 13.0772 9.79249 13.0772C10.8861 13.0772 11.7783 12.1849 11.7783 11.0913C11.7783 9.99774 10.8861 9.10547 9.79249 9.10547Z",fill:"currentColor"}),B.createElement("path",{d:"M2.23585 10.1936C2.73095 10.1936 3.13356 10.5962 3.13356 11.0913C3.13356 11.5864 2.73095 11.989 2.23585 11.989C1.74075 11.989 1.33814 11.5864 1.33814 11.0913C1.33814 10.5962 1.74075 10.1936 2.23585 10.1936ZM2.23585 9.10547C1.14227 9.10547 0.25 9.99774 0.25 11.0913C0.25 12.1849 1.14227 13.0772 2.23585 13.0772C3.32943 13.0772 4.2217 12.1849 4.2217 11.0913C4.2217 9.99774 3.32943 9.10547 2.23585 9.10547Z",fill:"currentColor"}),B.createElement("path",{d:"M2.23585 2.16846C2.73095 2.16846 3.13356 2.57107 3.13356 3.06617C3.13356 3.56128 2.73095 3.96389 2.23585 3.96389C1.74075 3.96389 1.33814 3.56128 1.33814 3.06617C1.33814 2.57107 1.74075 2.16846 2.23585 2.16846ZM2.23585 1.08032C1.14227 1.08032 0.25 1.97259 0.25 3.06617C0.25 4.15975 1.14227 5.05202 2.23585 5.05202C3.32943 5.05202 4.2217 4.15975 4.2217 3.06617C4.2217 1.97259 3.32943 1.08032 2.23585 1.08032Z",fill:"currentColor"}),B.createElement("path",{d:"M2.23633 9.17627V4.55713",stroke:"currentColor",strokeMiterlimit:10}),B.createElement("path",{d:"M9.79304 9.17605V4.33928C9.79304 3.63743 9.22176 3.06616 8.51992 3.06616H7.38281",stroke:"currentColor",strokeMiterlimit:10}),B.createElement("path",{d:"M7.38191 5.21531L5.23828 3.06624L7.38191 0.922607V5.21531Z",fill:"currentColor"})),Ss="cursor-pointer p-0 h-auto hover:bg-transparent !w-auto whitespace-nowrap";function $c({onClose:e}){const{t:h}=me(),{setMessageToSend:g}=ot(),{data:y}=Ie(),x=y?.git_provider,L=()=>{g(Ki()),e()},D=()=>{g(qi(x)),e()},o=()=>{g(Zi(x)),e()},i=()=>{g(pa()),e()};return u.jsxs(ds,{testId:"git-tools-submenu",className:"text-white bg-tertiary rounded-[6px] py-[6px] px-1 flex flex-col gap-2 w-max",children:[u.jsx(Ue,{testId:"git-pull-button",onClick:L,className:Ss,children:u.jsx(mt,{icon:u.jsx(mn,{width:16,height:16}),text:h(K.COMMON$GIT_PULL),className:Be})}),u.jsx(Ue,{testId:"git-push-button",onClick:D,className:Ss,children:u.jsx(mt,{icon:u.jsx(_n,{width:16,height:16}),text:h(K.COMMON$GIT_PUSH),className:Be})}),u.jsx(Ue,{testId:"create-pr-button",onClick:o,className:Ss,children:u.jsx(mt,{icon:u.jsx(gn,{width:16,height:16}),text:h(K.COMMON$CREATE_PR),className:Be})}),u.jsx(Ue,{testId:"create-new-branch-button",onClick:i,className:Ss,children:u.jsx(mt,{icon:u.jsx(Br,{width:16,height:16}),text:h(K.COMMON$CREATE_NEW_BRANCH),className:Be})})]})}const vn=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:25,viewBox:"0 0 24 25",fill:"none",...e},B.createElement("path",{d:"M15.29 10.79L12.51 13.57C12.3436 13.5257 12.1723 13.5022 12 13.5C11.4696 13.5 10.9609 13.7107 10.5858 14.0858C10.2107 14.4609 10 14.9696 10 15.5C10.0023 15.6722 10.0258 15.8435 10.07 16.01L9.29003 16.79C9.1963 16.883 9.12191 16.9936 9.07114 17.1154C9.02037 17.2373 8.99423 17.368 8.99423 17.5C8.99423 17.632 9.02037 17.7627 9.07114 17.8846C9.12191 18.0064 9.1963 18.117 9.29003 18.21C9.38299 18.3037 9.49359 18.3781 9.61545 18.4289C9.73731 18.4797 9.86802 18.5058 10 18.5058C10.132 18.5058 10.2627 18.4797 10.3846 18.4289C10.5065 18.3781 10.6171 18.3037 10.71 18.21L11.49 17.43C11.6565 17.4743 11.8278 17.4978 12 17.5C12.5305 17.5 13.0392 17.2893 13.4142 16.9142C13.7893 16.5391 14 16.0304 14 15.5C13.9978 15.3278 13.9743 15.1565 13.93 14.99L16.71 12.21C16.8983 12.0217 17.0041 11.7663 17.0041 11.5C17.0041 11.2337 16.8983 10.9783 16.71 10.79C16.5217 10.6017 16.2663 10.4959 16 10.4959C15.7337 10.4959 15.4783 10.6017 15.29 10.79ZM12 4.5C10.6868 4.5 9.38645 4.75866 8.1732 5.2612C6.95994 5.76375 5.85755 6.50035 4.92896 7.42893C3.0536 9.3043 2.00003 11.8478 2.00003 14.5C1.99511 16.4806 2.58375 18.4172 3.69003 20.06C3.83855 20.2801 4.06844 20.4322 4.32911 20.4829C4.58979 20.5335 4.8599 20.4785 5.08003 20.33C5.30016 20.1815 5.45227 19.9516 5.50291 19.6909C5.55354 19.4302 5.49855 19.1601 5.35003 18.94C4.54455 17.7355 4.08131 16.3349 4.00978 14.8877C3.93826 13.4405 4.26113 12.001 4.94392 10.723C5.62671 9.44501 6.64378 8.37643 7.88653 7.63139C9.12928 6.88634 10.5511 6.49281 12 6.49281C13.449 6.49281 14.8708 6.88634 16.1135 7.63139C17.3563 8.37643 18.3734 9.44501 19.0561 10.723C19.7389 12.001 20.0618 13.4405 19.9903 14.8877C19.9188 16.3349 19.4555 17.7355 18.65 18.94C18.5763 19.0489 18.5248 19.1714 18.4985 19.3002C18.4722 19.4291 18.4716 19.5619 18.4966 19.691C18.5217 19.8201 18.572 19.943 18.6447 20.0527C18.7173 20.1623 18.8109 20.2566 18.92 20.33C19.0856 20.4412 19.2806 20.5004 19.48 20.5C19.6438 20.5002 19.8052 20.4603 19.9499 20.3835C20.0946 20.3068 20.2183 20.1957 20.31 20.06C21.4163 18.4172 22.005 16.4806 22 14.5C22 11.8478 20.9465 9.3043 19.0711 7.42893C17.1957 5.55357 14.6522 4.5 12 4.5Z",fill:"currentColor"})),Cn=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 20 21",fill:"none",...e},B.createElement("path",{d:"M15.9532 15.8037C16.7679 15.8037 17.4304 16.4662 17.4304 17.2809C17.4304 18.0955 16.7679 18.758 15.9532 18.758C15.1385 18.758 14.4761 18.0955 14.4761 17.2809C14.4761 16.4662 15.1385 15.8037 15.9532 15.8037ZM15.9532 14.0132C14.1538 14.0132 12.6855 15.4814 12.6855 17.2809C12.6855 19.0803 14.1538 20.5485 15.9532 20.5485C17.7527 20.5485 19.2209 19.0803 19.2209 17.2809C19.2209 15.4814 17.7527 14.0132 15.9532 14.0132Z",fill:"currentColor"}),B.createElement("path",{d:"M3.51768 15.8037C4.33236 15.8037 4.99485 16.4662 4.99485 17.2809C4.99485 18.0955 4.33236 18.758 3.51768 18.758C2.703 18.758 2.04051 18.0955 2.04051 17.2809C2.04051 16.4662 2.703 15.8037 3.51768 15.8037ZM3.51768 14.0132C1.71822 14.0132 0.25 15.4814 0.25 17.2809C0.25 19.0803 1.71822 20.5485 3.51768 20.5485C5.31714 20.5485 6.78536 19.0803 6.78536 17.2809C6.78536 15.4814 5.31714 14.0132 3.51768 14.0132Z",fill:"currentColor"}),B.createElement("path",{d:"M3.51768 2.59862C4.33236 2.59862 4.99485 3.2611 4.99485 4.07579C4.99485 4.89047 4.33236 5.55296 3.51768 5.55296C2.703 5.55296 2.04051 4.89047 2.04051 4.07579C2.04051 3.2611 2.703 2.59862 3.51768 2.59862ZM3.51768 0.808105C1.71822 0.808105 0.25 2.27632 0.25 4.07579C0.25 5.87525 1.71822 7.34347 3.51768 7.34347C5.31714 7.34347 6.78536 5.87525 6.78536 4.07579C6.78536 2.27632 5.31714 0.808105 3.51768 0.808105Z",fill:"currentColor"}),B.createElement("path",{d:"M3.51758 14.1295V6.52881",stroke:"currentColor",strokeWidth:2,strokeMiterlimit:10}),B.createElement("path",{d:"M15.9523 14.1294V6.17058C15.9523 5.0157 15.0123 4.07568 13.8574 4.07568H11.9863",stroke:"currentColor",strokeWidth:2,strokeMiterlimit:10}),B.createElement("path",{d:"M11.9863 7.6119L8.45898 4.07565L11.9863 0.54834V7.6119Z",fill:"currentColor"})),bn=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",...e},B.createElement("path",{d:"M4 4C4 2.89543 4.89543 2 6 2H14C14.2652 2 14.5196 2.10536 14.7071 2.29289L19.7071 7.29289C19.8946 7.48043 20 7.73478 20 8V20C20 21.1046 19.1046 22 18 22H6C4.89543 22 4 21.1046 4 20V4ZM17.5858 8L14 4.41421V8H17.5858ZM12 4L6 4V20H18V10H13C12.4477 10 12 9.55228 12 9V4ZM8 13C8 12.4477 8.44772 12 9 12H15C15.5523 12 16 12.4477 16 13C16 13.5523 15.5523 14 15 14H9C8.44772 14 8 13.5523 8 13ZM8 17C8 16.4477 8.44772 16 9 16H15C15.5523 16 16 16.4477 16 17C16 17.5523 15.5523 18 15 18H9C8.44772 18 8 17.5523 8 17Z",fill:"currentColor"})),Sn=e=>B.createElement("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B.createElement("path",{d:"M2.71996 7.64998C2.91552 7.7074 3.10351 7.78797 3.27996 7.88998C3.89978 8.25991 4.60814 8.45523 5.32996 8.45523C6.05178 8.45523 6.76015 8.25991 7.37996 7.88998C7.77042 7.66914 8.21137 7.55307 8.65996 7.55307C9.10855 7.55307 9.5495 7.66914 9.93996 7.88998C10.5673 8.24867 11.2773 8.43735 12 8.43735C12.7226 8.43735 13.4327 8.24867 14.06 7.88998C14.4504 7.66914 14.8914 7.55307 15.34 7.55307C15.7885 7.55307 16.2295 7.66914 16.62 7.88998C17.2537 8.25217 17.97 8.44503 18.7 8.44998C19.4051 8.44852 20.0966 8.25492 20.7 7.88998C20.8764 7.78797 21.0644 7.7074 21.26 7.64998C21.5146 7.57572 21.7292 7.40336 21.8568 7.17081C21.9843 6.93827 22.0142 6.66459 21.94 6.40998C21.8657 6.15537 21.6933 5.94069 21.4608 5.81317C21.2282 5.68564 20.9546 5.65572 20.7 5.72998C20.3494 5.83818 20.0135 5.98932 19.7 6.17998C19.3814 6.36627 19.019 6.46446 18.65 6.46446C18.2809 6.46446 17.9185 6.36627 17.6 6.17998C16.9066 5.79105 16.1249 5.58679 15.33 5.58679C14.535 5.58679 13.7533 5.79105 13.06 6.17998C12.738 6.36703 12.3723 6.46556 12 6.46556C11.6276 6.46556 11.2619 6.36703 10.94 6.17998C10.2466 5.79105 9.46495 5.58679 8.66996 5.58679C7.87497 5.58679 7.09332 5.79105 6.39996 6.17998C6.08139 6.36627 5.719 6.46446 5.34996 6.46446C4.98092 6.46446 4.61853 6.36627 4.29996 6.17998C3.98645 5.98932 3.65057 5.83818 3.29996 5.72998C3.04535 5.65572 2.77167 5.68564 2.53913 5.81317C2.30658 5.94069 2.13422 6.15537 2.05996 6.40998C1.9857 6.66459 2.01562 6.93827 2.14315 7.17081C2.27067 7.40336 2.48535 7.57572 2.73996 7.64998H2.71996ZM20.72 15.73C20.3694 15.8382 20.0335 15.9893 19.72 16.18C19.4014 16.3663 19.039 16.4645 18.67 16.4645C18.3009 16.4645 17.9385 16.3663 17.62 16.18C16.9266 15.7911 16.1449 15.5868 15.35 15.5868C14.555 15.5868 13.7733 15.7911 13.08 16.18C12.758 16.367 12.3923 16.4656 12.02 16.4656C11.6476 16.4656 11.2819 16.367 10.96 16.18C10.2666 15.7911 9.48495 15.5868 8.68996 15.5868C7.89497 15.5868 7.11332 15.7911 6.41996 16.18C6.10139 16.3663 5.739 16.4645 5.36996 16.4645C5.00092 16.4645 4.63853 16.3663 4.31996 16.18C4.00645 15.9893 3.67057 15.8382 3.31996 15.73C3.19389 15.6932 3.06182 15.6816 2.93127 15.6959C2.80073 15.7102 2.67427 15.75 2.55913 15.8132C2.44398 15.8763 2.3424 15.9615 2.26019 16.0639C2.17797 16.1663 2.11673 16.2839 2.07996 16.41C2.04319 16.536 2.03161 16.6681 2.04589 16.7987C2.06016 16.9292 2.1 17.0557 2.16315 17.1708C2.22629 17.286 2.3115 17.3875 2.4139 17.4698C2.5163 17.552 2.63389 17.6132 2.75996 17.65C2.95552 17.7074 3.14351 17.788 3.31996 17.89C3.93978 18.2599 4.64814 18.4552 5.36996 18.4552C6.09178 18.4552 6.80015 18.2599 7.41996 17.89C7.81042 17.6691 8.25137 17.5531 8.69996 17.5531C9.14855 17.5531 9.5895 17.6691 9.97996 17.89C10.6073 18.2487 11.3173 18.4374 12.04 18.4374C12.7626 18.4374 13.4727 18.2487 14.1 17.89C14.4904 17.6691 14.9314 17.5531 15.38 17.5531C15.8285 17.5531 16.2695 17.6691 16.66 17.89C17.2937 18.2522 18.01 18.445 18.74 18.45C19.4451 18.4485 20.1366 18.2549 20.74 17.89C20.9164 17.788 21.1044 17.7074 21.3 17.65C21.5546 17.5757 21.7692 17.4034 21.8968 17.1708C22.0243 16.9383 22.0542 16.6646 21.98 16.41C21.9057 16.1554 21.7333 15.9407 21.5008 15.8132C21.2682 15.6856 20.9946 15.6557 20.74 15.73H20.72ZM20.72 10.73C20.3694 10.8382 20.0335 10.9893 19.72 11.18C19.4014 11.3663 19.039 11.4645 18.67 11.4645C18.3009 11.4645 17.9385 11.3663 17.62 11.18C16.9266 10.7911 16.1449 10.5868 15.35 10.5868C14.555 10.5868 13.7733 10.7911 13.08 11.18C12.758 11.367 12.3923 11.4656 12.02 11.4656C11.6476 11.4656 11.2819 11.367 10.96 11.18C10.2666 10.7911 9.48495 10.5868 8.68996 10.5868C7.89497 10.5868 7.11332 10.7911 6.41996 11.18C6.10139 11.3663 5.739 11.4645 5.36996 11.4645C5.00092 11.4645 4.63853 11.3663 4.31996 11.18C4.00645 10.9893 3.67057 10.8382 3.31996 10.73C3.18902 10.6805 3.04917 10.6591 2.90944 10.6672C2.76971 10.6752 2.63322 10.7125 2.5088 10.7766C2.38438 10.8406 2.2748 10.9301 2.18715 11.0393C2.0995 11.1484 2.03573 11.2747 1.99996 11.41C1.96319 11.536 1.95161 11.6681 1.96589 11.7987C1.98016 11.9292 2.02 12.0557 2.08315 12.1708C2.14629 12.286 2.2315 12.3875 2.3339 12.4698C2.4363 12.552 2.55389 12.6132 2.67996 12.65C2.87552 12.7074 3.06351 12.788 3.23996 12.89C3.85978 13.2599 4.56814 13.4552 5.28996 13.4552C6.01178 13.4552 6.72015 13.2599 7.33996 12.89C7.73042 12.6691 8.17137 12.5531 8.61996 12.5531C9.06855 12.5531 9.5095 12.6691 9.89996 12.89C10.5273 13.2487 11.2373 13.4374 11.96 13.4374C12.6826 13.4374 13.3927 13.2487 14.02 12.89C14.4104 12.6691 14.8514 12.5531 15.3 12.5531C15.7485 12.5531 16.1895 12.6691 16.58 12.89C17.2137 13.2522 17.93 13.445 18.66 13.45C19.3651 13.4485 20.0566 13.2549 20.66 12.89C20.8364 12.788 21.0244 12.7074 21.22 12.65C21.4746 12.5757 21.6892 12.4034 21.8168 12.1708C21.9443 11.9383 21.9742 11.6646 21.9 11.41C21.8257 11.1554 21.6533 10.9407 21.4208 10.8132C21.1882 10.6856 20.9146 10.6557 20.66 10.73H20.72Z",fill:"currentColor"})),Uc="INCREASE_TEST_COVERAGE",Wc=`I want to increase the test coverage of the repository in the current directory.

Please investigate the repo to figure out what language is being used, and where tests are located, if there are any.

If there are no tests already in the repo, add a very basic test, using typical testing strategies for the language involved.

If there are existing tests, find a function or method which lacks adequate unit tests, and add unit tests for it. Be sure to respect the projects existing test structures.

Make sure the tests pass before you finish.`,Vc="AUTO_MERGE_PRS",zc="Please add a GitHub action to this repository which automatically merges pull requests from Dependabot so long as the tests are passing.",Gc="FIX_README",Kc=`Please look at the README and make the following improvements, if they make sense:
* correct any typos that you find
* add missing language annotations on codeblocks
* if there are references to other files or other sections of the README, turn them into links
* make sure the readme has an h1 title towards the top
* make sure any existing sections in the readme are appropriately separated with headings

If there are no obvious ways to improve the README, make at least one small change to make the wording clearer or friendlier`,qc="CLEAN_DEPENDENCIES",Zc=`Examine the dependencies of the current codebase. Make sure you can run the code and any tests.

Then run any commands necessary to update all dependencies to the latest versions, and make sure the code continues to run correctly and the tests pass. If changes need to be made to the codebase, go ahead and make those changes. You can look up documentation for new versions using the browser if you need to.

If a particular dependency update is causing trouble (e.g. breaking changes that you can't fix), you can revert it and send a message to the user explaining why.

Additionally, if you're able to prune any dependencies that are obviously unused, please do so. You may use third party tools to check for unused dependencies.`,Yc="ADD_DOCS",Jc="Investigate the documentation in the root of the current repo. Please add a CODE_OF_CONDUCT.md and CONTRIBUTORS.md with good defaults if they are not present. Use information in the README to inform the CONTRIBUTORS doc. If there is no LICENSE currently in the repo, please add the Apache 2.0 license. Add links to all these documents into the README",Xc="ADD_DOCKERFILE",Qc=`Investigate the current repo to understand the installation instructions. Then create a Dockerfile that runs the application, using best practices like arguments and multi-stage builds wherever appropriate.

If there is an existing Dockerfile, and there are ways to improve it according to best practices, do so.`,ls={[Uc]:Wc,[Vc]:zc,[Gc]:Kc,[qc]:Zc,[Yc]:Jc,[Xc]:Qc},ys="cursor-pointer p-0 h-auto hover:bg-transparent !w-auto whitespace-nowrap";function e1({onClose:e}){const{t:h}=me(),{setMessageToSend:g}=ot(),y=()=>{g(ls.INCREASE_TEST_COVERAGE),e()},x=()=>{g(ls.FIX_README),e()},L=()=>{g(ls.AUTO_MERGE_PRS),e()},D=()=>{g(ls.CLEAN_DEPENDENCIES),e()};return u.jsxs(ds,{testId:"macros-submenu",className:"overflow-visible",children:[u.jsx(Ue,{testId:"increase-test-coverage-button",onClick:y,className:ys,children:u.jsx(mt,{icon:u.jsx(vn,{width:16,height:16}),text:h(K.INCREASE_TEST_COVERAGE),className:Be})}),u.jsx(Ue,{testId:"fix-readme-button",onClick:x,className:ys,children:u.jsx(mt,{icon:u.jsx(bn,{width:16,height:16}),text:h(K.FIX_README),className:Be})}),u.jsx(Ue,{testId:"auto-merge-prs-button",onClick:L,className:ys,children:u.jsx(mt,{icon:u.jsx(Cn,{width:16,height:16}),text:h(K.AUTO_MERGE_PRS),className:Be})}),u.jsx(Ue,{testId:"clean-dependencies-button",onClick:D,className:ys,children:u.jsx(mt,{icon:u.jsx(Sn,{width:16,height:16}),text:h(K.CLEAN_DEPENDENCIES),className:Be})})]})}const ws=we("cursor-pointer p-0 h-auto hover:bg-transparent",Be);function t1({onClose:e,onShowMicroagents:h,onShowAgentTools:g,shouldShowAgentTools:y=!0}){const{t:x}=me(),{data:L}=Ie(),{providers:D}=ss(),o=L?.conversation_version==="V1",[i,d]=B.useState(null),v=!!L?.selected_repository,c=D.length>0,_=v&&c,C=l=>{d(i===l?null:l)},S=()=>{d(null),e()},m=Pr(S);return u.jsxs(ds,{ref:m,testId:"tools-context-menu",position:"top",alignment:"left",className:"left-[-16px] mb-2 bottom-full overflow-visible min-w-[200px]",children:[_&&u.jsxs("div",{className:"relative group/git",children:[u.jsx(Ue,{testId:"git-tools-button",onClick:()=>C("git"),className:ws,children:u.jsx(mt,{icon:u.jsx(Br,{width:16,height:16}),text:x(K.COMMON$GIT_TOOLS),rightIcon:u.jsx(bi,{width:10,height:10}),className:Be})}),u.jsx("div",{className:we("absolute left-full top-[-6px] z-60 opacity-0 invisible pointer-events-none transition-all duration-200 ml-[1px]","group-hover/git:opacity-100 group-hover/git:visible group-hover/git:pointer-events-auto","hover:opacity-100 hover:visible hover:pointer-events-auto",i==="git"&&"opacity-100 visible pointer-events-auto"),children:u.jsx($c,{onClose:S})})]}),u.jsxs("div",{className:"relative group/macros",children:[u.jsx(Ue,{testId:"macros-button",onClick:()=>C("macros"),className:ws,children:u.jsx(mt,{icon:u.jsx(Hc,{width:16,height:16}),text:x(K.COMMON$MACROS),rightIcon:u.jsx(bi,{width:10,height:10}),className:Be})}),u.jsx("div",{className:we("absolute left-full top-[-4px] z-60 opacity-0 invisible pointer-events-none transition-all duration-200 ml-[1px]","group-hover/macros:opacity-100 group-hover/macros:visible group-hover/macros:pointer-events-auto","hover:opacity-100 hover:visible hover:pointer-events-auto",i==="macros"&&"opacity-100 visible pointer-events-auto"),children:u.jsx(e1,{onClose:S})})]}),(!o||y)&&u.jsx(xs,{}),!o&&u.jsx(Ue,{testId:"show-microagents-button",onClick:h,className:ws,children:u.jsx(mt,{icon:u.jsx($i,{width:16,height:16}),text:x(K.CONVERSATION$SHOW_MICROAGENTS),className:Be})}),y&&u.jsx(Ue,{testId:"show-agent-tools-button",onClick:g,className:ws,children:u.jsx(mt,{icon:u.jsx(Ui,{width:16,height:16}),text:x(K.BUTTON$SHOW_AGENT_TOOLS_AND_METADATA),className:Be})})]})}const s1=()=>Lt({mutationFn:e=>vt.getTrajectory(e)}),Si=(e,h)=>{const g=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),y=URL.createObjectURL(g),x=document.createElement("a");x.href=y,x.download=h,document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(y)};function r1(){return typeof window<"u"&&"showSaveFilePicker"in window}async function i1(e,h){const g=h||{};if(!r1()){Si(g,`trajectory-${e}.json`);return}try{const y={suggestedName:`trajectory-${e}.json`,types:[{description:"JSON File",accept:{"application/json":[".json"]}}]},L=await(await window.showSaveFilePicker(y)).createWritable();await L.write(JSON.stringify(h,null,2)),await L.close()}catch(y){y instanceof Error&&y.name!=="AbortError"&&Si(g,`trajectory-${e}.json`)}}function yn({conversationId:e,conversationStatus:h="STOPPED",showOptions:g=!1,onContextMenuToggle:y}){const{t:x}=me(),{conversationId:L}=Is(),D=wr(),o=Kt(U=>U.events),{mutate:i}=Yo(),{mutate:d}=Wi(),{mutate:v}=s1(),c=Ii(),[_,C]=pe.useState(!1),[S,m]=pe.useState(!1),[l,r]=pe.useState(!1),[t,s]=pe.useState(!1),[n,p]=pe.useState(!1),a=o.filter(Ts).filter(Ms).find(Mo);return{handleDelete:U=>{U.preventDefault(),U.stopPropagation(),s(!0),y?.(!1)},handleStop:U=>{U.preventDefault(),U.stopPropagation(),p(!0),y?.(!1)},handleEdit:U=>{U.preventDefault(),U.stopPropagation(),y?.(!1)},handleExportConversation:U=>{if(U.preventDefault(),U.stopPropagation(),!e){Ye(x(K.CONVERSATION$DOWNLOAD_ERROR));return}v(e,{onSuccess:async se=>{await i1(e??x(K.CONVERSATION$UNKNOWN),se.trajectory)},onError:()=>{Ye(x(K.CONVERSATION$DOWNLOAD_ERROR))}}),y?.(!1)},handleDownloadViaVSCode:async U=>{if(U.preventDefault(),U.stopPropagation(),Qt.capture("download_via_vscode_button_clicked"),e)try{const se=await vt.getVSCodeUrl(e);if(se.vscode_url){const T=Vi(se.vscode_url);T&&window.open(T,"_blank")}}catch{}y?.(!1)},handleDisplayCost:U=>{U.stopPropagation(),C(!0),y?.(!1)},handleShowAgentTools:U=>{U.stopPropagation(),m(!0),y?.(!1)},handleShowMicroagents:U=>{U.stopPropagation(),r(!0),y?.(!1)},handleConfirmDelete:()=>{e&&i({conversationId:e},{onSuccess:()=>{e===L&&D("/")}}),s(!1)},handleConfirmStop:()=>{e&&d({conversationId:e}),p(!1)},metricsModalVisible:_,setMetricsModalVisible:C,systemModalVisible:S,setSystemModalVisible:m,microagentsModalVisible:l,setMicroagentsModalVisible:r,confirmDeleteModalVisible:t,setConfirmDeleteModalVisible:s,confirmStopModalVisible:n,setConfirmStopModalVisible:p,metrics:c,systemMessage:a,shouldShowStop:h!=="STOPPED",shouldShowDownload:!!(e&&g),shouldShowExport:!!(e&&g),shouldShowDisplayCost:g,shouldShowAgentTools:!!(g&&a),shouldShowMicroagents:!!(g&&e)}}function n1({agentClass:e,openhandsVersion:h}){const{t:g}=me();return u.jsxs("div",{className:"flex flex-col gap-6 w-full",children:[u.jsx(Ur,{title:g("SYSTEM_MESSAGE_MODAL$TITLE")}),u.jsxs("div",{className:"flex flex-col gap-2",children:[e&&u.jsxs("div",{className:"text-sm",children:[u.jsx(Le.Text,{className:"font-semibold text-gray-300",children:g("SYSTEM_MESSAGE_MODAL$AGENT_CLASS")})," ",u.jsx(Le.Text,{className:"font-medium text-gray-100",children:e})]}),h&&u.jsxs("div",{className:"text-sm",children:[u.jsx(Le.Text,{className:"font-semibold text-gray-300",children:g("SYSTEM_MESSAGE_MODAL$OPENHANDS_VERSION")})," ",u.jsx(Le.Text,{className:"text-gray-100",children:h})]})]})]})}function yi({isActive:e,children:h,onClick:g,className:y,disabled:x=!1}){return u.jsx("button",{type:"button",disabled:x,className:we("px-4 py-2 font-medium border-b-2 transition-colors",e?"border-primary text-gray-100":"border-transparent hover:text-gray-700 dark:hover:text-gray-300",x&&"opacity-50 cursor-not-allowed",y),onClick:g,"aria-selected":e,role:"tab",children:h})}function o1({activeTab:e,onTabChange:h,hasTools:g}){const{t:y}=me();return u.jsxs("div",{className:"flex border-b mb-2",role:"tablist",children:[u.jsx(yi,{isActive:e==="system",onClick:()=>h("system"),children:y("SYSTEM_MESSAGE_MODAL$SYSTEM_MESSAGE_TAB")}),g&&u.jsx(yi,{isActive:e==="tools",onClick:()=>h("tools"),children:y("SYSTEM_MESSAGE_MODAL$TOOLS_TAB")})]})}function a1({content:e}){return u.jsx("div",{className:"p-4 shadow-inner",children:u.jsx(Le.CodeBlock,{children:e})})}var Es={exports:{}},l1=Es.exports,wi;function c1(){return wi||(wi=1,(function(e,h){(function(g,y){e.exports=y(mo())})(l1,(g=>(()=>{var y={9735:(o,i)=>{i.__esModule=!0,i.default={scheme:"apathy",author:"jannik siebert (https://github.com/janniks)",base00:"#031A16",base01:"#0B342D",base02:"#184E45",base03:"#2B685E",base04:"#5F9C92",base05:"#81B5AC",base06:"#A7CEC8",base07:"#D2E7E4",base08:"#3E9688",base09:"#3E7996",base0A:"#3E4C96",base0B:"#883E96",base0C:"#963E4C",base0D:"#96883E",base0E:"#4C963E",base0F:"#3E965B"},o.exports=i.default},294:(o,i)=>{i.__esModule=!0,i.default={scheme:"ashes",author:"jannik siebert (https://github.com/janniks)",base00:"#1C2023",base01:"#393F45",base02:"#565E65",base03:"#747C84",base04:"#ADB3BA",base05:"#C7CCD1",base06:"#DFE2E5",base07:"#F3F4F5",base08:"#C7AE95",base09:"#C7C795",base0A:"#AEC795",base0B:"#95C7AE",base0C:"#95AEC7",base0D:"#AE95C7",base0E:"#C795AE",base0F:"#C79595"},o.exports=i.default},1733:(o,i)=>{i.__esModule=!0,i.default={scheme:"atelier dune",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/dune)",base00:"#20201d",base01:"#292824",base02:"#6e6b5e",base03:"#7d7a68",base04:"#999580",base05:"#a6a28c",base06:"#e8e4cf",base07:"#fefbec",base08:"#d73737",base09:"#b65611",base0A:"#cfb017",base0B:"#60ac39",base0C:"#1fad83",base0D:"#6684e1",base0E:"#b854d4",base0F:"#d43552"},o.exports=i.default},8974:(o,i)=>{i.__esModule=!0,i.default={scheme:"atelier forest",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/forest)",base00:"#1b1918",base01:"#2c2421",base02:"#68615e",base03:"#766e6b",base04:"#9c9491",base05:"#a8a19f",base06:"#e6e2e0",base07:"#f1efee",base08:"#f22c40",base09:"#df5320",base0A:"#d5911a",base0B:"#5ab738",base0C:"#00ad9c",base0D:"#407ee7",base0E:"#6666ea",base0F:"#c33ff3"},o.exports=i.default},6933:(o,i)=>{i.__esModule=!0,i.default={scheme:"atelier heath",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/heath)",base00:"#1b181b",base01:"#292329",base02:"#695d69",base03:"#776977",base04:"#9e8f9e",base05:"#ab9bab",base06:"#d8cad8",base07:"#f7f3f7",base08:"#ca402b",base09:"#a65926",base0A:"#bb8a35",base0B:"#379a37",base0C:"#159393",base0D:"#516aec",base0E:"#7b59c0",base0F:"#cc33cc"},o.exports=i.default},523:(o,i)=>{i.__esModule=!0,i.default={scheme:"atelier lakeside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/lakeside/)",base00:"#161b1d",base01:"#1f292e",base02:"#516d7b",base03:"#5a7b8c",base04:"#7195a8",base05:"#7ea2b4",base06:"#c1e4f6",base07:"#ebf8ff",base08:"#d22d72",base09:"#935c25",base0A:"#8a8a0f",base0B:"#568c3b",base0C:"#2d8f6f",base0D:"#257fad",base0E:"#5d5db1",base0F:"#b72dd2"},o.exports=i.default},1223:(o,i)=>{i.__esModule=!0,i.default={scheme:"atelier seaside",author:"bram de haan (http://atelierbram.github.io/syntax-highlighting/atelier-schemes/seaside/)",base00:"#131513",base01:"#242924",base02:"#5e6e5e",base03:"#687d68",base04:"#809980",base05:"#8ca68c",base06:"#cfe8cf",base07:"#f0fff0",base08:"#e6193c",base09:"#87711d",base0A:"#c3c322",base0B:"#29a329",base0C:"#1999b3",base0D:"#3d62f5",base0E:"#ad2bee",base0F:"#e619c3"},o.exports=i.default},1233:(o,i)=>{i.__esModule=!0,i.default={scheme:"bespin",author:"jan t. sott",base00:"#28211c",base01:"#36312e",base02:"#5e5d5c",base03:"#666666",base04:"#797977",base05:"#8a8986",base06:"#9d9b97",base07:"#baae9e",base08:"#cf6a4c",base09:"#cf7d34",base0A:"#f9ee98",base0B:"#54be0d",base0C:"#afc4db",base0D:"#5ea6ea",base0E:"#9b859d",base0F:"#937121"},o.exports=i.default},2847:(o,i)=>{i.__esModule=!0,i.default={scheme:"brewer",author:"timothe poisot (http://github.com/tpoisot)",base00:"#0c0d0e",base01:"#2e2f30",base02:"#515253",base03:"#737475",base04:"#959697",base05:"#b7b8b9",base06:"#dadbdc",base07:"#fcfdfe",base08:"#e31a1c",base09:"#e6550d",base0A:"#dca060",base0B:"#31a354",base0C:"#80b1d3",base0D:"#3182bd",base0E:"#756bb1",base0F:"#b15928"},o.exports=i.default},8120:(o,i)=>{i.__esModule=!0,i.default={scheme:"bright",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#303030",base02:"#505050",base03:"#b0b0b0",base04:"#d0d0d0",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ffffff",base08:"#fb0120",base09:"#fc6d24",base0A:"#fda331",base0B:"#a1c659",base0C:"#76c7b7",base0D:"#6fb3d2",base0E:"#d381c3",base0F:"#be643c"},o.exports=i.default},6305:(o,i)=>{i.__esModule=!0,i.default={scheme:"chalk",author:"chris kempson (http://chriskempson.com)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#f5f5f5",base08:"#fb9fb1",base09:"#eda987",base0A:"#ddb26f",base0B:"#acc267",base0C:"#12cfc0",base0D:"#6fc2ef",base0E:"#e1a3ee",base0F:"#deaf8f"},o.exports=i.default},525:(o,i)=>{i.__esModule=!0,i.default={scheme:"codeschool",author:"brettof86",base00:"#232c31",base01:"#1c3657",base02:"#2a343a",base03:"#3f4944",base04:"#84898c",base05:"#9ea7a6",base06:"#a7cfa3",base07:"#b5d8f6",base08:"#2a5491",base09:"#43820d",base0A:"#a03b1e",base0B:"#237986",base0C:"#b02f30",base0D:"#484d79",base0E:"#c59820",base0F:"#c98344"},o.exports=i.default},4124:(o,i)=>{i.__esModule=!0,i.default={scheme:"colors",author:"mrmrs (http://clrs.cc)",base00:"#111111",base01:"#333333",base02:"#555555",base03:"#777777",base04:"#999999",base05:"#bbbbbb",base06:"#dddddd",base07:"#ffffff",base08:"#ff4136",base09:"#ff851b",base0A:"#ffdc00",base0B:"#2ecc40",base0C:"#7fdbff",base0D:"#0074d9",base0E:"#b10dc9",base0F:"#85144b"},o.exports=i.default},7167:(o,i)=>{i.__esModule=!0,i.default={scheme:"default",author:"chris kempson (http://chriskempson.com)",base00:"#181818",base01:"#282828",base02:"#383838",base03:"#585858",base04:"#b8b8b8",base05:"#d8d8d8",base06:"#e8e8e8",base07:"#f8f8f8",base08:"#ab4642",base09:"#dc9656",base0A:"#f7ca88",base0B:"#a1b56c",base0C:"#86c1b9",base0D:"#7cafc2",base0E:"#ba8baf",base0F:"#a16946"},o.exports=i.default},4582:(o,i)=>{i.__esModule=!0,i.default={scheme:"eighties",author:"chris kempson (http://chriskempson.com)",base00:"#2d2d2d",base01:"#393939",base02:"#515151",base03:"#747369",base04:"#a09f93",base05:"#d3d0c8",base06:"#e8e6df",base07:"#f2f0ec",base08:"#f2777a",base09:"#f99157",base0A:"#ffcc66",base0B:"#99cc99",base0C:"#66cccc",base0D:"#6699cc",base0E:"#cc99cc",base0F:"#d27b53"},o.exports=i.default},7096:(o,i)=>{i.__esModule=!0,i.default={scheme:"embers",author:"jannik siebert (https://github.com/janniks)",base00:"#16130F",base01:"#2C2620",base02:"#433B32",base03:"#5A5047",base04:"#8A8075",base05:"#A39A90",base06:"#BEB6AE",base07:"#DBD6D1",base08:"#826D57",base09:"#828257",base0A:"#6D8257",base0B:"#57826D",base0C:"#576D82",base0D:"#6D5782",base0E:"#82576D",base0F:"#825757"},o.exports=i.default},9887:(o,i)=>{i.__esModule=!0,i.default={scheme:"flat",author:"chris kempson (http://chriskempson.com)",base00:"#2C3E50",base01:"#34495E",base02:"#7F8C8D",base03:"#95A5A6",base04:"#BDC3C7",base05:"#e0e0e0",base06:"#f5f5f5",base07:"#ECF0F1",base08:"#E74C3C",base09:"#E67E22",base0A:"#F1C40F",base0B:"#2ECC71",base0C:"#1ABC9C",base0D:"#3498DB",base0E:"#9B59B6",base0F:"#be643c"},o.exports=i.default},7199:(o,i)=>{i.__esModule=!0,i.default={scheme:"google",author:"seth wright (http://sethawright.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#CC342B",base09:"#F96A38",base0A:"#FBA922",base0B:"#198844",base0C:"#3971ED",base0D:"#3971ED",base0E:"#A36AC7",base0F:"#3971ED"},o.exports=i.default},1985:(o,i)=>{i.__esModule=!0,i.default={scheme:"grayscale",author:"alexandre gavioli (https://github.com/alexx2/)",base00:"#101010",base01:"#252525",base02:"#464646",base03:"#525252",base04:"#ababab",base05:"#b9b9b9",base06:"#e3e3e3",base07:"#f7f7f7",base08:"#7c7c7c",base09:"#999999",base0A:"#a0a0a0",base0B:"#8e8e8e",base0C:"#868686",base0D:"#686868",base0E:"#747474",base0F:"#5e5e5e"},o.exports=i.default},8093:(o,i)=>{i.__esModule=!0,i.default={scheme:"green screen",author:"chris kempson (http://chriskempson.com)",base00:"#001100",base01:"#003300",base02:"#005500",base03:"#007700",base04:"#009900",base05:"#00bb00",base06:"#00dd00",base07:"#00ff00",base08:"#007700",base09:"#009900",base0A:"#007700",base0B:"#00bb00",base0C:"#005500",base0D:"#009900",base0E:"#00bb00",base0F:"#005500"},o.exports=i.default},1615:(o,i)=>{i.__esModule=!0,i.default={scheme:"harmonic16",author:"jannik siebert (https://github.com/janniks)",base00:"#0b1c2c",base01:"#223b54",base02:"#405c79",base03:"#627e99",base04:"#aabcce",base05:"#cbd6e2",base06:"#e5ebf1",base07:"#f7f9fb",base08:"#bf8b56",base09:"#bfbf56",base0A:"#8bbf56",base0B:"#56bf8b",base0C:"#568bbf",base0D:"#8b56bf",base0E:"#bf568b",base0F:"#bf5656"},o.exports=i.default},9063:(o,i)=>{i.__esModule=!0,i.default={scheme:"hopscotch",author:"jan t. sott",base00:"#322931",base01:"#433b42",base02:"#5c545b",base03:"#797379",base04:"#989498",base05:"#b9b5b8",base06:"#d5d3d5",base07:"#ffffff",base08:"#dd464c",base09:"#fd8b19",base0A:"#fdcc59",base0B:"#8fc13e",base0C:"#149b93",base0D:"#1290bf",base0E:"#c85e7c",base0F:"#b33508"},o.exports=i.default},9446:(o,i,d)=>{function v(le){return le&&le.__esModule?le.default:le}i.__esModule=!0;var c=d(1308);i.threezerotwofour=v(c);var _=d(9735);i.apathy=v(_);var C=d(294);i.ashes=v(C);var S=d(1733);i.atelierDune=v(S);var m=d(8974);i.atelierForest=v(m);var l=d(6933);i.atelierHeath=v(l);var r=d(523);i.atelierLakeside=v(r);var t=d(1223);i.atelierSeaside=v(t);var s=d(1233);i.bespin=v(s);var n=d(2847);i.brewer=v(n);var p=d(8120);i.bright=v(p);var a=d(6305);i.chalk=v(a);var b=d(525);i.codeschool=v(b);var f=d(4124);i.colors=v(f);var w=d(7167);i.default=v(w);var M=d(4582);i.eighties=v(M);var N=d(7096);i.embers=v(N);var O=d(9887);i.flat=v(O);var I=d(7199);i.google=v(I);var z=d(1985);i.grayscale=v(z);var Y=d(8093);i.greenscreen=v(Y);var ne=d(1615);i.harmonic=v(ne);var U=d(9063);i.hopscotch=v(U);var se=d(9033);i.isotope=v(se);var T=d(4112);i.marrakesh=v(T);var P=d(9600);i.mocha=v(P);var F=d(1240);i.monokai=v(F);var W=d(9768);i.ocean=v(W);var Q=d(8293);i.paraiso=v(Q);var ce=d(3093);i.pop=v(ce);var ee=d(1951);i.railscasts=v(ee);var _e=d(6368);i.shapeshifter=v(_e);var V=d(2317);i.solarized=v(V);var j=d(1091);i.summerfruit=v(j);var J=d(6943);i.tomorrow=v(J);var re=d(5670);i.tube=v(re);var he=d(2536);i.twilight=v(he)},9033:(o,i)=>{i.__esModule=!0,i.default={scheme:"isotope",author:"jan t. sott",base00:"#000000",base01:"#404040",base02:"#606060",base03:"#808080",base04:"#c0c0c0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#ff0000",base09:"#ff9900",base0A:"#ff0099",base0B:"#33ff00",base0C:"#00ffff",base0D:"#0066ff",base0E:"#cc00ff",base0F:"#3300ff"},o.exports=i.default},4112:(o,i)=>{i.__esModule=!0,i.default={scheme:"marrakesh",author:"alexandre gavioli (http://github.com/alexx2/)",base00:"#201602",base01:"#302e00",base02:"#5f5b17",base03:"#6c6823",base04:"#86813b",base05:"#948e48",base06:"#ccc37a",base07:"#faf0a5",base08:"#c35359",base09:"#b36144",base0A:"#a88339",base0B:"#18974e",base0C:"#75a738",base0D:"#477ca1",base0E:"#8868b3",base0F:"#b3588e"},o.exports=i.default},9600:(o,i)=>{i.__esModule=!0,i.default={scheme:"mocha",author:"chris kempson (http://chriskempson.com)",base00:"#3B3228",base01:"#534636",base02:"#645240",base03:"#7e705a",base04:"#b8afad",base05:"#d0c8c6",base06:"#e9e1dd",base07:"#f5eeeb",base08:"#cb6077",base09:"#d28b71",base0A:"#f4bc87",base0B:"#beb55b",base0C:"#7bbda4",base0D:"#8ab3b5",base0E:"#a89bb9",base0F:"#bb9584"},o.exports=i.default},1240:(o,i)=>{i.__esModule=!0,i.default={scheme:"monokai",author:"wimer hazenberg (http://www.monokai.nl)",base00:"#272822",base01:"#383830",base02:"#49483e",base03:"#75715e",base04:"#a59f85",base05:"#f8f8f2",base06:"#f5f4f1",base07:"#f9f8f5",base08:"#f92672",base09:"#fd971f",base0A:"#f4bf75",base0B:"#a6e22e",base0C:"#a1efe4",base0D:"#66d9ef",base0E:"#ae81ff",base0F:"#cc6633"},o.exports=i.default},9768:(o,i)=>{i.__esModule=!0,i.default={scheme:"ocean",author:"chris kempson (http://chriskempson.com)",base00:"#2b303b",base01:"#343d46",base02:"#4f5b66",base03:"#65737e",base04:"#a7adba",base05:"#c0c5ce",base06:"#dfe1e8",base07:"#eff1f5",base08:"#bf616a",base09:"#d08770",base0A:"#ebcb8b",base0B:"#a3be8c",base0C:"#96b5b4",base0D:"#8fa1b3",base0E:"#b48ead",base0F:"#ab7967"},o.exports=i.default},8293:(o,i)=>{i.__esModule=!0,i.default={scheme:"paraiso",author:"jan t. sott",base00:"#2f1e2e",base01:"#41323f",base02:"#4f424c",base03:"#776e71",base04:"#8d8687",base05:"#a39e9b",base06:"#b9b6b0",base07:"#e7e9db",base08:"#ef6155",base09:"#f99b15",base0A:"#fec418",base0B:"#48b685",base0C:"#5bc4bf",base0D:"#06b6ef",base0E:"#815ba4",base0F:"#e96ba8"},o.exports=i.default},3093:(o,i)=>{i.__esModule=!0,i.default={scheme:"pop",author:"chris kempson (http://chriskempson.com)",base00:"#000000",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#b0b0b0",base05:"#d0d0d0",base06:"#e0e0e0",base07:"#ffffff",base08:"#eb008a",base09:"#f29333",base0A:"#f8ca12",base0B:"#37b349",base0C:"#00aabb",base0D:"#0e5a94",base0E:"#b31e8d",base0F:"#7a2d00"},o.exports=i.default},1951:(o,i)=>{i.__esModule=!0,i.default={scheme:"railscasts",author:"ryan bates (http://railscasts.com)",base00:"#2b2b2b",base01:"#272935",base02:"#3a4055",base03:"#5a647e",base04:"#d4cfc9",base05:"#e6e1dc",base06:"#f4f1ed",base07:"#f9f7f3",base08:"#da4939",base09:"#cc7833",base0A:"#ffc66d",base0B:"#a5c261",base0C:"#519f50",base0D:"#6d9cbe",base0E:"#b6b3eb",base0F:"#bc9458"},o.exports=i.default},6368:(o,i)=>{i.__esModule=!0,i.default={scheme:"shapeshifter",author:"tyler benziger (http://tybenz.com)",base00:"#000000",base01:"#040404",base02:"#102015",base03:"#343434",base04:"#555555",base05:"#ababab",base06:"#e0e0e0",base07:"#f9f9f9",base08:"#e92f2f",base09:"#e09448",base0A:"#dddd13",base0B:"#0ed839",base0C:"#23edda",base0D:"#3b48e3",base0E:"#f996e2",base0F:"#69542d"},o.exports=i.default},2317:(o,i)=>{i.__esModule=!0,i.default={scheme:"solarized",author:"ethan schoonover (http://ethanschoonover.com/solarized)",base00:"#002b36",base01:"#073642",base02:"#586e75",base03:"#657b83",base04:"#839496",base05:"#93a1a1",base06:"#eee8d5",base07:"#fdf6e3",base08:"#dc322f",base09:"#cb4b16",base0A:"#b58900",base0B:"#859900",base0C:"#2aa198",base0D:"#268bd2",base0E:"#6c71c4",base0F:"#d33682"},o.exports=i.default},1091:(o,i)=>{i.__esModule=!0,i.default={scheme:"summerfruit",author:"christopher corley (http://cscorley.github.io/)",base00:"#151515",base01:"#202020",base02:"#303030",base03:"#505050",base04:"#B0B0B0",base05:"#D0D0D0",base06:"#E0E0E0",base07:"#FFFFFF",base08:"#FF0086",base09:"#FD8900",base0A:"#ABA800",base0B:"#00C918",base0C:"#1faaaa",base0D:"#3777E6",base0E:"#AD00A1",base0F:"#cc6633"},o.exports=i.default},1308:(o,i)=>{i.__esModule=!0,i.default={scheme:"threezerotwofour",author:"jan t. sott (http://github.com/idleberg)",base00:"#090300",base01:"#3a3432",base02:"#4a4543",base03:"#5c5855",base04:"#807d7c",base05:"#a5a2a2",base06:"#d6d5d4",base07:"#f7f7f7",base08:"#db2d20",base09:"#e8bbd0",base0A:"#fded02",base0B:"#01a252",base0C:"#b5e4f4",base0D:"#01a0e4",base0E:"#a16a94",base0F:"#cdab53"},o.exports=i.default},6943:(o,i)=>{i.__esModule=!0,i.default={scheme:"tomorrow",author:"chris kempson (http://chriskempson.com)",base00:"#1d1f21",base01:"#282a2e",base02:"#373b41",base03:"#969896",base04:"#b4b7b4",base05:"#c5c8c6",base06:"#e0e0e0",base07:"#ffffff",base08:"#cc6666",base09:"#de935f",base0A:"#f0c674",base0B:"#b5bd68",base0C:"#8abeb7",base0D:"#81a2be",base0E:"#b294bb",base0F:"#a3685a"},o.exports=i.default},5670:(o,i)=>{i.__esModule=!0,i.default={scheme:"london tube",author:"jan t. sott",base00:"#231f20",base01:"#1c3f95",base02:"#5a5758",base03:"#737171",base04:"#959ca1",base05:"#d9d8d8",base06:"#e7e7e8",base07:"#ffffff",base08:"#ee2e24",base09:"#f386a1",base0A:"#ffd204",base0B:"#00853e",base0C:"#85cebc",base0D:"#009ddc",base0E:"#98005d",base0F:"#b06110"},o.exports=i.default},2536:(o,i)=>{i.__esModule=!0,i.default={scheme:"twilight",author:"david hart (http://hart-dev.com)",base00:"#1e1e1e",base01:"#323537",base02:"#464b50",base03:"#5f5a60",base04:"#838184",base05:"#a7a7a7",base06:"#c3c3c3",base07:"#ffffff",base08:"#cf6a4c",base09:"#cda869",base0A:"#f9ee98",base0B:"#8f9d6a",base0C:"#afc4db",base0D:"#7587a6",base0E:"#9b859d",base0F:"#9b703f"},o.exports=i.default},6481:(o,i,d)=>{var v=d(4176),c={};for(var _ in v)v.hasOwnProperty(_)&&(c[v[_]]=_);var C=o.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var S in C)if(C.hasOwnProperty(S)){if(!("channels"in C[S]))throw new Error("missing channels property: "+S);if(!("labels"in C[S]))throw new Error("missing channel labels property: "+S);if(C[S].labels.length!==C[S].channels)throw new Error("channel and label counts mismatch: "+S);var m=C[S].channels,l=C[S].labels;delete C[S].channels,delete C[S].labels,Object.defineProperty(C[S],"channels",{value:m}),Object.defineProperty(C[S],"labels",{value:l})}C.rgb.hsl=function(r){var t,s,n=r[0]/255,p=r[1]/255,a=r[2]/255,b=Math.min(n,p,a),f=Math.max(n,p,a),w=f-b;return f===b?t=0:n===f?t=(p-a)/w:p===f?t=2+(a-n)/w:a===f&&(t=4+(n-p)/w),(t=Math.min(60*t,360))<0&&(t+=360),s=(b+f)/2,[t,100*(f===b?0:s<=.5?w/(f+b):w/(2-f-b)),100*s]},C.rgb.hsv=function(r){var t,s,n,p,a,b=r[0]/255,f=r[1]/255,w=r[2]/255,M=Math.max(b,f,w),N=M-Math.min(b,f,w),O=function(I){return(M-I)/6/N+.5};return N===0?p=a=0:(a=N/M,t=O(b),s=O(f),n=O(w),b===M?p=n-s:f===M?p=.3333333333333333+t-n:w===M&&(p=.6666666666666666+s-t),p<0?p+=1:p>1&&(p-=1)),[360*p,100*a,100*M]},C.rgb.hwb=function(r){var t=r[0],s=r[1],n=r[2];return[C.rgb.hsl(r)[0],100*(.00392156862745098*Math.min(t,Math.min(s,n))),100*(n=1-.00392156862745098*Math.max(t,Math.max(s,n)))]},C.rgb.cmyk=function(r){var t,s=r[0]/255,n=r[1]/255,p=r[2]/255;return[100*((1-s-(t=Math.min(1-s,1-n,1-p)))/(1-t)||0),100*((1-n-t)/(1-t)||0),100*((1-p-t)/(1-t)||0),100*t]},C.rgb.keyword=function(r){var t=c[r];if(t)return t;var s,n,p,a=1/0;for(var b in v)if(v.hasOwnProperty(b)){var f=v[b],w=(n=r,p=f,Math.pow(n[0]-p[0],2)+Math.pow(n[1]-p[1],2)+Math.pow(n[2]-p[2],2));w<a&&(a=w,s=b)}return s},C.keyword.rgb=function(r){return v[r]},C.rgb.xyz=function(r){var t=r[0]/255,s=r[1]/255,n=r[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(s=s>.04045?Math.pow((s+.055)/1.055,2.4):s/12.92)+.1805*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)),100*(.2126*t+.7152*s+.0722*n),100*(.0193*t+.1192*s+.9505*n)]},C.rgb.lab=function(r){var t=C.rgb.xyz(r),s=t[0],n=t[1],p=t[2];return n/=100,p/=108.883,s=(s/=95.047)>.008856?Math.pow(s,.3333333333333333):7.787*s+.13793103448275862,[116*(n=n>.008856?Math.pow(n,.3333333333333333):7.787*n+.13793103448275862)-16,500*(s-n),200*(n-(p=p>.008856?Math.pow(p,.3333333333333333):7.787*p+.13793103448275862))]},C.hsl.rgb=function(r){var t,s,n,p,a,b=r[0]/360,f=r[1]/100,w=r[2]/100;if(f===0)return[a=255*w,a,a];t=2*w-(s=w<.5?w*(1+f):w+f-w*f),p=[0,0,0];for(var M=0;M<3;M++)(n=b+.3333333333333333*-(M-1))<0&&n++,n>1&&n--,a=6*n<1?t+6*(s-t)*n:2*n<1?s:3*n<2?t+(s-t)*(.6666666666666666-n)*6:t,p[M]=255*a;return p},C.hsl.hsv=function(r){var t=r[0],s=r[1]/100,n=r[2]/100,p=s,a=Math.max(n,.01);return s*=(n*=2)<=1?n:2-n,p*=a<=1?a:2-a,[t,100*(n===0?2*p/(a+p):2*s/(n+s)),100*((n+s)/2)]},C.hsv.rgb=function(r){var t=r[0]/60,s=r[1]/100,n=r[2]/100,p=Math.floor(t)%6,a=t-Math.floor(t),b=255*n*(1-s),f=255*n*(1-s*a),w=255*n*(1-s*(1-a));switch(n*=255,p){case 0:return[n,w,b];case 1:return[f,n,b];case 2:return[b,n,w];case 3:return[b,f,n];case 4:return[w,b,n];case 5:return[n,b,f]}},C.hsv.hsl=function(r){var t,s,n,p=r[0],a=r[1]/100,b=r[2]/100,f=Math.max(b,.01);return n=(2-a)*b,s=a*f,[p,100*(s=(s/=(t=(2-a)*f)<=1?t:2-t)||0),100*(n/=2)]},C.hwb.rgb=function(r){var t,s,n,p,a,b,f,w=r[0]/360,M=r[1]/100,N=r[2]/100,O=M+N;switch(O>1&&(M/=O,N/=O),n=6*w-(t=Math.floor(6*w)),1&t&&(n=1-n),p=M+n*((s=1-N)-M),t){default:case 6:case 0:a=s,b=p,f=M;break;case 1:a=p,b=s,f=M;break;case 2:a=M,b=s,f=p;break;case 3:a=M,b=p,f=s;break;case 4:a=p,b=M,f=s;break;case 5:a=s,b=M,f=p}return[255*a,255*b,255*f]},C.cmyk.rgb=function(r){var t=r[0]/100,s=r[1]/100,n=r[2]/100,p=r[3]/100;return[255*(1-Math.min(1,t*(1-p)+p)),255*(1-Math.min(1,s*(1-p)+p)),255*(1-Math.min(1,n*(1-p)+p))]},C.xyz.rgb=function(r){var t,s,n,p=r[0]/100,a=r[1]/100,b=r[2]/100;return s=-.9689*p+1.8758*a+.0415*b,n=.0557*p+-.204*a+1.057*b,t=(t=3.2406*p+-1.5372*a+-.4986*b)>.0031308?1.055*Math.pow(t,.4166666666666667)-.055:12.92*t,s=s>.0031308?1.055*Math.pow(s,.4166666666666667)-.055:12.92*s,n=n>.0031308?1.055*Math.pow(n,.4166666666666667)-.055:12.92*n,[255*(t=Math.min(Math.max(0,t),1)),255*(s=Math.min(Math.max(0,s),1)),255*(n=Math.min(Math.max(0,n),1))]},C.xyz.lab=function(r){var t=r[0],s=r[1],n=r[2];return s/=100,n/=108.883,t=(t/=95.047)>.008856?Math.pow(t,.3333333333333333):7.787*t+.13793103448275862,[116*(s=s>.008856?Math.pow(s,.3333333333333333):7.787*s+.13793103448275862)-16,500*(t-s),200*(s-(n=n>.008856?Math.pow(n,.3333333333333333):7.787*n+.13793103448275862))]},C.lab.xyz=function(r){var t,s,n,p=r[0];t=r[1]/500+(s=(p+16)/116),n=s-r[2]/200;var a=Math.pow(s,3),b=Math.pow(t,3),f=Math.pow(n,3);return s=a>.008856?a:(s-.13793103448275862)/7.787,t=b>.008856?b:(t-.13793103448275862)/7.787,n=f>.008856?f:(n-.13793103448275862)/7.787,[t*=95.047,s*=100,n*=108.883]},C.lab.lch=function(r){var t,s=r[0],n=r[1],p=r[2];return(t=360*Math.atan2(p,n)/2/Math.PI)<0&&(t+=360),[s,Math.sqrt(n*n+p*p),t]},C.lch.lab=function(r){var t,s=r[0],n=r[1];return t=r[2]/360*2*Math.PI,[s,n*Math.cos(t),n*Math.sin(t)]},C.rgb.ansi16=function(r){var t=r[0],s=r[1],n=r[2],p=1 in arguments?arguments[1]:C.rgb.hsv(r)[2];if((p=Math.round(p/50))===0)return 30;var a=30+(Math.round(n/255)<<2|Math.round(s/255)<<1|Math.round(t/255));return p===2&&(a+=60),a},C.hsv.ansi16=function(r){return C.rgb.ansi16(C.hsv.rgb(r),r[2])},C.rgb.ansi256=function(r){var t=r[0],s=r[1],n=r[2];return t===s&&s===n?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(s/255*5)+Math.round(n/255*5)},C.ansi16.rgb=function(r){var t=r%10;if(t===0||t===7)return r>50&&(t+=3.5),[t=t/10.5*255,t,t];var s=.5*(1+~~(r>50));return[(1&t)*s*255,(t>>1&1)*s*255,(t>>2&1)*s*255]},C.ansi256.rgb=function(r){if(r>=232){var t=10*(r-232)+8;return[t,t,t]}var s;return r-=16,[Math.floor(r/36)/5*255,Math.floor((s=r%36)/6)/5*255,s%6/5*255]},C.rgb.hex=function(r){var t=(((255&Math.round(r[0]))<<16)+((255&Math.round(r[1]))<<8)+(255&Math.round(r[2]))).toString(16).toUpperCase();return"000000".substring(t.length)+t},C.hex.rgb=function(r){var t=r.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];var s=t[0];t[0].length===3&&(s=s.split("").map((function(p){return p+p})).join(""));var n=parseInt(s,16);return[n>>16&255,n>>8&255,255&n]},C.rgb.hcg=function(r){var t,s=r[0]/255,n=r[1]/255,p=r[2]/255,a=Math.max(Math.max(s,n),p),b=Math.min(Math.min(s,n),p),f=a-b;return t=f<=0?0:a===s?(n-p)/f%6:a===n?2+(p-s)/f:4+(s-n)/f+4,t/=6,[360*(t%=1),100*f,100*(f<1?b/(1-f):0)]},C.hsl.hcg=function(r){var t=r[1]/100,s=r[2]/100,n=1,p=0;return(n=s<.5?2*t*s:2*t*(1-s))<1&&(p=(s-.5*n)/(1-n)),[r[0],100*n,100*p]},C.hsv.hcg=function(r){var t=r[1]/100,s=r[2]/100,n=t*s,p=0;return n<1&&(p=(s-n)/(1-n)),[r[0],100*n,100*p]},C.hcg.rgb=function(r){var t=r[0]/360,s=r[1]/100,n=r[2]/100;if(s===0)return[255*n,255*n,255*n];var p,a=[0,0,0],b=t%1*6,f=b%1,w=1-f;switch(Math.floor(b)){case 0:a[0]=1,a[1]=f,a[2]=0;break;case 1:a[0]=w,a[1]=1,a[2]=0;break;case 2:a[0]=0,a[1]=1,a[2]=f;break;case 3:a[0]=0,a[1]=w,a[2]=1;break;case 4:a[0]=f,a[1]=0,a[2]=1;break;default:a[0]=1,a[1]=0,a[2]=w}return p=(1-s)*n,[255*(s*a[0]+p),255*(s*a[1]+p),255*(s*a[2]+p)]},C.hcg.hsv=function(r){var t=r[1]/100,s=t+r[2]/100*(1-t),n=0;return s>0&&(n=t/s),[r[0],100*n,100*s]},C.hcg.hsl=function(r){var t=r[1]/100,s=r[2]/100*(1-t)+.5*t,n=0;return s>0&&s<.5?n=t/(2*s):s>=.5&&s<1&&(n=t/(2*(1-s))),[r[0],100*n,100*s]},C.hcg.hwb=function(r){var t=r[1]/100,s=t+r[2]/100*(1-t);return[r[0],100*(s-t),100*(1-s)]},C.hwb.hcg=function(r){var t=r[1]/100,s=1-r[2]/100,n=s-t,p=0;return n<1&&(p=(s-n)/(1-n)),[r[0],100*n,100*p]},C.apple.rgb=function(r){return[r[0]/65535*255,r[1]/65535*255,r[2]/65535*255]},C.rgb.apple=function(r){return[r[0]/255*65535,r[1]/255*65535,r[2]/255*65535]},C.gray.rgb=function(r){return[r[0]/100*255,r[0]/100*255,r[0]/100*255]},C.gray.hsl=C.gray.hsv=function(r){return[0,0,r[0]]},C.gray.hwb=function(r){return[0,100,r[0]]},C.gray.cmyk=function(r){return[0,0,0,r[0]]},C.gray.lab=function(r){return[r[0],0,0]},C.gray.hex=function(r){var t=255&Math.round(r[0]/100*255),s=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(s.length)+s},C.rgb.gray=function(r){return[(r[0]+r[1]+r[2])/3/255*100]}},4732:(o,i,d)=>{var v=d(6481),c=d(1157),_={};Object.keys(v).forEach((function(C){_[C]={},Object.defineProperty(_[C],"channels",{value:v[C].channels}),Object.defineProperty(_[C],"labels",{value:v[C].labels});var S=c(C);Object.keys(S).forEach((function(m){var l=S[m];_[C][m]=(function(r){var t=function(s){if(s==null)return s;arguments.length>1&&(s=Array.prototype.slice.call(arguments));var n=r(s);if(typeof n=="object")for(var p=n.length,a=0;a<p;a++)n[a]=Math.round(n[a]);return n};return"conversion"in r&&(t.conversion=r.conversion),t})(l),_[C][m].raw=(function(r){var t=function(s){return s==null?s:(arguments.length>1&&(s=Array.prototype.slice.call(arguments)),r(s))};return"conversion"in r&&(t.conversion=r.conversion),t})(l)}))})),o.exports=_},1157:(o,i,d)=>{var v=d(6481);function c(S){var m=(function(){for(var b={},f=Object.keys(v),w=f.length,M=0;M<w;M++)b[f[M]]={distance:-1,parent:null};return b})(),l=[S];for(m[S].distance=0;l.length;)for(var r=l.pop(),t=Object.keys(v[r]),s=t.length,n=0;n<s;n++){var p=t[n],a=m[p];a.distance===-1&&(a.distance=m[r].distance+1,a.parent=r,l.unshift(p))}return m}function _(S,m){return function(l){return m(S(l))}}function C(S,m){for(var l=[m[S].parent,S],r=v[m[S].parent][S],t=m[S].parent;m[t].parent;)l.unshift(m[t].parent),r=_(v[m[t].parent][t],r),t=m[t].parent;return r.conversion=l,r}o.exports=function(S){for(var m=c(S),l={},r=Object.keys(m),t=r.length,s=0;s<t;s++){var n=r[s];m[n].parent!==null&&(l[n]=C(n,m))}return l}},4176:o=>{o.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},4877:o=>{o.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},6138:(o,i,d)=>{var v=d(4877),c=d(301),_=Object.hasOwnProperty,C=Object.create(null);for(var S in v)_.call(v,S)&&(C[v[S]]=S);var m=o.exports={to:{},get:{}};function l(t,s,n){return Math.min(Math.max(s,t),n)}function r(t){var s=Math.round(t).toString(16).toUpperCase();return s.length<2?"0"+s:s}m.get=function(t){var s,n;switch(t.substring(0,3).toLowerCase()){case"hsl":s=m.get.hsl(t),n="hsl";break;case"hwb":s=m.get.hwb(t),n="hwb";break;default:s=m.get.rgb(t),n="rgb"}return s?{model:n,value:s}:null},m.get.rgb=function(t){if(!t)return null;var s,n,p,a=[0,0,0,1];if(s=t.match(/^#([a-f0-9]{6})([a-f0-9]{2})?$/i)){for(p=s[2],s=s[1],n=0;n<3;n++){var b=2*n;a[n]=parseInt(s.slice(b,b+2),16)}p&&(a[3]=parseInt(p,16)/255)}else if(s=t.match(/^#([a-f0-9]{3,4})$/i)){for(p=(s=s[1])[3],n=0;n<3;n++)a[n]=parseInt(s[n]+s[n],16);p&&(a[3]=parseInt(p+p,16)/255)}else if(s=t.match(/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)){for(n=0;n<3;n++)a[n]=parseInt(s[n+1],0);s[4]&&(s[5]?a[3]=.01*parseFloat(s[4]):a[3]=parseFloat(s[4]))}else{if(!(s=t.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/)))return(s=t.match(/^(\w+)$/))?s[1]==="transparent"?[0,0,0,0]:_.call(v,s[1])?((a=v[s[1]])[3]=1,a):null:null;for(n=0;n<3;n++)a[n]=Math.round(2.55*parseFloat(s[n+1]));s[4]&&(s[5]?a[3]=.01*parseFloat(s[4]):a[3]=parseFloat(s[4]))}for(n=0;n<3;n++)a[n]=l(a[n],0,255);return a[3]=l(a[3],0,1),a},m.get.hsl=function(t){if(!t)return null;var s=t.match(/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(s){var n=parseFloat(s[4]);return[(parseFloat(s[1])%360+360)%360,l(parseFloat(s[2]),0,100),l(parseFloat(s[3]),0,100),l(isNaN(n)?1:n,0,1)]}return null},m.get.hwb=function(t){if(!t)return null;var s=t.match(/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/);if(s){var n=parseFloat(s[4]);return[(parseFloat(s[1])%360+360)%360,l(parseFloat(s[2]),0,100),l(parseFloat(s[3]),0,100),l(isNaN(n)?1:n,0,1)]}return null},m.to.hex=function(){var t=c(arguments);return"#"+r(t[0])+r(t[1])+r(t[2])+(t[3]<1?r(Math.round(255*t[3])):"")},m.to.rgb=function(){var t=c(arguments);return t.length<4||t[3]===1?"rgb("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+")":"rgba("+Math.round(t[0])+", "+Math.round(t[1])+", "+Math.round(t[2])+", "+t[3]+")"},m.to.rgb.percent=function(){var t=c(arguments),s=Math.round(t[0]/255*100),n=Math.round(t[1]/255*100),p=Math.round(t[2]/255*100);return t.length<4||t[3]===1?"rgb("+s+"%, "+n+"%, "+p+"%)":"rgba("+s+"%, "+n+"%, "+p+"%, "+t[3]+")"},m.to.hsl=function(){var t=c(arguments);return t.length<4||t[3]===1?"hsl("+t[0]+", "+t[1]+"%, "+t[2]+"%)":"hsla("+t[0]+", "+t[1]+"%, "+t[2]+"%, "+t[3]+")"},m.to.hwb=function(){var t=c(arguments),s="";return t.length>=4&&t[3]!==1&&(s=", "+t[3]),"hwb("+t[0]+", "+t[1]+"%, "+t[2]+"%"+s+")"},m.to.keyword=function(t){return C[t.slice(0,3)]}},3639:(o,i,d)=>{var v=d(6138),c=d(4732),_=[].slice,C=["keyword","gray","hex"],S={};Object.keys(c).forEach((function(n){S[_.call(c[n].labels).sort().join("")]=n}));var m={};function l(n,p){if(!(this instanceof l))return new l(n,p);if(p&&p in C&&(p=null),p&&!(p in c))throw new Error("Unknown model: "+p);var a,b;if(n==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(n instanceof l)this.model=n.model,this.color=n.color.slice(),this.valpha=n.valpha;else if(typeof n=="string"){var f=v.get(n);if(f===null)throw new Error("Unable to parse color from string: "+n);this.model=f.model,b=c[this.model].channels,this.color=f.value.slice(0,b),this.valpha=typeof f.value[b]=="number"?f.value[b]:1}else if(n.length){this.model=p||"rgb",b=c[this.model].channels;var w=_.call(n,0,b);this.color=s(w,b),this.valpha=typeof n[b]=="number"?n[b]:1}else if(typeof n=="number")n&=16777215,this.model="rgb",this.color=[n>>16&255,n>>8&255,255&n],this.valpha=1;else{this.valpha=1;var M=Object.keys(n);"alpha"in n&&(M.splice(M.indexOf("alpha"),1),this.valpha=typeof n.alpha=="number"?n.alpha:0);var N=M.sort().join("");if(!(N in S))throw new Error("Unable to parse color from object: "+JSON.stringify(n));this.model=S[N];var O=c[this.model].labels,I=[];for(a=0;a<O.length;a++)I.push(n[O[a]]);this.color=s(I)}if(m[this.model])for(b=c[this.model].channels,a=0;a<b;a++){var z=m[this.model][a];z&&(this.color[a]=z(this.color[a]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}function r(n,p,a){return(n=Array.isArray(n)?n:[n]).forEach((function(b){(m[b]||(m[b]=[]))[p]=a})),n=n[0],function(b){var f;return arguments.length?(a&&(b=a(b)),(f=this[n]()).color[p]=b,f):(f=this[n]().color[p],a&&(f=a(f)),f)}}function t(n){return function(p){return Math.max(0,Math.min(n,p))}}function s(n,p){for(var a=0;a<p;a++)typeof n[a]!="number"&&(n[a]=0);return n}l.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(n){var p=this.model in v.to?this:this.rgb(),a=(p=p.round(typeof n=="number"?n:1)).valpha===1?p.color:p.color.concat(this.valpha);return v.to[p.model](a)},percentString:function(n){var p=this.rgb().round(typeof n=="number"?n:1),a=p.valpha===1?p.color:p.color.concat(this.valpha);return v.to.rgb.percent(a)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var n={},p=c[this.model].channels,a=c[this.model].labels,b=0;b<p;b++)n[a[b]]=this.color[b];return this.valpha!==1&&(n.alpha=this.valpha),n},unitArray:function(){var n=this.rgb().color;return n[0]/=255,n[1]/=255,n[2]/=255,this.valpha!==1&&n.push(this.valpha),n},unitObject:function(){var n=this.rgb().object();return n.r/=255,n.g/=255,n.b/=255,this.valpha!==1&&(n.alpha=this.valpha),n},round:function(n){return n=Math.max(n||0,0),new l(this.color.map((function(p){return function(a){return(function(b,f){return Number(b.toFixed(f))})(a,p)}})(n)).concat(this.valpha),this.model)},alpha:function(n){return arguments.length?new l(this.color.concat(Math.max(0,Math.min(1,n))),this.model):this.valpha},red:r("rgb",0,t(255)),green:r("rgb",1,t(255)),blue:r("rgb",2,t(255)),hue:r(["hsl","hsv","hsl","hwb","hcg"],0,(function(n){return(n%360+360)%360})),saturationl:r("hsl",1,t(100)),lightness:r("hsl",2,t(100)),saturationv:r("hsv",1,t(100)),value:r("hsv",2,t(100)),chroma:r("hcg",1,t(100)),gray:r("hcg",2,t(100)),white:r("hwb",1,t(100)),wblack:r("hwb",2,t(100)),cyan:r("cmyk",0,t(100)),magenta:r("cmyk",1,t(100)),yellow:r("cmyk",2,t(100)),black:r("cmyk",3,t(100)),x:r("xyz",0,t(100)),y:r("xyz",1,t(100)),z:r("xyz",2,t(100)),l:r("lab",0,t(100)),a:r("lab",1),b:r("lab",2),keyword:function(n){return arguments.length?new l(n):c[this.model].keyword(this.color)},hex:function(n){return arguments.length?new l(n):v.to.hex(this.rgb().round().color)},rgbNumber:function(){var n=this.rgb().color;return(255&n[0])<<16|(255&n[1])<<8|255&n[2]},luminosity:function(){for(var n=this.rgb().color,p=[],a=0;a<n.length;a++){var b=n[a]/255;p[a]=b<=.03928?b/12.92:Math.pow((b+.055)/1.055,2.4)}return .2126*p[0]+.7152*p[1]+.0722*p[2]},contrast:function(n){var p=this.luminosity(),a=n.luminosity();return p>a?(p+.05)/(a+.05):(a+.05)/(p+.05)},level:function(n){var p=this.contrast(n);return p>=7.1?"AAA":p>=4.5?"AA":""},isDark:function(){var n=this.rgb().color;return(299*n[0]+587*n[1]+114*n[2])/1e3<128},isLight:function(){return!this.isDark()},negate:function(){for(var n=this.rgb(),p=0;p<3;p++)n.color[p]=255-n.color[p];return n},lighten:function(n){var p=this.hsl();return p.color[2]+=p.color[2]*n,p},darken:function(n){var p=this.hsl();return p.color[2]-=p.color[2]*n,p},saturate:function(n){var p=this.hsl();return p.color[1]+=p.color[1]*n,p},desaturate:function(n){var p=this.hsl();return p.color[1]-=p.color[1]*n,p},whiten:function(n){var p=this.hwb();return p.color[1]+=p.color[1]*n,p},blacken:function(n){var p=this.hwb();return p.color[2]+=p.color[2]*n,p},grayscale:function(){var n=this.rgb().color,p=.3*n[0]+.59*n[1]+.11*n[2];return l.rgb(p,p,p)},fade:function(n){return this.alpha(this.valpha-this.valpha*n)},opaquer:function(n){return this.alpha(this.valpha+this.valpha*n)},rotate:function(n){var p=this.hsl(),a=p.color[0];return a=(a=(a+n)%360)<0?360+a:a,p.color[0]=a,p},mix:function(n,p){if(!n||!n.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof n);var a=n.rgb(),b=this.rgb(),f=p===void 0?.5:p,w=2*f-1,M=a.alpha()-b.alpha(),N=((w*M==-1?w:(w+M)/(1+w*M))+1)/2,O=1-N;return l.rgb(N*a.red()+O*b.red(),N*a.green()+O*b.green(),N*a.blue()+O*b.blue(),a.alpha()*f+b.alpha()*(1-f))}},Object.keys(c).forEach((function(n){if(C.indexOf(n)===-1){var p=c[n].channels;l.prototype[n]=function(){if(this.model===n)return new l(this);if(arguments.length)return new l(arguments,n);var a,b=typeof arguments[p]=="number"?p:this.valpha;return new l((a=c[this.model][n].raw(this.color),Array.isArray(a)?a:[a]).concat(b),n)},l[n]=function(a){return typeof a=="number"&&(a=s(_.call(arguments),p)),new l(a,n)}}})),o.exports=l},9784:o=>{var i,d=typeof Reflect=="object"?Reflect:null,v=d&&typeof d.apply=="function"?d.apply:function(b,f,w){return Function.prototype.apply.call(b,f,w)};i=d&&typeof d.ownKeys=="function"?d.ownKeys:Object.getOwnPropertySymbols?function(b){return Object.getOwnPropertyNames(b).concat(Object.getOwnPropertySymbols(b))}:function(b){return Object.getOwnPropertyNames(b)};var c=Number.isNaN||function(b){return b!=b};function _(){_.init.call(this)}o.exports=_,o.exports.once=function(b,f){return new Promise((function(w,M){function N(I){b.removeListener(f,O),M(I)}function O(){typeof b.removeListener=="function"&&b.removeListener("error",N),w([].slice.call(arguments))}a(b,f,O,{once:!0}),f!=="error"&&(function(I,z,Y){typeof I.on=="function"&&a(I,"error",z,Y)})(b,N,{once:!0})}))},_.EventEmitter=_,_.prototype._events=void 0,_.prototype._eventsCount=0,_.prototype._maxListeners=void 0;var C=10;function S(b){if(typeof b!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof b)}function m(b){return b._maxListeners===void 0?_.defaultMaxListeners:b._maxListeners}function l(b,f,w,M){var N,O,I,z;if(S(w),(O=b._events)===void 0?(O=b._events=Object.create(null),b._eventsCount=0):(O.newListener!==void 0&&(b.emit("newListener",f,w.listener?w.listener:w),O=b._events),I=O[f]),I===void 0)I=O[f]=w,++b._eventsCount;else if(typeof I=="function"?I=O[f]=M?[w,I]:[I,w]:M?I.unshift(w):I.push(w),(N=m(b))>0&&I.length>N&&!I.warned){I.warned=!0;var Y=new Error("Possible EventEmitter memory leak detected. "+I.length+" "+String(f)+" listeners added. Use emitter.setMaxListeners() to increase limit");Y.name="MaxListenersExceededWarning",Y.emitter=b,Y.type=f,Y.count=I.length,z=Y,console&&console.warn&&console.warn(z)}return b}function r(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function t(b,f,w){var M={fired:!1,wrapFn:void 0,target:b,type:f,listener:w},N=r.bind(M);return N.listener=w,M.wrapFn=N,N}function s(b,f,w){var M=b._events;if(M===void 0)return[];var N=M[f];return N===void 0?[]:typeof N=="function"?w?[N.listener||N]:[N]:w?(function(O){for(var I=new Array(O.length),z=0;z<I.length;++z)I[z]=O[z].listener||O[z];return I})(N):p(N,N.length)}function n(b){var f=this._events;if(f!==void 0){var w=f[b];if(typeof w=="function")return 1;if(w!==void 0)return w.length}return 0}function p(b,f){for(var w=new Array(f),M=0;M<f;++M)w[M]=b[M];return w}function a(b,f,w,M){if(typeof b.on=="function")M.once?b.once(f,w):b.on(f,w);else{if(typeof b.addEventListener!="function")throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof b);b.addEventListener(f,(function N(O){M.once&&b.removeEventListener(f,N),w(O)}))}}Object.defineProperty(_,"defaultMaxListeners",{enumerable:!0,get:function(){return C},set:function(b){if(typeof b!="number"||b<0||c(b))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+b+".");C=b}}),_.init=function(){this._events!==void 0&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},_.prototype.setMaxListeners=function(b){if(typeof b!="number"||b<0||c(b))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+b+".");return this._maxListeners=b,this},_.prototype.getMaxListeners=function(){return m(this)},_.prototype.emit=function(b){for(var f=[],w=1;w<arguments.length;w++)f.push(arguments[w]);var M=b==="error",N=this._events;if(N!==void 0)M=M&&N.error===void 0;else if(!M)return!1;if(M){var O;if(f.length>0&&(O=f[0]),O instanceof Error)throw O;var I=new Error("Unhandled error."+(O?" ("+O.message+")":""));throw I.context=O,I}var z=N[b];if(z===void 0)return!1;if(typeof z=="function")v(z,this,f);else{var Y=z.length,ne=p(z,Y);for(w=0;w<Y;++w)v(ne[w],this,f)}return!0},_.prototype.addListener=function(b,f){return l(this,b,f,!1)},_.prototype.on=_.prototype.addListener,_.prototype.prependListener=function(b,f){return l(this,b,f,!0)},_.prototype.once=function(b,f){return S(f),this.on(b,t(this,b,f)),this},_.prototype.prependOnceListener=function(b,f){return S(f),this.prependListener(b,t(this,b,f)),this},_.prototype.removeListener=function(b,f){var w,M,N,O,I;if(S(f),(M=this._events)===void 0)return this;if((w=M[b])===void 0)return this;if(w===f||w.listener===f)--this._eventsCount==0?this._events=Object.create(null):(delete M[b],M.removeListener&&this.emit("removeListener",b,w.listener||f));else if(typeof w!="function"){for(N=-1,O=w.length-1;O>=0;O--)if(w[O]===f||w[O].listener===f){I=w[O].listener,N=O;break}if(N<0)return this;N===0?w.shift():(function(z,Y){for(;Y+1<z.length;Y++)z[Y]=z[Y+1];z.pop()})(w,N),w.length===1&&(M[b]=w[0]),M.removeListener!==void 0&&this.emit("removeListener",b,I||f)}return this},_.prototype.off=_.prototype.removeListener,_.prototype.removeAllListeners=function(b){var f,w,M;if((w=this._events)===void 0)return this;if(w.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):w[b]!==void 0&&(--this._eventsCount==0?this._events=Object.create(null):delete w[b]),this;if(arguments.length===0){var N,O=Object.keys(w);for(M=0;M<O.length;++M)(N=O[M])!=="removeListener"&&this.removeAllListeners(N);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(typeof(f=w[b])=="function")this.removeListener(b,f);else if(f!==void 0)for(M=f.length-1;M>=0;M--)this.removeListener(b,f[M]);return this},_.prototype.listeners=function(b){return s(this,b,!0)},_.prototype.rawListeners=function(b){return s(this,b,!1)},_.listenerCount=function(b,f){return typeof b.listenerCount=="function"?b.listenerCount(f):n.call(b,f)},_.prototype.listenerCount=n,_.prototype.eventNames=function(){return this._eventsCount>0?i(this._events):[]}},8336:o=>{o.exports=function(i){return!(!i||typeof i=="string")&&(i instanceof Array||Array.isArray(i)||i.length>=0&&(i.splice instanceof Function||Object.getOwnPropertyDescriptor(i,i.length-1)&&i.constructor.name!=="String"))}},3989:o=>{var i="__lodash_placeholder__",d=32,v=1/0,c=NaN,_=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",d],["partialRight",64],["rearg",256]],C="[object Function]",S="[object GeneratorFunction]",m=/^\s+|\s+$/g,l=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,r=/\{\n\/\* \[wrapped with (.+)\] \*/,t=/,? & /,s=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,p=/^\[object .+?Constructor\]$/,a=/^0o[0-7]+$/i,b=/^(?:0|[1-9]\d*)$/,f=parseInt,w=typeof Cs=="object"&&Cs&&Cs.Object===Object&&Cs,M=typeof self=="object"&&self&&self.Object===Object&&self,N=w||M||Function("return this")();function O(te,Z,ae){switch(ae.length){case 0:return te.call(Z);case 1:return te.call(Z,ae[0]);case 2:return te.call(Z,ae[0],ae[1]);case 3:return te.call(Z,ae[0],ae[1],ae[2])}return te.apply(Z,ae)}function I(te,Z){return!!(te&&te.length)&&(function(ae,ge,xe){if(ge!=ge)return(function(ze,at,lt,Qe){for(var ft=ze.length,Ge=lt+-1;++Ge<ft;)if(at(ze[Ge],Ge,ze))return Ge;return-1})(ae,z,xe);for(var ye=xe-1,$e=ae.length;++ye<$e;)if(ae[ye]===ge)return ye;return-1})(te,Z,0)>-1}function z(te){return te!=te}function Y(te,Z){for(var ae=-1,ge=te.length,xe=0,ye=[];++ae<ge;){var $e=te[ae];$e!==Z&&$e!==i||(te[ae]=i,ye[xe++]=ae)}return ye}var ne,U,se,T=Function.prototype,P=Object.prototype,F=N["__core-js_shared__"],W=(ne=/[^.]+$/.exec(F&&F.keys&&F.keys.IE_PROTO||""))?"Symbol(src)_1."+ne:"",Q=T.toString,ce=P.hasOwnProperty,ee=P.toString,_e=RegExp("^"+Q.call(ce).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V=Object.create,j=Math.max,J=Math.min,re=(U=be(Object,"defineProperty"),(se=be.name)&&se.length>2?U:void 0);function he(te){if(!Ve(te)||(function(ae){return!!W&&W in ae})(te))return!1;var Z=(function(ae){var ge=Ve(ae)?ee.call(ae):"";return ge==C||ge==S})(te)||(function(ae){var ge=!1;if(ae!=null&&typeof ae.toString!="function")try{ge=!!(ae+"")}catch{}return ge})(te)?_e:p;return Z.test((function(ae){if(ae!=null){try{return Q.call(ae)}catch{}try{return ae+""}catch{}}return""})(te))}function le(te){return function(){var Z=arguments;switch(Z.length){case 0:return new te;case 1:return new te(Z[0]);case 2:return new te(Z[0],Z[1]);case 3:return new te(Z[0],Z[1],Z[2]);case 4:return new te(Z[0],Z[1],Z[2],Z[3]);case 5:return new te(Z[0],Z[1],Z[2],Z[3],Z[4]);case 6:return new te(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5]);case 7:return new te(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5],Z[6])}var ae,ge=Ve(ae=te.prototype)?V(ae):{},xe=te.apply(ge,Z);return Ve(xe)?xe:ge}}function Ee(te,Z,ae,ge,xe,ye,$e,ze,at,lt){var Qe=128&Z,ft=1&Z,Ge=2&Z,St=24&Z,ct=512&Z,yt=Ge?void 0:le(te);return function ht(){for(var Te=arguments.length,Ne=Array(Te),Ke=Te;Ke--;)Ne[Ke]=arguments[Ke];if(St)var ut=je(ht),jt=(function(Pe,tt){for(var st=Pe.length,De=0;st--;)Pe[st]===tt&&De++;return De})(Ne,ut);if(ge&&(Ne=(function(Pe,tt,st,De){for(var qe=-1,xt=Pe.length,Et=st.length,rt=-1,pt=tt.length,kt=j(xt-Et,0),Bt=Array(pt+kt),$t=!De;++rt<pt;)Bt[rt]=tt[rt];for(;++qe<Et;)($t||qe<xt)&&(Bt[st[qe]]=Pe[qe]);for(;kt--;)Bt[rt++]=Pe[qe++];return Bt})(Ne,ge,xe,St)),ye&&(Ne=(function(Pe,tt,st,De){for(var qe=-1,xt=Pe.length,Et=-1,rt=st.length,pt=-1,kt=tt.length,Bt=j(xt-rt,0),$t=Array(Bt+kt),Xs=!De;++qe<Bt;)$t[qe]=Pe[qe];for(var ms=qe;++pt<kt;)$t[ms+pt]=tt[pt];for(;++Et<rt;)(Xs||qe<xt)&&($t[ms+st[Et]]=Pe[qe++]);return $t})(Ne,ye,$e,St)),Te-=jt,St&&Te<lt){var wt=Y(Ne,ut);return Me(te,Z,Ee,ht.placeholder,ae,Ne,wt,ze,at,lt-Te)}var et=ft?ae:this,Ht=Ge?et[te]:te;return Te=Ne.length,ze?Ne=(function(Pe,tt){for(var st=Pe.length,De=J(tt.length,st),qe=(function(Et,rt){var pt=-1,kt=Et.length;for(rt||(rt=Array(kt));++pt<kt;)rt[pt]=Et[pt];return rt})(Pe);De--;){var xt=tt[De];Pe[De]=Je(xt,st)?qe[xt]:void 0}return Pe})(Ne,ze):ct&&Te>1&&Ne.reverse(),Qe&&at<Te&&(Ne.length=at),this&&this!==N&&this instanceof ht&&(Ht=yt||le(Ht)),Ht.apply(et,Ne)}}function Me(te,Z,ae,ge,xe,ye,$e,ze,at,lt){var Qe=8&Z;Z|=Qe?d:64,4&(Z&=~(Qe?64:d))||(Z&=-4);var ft=ae(te,Z,xe,Qe?ye:void 0,Qe?$e:void 0,Qe?void 0:ye,Qe?void 0:$e,ze,at,lt);return ft.placeholder=ge,It(ft,te,Z)}function Re(te,Z,ae,ge,xe,ye,$e,ze){var at=2&Z;if(!at&&typeof te!="function")throw new TypeError("Expected a function");var lt=ge?ge.length:0;if(lt||(Z&=-97,ge=xe=void 0),$e=$e===void 0?$e:j(bt($e),0),ze=ze===void 0?ze:bt(ze),lt-=xe?xe.length:0,64&Z){var Qe=ge,ft=xe;ge=xe=void 0}var Ge=[te,Z,ae,ge,xe,Qe,ft,ye,$e,ze];if(te=Ge[0],Z=Ge[1],ae=Ge[2],ge=Ge[3],xe=Ge[4],!(ze=Ge[9]=Ge[9]==null?at?0:te.length:j(Ge[9]-lt,0))&&24&Z&&(Z&=-25),Z&&Z!=1)St=Z==8||Z==16?(function(ct,yt,ht){var Te=le(ct);return function Ne(){for(var Ke=arguments.length,ut=Array(Ke),jt=Ke,wt=je(Ne);jt--;)ut[jt]=arguments[jt];var et=Ke<3&&ut[0]!==wt&&ut[Ke-1]!==wt?[]:Y(ut,wt);return(Ke-=et.length)<ht?Me(ct,yt,Ee,Ne.placeholder,void 0,ut,et,void 0,void 0,ht-Ke):O(this&&this!==N&&this instanceof Ne?Te:ct,this,ut)}})(te,Z,ze):Z!=d&&Z!=33||xe.length?Ee.apply(void 0,Ge):(function(ct,yt,ht,Te){var Ne=1&yt,Ke=le(ct);return function ut(){for(var jt=-1,wt=arguments.length,et=-1,Ht=Te.length,Pe=Array(Ht+wt),tt=this&&this!==N&&this instanceof ut?Ke:ct;++et<Ht;)Pe[et]=Te[et];for(;wt--;)Pe[et++]=arguments[++jt];return O(tt,Ne?ht:this,Pe)}})(te,Z,ae,ge);else var St=(function(ct,yt,ht){var Te=1&yt,Ne=le(ct);return function Ke(){return(this&&this!==N&&this instanceof Ke?Ne:ct).apply(Te?ht:this,arguments)}})(te,Z,ae);return It(St,te,Z)}function je(te){return te.placeholder}function be(te,Z){var ae=(function(ge,xe){return ge?.[xe]})(te,Z);return he(ae)?ae:void 0}function gt(te){var Z=te.match(r);return Z?Z[1].split(t):[]}function oe(te,Z){var ae=Z.length,ge=ae-1;return Z[ge]=(ae>1?"& ":"")+Z[ge],Z=Z.join(ae>2?", ":" "),te.replace(l,`{
/* [wrapped with `+Z+`] */
`)}function Je(te,Z){return!!(Z=Z??9007199254740991)&&(typeof te=="number"||b.test(te))&&te>-1&&te%1==0&&te<Z}var It=re?function(te,Z,ae){var ge,xe=Z+"";return re(te,"toString",{configurable:!0,enumerable:!1,value:(ge=oe(xe,Nt(gt(xe),ae)),function(){return ge})})}:function(te){return te};function Nt(te,Z){return(function(ae,ge){for(var xe=-1,ye=ae?ae.length:0;++xe<ye&&ge(ae[xe],xe,ae)!==!1;);})(_,(function(ae){var ge="_."+ae[0];Z&ae[1]&&!I(te,ge)&&te.push(ge)})),te.sort()}function We(te,Z,ae){var ge=Re(te,8,void 0,void 0,void 0,void 0,void 0,Z=ae?void 0:Z);return ge.placeholder=We.placeholder,ge}function Ve(te){var Z=typeof te;return!!te&&(Z=="object"||Z=="function")}function Xe(te){return te?(te=(function(Z){if(typeof Z=="number")return Z;if((function(xe){return typeof xe=="symbol"||(function(ye){return!!ye&&typeof ye=="object"})(xe)&&ee.call(xe)=="[object Symbol]"})(Z))return c;if(Ve(Z)){var ae=typeof Z.valueOf=="function"?Z.valueOf():Z;Z=Ve(ae)?ae+"":ae}if(typeof Z!="string")return Z===0?Z:+Z;Z=Z.replace(m,"");var ge=n.test(Z);return ge||a.test(Z)?f(Z.slice(2),ge?2:8):s.test(Z)?c:+Z})(te))===v||te===-1/0?17976931348623157e292*(te<0?-1:1):te==te?te:0:te===0?te:0}function bt(te){var Z=Xe(te),ae=Z%1;return Z==Z?ae?Z-ae:Z:0}We.placeholder={},o.exports=We},301:(o,i,d)=>{var v=d(8336),c=Array.prototype.concat,_=Array.prototype.slice,C=o.exports=function(S){for(var m=[],l=0,r=S.length;l<r;l++){var t=S[l];v(t)?m=c.call(m,_.call(t)):m.push(t)}return m};C.wrap=function(S){return function(){return S(C(arguments))}}},4119:o=>{o.exports=g}},x={};function L(o){var i=x[o];if(i!==void 0)return i.exports;var d=x[o]={exports:{}};return y[o](d,d.exports,L),d.exports}L.n=o=>{var i=o&&o.__esModule?()=>o.default:()=>o;return L.d(i,{a:i}),i},L.d=(o,i)=>{for(var d in i)L.o(i,d)&&!L.o(o,d)&&Object.defineProperty(o,d,{enumerable:!0,get:i[d]})},L.o=(o,i)=>Object.prototype.hasOwnProperty.call(o,i),L.r=o=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(o,"__esModule",{value:!0})};var D={};return(()=>{function o(R){return o=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(E){return typeof E}:function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},o(R)}function i(R){var E=(function(k,A){if(o(k)!="object"||!k)return k;var H=k[Symbol.toPrimitive];if(H!==void 0){var q=H.call(k,A);if(o(q)!="object")return q;throw new TypeError("@@toPrimitive must return a primitive value.")}return(A==="string"?String:Number)(k)})(R,"string");return o(E)=="symbol"?E:E+""}function d(R,E,k){return(E=i(E))in R?Object.defineProperty(R,E,{value:k,enumerable:!0,configurable:!0,writable:!0}):R[E]=k,R}function v(R,E){var k=Object.keys(R);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(R);E&&(A=A.filter((function(H){return Object.getOwnPropertyDescriptor(R,H).enumerable}))),k.push.apply(k,A)}return k}function c(R){for(var E=1;E<arguments.length;E++){var k=arguments[E]!=null?arguments[E]:{};E%2?v(Object(k),!0).forEach((function(A){d(R,A,k[A])})):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(k)):v(Object(k)).forEach((function(A){Object.defineProperty(R,A,Object.getOwnPropertyDescriptor(k,A))}))}return R}function _(R,E){if(!(R instanceof E))throw new TypeError("Cannot call a class as a function")}function C(R,E){for(var k=0;k<E.length;k++){var A=E[k];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(R,i(A.key),A)}}function S(R,E,k){return E&&C(R.prototype,E),k&&C(R,k),Object.defineProperty(R,"prototype",{writable:!1}),R}function m(R){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(E){return E.__proto__||Object.getPrototypeOf(E)},m(R)}function l(){try{var R=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch{}return(l=function(){return!!R})()}function r(R,E){if(E&&(o(E)=="object"||typeof E=="function"))return E;if(E!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return(function(k){if(k===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k})(R)}function t(R,E,k){return E=m(E),r(R,l()?Reflect.construct(E,k||[],m(R).constructor):E.apply(R,k))}function s(R,E){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(k,A){return k.__proto__=A,k},s(R,E)}function n(R,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function");R.prototype=Object.create(E&&E.prototype,{constructor:{value:R,writable:!0,configurable:!0}}),Object.defineProperty(R,"prototype",{writable:!1}),E&&s(R,E)}L.r(D),L.d(D,{default:()=>po});var p=L(4119),a=L.n(p);function b(){var R=this.constructor.getDerivedStateFromProps(this.props,this.state);R!=null&&this.setState(R)}function f(R){this.setState((function(E){var k=this.constructor.getDerivedStateFromProps(R,E);return k??null}).bind(this))}function w(R,E){try{var k=this.props,A=this.state;this.props=R,this.state=E,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(k,A)}finally{this.props=k,this.state=A}}function M(R){var E=R.prototype;if(!E||!E.isReactComponent)throw new Error("Can only polyfill class components");if(typeof R.getDerivedStateFromProps!="function"&&typeof E.getSnapshotBeforeUpdate!="function")return R;var k=null,A=null,H=null;if(typeof E.componentWillMount=="function"?k="componentWillMount":typeof E.UNSAFE_componentWillMount=="function"&&(k="UNSAFE_componentWillMount"),typeof E.componentWillReceiveProps=="function"?A="componentWillReceiveProps":typeof E.UNSAFE_componentWillReceiveProps=="function"&&(A="UNSAFE_componentWillReceiveProps"),typeof E.componentWillUpdate=="function"?H="componentWillUpdate":typeof E.UNSAFE_componentWillUpdate=="function"&&(H="UNSAFE_componentWillUpdate"),k!==null||A!==null||H!==null){var q=R.displayName||R.name,G=typeof R.getDerivedStateFromProps=="function"?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error(`Unsafe legacy lifecycles will not be called for components using new component APIs.

`+q+" uses "+G+" but also contains the following legacy lifecycles:"+(k!==null?`
  `+k:"")+(A!==null?`
  `+A:"")+(H!==null?`
  `+H:"")+`

The above lifecycles should be removed. Learn more about this warning here:
https://fb.me/react-async-component-lifecycle-hooks`)}if(typeof R.getDerivedStateFromProps=="function"&&(E.componentWillMount=b,E.componentWillReceiveProps=f),typeof E.getSnapshotBeforeUpdate=="function"){if(typeof E.componentDidUpdate!="function")throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");E.componentWillUpdate=w;var $=E.componentDidUpdate;E.componentDidUpdate=function(X,ie,ue){var de=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:ue;$.call(this,X,ie,de)}}return R}function N(R,E){if(R==null)return{};var k={};for(var A in R)if({}.hasOwnProperty.call(R,A)){if(E.includes(A))continue;k[A]=R[A]}return k}function O(R,E){if(R==null)return{};var k,A,H=N(R,E);if(Object.getOwnPropertySymbols){var q=Object.getOwnPropertySymbols(R);for(A=0;A<q.length;A++)k=q[A],E.includes(k)||{}.propertyIsEnumerable.call(R,k)&&(H[k]=R[k])}return H}function I(R,E){if(E&&R?.constructor===E)return"bigNumber";var k=(function(A){return{}.toString.call(A).match(/\s([a-zA-Z]+)/)[1].toLowerCase()})(R);return k==="number"&&(k=isNaN(R)?"nan":(0|R)!=R?"float":"integer"),k}function z(R){return R.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\f/g,"\\f")}b.__suppressDeprecationWarning=!0,f.__suppressDeprecationWarning=!0,w.__suppressDeprecationWarning=!0;var Y={scheme:"rjv-default",author:"mac gainor",base00:"rgba(0, 0, 0, 0)",base01:"rgb(245, 245, 245)",base02:"rgb(235, 235, 235)",base03:"#93a1a1",base04:"rgba(0, 0, 0, 0.3)",base05:"#586e75",base06:"#073642",base07:"#002b36",base08:"#d33682",base09:"#cb4b16",base0A:"#dc322f",base0B:"#859900",base0C:"#6c71c4",base0D:"#586e75",base0E:"#2aa198",base0F:"#268bd2"},ne={scheme:"rjv-grey",author:"mac gainor",base00:"rgba(1, 1, 1, 0)",base01:"rgba(1, 1, 1, 0.1)",base02:"rgba(0, 0, 0, 0.2)",base03:"rgba(1, 1, 1, 0.3)",base04:"rgba(0, 0, 0, 0.4)",base05:"rgba(1, 1, 1, 0.5)",base06:"rgba(1, 1, 1, 0.6)",base07:"rgba(1, 1, 1, 0.7)",base08:"rgba(1, 1, 1, 0.8)",base09:"rgba(1, 1, 1, 0.8)",base0A:"rgba(1, 1, 1, 0.8)",base0B:"rgba(1, 1, 1, 0.8)",base0C:"rgba(1, 1, 1, 0.8)",base0D:"rgba(1, 1, 1, 0.8)",base0E:"rgba(1, 1, 1, 0.8)",base0F:"rgba(1, 1, 1, 0.8)"};const U={globalFontFamily:"monospace",globalCursor:"default",braceFontWeight:"bold",braceCursor:"pointer",ellipsisFontSize:"18px",ellipsisLineHeight:"10px",ellipsisCursor:"pointer",keyMargin:"0px 5px",keyLetterSpacing:"0.5px",keyFontStyle:"none",keyVerticalAlign:"top",keyOpacity:"0.85",keyOpacityHover:"1",keyValPaddingTop:"3px",keyValPaddingBottom:"3px",keyValPaddingRight:"5px",keyValBorderLeft:"1px solid",keyValBorderHover:"2px solid",pushedContentMarginLeft:"6px",variableValuePaddingRight:"6px",nullFontSize:"11px",nullFontWeight:"bold",nullPadding:"1px 2px",nullBorderRadius:"3px",nanFontSize:"11px",nanFontWeight:"bold",nanPadding:"1px 2px",nanBorderRadius:"3px",undefinedFontSize:"11px",undefinedPadding:"1px 2px",undefinedBorderRadius:"3px",dataTypeFontSize:"11px",dataTypeMarginRight:"4px",datatypeOpacity:"0.8",objectSizeBorderRadius:"3px",objectSizeFontStyle:"italic",objectSizeMargin:"0px 6px 0px 0px",clipboardCursor:"pointer",clipboardCheckMarginLeft:"-12px",metaDataPadding:"0px 0px 0px 10px",arrayGroupMetaPadding:"0px 0px 0px 4px",iconContainerWidth:"17px",tooltipPadding:"4px",editInputMinWidth:"130px",editInputBorderRadius:"2px",editInputPadding:"5px",editInputMarginRight:"4px",editInputFontFamily:"monospace",iconCursor:"pointer",iconFontSize:"15px",iconPaddingRight:"1px",dateValueMarginLeft:"2px",iconMarginRight:"3px",detectedRowPaddingTop:"3px",addKeyCoverBackground:"rgba(255, 255, 255, 0.3)",addKeyCoverPosition:"absolute",addKeyCoverPositionPx:"0px",addKeyModalWidth:"200px",addKeyModalMargin:"auto",addKeyModalPadding:"10px",addKeyModalRadius:"3px",commaColor:"#666",commaFontSize:"12px",commaMarginRight:"4px"};function se(R,E){(E==null||E>R.length)&&(E=R.length);for(var k=0,A=Array(E);k<E;k++)A[k]=R[k];return A}function T(R,E){if(R){if(typeof R=="string")return se(R,E);var k={}.toString.call(R).slice(8,-1);return k==="Object"&&R.constructor&&(k=R.constructor.name),k==="Map"||k==="Set"?Array.from(R):k==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(k)?se(R,E):void 0}}function P(R,E){return(function(k){if(Array.isArray(k))return k})(R)||(function(k,A){var H=k==null?null:typeof Symbol<"u"&&k[Symbol.iterator]||k["@@iterator"];if(H!=null){var q,G,$,X,ie=[],ue=!0,de=!1;try{if($=(H=H.call(k)).next,A===0){if(Object(H)!==H)return;ue=!1}else for(;!(ue=(q=$.call(H)).done)&&(ie.push(q.value),ie.length!==A);ue=!0);}catch(Ce){de=!0,G=Ce}finally{try{if(!ue&&H.return!=null&&(X=H.return(),Object(X)!==X))return}finally{if(de)throw G}}return ie}})(R,E)||T(R,E)||(function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}var F=L(9446),W=L(3639),Q=L.n(W),ce=L(3989),ee=L.n(ce);function _e(R,E){var k=Object.keys(R);if(Object.getOwnPropertySymbols){var A=Object.getOwnPropertySymbols(R);E&&(A=A.filter((function(H){return Object.getOwnPropertyDescriptor(R,H).enumerable}))),k.push.apply(k,A)}return k}function V(R){for(var E=1;E<arguments.length;E++){var k=arguments[E]!=null?arguments[E]:{};E%2?_e(Object(k),!0).forEach((function(A){d(R,A,k[A])})):Object.getOwnPropertyDescriptors?Object.defineProperties(R,Object.getOwnPropertyDescriptors(k)):_e(Object(k)).forEach((function(A){Object.defineProperty(R,A,Object.getOwnPropertyDescriptor(k,A))}))}return R}var j=F.default,J=Object.keys(j),re=function(R){var E,k=(function(X){var ie=X[0]/255,ue=X[1]/255,de=X[2]/255;return[.299*ie+.587*ue+.114*de,-.14713*ie+-.28886*ue+.436*de,.615*ie+-.51499*ue+-.10001*de]})(Q()(R).array()),A=P(k,3),H=A[0],q=A[1],G=A[2],$=(function(X){var ie,ue,de,Ce=X[0],fe=X[1],ke=X[2];return ie=1*Ce+0*fe+1.13983*ke,ue=1*Ce+-.39465*fe+-.5806*ke,de=1*Ce+2.02311*fe+0*ke,[255*(ie=Math.min(Math.max(0,ie),1)),255*(ue=Math.min(Math.max(0,ue),1)),255*(de=Math.min(Math.max(0,de),1))]})([(E=H,E<.25?1:E<.5?.9-E:1.1-E),q,G]);return Q().rgb($).hex()},he=function(R){return function(E){return{className:[E.className,R.className].filter(Boolean).join(" "),style:V(V({},E.style||{}),R.style||{})}}},le=function(R,E){var k=Object.keys(E);for(var A in R)k.indexOf(A)===-1&&k.push(A);return k.reduce((function(H,q){return H[q]=(function(G,$){if(G===void 0)return $;if($===void 0)return G;var X=o(G),ie=o($);switch(X){case"string":switch(ie){case"string":return[$,G].filter(Boolean).join(" ");case"object":return he({className:G,style:$});case"function":return function(ue){for(var de=arguments.length,Ce=new Array(de>1?de-1:0),fe=1;fe<de;fe++)Ce[fe-1]=arguments[fe];return he({className:G})($.apply(void 0,[ue].concat(Ce)))}}break;case"object":switch(ie){case"string":return he({className:$,style:G});case"object":return V(V({},$),G);case"function":return function(ue){for(var de=arguments.length,Ce=new Array(de>1?de-1:0),fe=1;fe<de;fe++)Ce[fe-1]=arguments[fe];return he({style:G})($.apply(void 0,[ue].concat(Ce)))}}break;case"function":switch(ie){case"string":return function(ue){for(var de=arguments.length,Ce=new Array(de>1?de-1:0),fe=1;fe<de;fe++)Ce[fe-1]=arguments[fe];return G.apply(void 0,[he(ue)({className:$})].concat(Ce))};case"object":return function(ue){for(var de=arguments.length,Ce=new Array(de>1?de-1:0),fe=1;fe<de;fe++)Ce[fe-1]=arguments[fe];return G.apply(void 0,[he(ue)({style:$})].concat(Ce))};case"function":return function(ue){for(var de=arguments.length,Ce=new Array(de>1?de-1:0),fe=1;fe<de;fe++)Ce[fe-1]=arguments[fe];return G.apply(void 0,[$.apply(void 0,[ue].concat(Ce))].concat(Ce))}}}})(R[q],E[q]),H}),{})},Ee=function(R,E){for(var k=arguments.length,A=new Array(k>2?k-2:0),H=2;H<k;H++)A[H-2]=arguments[H];if(E===null)return R;Array.isArray(E)||(E=[E]);var q=E.map((function(G){return R[G]})).filter(Boolean).reduce((function(G,$){return typeof $=="string"?G.className=[G.className,$].filter(Boolean).join(" "):o($)==="object"?G.style=V(V({},G.style),$):typeof $=="function"&&(G=V(V({},G),$.apply(void 0,[G].concat(A)))),G}),{className:"",style:{}});return q.className||delete q.className,Object.keys(q.style).length===0&&delete q.style,q},Me=function(R){return Object.keys(R).reduce((function(E,k){return E[k]=/^base/.test(k)?re(R[k]):k==="scheme"?R[k]+":inverted":R[k],E}),{})},Re=ee()((function(R){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},k=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},A=E.defaultBase16,H=A===void 0?j:A,q=E.base16Themes,G=be(k,q===void 0?null:q);G&&(k=V(V({},G),k));for(var $=J.reduce((function(ke,Ae){return ke[Ae]=k[Ae]||H[Ae],ke}),{}),X=Object.keys(k).reduce((function(ke,Ae){return J.indexOf(Ae)===-1&&(ke[Ae]=k[Ae]),ke}),{}),ie=R($),ue=le(X,ie),de=arguments.length,Ce=new Array(de>3?de-3:0),fe=3;fe<de;fe++)Ce[fe-3]=arguments[fe];return ee()(Ee,2).apply(void 0,[ue].concat(Ce))}),3),je=function(R){return!!R.extend},be=function(R,E){if(R&&je(R)&&R.extend&&(R=R.extend),typeof R=="string"){var k=P(R.split(":"),2),A=k[0],H=k[1];R=E?E[A]:F[A],H==="inverted"&&(R=Me(R))}return R&&Object.prototype.hasOwnProperty.call(R,"base00")?R:void 0},gt=function(R){var E=(function(k){return{backgroundColor:k.base00,ellipsisColor:k.base09,braceColor:k.base07,expandedIcon:k.base0D,collapsedIcon:k.base0E,keyColor:k.base07,arrayKeyColor:k.base0C,objectSize:k.base04,copyToClipboard:k.base0F,copyToClipboardCheck:k.base0D,objectBorder:k.base02,dataTypes:{boolean:k.base0E,date:k.base0D,float:k.base0B,function:k.base0D,integer:k.base0F,string:k.base09,nan:k.base08,null:k.base0A,undefined:k.base05,regexp:k.base0A,background:k.base02,bigNumber:k.base09},editVariable:{editIcon:k.base0E,cancelIcon:k.base09,removeIcon:k.base09,addIcon:k.base0E,checkIcon:k.base0E,background:k.base01,color:k.base0A,border:k.base07},addKeyModal:{background:k.base05,border:k.base04,color:k.base0A,labelColor:k.base01},validationFailure:{background:k.base09,iconColor:k.base01,fontColor:k.base01}}})(R);return{"app-container":{fontFamily:U.globalFontFamily,cursor:U.globalCursor,backgroundColor:E.backgroundColor,position:"relative"},ellipsis:{display:"inline-block",color:E.ellipsisColor,fontSize:U.ellipsisFontSize,lineHeight:U.ellipsisLineHeight,cursor:U.ellipsisCursor},"brace-row":{display:"inline-block",cursor:"pointer"},brace:{display:"inline-block",cursor:U.braceCursor,fontWeight:U.braceFontWeight,color:E.braceColor},"expanded-icon":{color:E.expandedIcon},"collapsed-icon":{color:E.collapsedIcon},colon:{display:"inline-block",margin:U.keyMargin,color:E.keyColor,verticalAlign:"top"},objectKeyVal:function(k,A){return{style:c({paddingTop:U.keyValPaddingTop,paddingRight:U.keyValPaddingRight,paddingBottom:U.keyValPaddingBottom,borderLeft:U.keyValBorderLeft+" "+E.objectBorder,":hover":{paddingLeft:A.paddingLeft-1+"px",borderLeft:U.keyValBorderHover+" "+E.objectBorder}},A)}},"object-key-val-no-border":{padding:U.keyValPadding},"pushed-content":{marginLeft:U.pushedContentMarginLeft},variableValue:function(k,A){return{style:c({display:"inline-block",paddingRight:U.variableValuePaddingRight,position:"relative"},A)}},"object-name":{display:"inline-block",color:E.keyColor,letterSpacing:U.keyLetterSpacing,fontStyle:U.keyFontStyle,verticalAlign:U.keyVerticalAlign,opacity:U.keyOpacity,":hover":{opacity:U.keyOpacityHover}},"array-key":{display:"inline-block",color:E.arrayKeyColor,letterSpacing:U.keyLetterSpacing,fontStyle:U.keyFontStyle,verticalAlign:U.keyVerticalAlign,opacity:U.keyOpacity,":hover":{opacity:U.keyOpacityHover}},"object-size":{color:E.objectSize,borderRadius:U.objectSizeBorderRadius,fontStyle:U.objectSizeFontStyle,margin:U.objectSizeMargin,cursor:"default"},"data-type-label":{fontSize:U.dataTypeFontSize,marginRight:U.dataTypeMarginRight,opacity:U.datatypeOpacity},boolean:{display:"inline-block",color:E.dataTypes.boolean},date:{display:"inline-block",color:E.dataTypes.date},"date-value":{marginLeft:U.dateValueMarginLeft},float:{display:"inline-block",color:E.dataTypes.float},function:{display:"inline-block",color:E.dataTypes.function,cursor:"pointer",whiteSpace:"pre-line"},"function-value":{fontStyle:"italic"},integer:{display:"inline-block",color:E.dataTypes.integer},bigNumber:{display:"inline-block",color:E.dataTypes.bigNumber},string:{display:"inline-block",color:E.dataTypes.string},nan:{display:"inline-block",color:E.dataTypes.nan,fontSize:U.nanFontSize,fontWeight:U.nanFontWeight,backgroundColor:E.dataTypes.background,padding:U.nanPadding,borderRadius:U.nanBorderRadius},null:{display:"inline-block",color:E.dataTypes.null,fontSize:U.nullFontSize,fontWeight:U.nullFontWeight,backgroundColor:E.dataTypes.background,padding:U.nullPadding,borderRadius:U.nullBorderRadius},undefined:{display:"inline-block",color:E.dataTypes.undefined,fontSize:U.undefinedFontSize,padding:U.undefinedPadding,borderRadius:U.undefinedBorderRadius,backgroundColor:E.dataTypes.background},regexp:{display:"inline-block",color:E.dataTypes.regexp},"copy-to-clipboard":{cursor:U.clipboardCursor},"copy-icon":{color:E.copyToClipboard,fontSize:U.iconFontSize,marginRight:U.iconMarginRight,verticalAlign:"top"},"copy-icon-copied":{color:E.copyToClipboardCheck,marginLeft:U.clipboardCheckMarginLeft},"array-group-meta-data":{display:"inline-block",padding:U.arrayGroupMetaPadding},"object-meta-data":{display:"inline-block",padding:U.metaDataPadding},"icon-container":{display:"inline-block",width:U.iconContainerWidth},tooltip:{padding:U.tooltipPadding},removeVarIcon:{verticalAlign:"top",display:"inline-block",color:E.editVariable.removeIcon,cursor:U.iconCursor,fontSize:U.iconFontSize,marginRight:U.iconMarginRight},addVarIcon:{verticalAlign:"top",display:"inline-block",color:E.editVariable.addIcon,cursor:U.iconCursor,fontSize:U.iconFontSize,marginRight:U.iconMarginRight},editVarIcon:{verticalAlign:"top",display:"inline-block",color:E.editVariable.editIcon,cursor:U.iconCursor,fontSize:U.iconFontSize,marginRight:U.iconMarginRight},"edit-icon-container":{display:"inline-block",verticalAlign:"top"},"check-icon":{display:"inline-block",cursor:U.iconCursor,color:E.editVariable.checkIcon,fontSize:U.iconFontSize,paddingRight:U.iconPaddingRight},"cancel-icon":{display:"inline-block",cursor:U.iconCursor,color:E.editVariable.cancelIcon,fontSize:U.iconFontSize,paddingRight:U.iconPaddingRight},"edit-input":{display:"inline-block",minWidth:U.editInputMinWidth,borderRadius:U.editInputBorderRadius,backgroundColor:E.editVariable.background,color:E.editVariable.color,padding:U.editInputPadding,marginRight:U.editInputMarginRight,fontFamily:U.editInputFontFamily},"detected-row":{paddingTop:U.detectedRowPaddingTop},"key-modal-request":{position:U.addKeyCoverPosition,top:U.addKeyCoverPositionPx,left:U.addKeyCoverPositionPx,right:U.addKeyCoverPositionPx,bottom:U.addKeyCoverPositionPx,backgroundColor:U.addKeyCoverBackground},"key-modal":{width:U.addKeyModalWidth,backgroundColor:E.addKeyModal.background,marginLeft:U.addKeyModalMargin,marginRight:U.addKeyModalMargin,padding:U.addKeyModalPadding,borderRadius:U.addKeyModalRadius,marginTop:"15px",position:"relative"},"key-modal-label":{color:E.addKeyModal.labelColor,marginLeft:"2px",marginBottom:"5px",fontSize:"11px"},"key-modal-input-container":{overflow:"hidden"},"key-modal-input":{width:"100%",padding:"3px 6px",fontFamily:"monospace",color:E.addKeyModal.color,border:"none",boxSizing:"border-box",borderRadius:"2px"},"key-modal-cancel":{backgroundColor:E.editVariable.removeIcon,position:"absolute",top:"0px",right:"0px",borderRadius:"0px 3px 0px 3px",cursor:"pointer"},"key-modal-cancel-icon":{color:E.addKeyModal.labelColor,fontSize:U.iconFontSize,transform:"rotate(45deg)"},"key-modal-submit":{color:E.editVariable.addIcon,fontSize:U.iconFontSize,position:"absolute",right:"2px",top:"3px",cursor:"pointer"},"function-ellipsis":{display:"inline-block",color:E.ellipsisColor,fontSize:U.ellipsisFontSize,lineHeight:U.ellipsisLineHeight,cursor:U.ellipsisCursor},"validation-failure":{float:"right",padding:"3px 6px",borderRadius:"2px",cursor:"pointer",color:E.validationFailure.fontColor,backgroundColor:E.validationFailure.background},"validation-failure-label":{marginRight:"6px"},"validation-failure-clear":{position:"relative",verticalAlign:"top",cursor:"pointer",color:E.validationFailure.iconColor,fontSize:U.iconFontSize,transform:"rotate(45deg)"},comma:{display:"inline-block",color:U.commaColor,fontSize:U.commaFontSize,marginRight:U.commaMarginRight,cursor:"default"}}};function oe(R,E,k){return R||console.error("theme has not been set"),(function(A){var H=Y;return A!==!1&&A!=="none"||(H=ne),Re(gt,{defaultBase16:H})(A)})(R)(E,k)}var Je=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props,A=(k.rjvId,k.type_name),H=k.displayDataTypes,q=k.theme;return H?a().createElement("span",Object.assign({className:"data-type-label"},oe(q,"data-type-label")),A):null}}])})(a().PureComponent),It=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props;return a().createElement("div",oe(k.theme,"boolean"),a().createElement(Je,Object.assign({type_name:"bool"},k)),k.value?"true":"false")}}])})(a().PureComponent),Nt=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props;return a().createElement("div",oe(k.theme,"date"),a().createElement(Je,Object.assign({type_name:"date"},k)),a().createElement("span",Object.assign({className:"date-value"},oe(k.theme,"date-value")),k.value.toLocaleTimeString("en-us",{weekday:"short",year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})))}}])})(a().PureComponent),We=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props;return a().createElement("div",oe(k.theme,"float"),a().createElement(Je,Object.assign({type_name:"float"},k)),this.props.value)}}])})(a().PureComponent);function Ve(R){return(function(E){if(Array.isArray(E))return se(E)})(R)||(function(E){if(typeof Symbol<"u"&&E[Symbol.iterator]!=null||E["@@iterator"]!=null)return Array.from(E)})(R)||T(R)||(function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)})()}var Xe=L(9784),bt=(function(){return S((function R(){_(this,R),this.handler=function(){}}),[{key:"register",value:function(R){this.handler=R}},{key:"dispatch",value:function(R){var E;(E=this.handler)===null||E===void 0||E.call(this,R)}}])})();globalThis.__globalDispatcherInstance||(globalThis.__globalDispatcherInstance=new bt);const te=globalThis.__globalDispatcherInstance;var Z=new((function(R){function E(){var k;_(this,E);for(var A=arguments.length,H=new Array(A),q=0;q<A;q++)H[q]=arguments[q];return(k=t(this,E,[].concat(H))).objects={},k.set=function(G,$,X,ie){k.objects[G]===void 0&&(k.objects[G]={}),k.objects[G][$]===void 0&&(k.objects[G][$]={}),k.objects[G][$][X]=ie},k.get=function(G,$,X,ie){return k.objects[G]===void 0||k.objects[G][$]===void 0||k.objects[G][$][X]==null?ie:k.objects[G][$][X]},k.handleAction=function(G){var $=G.rjvId,X=G.data;switch(G.name){case"RESET":k.emit("reset-"+$);break;case"VARIABLE_UPDATED":G.data.updated_src=k.updateSrc($,X),k.set($,"action","variable-update",c(c({},X),{},{type:"variable-edited"})),k.emit("variable-update-"+$);break;case"VARIABLE_REMOVED":G.data.updated_src=k.updateSrc($,X),k.set($,"action","variable-update",c(c({},X),{},{type:"variable-removed"})),k.emit("variable-update-"+$);break;case"VARIABLE_ADDED":G.data.updated_src=k.updateSrc($,X),k.set($,"action","variable-update",c(c({},X),{},{type:"variable-added"})),k.emit("variable-update-"+$);break;case"ADD_VARIABLE_KEY_REQUEST":k.set($,"action","new-key-request",X),k.emit("add-key-request-"+$)}},k.updateSrc=function(G,$){var X=$.name,ie=$.namespace,ue=$.new_value,de=($.existing_value,$.variable_removed);ie.shift();var Ce,fe=k.get(G,"global","src"),ke=k.deepCopy(fe,Ve(ie)),Ae=ke,Se=(function(Oe,dt){var Fe=typeof Symbol<"u"&&Oe[Symbol.iterator]||Oe["@@iterator"];if(!Fe){if(Array.isArray(Oe)||(Fe=T(Oe))||dt){Fe&&(Oe=Fe);var At=0,it=function(){};return{s:it,n:function(){return At>=Oe.length?{done:!0}:{done:!1,value:Oe[At++]}},e:function(Tt){throw Tt},f:it}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rs,Yt=!0,Jt=!1;return{s:function(){Fe=Fe.call(Oe)},n:function(){var Tt=Fe.next();return Yt=Tt.done,Tt},e:function(Tt){Jt=!0,rs=Tt},f:function(){try{Yt||Fe.return==null||Fe.return()}finally{if(Jt)throw rs}}}})(ie);try{for(Se.s();!(Ce=Se.n()).done;)Ae=Ae[Ce.value]}catch(Oe){Se.e(Oe)}finally{Se.f()}return de?I(Ae)=="array"?Ae.splice(X,1):delete Ae[X]:X!==null?Ae[X]=ue:ke=ue,k.set(G,"global","src",ke),ke},k.deepCopy=function(G,$){var X,ie=I(G),ue=$.shift();return ie=="array"?X=Ve(G):ie=="object"&&(X=c({},G)),ue!==void 0&&(X[ue]=k.deepCopy(G[ue],$)),X},k}return n(E,R),S(E)})(Xe.EventEmitter));te.register(Z.handleAction.bind(Z));const ae=Z;var ge=(function(R){function E(k){var A;return _(this,E),(A=t(this,E,[k])).toggleCollapsed=function(){A.setState({collapsed:!A.state.collapsed},(function(){ae.set(A.props.rjvId,A.props.namespace,"collapsed",A.state.collapsed)}))},A.getFunctionDisplay=function(H){var q=A.props;return H?a().createElement("span",null,A.props.value.toString().slice(9,-1).replace(/\{[\s\S]+/,""),a().createElement("span",{className:"function-collapsed",style:{fontWeight:"bold"}},a().createElement("span",null,"{"),a().createElement("span",oe(q.theme,"ellipsis"),"..."),a().createElement("span",null,"}"))):A.props.value.toString().slice(9,-1)},A.state={collapsed:ae.get(k.rjvId,k.namespace,"collapsed",!0)},A}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props,A=this.state.collapsed;return a().createElement("div",oe(k.theme,"function"),a().createElement(Je,Object.assign({type_name:"function"},k)),a().createElement("span",Object.assign({},oe(k.theme,"function-value"),{className:"rjv-function-container",onClick:this.toggleCollapsed}),this.getFunctionDisplay(A)))}}])})(a().PureComponent),xe=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){return a().createElement("div",oe(this.props.theme,"nan"),"NaN")}}])})(a().PureComponent),ye=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){return a().createElement("div",oe(this.props.theme,"null"),"NULL")}}])})(a().PureComponent),$e=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props;return a().createElement("div",oe(k.theme,"integer"),a().createElement(Je,Object.assign({type_name:"int"},k)),this.props.value)}}])})(a().PureComponent),ze=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props;return a().createElement("div",oe(k.theme,"regexp"),a().createElement(Je,Object.assign({type_name:"regexp"},k)),this.props.value.toString())}}])})(a().PureComponent),at=(function(R){function E(k){var A;return _(this,E),(A=t(this,E,[k])).toggleCollapsed=function(){A.setState({collapsed:!A.state.collapsed},(function(){ae.set(A.props.rjvId,A.props.namespace,"collapsed",A.state.collapsed)}))},A.state={collapsed:ae.get(k.rjvId,k.namespace,"collapsed",!0)},A}return n(E,R),S(E,[{key:"render",value:function(){var k=this.state.collapsed,A=this.props,H=A.collapseStringsAfterLength,q=A.theme,G=A.escapeStrings,$=A.value,X=I(H)==="integer",ie={style:{cursor:"default",wordBreak:"break-all"}};return G&&($=z($)),X&&$.length>H&&(ie.style.cursor="pointer",k&&($=a().createElement("span",null,$.substring(0,H),a().createElement("span",oe(q,"ellipsis")," ...")))),a().createElement("div",oe(q,"string"),a().createElement(Je,Object.assign({type_name:"string"},A)),a().createElement("span",Object.assign({className:"string-value"},ie,{onClick:this.toggleCollapsed}),'"',$,'"'))}}])})(a().PureComponent),lt=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){return a().createElement("div",oe(this.props.theme,"undefined"),"undefined")}}])})(a().PureComponent),Qe=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props;return a().createElement("div",oe(k.theme,"bigNumber"),a().createElement(Je,Object.assign({type_name:"bigNumber"},k)),this.props.value.toString())}}])})(a().PureComponent);function ft(){return ft=Object.assign?Object.assign.bind():function(R){for(var E=1;E<arguments.length;E++){var k=arguments[E];for(var A in k)({}).hasOwnProperty.call(k,A)&&(R[A]=k[A])}return R},ft.apply(null,arguments)}const Ge=p.useLayoutEffect;var St=function(R,E){typeof R!="function"?R.current=E:R(E)};const ct=function(R,E){var k=(0,p.useRef)();return(0,p.useCallback)((function(A){R.current=A,k.current&&St(k.current,null),k.current=E,E&&St(E,A)}),[E])};var yt={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},ht=function(R){Object.keys(yt).forEach((function(E){R.style.setProperty(E,yt[E],"important")}))},Te=null,Ne=function(R,E){var k=R.scrollHeight;return E.sizingStyle.boxSizing==="border-box"?k+E.borderSize:k-E.paddingSize},Ke=function(){},ut=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],jt=!!document.documentElement.currentStyle,wt=function(R){var E=window.getComputedStyle(R);if(E===null)return null;var k,A=(k=E,ut.reduce((function(q,G){return q[G]=k[G],q}),{})),H=A.boxSizing;return H===""?null:(jt&&H==="border-box"&&(A.width=parseFloat(A.width)+parseFloat(A.borderRightWidth)+parseFloat(A.borderLeftWidth)+parseFloat(A.paddingRight)+parseFloat(A.paddingLeft)+"px"),{sizingStyle:A,paddingSize:parseFloat(A.paddingBottom)+parseFloat(A.paddingTop),borderSize:parseFloat(A.borderBottomWidth)+parseFloat(A.borderTopWidth)})};function et(R,E,k){var A,H,q=(A=k,H=p.useRef(A),Ge((function(){H.current=A})),H);p.useLayoutEffect((function(){var G=function($){return q.current($)};if(R)return R.addEventListener(E,G),function(){return R.removeEventListener(E,G)}}),[])}var Ht=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],Pe=function(R,E){var k=R.cacheMeasurements,A=R.maxRows,H=R.minRows,q=R.onChange,G=q===void 0?Ke:q,$=R.onHeightChange,X=$===void 0?Ke:$,ie=N(R,Ht),ue=ie.value!==void 0,de=p.useRef(null),Ce=ct(de,E),fe=p.useRef(0),ke=p.useRef(),Ae=function(){var Se=de.current,Oe=k&&ke.current?ke.current:wt(Se);if(Oe){ke.current=Oe;var dt=(function(it,rs,Yt,Jt){Yt===void 0&&(Yt=1),Jt===void 0&&(Jt=1/0),Te||((Te=document.createElement("textarea")).setAttribute("tabindex","-1"),Te.setAttribute("aria-hidden","true"),ht(Te)),Te.parentNode===null&&document.body.appendChild(Te);var Tt=it.paddingSize,Qr=it.borderSize,sr=it.sizingStyle,ei=sr.boxSizing;Object.keys(sr).forEach((function(_o){var ti=_o;Te.style[ti]=sr[ti]})),ht(Te),Te.value=rs;var is=Ne(Te,it);Te.value=rs,is=Ne(Te,it),Te.value="x";var rr=Te.scrollHeight-Tt,ir=rr*Yt;ei==="border-box"&&(ir=ir+Tt+Qr),is=Math.max(ir,is);var nr=rr*Jt;return ei==="border-box"&&(nr=nr+Tt+Qr),[is=Math.min(nr,is),rr]})(Oe,Se.value||Se.placeholder||"x",H,A),Fe=dt[0],At=dt[1];fe.current!==Fe&&(fe.current=Fe,Se.style.setProperty("height",Fe+"px","important"),X(Fe,{rowHeight:At}))}};return p.useLayoutEffect(Ae),(function(Se,Oe){et(document.body,"reset",(function(dt){Se.current.form===dt.target&&Oe(dt)}))})(de,(function(){if(!ue){var Se=de.current.value;requestAnimationFrame((function(){var Oe=de.current;Oe&&Se!==Oe.value&&Ae()}))}})),et(window,"resize",Ae),(function(Se){et(document.fonts,"loadingdone",Se)})(Ae),p.createElement("textarea",ft({},ie,{onChange:function(Se){ue||Ae(),G(Se)},ref:Ce}))},tt=p.forwardRef(Pe);function st(R,E){R=R.trim();try{if((R=structuredClone(R))[0]==="[")return De("array",JSON.parse(R));if(R[0]==="{")return De("object",JSON.parse(R));if(R.match(/\-?\d+\.\d+/)&&R.match(/\-?\d+\.\d+/)[0]===R)return E&&parseFloat(R).toString()!==R?De("bigNumber",R):De("float",parseFloat(R));if(R.match(/\-?\d+e-\d+/)&&R.match(/\-?\d+e-\d+/)[0]===R)return De("float",Number(R));if(R.match(/\-?\d+/)&&R.match(/\-?\d+/)[0]===R)return E&&parseInt(R).toString()!==R?De("bigNumber",R):De("integer",parseInt(R));if(R.match(/\-?\d+e\+\d+/)&&R.match(/\-?\d+e\+\d+/)[0]===R)return De("integer",Number(R))}catch{}switch(R=R.toLowerCase()){case"undefined":return De("undefined",void 0);case"nan":return De("nan",NaN);case"null":return De("null",null);case"true":return De("boolean",!0);case"false":return De("boolean",!1);default:if(R=Date.parse(R))return De("date",new Date(R))}return De(!1,null)}function De(R,E){return{type:R,value:E}}var qe=["style"],xt=["style"],Et=["style"],rt=["style"],pt=["style"],kt=["style"],Bt=["style"],$t=["style"],Xs=["style"],ms=["style"],Zn=["style"],Yn=["style"],Jn=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props,A=k.style,H=O(k,qe);return a().createElement("span",H,a().createElement("svg",Object.assign({},_t(A),{viewBox:"0 0 24 24",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),a().createElement("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7,13H17V11H7"})))}}])})(a().PureComponent),Xn=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props,A=k.style,H=O(k,xt);return a().createElement("span",H,a().createElement("svg",Object.assign({},_t(A),{viewBox:"0 0 24 24",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),a().createElement("path",{d:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"})))}}])})(a().PureComponent),Qn=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props,A=k.style,H=O(k,Et),q=_t(A).style;return a().createElement("span",H,a().createElement("svg",{fill:q.color,width:q.height,height:q.width,style:q,viewBox:"0 0 1792 1792"},a().createElement("path",{d:"M1344 800v64q0 14-9 23t-23 9h-832q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h832q14 0 23 9t9 23zm128 448v-832q0-66-47-113t-113-47h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113zm128-832v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"})))}}])})(a().PureComponent),eo=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props,A=k.style,H=O(k,rt),q=_t(A).style;return a().createElement("span",H,a().createElement("svg",{fill:q.color,width:q.height,height:q.width,style:q,viewBox:"0 0 1792 1792"},a().createElement("path",{d:"M1344 800v64q0 14-9 23t-23 9h-352v352q0 14-9 23t-23 9h-64q-14 0-23-9t-9-23v-352h-352q-14 0-23-9t-9-23v-64q0-14 9-23t23-9h352v-352q0-14 9-23t23-9h64q14 0 23 9t9 23v352h352q14 0 23 9t9 23zm128 448v-832q0-66-47-113t-113-47h-832q-66 0-113 47t-47 113v832q0 66 47 113t113 47h832q66 0 113-47t47-113zm128-832v832q0 119-84.5 203.5t-203.5 84.5h-832q-119 0-203.5-84.5t-84.5-203.5v-832q0-119 84.5-203.5t203.5-84.5h832q119 0 203.5 84.5t84.5 203.5z"})))}}])})(a().PureComponent),to=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props,A=k.style,H=O(k,pt);return a().createElement("span",H,a().createElement("svg",{style:c(c({},_t(A).style),{},{paddingLeft:"2px",verticalAlign:"top"}),viewBox:"0 0 15 15",fill:"currentColor"},a().createElement("path",{d:"M0 14l6-6-6-6z"})))}}])})(a().PureComponent),so=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props,A=k.style,H=O(k,kt);return a().createElement("span",H,a().createElement("svg",{style:c(c({},_t(A).style),{},{paddingLeft:"2px",verticalAlign:"top"}),viewBox:"0 0 15 15",fill:"currentColor"},a().createElement("path",{d:"M0 5l6 6 6-6z"})))}}])})(a().PureComponent),zr=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props,A=k.style,H=O(k,Bt);return a().createElement("span",H,a().createElement("svg",Object.assign({},_t(A),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),a().createElement("g",null,a().createElement("path",{d:"m30 35h-25v-22.5h25v7.5h2.5v-12.5c0-1.4-1.1-2.5-2.5-2.5h-7.5c0-2.8-2.2-5-5-5s-5 2.2-5 5h-7.5c-1.4 0-2.5 1.1-2.5 2.5v27.5c0 1.4 1.1 2.5 2.5 2.5h25c1.4 0 2.5-1.1 2.5-2.5v-5h-2.5v5z m-20-27.5h2.5s2.5-1.1 2.5-2.5 1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5 1.3 2.5 2.5 2.5h2.5s2.5 1.1 2.5 2.5h-20c0-1.5 1.1-2.5 2.5-2.5z m-2.5 20h5v-2.5h-5v2.5z m17.5-5v-5l-10 7.5 10 7.5v-5h12.5v-5h-12.5z m-17.5 10h7.5v-2.5h-7.5v2.5z m12.5-17.5h-12.5v2.5h12.5v-2.5z m-7.5 5h-5v2.5h5v-2.5z"}))))}}])})(a().PureComponent),Qs=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props,A=k.style,H=O(k,$t);return a().createElement("span",H,a().createElement("svg",Object.assign({},_t(A),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),a().createElement("g",null,a().createElement("path",{d:"m28.6 25q0-0.5-0.4-1l-4-4 4-4q0.4-0.5 0.4-1 0-0.6-0.4-1.1l-2-2q-0.4-0.4-1-0.4-0.6 0-1 0.4l-4.1 4.1-4-4.1q-0.4-0.4-1-0.4-0.6 0-1 0.4l-2 2q-0.5 0.5-0.5 1.1 0 0.5 0.5 1l4 4-4 4q-0.5 0.5-0.5 1 0 0.7 0.5 1.1l2 2q0.4 0.4 1 0.4 0.6 0 1-0.4l4-4.1 4.1 4.1q0.4 0.4 1 0.4 0.6 0 1-0.4l2-2q0.4-0.4 0.4-1z m8.7-5q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}])})(a().PureComponent),ro=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props,A=k.style,H=O(k,Xs);return a().createElement("span",H,a().createElement("svg",Object.assign({},_t(A),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),a().createElement("g",null,a().createElement("path",{d:"m30.1 21.4v-2.8q0-0.6-0.4-1t-1-0.5h-5.7v-5.7q0-0.6-0.4-1t-1-0.4h-2.9q-0.6 0-1 0.4t-0.4 1v5.7h-5.7q-0.6 0-1 0.5t-0.5 1v2.8q0 0.6 0.5 1t1 0.5h5.7v5.7q0 0.5 0.4 1t1 0.4h2.9q0.6 0 1-0.4t0.4-1v-5.7h5.7q0.6 0 1-0.5t0.4-1z m7.2-1.4q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}])})(a().PureComponent),Gr=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props,A=k.style,H=O(k,ms);return a().createElement("span",H,a().createElement("svg",Object.assign({},_t(A),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),a().createElement("g",null,a().createElement("path",{d:"m31.6 21.6h-10v10h-3.2v-10h-10v-3.2h10v-10h3.2v10h10v3.2z"}))))}}])})(a().PureComponent),io=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props,A=k.style,H=O(k,Zn);return a().createElement("span",H,a().createElement("svg",Object.assign({},_t(A),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),a().createElement("g",null,a().createElement("path",{d:"m19.8 26.4l2.6-2.6-3.4-3.4-2.6 2.6v1.3h2.2v2.1h1.2z m9.8-16q-0.3-0.4-0.7 0l-7.8 7.8q-0.4 0.4 0 0.7t0.7 0l7.8-7.8q0.4-0.4 0-0.7z m1.8 13.2v4.3q0 2.6-1.9 4.5t-4.5 1.9h-18.6q-2.6 0-4.5-1.9t-1.9-4.5v-18.6q0-2.7 1.9-4.6t4.5-1.8h18.6q1.4 0 2.6 0.5 0.3 0.2 0.4 0.5 0.1 0.4-0.2 0.7l-1.1 1.1q-0.3 0.3-0.7 0.1-0.5-0.1-1-0.1h-18.6q-1.4 0-2.5 1.1t-1 2.5v18.6q0 1.4 1 2.5t2.5 1h18.6q1.5 0 2.5-1t1.1-2.5v-2.9q0-0.2 0.2-0.4l1.4-1.5q0.3-0.3 0.8-0.1t0.4 0.6z m-2.1-16.5l6.4 6.5-15 15h-6.4v-6.5z m9.9 3l-2.1 2-6.4-6.4 2.1-2q0.6-0.7 1.5-0.7t1.5 0.7l3.4 3.4q0.6 0.6 0.6 1.5t-0.6 1.5z"}))))}}])})(a().PureComponent),er=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props,A=k.style,H=O(k,Yn);return a().createElement("span",H,a().createElement("svg",Object.assign({},_t(A),{viewBox:"0 0 40 40",fill:"currentColor",preserveAspectRatio:"xMidYMid meet"}),a().createElement("g",null,a().createElement("path",{d:"m31.7 16.4q0-0.6-0.4-1l-2.1-2.1q-0.4-0.4-1-0.4t-1 0.4l-9.1 9.1-5-5q-0.5-0.4-1-0.4t-1 0.4l-2.1 2q-0.4 0.4-0.4 1 0 0.6 0.4 1l8.1 8.1q0.4 0.4 1 0.4 0.6 0 1-0.4l12.2-12.1q0.4-0.4 0.4-1z m5.6 3.6q0 4.7-2.3 8.6t-6.3 6.2-8.6 2.3-8.6-2.3-6.2-6.2-2.3-8.6 2.3-8.6 6.2-6.2 8.6-2.3 8.6 2.3 6.3 6.2 2.3 8.6z"}))))}}])})(a().PureComponent);function _t(R){return R||(R={}),{style:c(c({verticalAlign:"middle"},R),{},{color:R.color?R.color:"#000000",height:"1em",width:"1em"})}}var Kr=(function(R){function E(k){var A;return _(this,E),(A=t(this,E,[k])).copiedTimer=null,A.copyToClipboardFallback=function(H){var q=document.createElement("textarea");q.value=H,document.body.appendChild(q),q.select(),document.execCommand("copy"),document.body.removeChild(q)},A.handleCopy=function(){var H=A.props,q=H.clickCallback,G=H.src,$=H.namespace,X=JSON.stringify(A.clipboardValue(G),null,"  ");navigator.clipboard?navigator.clipboard.writeText(X).catch((function(){A.copyToClipboardFallback(X)})):A.copyToClipboardFallback(X),A.copiedTimer=setTimeout((function(){A.setState({copied:!1})}),5500),A.setState({copied:!0},(function(){typeof q=="function"&&q({src:G,namespace:$,name:$[$.length-1]})}))},A.getClippyIcon=function(){var H=A.props.theme;return A.state.copied?a().createElement("span",null,a().createElement(zr,Object.assign({className:"copy-icon"},oe(H,"copy-icon"))),a().createElement("span",oe(H,"copy-icon-copied"),"")):a().createElement(zr,Object.assign({className:"copy-icon"},oe(H,"copy-icon")))},A.clipboardValue=function(H){switch(I(H)){case"function":case"regexp":return H.toString();default:return H}},A.state={copied:!1},A}return n(E,R),S(E,[{key:"componentWillUnmount",value:function(){this.copiedTimer&&(clearTimeout(this.copiedTimer),this.copiedTimer=null)}},{key:"render",value:function(){var k=this.props,A=(k.src,k.theme),H=k.hidden,q=k.rowHovered,G=oe(A,"copy-to-clipboard").style,$="inline";return H&&($="none"),a().createElement("span",{className:"copy-to-clipboard-container",title:"Copy to clipboard",style:{verticalAlign:"top",display:q?"inline-block":"none"}},a().createElement("span",{style:c(c({},G),{},{display:$}),onClick:this.handleCopy},this.getClippyIcon()))}}])})(a().PureComponent);const no=(function(R){function E(k){var A;return _(this,E),(A=t(this,E,[k])).getEditIcon=function(){var H=A.props,q=H.variable,G=H.theme;return a().createElement("div",{className:"click-to-edit",style:{verticalAlign:"top",display:A.state.hovered?"inline-block":"none"}},a().createElement(io,Object.assign({className:"click-to-edit-icon"},oe(G,"editVarIcon"),{onClick:function(){A.prepopInput(q)}})))},A.prepopInput=function(H){if(A.props.onEdit!==!1){var q=(function($,X){var ie;switch(I($,X)){case"undefined":ie="undefined";break;case"nan":ie="NaN";break;case"string":ie=$;break;case"bigNumber":case"date":case"function":case"regexp":ie=$.toString();break;default:try{ie=JSON.stringify($,null,"  ")}catch{ie=""}}return ie})(H.value,A.props.bigNumber),G=st(q,A.props.bigNumber);A.setState({editMode:!0,editValue:q,parsedInput:{type:G.type,value:G.value}})}},A.getRemoveIcon=function(){var H=A.props,q=H.variable,G=H.namespace,$=H.theme,X=H.rjvId;return a().createElement("div",{className:"click-to-remove",style:{verticalAlign:"top",display:A.state.hovered?"inline-block":"none"}},a().createElement(Qs,Object.assign({className:"click-to-remove-icon"},oe($,"removeVarIcon"),{onClick:function(){te.dispatch({name:"VARIABLE_REMOVED",rjvId:X,data:{name:q.name,namespace:G,existing_value:q.value,variable_removed:!0}})}})))},A.getValue=function(H,q){var G=!q&&H.type,$=A.props;switch(G){case!1:return A.getEditInput();case"string":return a().createElement(at,Object.assign({value:H.value},$));case"integer":return a().createElement($e,Object.assign({value:H.value},$));case"float":return a().createElement(We,Object.assign({value:H.value},$));case"boolean":return a().createElement(It,Object.assign({value:H.value},$));case"function":return a().createElement(ge,Object.assign({value:H.value},$));case"null":return a().createElement(ye,$);case"nan":return a().createElement(xe,$);case"undefined":return a().createElement(lt,$);case"date":return a().createElement(Nt,Object.assign({value:H.value},$));case"regexp":return a().createElement(ze,Object.assign({value:H.value},$));case"bigNumber":return a().createElement(Qe,Object.assign({value:H.value},$));default:return a().createElement("div",{className:"object-value"},JSON.stringify(H.value))}},A.getEditInput=function(){var H=A.props,q=H.keyModifier,G=H.selectOnFocus,$=H.theme,X=A.state.editValue;return a().createElement("div",null,a().createElement(tt,Object.assign({type:"text",ref:function(ie){ie&&ie[G?"select":"focus"]()},value:X,className:"variable-editor",onChange:function(ie){var ue=ie.target.value,de=st(ue,A.props.bigNumber);A.setState({editValue:ue,parsedInput:{type:de.type,value:de.value}})},onKeyDown:function(ie){switch(ie.key){case"Escape":A.setState({editMode:!1,editValue:""});break;case"Enter":q(ie,"submit")&&A.submitEdit(!0)}ie.stopPropagation()},placeholder:"update this value",minRows:2},oe($,"edit-input"))),a().createElement("div",oe($,"edit-icon-container"),a().createElement(Qs,Object.assign({className:"edit-cancel"},oe($,"cancel-icon"),{onClick:function(ie){ie&&ie.stopPropagation(),A.setState({editMode:!1,editValue:""})}})),a().createElement(er,Object.assign({className:"edit-check string-value"},oe($,"check-icon"),{onClick:function(ie){ie&&ie.stopPropagation(),A.submitEdit()}})),a().createElement("div",null,A.showDetected())))},A.submitEdit=function(H){var q=A.props,G=q.variable,$=q.namespace,X=q.rjvId,ie=q.bigNumber,ue=A.state,de=ue.editValue,Ce=ue.parsedInput,fe=de;H&&Ce.type&&(fe=Ce.value,ie&&Ce.type==="bigNumber"&&(fe=new ie(fe))),A.setState({editMode:!1}),te.dispatch({name:"VARIABLE_UPDATED",rjvId:X,data:{name:G.name,namespace:$,existing_value:G.value,new_value:fe,variable_removed:!1}})},A.showDetected=function(){var H=A.props,q=H.theme,G=(H.variable,H.namespace,H.rjvId,A.state.parsedInput),$=(G.type,G.value,A.getDetectedInput());if($)return a().createElement("div",null,a().createElement("div",oe(q,"detected-row"),$,a().createElement(er,{className:"edit-check detected",style:c({verticalAlign:"top",paddingLeft:"3px"},oe(q,"check-icon").style),onClick:function(X){X&&X.stopPropagation(),A.submitEdit(!0)}})))},A.getDetectedInput=function(){var H=A.state.parsedInput,q=H.type,G=H.value,$=A.props,X=$.theme;if(q!==!1)switch(q.toLowerCase()){case"object":return a().createElement("span",null,a().createElement("span",{style:c(c({},oe(X,"brace").style),{},{cursor:"default"})},"{"),a().createElement("span",{style:c(c({},oe(X,"ellipsis").style),{},{cursor:"default"})},"..."),a().createElement("span",{style:c(c({},oe(X,"brace").style),{},{cursor:"default"})},"}"));case"array":return a().createElement("span",null,a().createElement("span",{style:c(c({},oe(X,"brace").style),{},{cursor:"default"})},"["),a().createElement("span",{style:c(c({},oe(X,"ellipsis").style),{},{cursor:"default"})},"..."),a().createElement("span",{style:c(c({},oe(X,"brace").style),{},{cursor:"default"})},"]"));case"string":return a().createElement(at,Object.assign({value:G},$));case"integer":return a().createElement($e,Object.assign({value:G},$));case"float":return a().createElement(We,Object.assign({value:G},$));case"boolean":return a().createElement(It,Object.assign({value:G},$));case"function":return a().createElement(ge,Object.assign({value:G},$));case"null":return a().createElement(ye,$);case"nan":return a().createElement(xe,$);case"undefined":return a().createElement(lt,$);case"date":return a().createElement(Nt,Object.assign({value:new Date(G)},$));case"bignumber":return a().createElement(Qe,Object.assign({value:G},$))}},A.state={editMode:!1,editValue:"",hovered:!1,renameKey:!1,parsedInput:{type:!1,value:null}},A}return n(E,R),S(E,[{key:"render",value:function(){var k=this,A=this.props,H=A.variable,q=A.singleIndent,G=A.type,$=A.theme,X=A.namespace,ie=A.indentWidth,ue=A.enableClipboard,de=A.onEdit,Ce=A.onDelete,fe=A.onSelect,ke=A.displayArrayKey,Ae=A.quotesOnKeys,Se=A.keyModifier,Oe=A.showComma,dt=A.isLast,Fe=this.state.editMode;return a().createElement("div",Object.assign({},oe($,"objectKeyVal",{paddingLeft:ie*q}),{onMouseEnter:function(){return k.setState(c(c({},k.state),{},{hovered:!0}))},onMouseLeave:function(){return k.setState(c(c({},k.state),{},{hovered:!1}))},className:"variable-row",key:H.name}),G=="array"?ke?a().createElement("span",Object.assign({},oe($,"array-key"),{key:H.name+"_"+X}),H.name,a().createElement("div",oe($,"colon"),":")):null:a().createElement("span",null,a().createElement("span",Object.assign({},oe($,"object-name"),{className:"object-key",key:H.name+"_"+X}),!!Ae&&a().createElement("span",{style:{verticalAlign:"top"}},'"'),a().createElement("span",{style:{display:"inline-block"}},z(H.name)),!!Ae&&a().createElement("span",{style:{verticalAlign:"top"}},'"')),a().createElement("span",oe($,"colon"),":")),a().createElement("div",Object.assign({className:"variable-value",onClick:fe===!1&&de===!1?null:function(At){var it=Ve(X);Se(At,"edit")&&de!==!1?k.prepopInput(H):fe!==!1&&(it.shift(),fe(c(c({},H),{},{namespace:it})))}},oe($,"variableValue",{cursor:fe===!1?"default":"pointer"})),this.getValue(H,Fe)),Oe&&!dt&&a().createElement("span",oe($,"comma"),","),ue?a().createElement(Kr,{rowHovered:this.state.hovered,hidden:Fe,src:H.value,clickCallback:ue,theme:$,namespace:[].concat(Ve(X),[H.name])}):null,de!==!1&&Fe==0?this.getEditIcon():null,Ce!==!1&&Fe==0?this.getRemoveIcon():null)}}])})(a().PureComponent);var qr=(function(R){function E(){var k;_(this,E);for(var A=arguments.length,H=new Array(A),q=0;q<A;q++)H[q]=arguments[q];return(k=t(this,E,[].concat(H))).getObjectSize=function(){var G=k.props,$=G.size,X=G.theme;if(G.displayObjectSize)return a().createElement("span",Object.assign({className:"object-size"},oe(X,"object-size")),$," item",$===1?"":"s")},k.getAddAttribute=function(G){var $=k.props,X=$.theme,ie=$.namespace,ue=$.name,de=$.src,Ce=$.rjvId,fe=$.depth;return a().createElement("span",{className:"click-to-add",style:{verticalAlign:"top",display:G?"inline-block":"none"}},a().createElement(ro,Object.assign({className:"click-to-add-icon"},oe(X,"addVarIcon"),{onClick:function(){var ke={name:fe>0?ue:null,namespace:ie.splice(0,ie.length-1),existing_value:de,variable_removed:!1,key_name:null};I(de)==="object"?te.dispatch({name:"ADD_VARIABLE_KEY_REQUEST",rjvId:Ce,data:ke}):te.dispatch({name:"VARIABLE_ADDED",rjvId:Ce,data:c(c({},ke),{},{new_value:[].concat(Ve(de),[null])})})}})))},k.getRemoveObject=function(G){var $=k.props,X=$.theme,ie=($.hover,$.namespace),ue=$.name,de=$.src,Ce=$.rjvId;if(ie.length!==1)return a().createElement("span",{className:"click-to-remove",style:{display:G?"inline-block":"none"}},a().createElement(Qs,Object.assign({className:"click-to-remove-icon"},oe(X,"removeVarIcon"),{onClick:function(){te.dispatch({name:"VARIABLE_REMOVED",rjvId:Ce,data:{name:ue,namespace:ie.splice(0,ie.length-1),existing_value:de,variable_removed:!0}})}})))},k.render=function(){var G=k.props,$=G.theme,X=G.onDelete,ie=G.onAdd,ue=G.enableClipboard,de=G.src,Ce=G.namespace,fe=G.rowHovered;return a().createElement("div",Object.assign({},oe($,"object-meta-data"),{className:"object-meta-data",onClick:function(ke){ke.stopPropagation()}}),k.getObjectSize(),ue?a().createElement(Kr,{rowHovered:fe,clickCallback:ue,src:de,theme:$,namespace:Ce}):null,ie!==!1?k.getAddAttribute(fe):null,X!==!1?k.getRemoveObject(fe):null)},k}return n(E,R),S(E)})(a().PureComponent);function Zr(R){var E=R.parent_type,k=R.namespace,A=R.quotesOnKeys,H=R.theme,q=R.jsvRoot,G=R.name,$=R.displayArrayKey,X=R.name?R.name:"";return!q||G!==!1&&G!==null?E=="array"?$?a().createElement("span",Object.assign({},oe(H,"array-key"),{key:k}),a().createElement("span",{className:"array-key"},X),a().createElement("span",oe(H,"colon"),":")):a().createElement("span",null):a().createElement("span",Object.assign({},oe(H,"object-name"),{key:k}),a().createElement("span",{className:"object-key"},A&&a().createElement("span",{style:{verticalAlign:"top"}},'"'),a().createElement("span",null,X),A&&a().createElement("span",{style:{verticalAlign:"top"}},'"')),a().createElement("span",oe(H,"colon"),":")):a().createElement("span",null)}function Yr(R){var E=R.theme;switch(R.iconStyle){case"triangle":return a().createElement(so,Object.assign({},oe(E,"expanded-icon"),{className:"expanded-icon"}));case"square":return a().createElement(Qn,Object.assign({},oe(E,"expanded-icon"),{className:"expanded-icon"}));default:return a().createElement(Jn,Object.assign({},oe(E,"expanded-icon"),{className:"expanded-icon"}))}}function Jr(R){var E=R.theme;switch(R.iconStyle){case"triangle":return a().createElement(to,Object.assign({},oe(E,"collapsed-icon"),{className:"collapsed-icon"}));case"square":return a().createElement(eo,Object.assign({},oe(E,"collapsed-icon"),{className:"collapsed-icon"}));default:return a().createElement(Xn,Object.assign({},oe(E,"collapsed-icon"),{className:"collapsed-icon"}))}}var oo=["src","groupArraysAfterLength","depth","name","theme","jsvRoot","namespace","parent_type"],Xr=(function(R){function E(k){var A;return _(this,E),(A=t(this,E,[k])).toggleCollapsed=function(H){var q=[];for(var G in A.state.expanded)q.push(A.state.expanded[G]);q[H]=!q[H],A.setState({expanded:q})},A.state={expanded:[]},A}return n(E,R),S(E,[{key:"getExpandedIcon",value:function(k){var A=this.props,H=A.theme,q=A.iconStyle;return this.state.expanded[k]?a().createElement(Yr,{theme:H,iconStyle:q}):a().createElement(Jr,{theme:H,iconStyle:q})}},{key:"render",value:function(){var k=this,A=this.props,H=A.src,q=A.groupArraysAfterLength,G=(A.depth,A.name),$=A.theme,X=A.jsvRoot,ie=A.namespace,ue=(A.parent_type,O(A,oo)),de=0,Ce=5*this.props.indentWidth;X||(de=5*this.props.indentWidth);var fe=q,ke=Math.ceil(H.length/fe);return a().createElement("div",Object.assign({className:"object-key-val"},oe($,X?"jsv-root":"objectKeyVal",{paddingLeft:de})),a().createElement(Zr,this.props),a().createElement("span",null,a().createElement(qr,Object.assign({size:H.length},this.props))),Ve(Array(ke)).map((function(Ae,Se){return a().createElement("div",Object.assign({key:Se,className:"object-key-val array-group"},oe($,"objectKeyVal",{marginLeft:6,paddingLeft:Ce})),a().createElement("span",oe($,"brace-row"),a().createElement("div",Object.assign({className:"icon-container"},oe($,"icon-container"),{onClick:function(Oe){k.toggleCollapsed(Se)}}),k.getExpandedIcon(Se)),k.state.expanded[Se]?a().createElement(gs,Object.assign({key:G+Se,depth:0,name:!1,collapsed:!1,groupArraysAfterLength:fe,index_offset:Se*fe,src:H.slice(Se*fe,Se*fe+fe),namespace:ie,type:"array",parent_type:"array_group",theme:$,showComma:k.props.showComma,isLast:Se===ke-1},ue)):a().createElement("span",Object.assign({},oe($,"brace"),{onClick:function(Oe){k.toggleCollapsed(Se)},className:"array-group-brace"}),"[",a().createElement("div",Object.assign({},oe($,"array-group-meta-data"),{className:"array-group-meta-data"}),a().createElement("span",Object.assign({className:"object-size"},oe($,"object-size")),Se*fe," - ",Se*fe+fe>H.length?H.length:Se*fe+fe)),"]")))})))}}])})(a().PureComponent),ao=["depth","src","namespace","name","type","parent_type","theme","jsvRoot","iconStyle","showComma","isLast"],tr=(function(R){function E(k){var A;_(this,E),(A=t(this,E,[k])).toggleCollapsed=function(){A.setState({expanded:!A.state.expanded},(function(){ae.set(A.props.rjvId,A.props.namespace,"expanded",A.state.expanded)}))},A.getObjectContent=function(q,G,$){return a().createElement("div",{className:"pushed-content object-container"},a().createElement("div",Object.assign({className:"object-content"},oe(A.props.theme,"pushed-content")),A.renderObjectContents(G,$)))},A.getEllipsis=function(){return A.state.size===0?null:a().createElement("div",Object.assign({},oe(A.props.theme,"ellipsis"),{className:"node-ellipsis",onClick:A.toggleCollapsed}),"...")},A.getObjectMetaData=function(q){var G=A.props,$=(G.rjvId,G.theme,A.state),X=$.size,ie=$.hovered;return a().createElement(qr,Object.assign({rowHovered:ie,size:X},A.props))},A.renderObjectContents=function(q,G){var $,X=A.props,ie=X.depth,ue=X.parent_type,de=X.index_offset,Ce=X.groupArraysAfterLength,fe=X.namespace,ke=X.showComma,Ae=A.state.object_type,Se=[],Oe=Object.keys(q||{});return A.props.sortKeys&&Ae!=="array"&&(Oe=Oe.sort()),Oe.forEach((function(dt,Fe){$=new lo(dt,q[dt],G.bigNumber);var At=Fe===Oe.length-1;if(ue==="array_group"&&de&&($.name=parseInt($.name)+de),Object.prototype.hasOwnProperty.call(q,dt))if($.type==="object")Se.push(a().createElement(gs,Object.assign({key:$.name,depth:ie+1,name:$.name,src:$.value,namespace:fe.concat($.name),parent_type:Ae,isLast:At,showComma:ke},G)));else if($.type==="array"){var it=gs;Ce&&$.value.length>Ce&&(it=Xr),Se.push(a().createElement(it,Object.assign({key:$.name,depth:ie+1,name:$.name,src:$.value,namespace:fe.concat($.name),type:"array",parent_type:Ae,isLast:At,showComma:ke},G)))}else Se.push(a().createElement(no,Object.assign({key:$.name+"_"+fe,variable:$,singleIndent:5,namespace:fe,type:A.props.type,isLast:At,showComma:ke},G)))})),Se};var H=E.getState(k);return A.state=c(c({},H),{},{prevProps:{}}),A}return n(E,R),S(E,[{key:"getBraceStart",value:function(k,A){var H=this,q=this.props,G=(q.src,q.theme),$=q.iconStyle;if(q.parent_type==="array_group")return a().createElement("span",null,a().createElement("span",oe(G,"brace"),k==="array"?"[":"{"));var X=A?Yr:Jr;return a().createElement("span",null,a().createElement("span",Object.assign({onClick:function(ie){H.toggleCollapsed()}},oe(G,"brace-row")),a().createElement("div",Object.assign({className:"icon-container"},oe(G,"icon-container")),a().createElement(X,{theme:G,iconStyle:$})),a().createElement(Zr,this.props),a().createElement("span",oe(G,"brace"),k==="array"?"[":"{")))}},{key:"render",value:function(){var k=this,A=this.props,H=A.depth,q=A.src,G=(A.namespace,A.name,A.type,A.parent_type),$=A.theme,X=A.jsvRoot,ie=A.iconStyle,ue=A.showComma,de=A.isLast,Ce=O(A,ao),fe=this.state,ke=fe.object_type,Ae=fe.expanded,Se={};return X||G==="array_group"?G==="array_group"&&(Se.borderLeft=0,Se.display="inline"):Se.paddingLeft=5*this.props.indentWidth,a().createElement("div",Object.assign({className:"object-key-val",onMouseEnter:function(){return k.setState(c(c({},k.state),{},{hovered:!0}))},onMouseLeave:function(){return k.setState(c(c({},k.state),{},{hovered:!1}))}},oe($,X?"jsv-root":"objectKeyVal",Se)),this.getBraceStart(ke,Ae),Ae?this.getObjectContent(H,q,c({theme:$,iconStyle:ie},Ce)):this.getEllipsis(),a().createElement("span",{className:"brace-row"},a().createElement("span",{style:c(c({},oe($,"brace").style),{},{paddingLeft:Ae?"3px":"0px"})},ke==="array"?"]":"}")),ue&&!de&&!X&&a().createElement("span",oe($,"comma"),","),this.getObjectMetaData(q))}}],[{key:"getDerivedStateFromProps",value:function(k,A){var H=A.prevProps;return k.src!==H.src||k.collapsed!==H.collapsed||k.name!==H.name||k.namespace!==H.namespace||k.rjvId!==H.rjvId?c(c({},E.getState(k)),{},{prevProps:k}):null}}])})(a().PureComponent);tr.getState=function(R){var E=Object.keys(R.src).length,k=(R.collapsed===!1||R.collapsed!==!0&&R.collapsed>R.depth)&&(!R.shouldCollapse||R.shouldCollapse({name:R.name,src:R.src,type:I(R.src),namespace:R.namespace})===!1)&&E!==0;return{expanded:ae.get(R.rjvId,R.namespace,"expanded",k),object_type:R.type==="array"?"array":"object",parent_type:R.type==="array"?"array":"object",size:E,hovered:!1}};var lo=S((function R(E,k,A){_(this,R),this.name=E,this.value=k,this.type=I(k,A)}));M(tr);const gs=tr;var co=(function(R){function E(){var k;_(this,E);for(var A=arguments.length,H=new Array(A),q=0;q<A;q++)H[q]=arguments[q];return(k=t(this,E,[].concat(H))).render=function(){var G,$,X,ie,ue=k.props,de=[ue.name],Ce=gs;return typeof ue.name!="object"||Array.isArray(ue.name)||(de=[((G=ue.name)===null||G===void 0?void 0:G.displayName)||(($=ue.name)===null||$===void 0?void 0:$.name)||((X=ue.name)===null||X===void 0||(ie=X.type)===null||ie===void 0?void 0:ie.name)||"Anonymous"]),Array.isArray(ue.src)&&ue.groupArraysAfterLength&&ue.src.length>ue.groupArraysAfterLength&&(Ce=Xr),a().createElement("div",{className:"pretty-json-container object-container"},a().createElement("div",{className:"object-content"},a().createElement(Ce,Object.assign({namespace:de,depth:0,jsvRoot:!0},ue))))},k}return n(E,R),S(E)})(a().PureComponent),ho=(function(R){function E(k){var A;return _(this,E),(A=t(this,E,[k])).closeModal=function(){te.dispatch({rjvId:A.props.rjvId,name:"RESET"})},A.submit=function(){A.props.submit(A.state.input)},A.state={input:k.input?k.input:""},A}return n(E,R),S(E,[{key:"render",value:function(){var k=this,A=this.props,H=A.theme,q=A.rjvId,G=A.isValid,$=this.state.input,X=G($);return a().createElement("div",Object.assign({className:"key-modal-request"},oe(H,"key-modal-request"),{onClick:this.closeModal}),a().createElement("div",Object.assign({},oe(H,"key-modal"),{onClick:function(ie){ie.stopPropagation()}}),a().createElement("div",oe(H,"key-modal-label"),"Key Name:"),a().createElement("div",{style:{position:"relative"}},a().createElement("input",Object.assign({},oe(H,"key-modal-input"),{className:"key-modal-input",ref:function(ie){return ie&&ie.focus()},spellCheck:!1,value:$,placeholder:"...",onChange:function(ie){k.setState({input:ie.target.value})},onKeyPress:function(ie){X&&ie.key==="Enter"?k.submit():ie.key==="Escape"&&k.closeModal()}})),X?a().createElement(er,Object.assign({},oe(H,"key-modal-submit"),{className:"key-modal-submit",onClick:function(ie){return k.submit()}})):null),a().createElement("span",oe(H,"key-modal-cancel"),a().createElement(Gr,Object.assign({},oe(H,"key-modal-cancel-icon"),{className:"key-modal-cancel",onClick:function(){te.dispatch({rjvId:q,name:"RESET"})}})))))}}])})(a().PureComponent),uo=(function(R){function E(){var k;_(this,E);for(var A=arguments.length,H=new Array(A),q=0;q<A;q++)H[q]=arguments[q];return(k=t(this,E,[].concat(H))).isValid=function(G){var $=k.props.rjvId,X=ae.get($,"action","new-key-request");return G!=""&&Object.keys(X.existing_value).indexOf(G)===-1},k.submit=function(G){var $=k.props.rjvId,X=ae.get($,"action","new-key-request");X.new_value=c({},X.existing_value),X.new_value[G]=k.props.defaultValue,te.dispatch({name:"VARIABLE_ADDED",rjvId:$,data:X})},k}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props,A=k.active,H=k.theme,q=k.rjvId;return A?a().createElement(ho,{rjvId:q,theme:H,isValid:this.isValid,submit:this.submit}):null}}])})(a().PureComponent),fo=(function(R){function E(){return _(this,E),t(this,E,arguments)}return n(E,R),S(E,[{key:"render",value:function(){var k=this.props,A=k.message,H=k.active,q=k.theme,G=k.rjvId;return H?a().createElement("div",Object.assign({className:"validation-failure"},oe(q,"validation-failure"),{onClick:function(){te.dispatch({rjvId:G,name:"RESET"})}}),a().createElement("span",oe(q,"validation-failure-label"),A),a().createElement(Gr,oe(q,"validation-failure-clear"))):null}}])})(a().PureComponent),vs=(function(R){function E(k){var A;return _(this,E),(A=t(this,E,[k])).rjvId=Date.now().toString()+Math.random().toString(36).slice(2),A.getListeners=function(){return{reset:A.resetState,"variable-update":A.updateSrc,"add-key-request":A.addKeyRequest}},A.updateSrc=function(){var H,q=ae.get(A.rjvId,"action","variable-update"),G=q.name,$=q.namespace,X=q.new_value,ie=q.existing_value,ue=q.updated_src,de=q.type,Ce=A.props,fe=Ce.onEdit,ke=Ce.onDelete,Ae=Ce.onAdd,Se={existing_src:A.state.src,new_value:X,updated_src:ue,name:G,namespace:$,existing_value:ie};switch(de){case"variable-added":H=Ae(Se);break;case"variable-edited":H=fe(Se);break;case"variable-removed":H=ke(Se)}H!==!1?(ae.set(A.rjvId,"global","src",ue),A.setState({src:ue})):A.setState({validationFailure:!0})},A.addKeyRequest=function(){A.setState({addKeyRequest:!0})},A.resetState=function(){A.setState({validationFailure:!1,addKeyRequest:!1})},A.state={addKeyRequest:!1,editKeyRequest:!1,validationFailure:!1,src:E.defaultProps.src,name:E.defaultProps.name,theme:E.defaultProps.theme,validationMessage:E.defaultProps.validationMessage,prevSrc:E.defaultProps.src,prevName:E.defaultProps.name,prevTheme:E.defaultProps.theme},A}return n(E,R),S(E,[{key:"componentDidMount",value:function(){ae.set(this.rjvId,"global","src",this.state.src);var k=this.getListeners();for(var A in k)ae.on(A+"-"+this.rjvId,k[A]);this.setState({addKeyRequest:!1,editKeyRequest:!1})}},{key:"componentDidUpdate",value:function(k,A){A.addKeyRequest!==!1&&this.setState({addKeyRequest:!1}),A.editKeyRequest!==!1&&this.setState({editKeyRequest:!1}),k.src!==this.state.src&&ae.set(this.rjvId,"global","src",this.state.src)}},{key:"componentWillUnmount",value:function(){var k=this.getListeners();for(var A in k)ae.removeListener(A+"-"+this.rjvId,k[A])}},{key:"render",value:function(){var k=this.state,A=k.validationFailure,H=k.validationMessage,q=k.addKeyRequest,G=k.theme,$=k.src,X=k.name,ie=this.props,ue=ie.style,de=ie.defaultValue;return a().createElement("div",{className:"react-json-view",style:c(c({},oe(G,"app-container").style),ue)},a().createElement(fo,{message:H,active:A,theme:G,rjvId:this.rjvId}),a().createElement(co,Object.assign({},this.props,{src:$,name:X,theme:G,type:I($),rjvId:this.rjvId})),a().createElement(uo,{active:q,theme:G,rjvId:this.rjvId,defaultValue:de}))}}],[{key:"getDerivedStateFromProps",value:function(k,A){if(k.src!==A.prevSrc||k.name!==A.prevName||k.theme!==A.prevTheme){var H={src:k.src,name:k.name,theme:k.theme,validationMessage:k.validationMessage,prevSrc:k.src,prevName:k.name,prevTheme:k.theme};return E.validateState(H)}return null}}])})(a().PureComponent);vs.defaultProps={src:{},name:"root",theme:"rjv-default",collapsed:!1,collapseStringsAfterLength:!1,shouldCollapse:!1,sortKeys:!1,quotesOnKeys:!0,groupArraysAfterLength:100,indentWidth:4,enableClipboard:!0,escapeStrings:!0,displayObjectSize:!0,displayDataTypes:!0,onEdit:!1,onDelete:!1,onAdd:!1,onSelect:!1,iconStyle:"triangle",style:{},validationMessage:"Validation Error",defaultValue:null,displayArrayKey:!0,selectOnFocus:!1,keyModifier:function(R){return R.metaKey||R.ctrlKey},bigNumber:null,showComma:!0},vs.validateState=function(R){var E={};return I(R.theme)!=="object"||(function(k){var A=["base00","base01","base02","base03","base04","base05","base06","base07","base08","base09","base0A","base0B","base0C","base0D","base0E","base0F"];if(I(k)==="object"){for(var H=0;H<A.length;H++)if(!(A[H]in k))return!1;return!0}return!1})(R.theme)||(console.error("react-json-view error:","theme prop must be a theme name or valid base-16 theme object.",'defaulting to "rjv-default" theme'),E.theme="rjv-default"),I(R.src)!=="object"&&I(R.src)!=="array"&&(console.error("react-json-view error:","src property must be a valid json object"),E.name="ERROR",E.src={message:"src property must be a valid json object"}),c(c({},R),E)},M(vs);const po=vs})(),D})()))})(Es)),Es.exports}var h1=c1();const br=go(h1);function u1({parameters:e}){const{t:h}=me();return u.jsxs("div",{className:"mt-2",children:[u.jsx(Le.Text,{className:"text-sm font-semibold text-gray-300",children:h("SYSTEM_MESSAGE_MODAL$PARAMETERS")}),u.jsx("div",{className:"text-sm mt-2 p-3 bg-gray-900 rounded-md overflow-auto text-gray-300 max-h-[400px] shadow-inner",children:u.jsx(br,{name:!1,src:e,theme:mr})})]})}function d1({title:e,isExpanded:h,onClick:g,className:y}){return u.jsxs("button",{type:"button",onClick:g,className:`w-full py-3 px-2 text-left flex items-center justify-between hover:bg-gray-700 transition-colors ${y||""}`,children:[u.jsx("div",{className:"flex items-center",children:u.jsx(Le.Text,{className:"font-bold text-gray-100",children:e})}),u.jsx(Le.Text,{className:"text-gray-300",children:h?u.jsx(un,{size:18}):u.jsx(dn,{size:18})})]})}function f1({tool:e,index:h,isExpanded:g,onToggle:y}){const x=e,L=x.function||x,D=L.name||x.type==="function"&&x.function?.name||"",o=L.description||x.type==="function"&&x.function?.description||"",i=L.parameters||x.type==="function"&&x.function?.parameters||null;return u.jsxs("div",{className:"rounded-md overflow-hidden",children:[u.jsx(d1,{title:String(D),isExpanded:g,onClick:()=>y(h)}),g&&u.jsxs("div",{className:"px-2 pb-3 pt-1",children:[u.jsx("div",{className:"mt-2 mb-3",children:u.jsx(Le.Text,{className:"text-sm whitespace-pre-wrap text-gray-300 leading-relaxed",children:String(o)})}),i&&u.jsx(u1,{parameters:i})]})]})}function p1({tools:e,expandedTools:h,onToggleTool:g}){return u.jsx("div",{className:"p-2 space-y-3",children:e.map((y,x)=>u.jsx(f1,{tool:y,index:x,isExpanded:h[x]||!1,onToggle:g},x))})}function _1(){const{t:e}=me();return u.jsx("div",{className:"flex items-center justify-center h-full p-4",children:u.jsx(Le.Text,{className:"text-gray-400",children:e("SYSTEM_MESSAGE_MODAL$NO_TOOLS")})})}function m1({activeTab:e,systemMessage:h,expandedTools:g,onToggleTool:y}){return e==="system"?u.jsx(a1,{content:h.content}):e==="tools"?h.tools&&h.tools.length>0?u.jsx(p1,{tools:h.tools,expandedTools:g,onToggleTool:y}):u.jsx(_1,{}):null}function wn({isOpen:e,onClose:h,systemMessage:g}){const[y,x]=B.useState("system"),[L,D]=B.useState({});if(!g)return null;const o=i=>{D(d=>({...d,[i]:!d[i]}))};return e&&u.jsx(Us,{onClose:h,children:u.jsxs(fs,{width:"medium",className:"max-h-[80vh] flex flex-col items-start",children:[u.jsx(n1,{agentClass:g.agent_class,openhandsVersion:g.openhands_version}),u.jsxs("div",{className:"w-full",children:[u.jsx(o1,{activeTab:y,onTabChange:x,hasTools:!!(g.tools&&g.tools.length>0)}),u.jsx("div",{className:"max-h-[51vh] overflow-auto rounded-md custom-scrollbar-always",children:u.jsx(m1,{activeTab:y,systemMessage:g,expandedTools:L,onToggleTool:o})})]})]})})}const g1=()=>{const{conversationId:e}=nt(),{curAgentState:h}=Ct();return qt({queryKey:["conversation",e,"microagents"],queryFn:async()=>{if(!e)throw new Error("No conversation ID provided");return(await vt.getMicroagents(e)).microagents},enabled:!!e&&h!==ve.LOADING&&h!==ve.INIT,staleTime:1e3*60*5,gcTime:1e3*60*15})};function v1({isAgentReady:e,isLoading:h,isRefetching:g,onRefresh:y}){const{t:x}=me();return u.jsx("div",{className:"flex flex-col gap-6 w-full",children:u.jsxs("div",{className:"flex items-center justify-between w-full",children:[u.jsx(Ur,{title:x(K.MICROAGENTS_MODAL$TITLE)}),e&&u.jsxs(cs,{testId:"refresh-microagents",type:"button",variant:"primary",className:"flex items-center gap-2",onClick:y,isDisabled:h||g,children:[u.jsx(gc,{size:16,className:`${g?"animate-spin":""}`}),x(K.BUTTON$REFRESH)]})]})})}function C1(){return u.jsx("div",{className:"flex justify-center items-center py-8",children:u.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary"})})}function b1({isError:e}){const{t:h}=me();return u.jsx("div",{className:"flex items-center justify-center h-full p-4",children:u.jsx(Le.Text,{className:"text-gray-400",children:h(e?K.MICROAGENTS_MODAL$FETCH_ERROR:K.CONVERSATION$NO_MICROAGENTS)})})}function S1({triggers:e}){const{t:h}=me();return!e||e.length===0?null:u.jsxs("div",{className:"mt-2 mb-3",children:[u.jsx(Le.Text,{className:"text-sm font-semibold text-gray-300 mb-2",children:h(K.MICROAGENTS_MODAL$TRIGGERS)}),u.jsx("div",{className:"flex flex-wrap gap-1",children:e.map(g=>u.jsx(Le.Text,{className:"px-2 py-1 text-xs rounded-full bg-blue-900",children:g},g))})]})}const y1=Sa("whitespace-pre-wrap",{variants:{size:{default:"text-sm",small:"text-xs"},font:{default:"",mono:"font-mono"},lineHeight:{default:"",relaxed:"leading-relaxed"},background:{default:"",dark:"bg-gray-900"},textColor:{default:"",light:"text-gray-300"},padding:{default:"",medium:"p-3",large:"px-5"},borderRadius:{default:"",medium:"rounded-md"},shadow:{default:"",inner:"shadow-inner"},maxHeight:{default:"",small:"max-h-[400px]",large:"max-h-[60vh]"},overflow:{default:"",auto:"overflow-auto"}},defaultVariants:{size:"default",font:"default",lineHeight:"default",background:"default",textColor:"default",padding:"default",borderRadius:"default",shadow:"default",maxHeight:"default",overflow:"default"}});function w1({size:e,font:h,lineHeight:g,background:y,textColor:x,padding:L,borderRadius:D,shadow:o,maxHeight:i,overflow:d,className:v,testId:c,children:_}){return u.jsx("pre",{"data-testid":c,className:we(y1({size:e,font:h,lineHeight:g,background:y,textColor:x,padding:L,borderRadius:D,shadow:o,maxHeight:i,overflow:d}),v),children:_})}function x1({content:e}){const{t:h}=me();return u.jsxs("div",{className:"mt-2",children:[u.jsx(Le.Text,{className:"text-sm font-semibold text-gray-300 mb-2",children:h(K.MICROAGENTS_MODAL$CONTENT)}),u.jsx(w1,{size:"default",font:"mono",lineHeight:"relaxed",background:"dark",textColor:"light",padding:"medium",borderRadius:"medium",shadow:"inner",maxHeight:"small",overflow:"auto",className:"mt-2",children:e||h(K.MICROAGENTS_MODAL$NO_CONTENT)})]})}function E1({agent:e,isExpanded:h,onToggle:g}){return u.jsxs("div",{className:"rounded-md overflow-hidden",children:[u.jsxs("button",{type:"button",onClick:()=>g(e.name),className:"w-full py-3 px-2 text-left flex items-center justify-between hover:bg-gray-700 transition-colors",children:[u.jsx("div",{className:"flex items-center",children:u.jsx(Le.Text,{className:"font-bold text-gray-100",children:e.name})}),u.jsxs("div",{className:"flex items-center",children:[u.jsx(Le.Text,{className:"px-2 py-1 text-xs rounded-full bg-gray-800 mr-2",children:e.type==="repo"?"Repository":"Knowledge"}),u.jsx(Le.Text,{className:"text-gray-300",children:h?u.jsx(un,{size:18}):u.jsx(dn,{size:18})})]})]}),h&&u.jsxs("div",{className:"px-2 pb-3 pt-1",children:[u.jsx(S1,{triggers:e.triggers}),u.jsx(x1,{content:e.content})]})]})}function xn({onClose:e}){const{t:h}=me(),{curAgentState:g}=Ct(),{data:y}=Ie(),[x,L]=B.useState({}),{data:D,isLoading:o,isError:i,refetch:d,isRefetching:v}=g1();if(y?.conversation_version==="V1")return null;const _=S=>{L(m=>({...m,[S]:!m[S]}))},C=![ve.LOADING,ve.INIT].includes(g);return u.jsx(Us,{onClose:e,children:u.jsxs(fs,{width:"medium",className:"max-h-[80vh] flex flex-col items-start",testID:"microagents-modal",children:[u.jsx(v1,{isAgentReady:C,isLoading:o,isRefetching:v,onRefresh:d}),C&&u.jsx(Le.Text,{className:"text-sm text-gray-400",children:h(K.MICROAGENTS_MODAL$WARNING)}),u.jsxs("div",{className:"w-full h-[60vh] overflow-auto rounded-md custom-scrollbar-always",children:[!C&&u.jsx("div",{className:"w-full h-full flex items-center text-center justify-center text-2xl text-tertiary-light",children:u.jsx(Le.Text,{children:h(K.DIFF_VIEWER$WAITING_FOR_RUNTIME)})}),o&&u.jsx(C1,{}),!o&&C&&(i||!D||D.length===0)&&u.jsx(b1,{isError:i}),!o&&C&&D&&D.length>0&&u.jsx("div",{className:"p-2 space-y-3",children:D.map(S=>{const m=x[S.name]||!1;return u.jsx(E1,{agent:S,isExpanded:m,onToggle:_},S.name)})})]})]})})}function k1(){const{t:e}=me(),{conversationId:h}=Is(),{data:g}=Ie(),[y,x]=pe.useState(!1),{handleShowAgentTools:L,handleShowMicroagents:D,systemModalVisible:o,setSystemModalVisible:i,microagentsModalVisible:d,setMicroagentsModalVisible:v,systemMessage:c,shouldShowAgentTools:_}=yn({conversationId:h,conversationStatus:g?.status,showOptions:!0,onContextMenuToggle:x}),C=S=>{S.preventDefault(),S.stopPropagation(),x(!y)};return u.jsxs("div",{className:"relative",children:[u.jsxs("div",{className:"flex items-center gap-1 cursor-pointer",onClick:C,children:[u.jsx(Fc,{width:18,height:18,color:"#959CB2"}),u.jsx("span",{className:"text-sm font-normal leading-5 text-white",children:e(K.MICROAGENTS_MODAL$TOOLS)})]}),y&&u.jsx(t1,{onClose:()=>x(!1),onShowMicroagents:D,onShowAgentTools:L,shouldShowAgentTools:_}),u.jsx(wn,{isOpen:o,onClose:()=>i(!1),systemMessage:c?c.args:null}),d&&u.jsx(xn,{onClose:()=>v(!1)})]})}const En=()=>{const e=Zt(),h=js(g=>g.removeErrorMessage);return Lt({mutationKey:["start-conversation"],mutationFn:async g=>(g.version||Qo(e,g.conversationId))==="V1"?ea(g.conversationId):ta(g.conversationId,g.providers),onMutate:async()=>(await e.cancelQueries({queryKey:["user","conversations"]}),{previousConversations:e.getQueryData(["user","conversations"])}),onError:(g,y,x)=>{x?.previousConversations&&e.setQueryData(["user","conversations"],x.previousConversations)},onSettled:(g,y,x)=>{Xo(e,x.conversationId)},onSuccess:(g,y)=>{h(),Jo(e,y.conversationId,"RUNNING")}})},A1=()=>{const e=Zt();return Lt({mutationFn:h=>sa(h.conversationId),onMutate:async()=>(await e.cancelQueries({queryKey:["user","conversations"]}),{previousConversations:e.getQueryData(["user","conversations"])}),onError:(h,g,y)=>{y?.previousConversations&&e.setQueryData(["user","conversations"],y.previousConversations)},onSettled:(h,g,y)=>{e.invalidateQueries({queryKey:["user","conversation",y.conversationId]}),e.invalidateQueries({queryKey:["user","conversations"]}),e.invalidateQueries({queryKey:["v1-batch-get-app-conversations"]})}})},T1=()=>{const e=Zt();return Lt({mutationFn:h=>ra(h.conversationId),onMutate:async()=>(await e.cancelQueries({queryKey:["user","conversations"]}),{previousConversations:e.getQueryData(["user","conversations"])}),onError:(h,g,y)=>{y?.previousConversations&&e.setQueryData(["user","conversations"],y.previousConversations)},onSettled:(h,g,y)=>{e.invalidateQueries({queryKey:["user","conversation",y.conversationId]}),e.invalidateQueries({queryKey:["user","conversations"]}),e.invalidateQueries({queryKey:["v1-batch-get-app-conversations"]})}})};function M1({conversationStatus:e,disabled:h,handleResumeAgent:g}){const{data:y}=Ie(),x=Wi(),L=En(),D=A1(),o=T1(),{conversationId:i}=nt(),{providers:d}=ss(),{send:v}=Gs(),c=y?.conversation_version==="V1",_=()=>{x.mutate({conversationId:i})},C=()=>{if(c){D.mutate({conversationId:i});return}v(Ar(ve.STOPPED))},S=()=>{if(c){o.mutate({conversationId:i});return}g()},m=()=>{L.mutate({conversationId:i,providers:d})},l=x.isPending||D.isPending;return u.jsxs("div",{className:"w-full flex items-center justify-between",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(k1,{}),u.jsx(Mc,{conversationStatus:e,isPausing:l,handleStop:_,handleResumeAgent:m})]}),u.jsx(Pc,{className:"ml-2 md:ml-3",handleStop:C,handleResumeAgent:S,disabled:h,isPausing:l})]})}function R1({chatContainerRef:e,isDragOver:h,disabled:g,showButton:y,buttonClassName:x,conversationStatus:L,chatInputRef:D,handleFileIconClick:o,handleSubmit:i,handleResumeAgent:d,onDragOver:v,onDragLeave:c,onDrop:_,onInput:C,onPaste:S,onKeyDown:m,onFocus:l,onBlur:r}){return u.jsxs("div",{ref:e,className:"bg-[#25272D] box-border content-stretch flex flex-col items-start justify-center p-4 pt-3 relative rounded-[15px] w-full",onDragOver:t=>v(t,g),onDragLeave:t=>c(t,g),onDrop:t=>_(t,g),children:[h&&u.jsx(nc,{}),u.jsx(Cc,{}),u.jsx(xc,{chatInputRef:D,disabled:g,showButton:y,buttonClassName:x,handleFileIconClick:o,handleSubmit:i,onInput:C,onPaste:S,onKeyDown:m,onFocus:l,onBlur:r}),u.jsx(M1,{conversationStatus:L,disabled:g,handleResumeAgent:d})]})}function O1({fileInputRef:e,onChange:h}){return u.jsx("input",{type:"file",ref:e,multiple:!0,accept:"*/*",style:{display:"none"},onChange:h,"data-testid":"upload-image-input"})}function L1({disabled:e=!1,showButton:h=!0,conversationStatus:g=null,onSubmit:y,onFocus:x,onBlur:L,onFilesPaste:D,className:o="",buttonClassName:i=""}){const{submittedMessage:d,clearAllFiles:v,setShouldHideSuggestions:c,setSubmittedMessage:_}=ot(),S=e||g==="STOPPED";B.useEffect(()=>{!d||e||(y(d),_(null))},[d,e,y,_]);const{chatInputRef:m,messageToSend:l,checkIsContentEmpty:r,clearEmptyContentHandler:t}=$l(),{fileInputRef:s,chatContainerRef:n,isDragOver:p,handleFileIconClick:a,handleFileInputChange:b,handleDragOver:f,handleDragLeave:w,handleDrop:M}=Ul(D),{gripRef:N,isGripVisible:O,handleTopEdgeClick:I,smartResize:z,handleGripMouseDown:Y,handleGripTouchStart:ne,increaseHeightForEmptyContent:U,resetManualResize:se}=Ql(m,l),{handleSubmit:T,handleResumeAgent:P}=tc(m,s,z,y,se),{handleInput:F,handlePaste:W,handleKeyDown:Q,handleBlur:ce,handleFocus:ee}=ec(m,z,U,r,t,x,L);return B.useEffect(()=>()=>{c(!1),v()},[c,v]),u.jsxs("div",{className:`w-full ${o}`,children:[u.jsx(O1,{fileInputRef:s,onChange:b}),u.jsxs("div",{className:"relative w-full",children:[u.jsx(sc,{gripRef:N,isGripVisible:O,handleTopEdgeClick:I,handleGripMouseDown:Y,handleGripTouchStart:ne}),u.jsx(R1,{chatContainerRef:n,isDragOver:p,disabled:S,showButton:h,buttonClassName:i,conversationStatus:g,chatInputRef:m,handleFileIconClick:a,handleSubmit:T,handleResumeAgent:P,onDragOver:f,onDragLeave:w,onDrop:M,onInput:F,onPaste:W,onKeyDown:_e=>Q(_e,S,T),onFocus:ee,onBlur:ce})]})]})}const D1=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",...e},B.createElement("path",{d:"M2.25 1.5H9V3H3V21H21V15H22.5V21.75L21.75 22.5H2.25L1.5 21.75V2.25L2.25 1.5Z",fill:"currentColor"}),B.createElement("path",{d:"M22.5 2.25V12H21V4.0605L10.8645 14.1975L9.80402 13.1355L19.9395 3H12V1.5H21.75L22.5 2.25Z",fill:"currentColor"}));function kn({className:e}){return u.jsx("div",{className:we("w-3 h-3 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300 absolute right-0 top-1/2 -translate-y-1/2 h-full w-10.5 pr-2.5 justify-end git-external-link-icon",e),children:u.jsx(D1,{width:12,height:12,color:"white"})})}function I1({selectedRepository:e,gitProvider:h}){const{t:g}=me(),y=e&&h,x=y?_a(h,e):void 0,L=y?e:g(K.COMMON$NO_REPO_CONNECTED);return u.jsxs("a",{href:y?x:void 0,target:"_blank",rel:"noopener noreferrer",className:we("group flex flex-row items-center justify-between gap-2 pl-2.5 pr-2.5 py-1 rounded-[100px] flex-1 truncate relative",y?"border border-[#525252] bg-transparent hover:border-[#454545] cursor-pointer":"border border-[rgba(71,74,84,0.50)] bg-transparent cursor-not-allowed min-w-[170px]"),children:[u.jsx("div",{className:"w-3 h-3 flex items-center justify-center flex-shrink-0",children:y?u.jsx(Wo,{gitProvider:h,className:"w-3 h-3 inline-flex"}):u.jsx(ya,{width:12,height:12,color:"white"})}),u.jsx("div",{className:"font-normal text-white text-sm leading-5 truncate flex-1 min-w-0",title:L,children:L}),y&&u.jsx(kn,{})]})}function N1({selectedBranch:e,selectedRepository:h,gitProvider:g}){const{t:y}=me(),x=e&&h&&g,L=x?ma(g,h,e):void 0,D=x?e:y(K.COMMON$NO_BRANCH);return u.jsxs("a",{href:x?L:void 0,target:"_blank",rel:"noopener noreferrer",className:we("group flex flex-row items-center justify-between gap-2 pl-2.5 pr-2.5 py-1 rounded-[100px] w-fit flex-shrink-0 max-w-[200px] truncate relative",x?"border border-[#525252] bg-transparent hover:border-[#454545] cursor-pointer":"border border-[rgba(71,74,84,0.50)] bg-transparent cursor-not-allowed min-w-[108px]"),children:[u.jsx("div",{className:"w-3 h-3 flex items-center justify-center flex-shrink-0",children:u.jsx(Br,{width:12,height:12,color:"white"})}),u.jsx("div",{className:"font-normal text-white text-sm leading-5 truncate",title:D,children:D}),x&&u.jsx(kn,{})]})}function j1({onSuggestionsClick:e,isConversationReady:h=!0}){const{t:g}=me(),{data:y}=Ie(),{providers:x}=ss(),L=x.length>0,D=y?.selected_repository,o=L&&D&&h,i=()=>{Qt.capture("pull_button_clicked"),e(Ki())};return u.jsxs("button",{type:"button",onClick:i,disabled:!o,className:we("flex flex-row gap-1 items-center justify-center px-0.5 py-1 rounded-[100px] w-[76px] min-w-[76px]",o?"bg-[#25272D] hover:bg-[#454545] cursor-pointer":"bg-[rgba(71,74,84,0.50)] cursor-not-allowed"),children:[u.jsx("div",{className:"w-3 h-3 flex items-center justify-center",children:u.jsx(mn,{width:12,height:12,color:"white"})}),u.jsx("div",{className:"font-normal text-white text-sm leading-5 max-w-[76px] truncate",title:g(K.COMMON$PULL),children:g(K.COMMON$PULL)})]})}function B1({onSuggestionsClick:e,hasRepository:h,currentGitProvider:g,isConversationReady:y=!0}){const{t:x}=me(),{providers:L}=ss(),o=L.length>0&&h&&y,i=()=>{Qt.capture("push_button_clicked"),e(qi(g))};return u.jsxs("button",{type:"button",onClick:i,disabled:!o,className:we("flex flex-row gap-1 items-center justify-center px-2 py-1 rounded-[100px] w-[77px] min-w-[77px]",o?"bg-[#25272D] hover:bg-[#454545] cursor-pointer":"bg-[rgba(71,74,84,0.50)] cursor-not-allowed"),children:[u.jsx("div",{className:"w-3 h-3 flex items-center justify-center",children:u.jsx(_n,{width:12,height:12,color:"white"})}),u.jsx("div",{className:"font-normal text-white text-sm leading-5 max-w-[77px] truncate",title:x(K.COMMON$PUSH),children:x(K.COMMON$PUSH)})]})}function P1({onSuggestionsClick:e,hasRepository:h,currentGitProvider:g,isConversationReady:y=!0}){const{t:x}=me(),{providers:L}=ss(),o=L.length>0&&h&&y,i=()=>{Qt.capture("create_pr_button_clicked"),e(Zi(g))};return u.jsxs("button",{type:"button",onClick:i,disabled:!o,className:we("flex flex-row gap-1 items-center justify-center px-2 py-1 rounded-[100px] w-[126px] min-w-[126px] h-7",o?"bg-[#25272D] hover:bg-[#454545] cursor-pointer":"bg-[rgba(71,74,84,0.50)] cursor-not-allowed"),children:[u.jsx("div",{className:"w-3 h-3 flex items-center justify-center",children:u.jsx(gn,{width:12,height:12,color:"white"})}),u.jsx("div",{className:"font-normal text-white text-sm leading-5 max-w-[126px] truncate",title:x(K.COMMON$PULL_REQUEST),children:x(K.COMMON$PULL_REQUEST)})]})}function os({children:e,tooltipMessage:h,testId:g,shouldShowTooltip:y}){return y?u.jsx(Hr,{tooltip:h,ariaLabel:h,testId:g,placement:"top",className:"hover:opacity-100",tooltipClassName:"bg-white text-black",showArrow:!0,children:e}):e}function F1({onSuggestionsClick:e}){const{t:h}=me(),{data:g}=Ie(),{repositoryInfo:y}=Ks(),x=pn(),L=g?.selected_repository||y?.selectedRepository,D=g?.git_provider||y?.gitProvider,o=g?.selected_branch||y?.selectedBranch,i=!!L,d=!!g&&x==="CONNECTED";return u.jsx("div",{className:"flex flex-row items-center",children:u.jsxs("div",{className:"flex flex-row gap-2.5 items-center overflow-x-auto flex-wrap md:flex-nowrap relative scrollbar-hide",children:[u.jsx(os,{tooltipMessage:h(K.COMMON$GIT_TOOLS_DISABLED_CONTENT),testId:"git-control-bar-repo-button-tooltip",shouldShowTooltip:!i,children:u.jsx(I1,{selectedRepository:L,gitProvider:D})}),u.jsx(os,{tooltipMessage:h(K.COMMON$GIT_TOOLS_DISABLED_CONTENT),testId:"git-control-bar-branch-button-tooltip",shouldShowTooltip:!i,children:u.jsx(N1,{selectedBranch:o,selectedRepository:L,gitProvider:D})}),i?u.jsxs(u.Fragment,{children:[u.jsx(os,{tooltipMessage:h(K.COMMON$GIT_TOOLS_DISABLED_CONTENT),testId:"git-control-bar-pull-button-tooltip",shouldShowTooltip:!i,children:u.jsx(j1,{onSuggestionsClick:e,isConversationReady:d})}),u.jsx(os,{tooltipMessage:h(K.COMMON$GIT_TOOLS_DISABLED_CONTENT),testId:"git-control-bar-push-button-tooltip",shouldShowTooltip:!i,children:u.jsx(B1,{onSuggestionsClick:e,hasRepository:i,currentGitProvider:D,isConversationReady:d})}),u.jsx(os,{tooltipMessage:h(K.COMMON$GIT_TOOLS_DISABLED_CONTENT),testId:"git-control-bar-pr-button-tooltip",shouldShowTooltip:!i,children:u.jsx(P1,{onSuggestionsClick:e,hasRepository:i,currentGitProvider:D,isConversationReady:d})})]}):null]})})}const H1=async e=>new Promise((h,g)=>{const y=new FileReader;y.onload=()=>{h()},y.onerror=()=>{g(new Error(`Failed to read file: ${e.name}`))},y.onabort=()=>{g(new Error(`File reading was aborted: ${e.name}`))},y.readAsArrayBuffer(e)}),$1=async e=>new Promise((h,g)=>{const y=new FileReader;y.onload=()=>{h()},y.onerror=()=>{g(new Error(`Failed to read image: ${e.name}`))},y.onabort=()=>{g(new Error(`Image reading was aborted: ${e.name}`))},y.readAsDataURL(e)}),U1=async e=>{const h=await Promise.allSettled(e.map(async x=>(await H1(x),x))),g=[],y=[];return h.forEach((x,L)=>{x.status==="fulfilled"?g.push(x.value):y.push({file:e[L],error:x.reason})}),{successful:g,failed:y}},W1=async e=>{const h=await Promise.allSettled(e.map(async x=>(await $1(x),x))),g=[],y=[];return h.forEach((x,L)=>{x.status==="fulfilled"?g.push(x.value):y.push({file:e[L],error:x.reason})}),{successful:g,failed:y}};function V1({onSubmit:e}){const{images:h,files:g,addImages:y,addFiles:x,clearAllFiles:L,addFileLoading:D,removeFileLoading:o,addImageLoading:i,removeImageLoading:d}=ot(),{curAgentState:v}=Ct(),{data:c}=Ie(),_=a=>{const b=ln(a,[...h,...g]);if(!b.isValid)return Ye(`Error: ${b.errorMessage}`),null;const f=a.filter(M=>!di(M)),w=a.filter(M=>di(M));return{validFiles:f,validImages:w}},C=(a,b)=>{a.forEach(f=>D(f.name)),b.forEach(f=>i(f.name))},S=a=>{a.successful.length>0&&(x(a.successful),a.successful.forEach(b=>o(b.name)))},m=a=>{a.successful.length>0&&(y(a.successful),a.successful.forEach(b=>d(b.name)))},l=(a,b)=>{a.failed.forEach(({file:f,error:w})=>{o(f.name),Ye(`Failed to process file ${f.name}: ${w.message}`)}),b.failed.forEach(({file:f,error:w})=>{d(f.name),Ye(`Failed to process image ${f.name}: ${w.message}`)})},r=(a,b)=>{a.forEach(f=>o(f.name)),b.forEach(f=>d(f.name))},t=async a=>{const b=_(a);if(!b)return;const{validFiles:f,validImages:w}=b;C(f,w);try{const[M,N]=await Promise.all([U1(f),W1(w)]);S(M),m(N),l(M,N)}catch{r(f,w),Ye("An unexpected error occurred while processing files")}},s=a=>{e(a,h,g),L()},n=a=>{s(a)},p=v===ve.LOADING||v===ve.AWAITING_USER_CONFIRMATION;return u.jsxs("div",{"data-testid":"interactive-chat-box",children:[u.jsx(L1,{disabled:p,onSubmit:s,onFilesPaste:t,conversationStatus:c?.status||null}),u.jsx("div",{className:"mt-4",children:u.jsx(F1,{onSuggestionsClick:n})})]})}const z1=()=>{const{conversationId:e}=nt();return Lt({mutationFn:({feedback:h})=>vt.submitFeedback(e,h),onError:h=>{Ye(h.message)},retry:2,retryDelay:500})},G1="1.0",K1="https://www.all-hands.dev/share";function q1({onClose:e,polarity:h}){const{t:g}=me(),{data:y}=Ie(),x=()=>{si(g(K.FEEDBACK$PASSWORD_COPIED_MESSAGE),{icon:"",position:"bottom-right"})},L=c=>{navigator.clipboard.writeText(c),x()},D=(c,_,C)=>{si(u.jsxs("div",{className:"flex flex-col gap-1",children:[u.jsx("span",{children:c}),u.jsx("a",{"data-testid":"toast-share-url",className:"text-blue-500 underline",onClick:()=>L(C),href:_,target:"_blank",rel:"noreferrer",children:g(K.FEEDBACK$GO_TO_FEEDBACK)}),u.jsxs("span",{onClick:()=>L(C),className:"cursor-pointer",children:[g(K.FEEDBACK$PASSWORD),": ",C," ",u.jsxs("span",{className:"text-gray-500",children:["(",g(K.FEEDBACK$COPY_LABEL),")"]})]})]}),{duration:1e4})},{mutate:o,isPending:i}=z1();if(y?.conversation_version==="V1")return null;const v=async c=>{c?.preventDefault();const _=new FormData(c.currentTarget),C=_.get("email")?.toString()||"",S=_.get("permissions")?.toString()||"private";o({feedback:{version:G1,email:C,polarity:h,permissions:S,trajectory:[],token:""}},{onSuccess:l=>{const{message:r,feedback_id:t,password:s}=l.body,n=`${K1}?share_id=${t}`;D(r,n,s),e()}})};return u.jsxs("form",{onSubmit:v,className:"flex flex-col gap-6 w-full",children:[u.jsxs("label",{className:"flex flex-col gap-2",children:[u.jsx("span",{className:"text-xs text-neutral-400",children:g(K.FEEDBACK$EMAIL_LABEL)}),u.jsx("input",{required:!0,name:"email",type:"email",placeholder:g(K.FEEDBACK$EMAIL_PLACEHOLDER),className:"bg-[#27272A] px-3 py-[10px] rounded-sm"})]}),u.jsxs("div",{className:"flex gap-4 text-neutral-400",children:[u.jsxs("label",{className:"flex gap-2 cursor-pointer",children:[u.jsx("input",{name:"permissions",value:"private",type:"radio",defaultChecked:!0}),g(K.FEEDBACK$PRIVATE_LABEL)]}),u.jsxs("label",{className:"flex gap-2 cursor-pointer",children:[u.jsx("input",{name:"permissions",value:"public",type:"radio"}),g(K.FEEDBACK$PUBLIC_LABEL)]})]}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(cs,{type:"submit",variant:"primary",className:"grow",isDisabled:i,children:g(i?K.FEEDBACK$SUBMITTING_LABEL:K.FEEDBACK$SHARE_LABEL)}),u.jsx(cs,{type:"button",variant:"secondary",className:"grow",onClick:e,isDisabled:i,children:g(K.FEEDBACK$CANCEL_LABEL)})]}),i&&u.jsx("p",{className:"text-sm text-center text-neutral-400",children:g(K.FEEDBACK$SUBMITTING_MESSAGE)})]})}function Z1({onClose:e,isOpen:h,polarity:g}){const{t:y}=me();return h?u.jsx(Us,{onClose:e,children:u.jsxs(fs,{className:"border border-tertiary",children:[u.jsx(Ur,{title:y(K.FEEDBACK$TITLE)}),u.jsx(ba,{description:y(K.FEEDBACK$DESCRIPTION)}),u.jsx(q1,{onClose:e,polarity:g})]})}):null}function An(e){const[h,g]=B.useState(!0),[y,x]=B.useState(!0),L=B.useRef(0),D=B.useCallback(d=>d.scrollTop+d.clientHeight>=d.scrollHeight-20,[]),o=B.useCallback(d=>{const v=D(d);x(v);const c=d.scrollTop,_=c<L.current;L.current=c,_&&g(!1),v&&g(!0)},[D]),i=B.useCallback(()=>{const d=e.current;d&&requestAnimationFrame(()=>{g(!0),x(!0),d.scrollTo({top:d.scrollHeight,behavior:"smooth"})})},[e]);return B.useEffect(()=>{if(h){const d=e.current;d&&requestAnimationFrame(()=>{d.scrollTo({top:d.scrollHeight,behavior:"smooth"})})}}),{scrollRef:e,autoScroll:h,setAutoScroll:g,scrollDomToBottom:i,hitBottom:y,setHitBottom:x,onChatBodyScroll:o}}function Y1(){return u.jsxs("div",{className:"flex items-center space-x-1.5 bg-tertiary px-3 py-1.5 rounded-full",children:[u.jsx("span",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-[bounce_0.5s_infinite] translate-y-[1px]",style:{animationDelay:"0ms"}}),u.jsx("span",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-[bounce_0.5s_infinite] translate-y-[1px]",style:{animationDelay:"75ms"}}),u.jsx("span",{className:"w-1.5 h-1.5 bg-gray-400 rounded-full animate-[bounce_0.5s_infinite] translate-y-[1px]",style:{animationDelay:"150ms"}})]})}const J1=e=>{const h=Zt(),{conversationId:g}=nt(),{data:y}=us();return qt({queryKey:[...Xt(g),e],queryFn:()=>e?h.getQueryData(Xt(g))?.[e.toString()]??{exists:!1}:{exists:!1},enabled:!!e&&!!g&&y?.APP_MODE==="saas",staleTime:1e3*60*5,gcTime:1e3*60*15})},Tn=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",...e},B.createElement("path",{d:"M201.4 374.6c12.5 12.5 32.8 12.5 45.3 0l160-160c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L224 306.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l160 160z"})),Mn=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512",...e},B.createElement("path",{d:"M201.4 137.4c12.5-12.5 32.8-12.5 45.3 0l160 160c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L224 205.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l160-160z"}));function Rn({errorId:e,defaultMessage:h}){const{t:g}=me(),[y,x]=pe.useState(!1),D=!!e&&He.exists(e)?e:"CHAT_INTERFACE$AGENT_ERROR_MESSAGE";return u.jsxs("div",{className:"flex flex-col gap-2 border-l-2 pl-2 my-2 py-2 border-danger text-sm w-full",children:[u.jsxs("div",{className:"font-bold text-danger",children:[g(D),u.jsx("button",{type:"button",onClick:()=>x(o=>!o),className:"cursor-pointer text-left",children:y?u.jsx(Mn,{className:"h-4 w-4 ml-2 inline fill-danger"}):u.jsx(Tn,{className:"h-4 w-4 ml-2 inline fill-danger"})})]}),y&&u.jsx(Tr,{components:{code:Dr,ul:Lr,ol:Or},remarkPlugins:[Mr,Rr],children:h})]})}var Ze=(e=>(e.WAITING="waiting",e.CREATING="creating",e.COMPLETED="completed",e.ERROR="error",e))(Ze||{});function X1({status:e,conversationId:h,prUrl:g}){const{t:y}=me(),x=()=>{switch(e){case Ze.WAITING:return y("MICROAGENT$STATUS_WAITING");case Ze.CREATING:return y("MICROAGENT$STATUS_CREATING");case Ze.COMPLETED:return y(g?"MICROAGENT$VIEW_YOUR_PR":"MICROAGENT$STATUS_COMPLETED");case Ze.ERROR:return y("MICROAGENT$STATUS_ERROR");default:return""}},L=()=>{switch(e){case Ze.WAITING:return u.jsx(gr,{size:"sm"});case Ze.CREATING:return u.jsx(gr,{size:"sm"});case Ze.COMPLETED:return u.jsx(hr,{status:"success"});case Ze.ERROR:return u.jsx(hr,{status:"error"});default:return null}},D=x(),o=!!h,i=!!g,d=()=>i?u.jsx("a",{href:g,target:"_blank",rel:"noopener noreferrer",className:"underline",children:D}):o?u.jsx("a",{href:`/conversations/${h}`,target:"_blank",rel:"noopener noreferrer",className:"underline",children:D}):u.jsx(Le.Text,{className:"underline",children:D});return u.jsxs("div",{className:"flex items-center gap-2 mt-2 p-2 text-sm",children:[L(),d()]})}function Ot({microagentStatus:e,microagentConversationId:h,microagentPRUrl:g,actions:y}){return!e||!y?null:u.jsx(X1,{status:e,conversationId:h,prUrl:g})}const Q1=()=>{const{conversationId:e}=nt(),h=Zt();return Lt({mutationFn:({rating:g,eventId:y,reason:x})=>vt.submitConversationFeedback(e,g,y,x),onMutate:async({rating:g,eventId:y,reason:x})=>{if(!y)return{previousFeedback:null};const L=Xt(e);await h.cancelQueries({queryKey:L});const D=h.getQueryData(L);return h.setQueryData(L,(o={})=>{const i={...o};return i[y.toString()]={exists:!0,rating:g,reason:x,metadata:{source:"likert-scale"}},i}),{previousFeedback:D}},onError:(g,{eventId:y},x)=>{x?.previousFeedback&&y&&h.setQueryData(Xt(e),x.previousFeedback),console.error(g)},onSettled:(g,y,{eventId:x})=>{x&&h.invalidateQueries({queryKey:Xt(e)})}})},On=B.createContext(void 0);function eh({children:e,value:h}){const g=An(pe.useRef(null)),y=h||g;return u.jsx(On.Provider,{value:y,children:e})}const xi=1e4;function th({eventId:e,initiallySubmitted:h=!1,initialRating:g,initialReason:y}){const{t:x}=me(),{data:L}=Ie(),[D,o]=B.useState(g||null),[i,d]=B.useState(y||null),[v,c]=B.useState(!1),[_,C]=B.useState(null),[S,m]=B.useState(h),[l,r]=B.useState(0),t=B.useContext(On),s=[x(K.FEEDBACK$REASON_MISUNDERSTOOD_INSTRUCTION),x(K.FEEDBACK$REASON_FORGOT_CONTEXT),x(K.FEEDBACK$REASON_UNNECESSARY_CHANGES),x(K.FEEDBACK$REASON_SHOULD_ASK_FIRST),x(K.FEEDBACK$REASON_DIDNT_FINISH_JOB),x(K.FEEDBACK$REASON_OTHER)],n=t?.scrollDomToBottom,p=t?.autoScroll,{mutate:a}=Q1();if(B.useEffect(()=>{m(h)},[h]),B.useEffect(()=>{g&&o(g)},[g]),B.useEffect(()=>{y&&d(y)},[y]),B.useEffect(()=>{if(l>0&&v&&!S){const O=setTimeout(()=>{r(l-1)},1e3);return()=>clearTimeout(O)}return()=>{}},[l,v,S]),B.useEffect(()=>()=>{_&&clearTimeout(_)},[_]),B.useEffect(()=>{n&&p&&!S&&setTimeout(()=>{n()},100)},[n,p,S]),B.useEffect(()=>{n&&p&&v&&setTimeout(()=>{n()},100)},[n,p,v]),L?.conversation_version==="V1")return null;const f=(O,I)=>{a({rating:O,eventId:e,reason:I},{onSuccess:()=>{d(I||null),c(!1),m(!0)}})},w=O=>{if(!S)if(o(O),O<=3){c(!0),r(Math.ceil(xi/1e3));const I=setTimeout(()=>{f(O)},xi);C(I),n&&p&&setTimeout(()=>{n()},100)}else c(!1),f(O)},M=O=>{D&&_&&!S&&(clearTimeout(_),r(0),f(D,O))},N=O=>S?D&&D>=O?"text-yellow-400 cursor-not-allowed":"text-gray-300 opacity-50 cursor-not-allowed":D&&D>=O?"text-yellow-400":"text-gray-300";return u.jsxs("div",{className:"mt-3 flex flex-col gap-1",children:[u.jsx("div",{className:"text-sm text-gray-500 mb-1",children:x(S?K.FEEDBACK$THANK_YOU_FOR_FEEDBACK:K.FEEDBACK$RATE_AGENT_PERFORMANCE)}),u.jsx("div",{className:"flex flex-col gap-1",children:u.jsxs("span",{className:"flex gap-2 items-center flex-wrap",children:[[1,2,3,4,5].map(O=>u.jsx("button",{type:"button",onClick:()=>w(O),disabled:S,className:we("oh-star text-xl transition-all",N(O),!S&&"hover:text-yellow-400 [&:has(~.oh-star:hover)]:text-yellow-400"),"aria-label":`Rate ${O} stars`,children:u.jsx(Ea,{})},O)),S&&i&&D&&D<=3&&u.jsx("span",{className:"text-sm text-gray-500 italic",children:i})]})}),v&&!S&&u.jsxs("div",{className:"mt-1 flex flex-col gap-1",children:[u.jsx("div",{className:"text-xs text-gray-500 mb-1",children:x(K.FEEDBACK$SELECT_REASON)}),l>0&&u.jsx("div",{className:"text-xs text-gray-400 mb-1 italic",children:x(K.FEEDBACK$SELECT_REASON_COUNTDOWN,{countdown:l})}),u.jsx("div",{className:"flex flex-col gap-0.5",children:s.map(O=>u.jsx("button",{type:"button",onClick:()=>M(O),className:"text-sm text-left py-1 px-2 rounded hover:bg-gray-700 transition-colors",children:O},O))})]})]})}function Vr({event:e,isLastMessage:h,isInLast10Actions:g,config:y,isCheckingFeedback:x,feedbackData:L}){return y?.APP_MODE!=="saas"||x||!(Ir(e)?g:h)?null:u.jsx(th,{eventId:e.id,initiallySubmitted:L.exists,initialRating:L.rating,initialReason:L.reason})}function sh({event:e,microagentStatus:h,microagentConversationId:g,microagentPRUrl:y,actions:x,isLastMessage:L,isInLast10Actions:D,config:o,isCheckingFeedback:i,feedbackData:d}){return Ir(e)?u.jsxs("div",{children:[u.jsx(Rn,{errorId:e.extras.error_id,defaultMessage:e.message}),u.jsx(Ot,{microagentStatus:h,microagentConversationId:g,microagentPRUrl:y,actions:x}),u.jsx(Vr,{event:e,isLastMessage:L,isInLast10Actions:D,config:o,isCheckingFeedback:i,feedbackData:d})]}):null}const rh=e=>B.createElement("svg",{width:15,height:15,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B.createElement("path",{d:"M11.6938 4.50616C11.6357 4.44758 11.5666 4.40109 11.4904 4.36936C11.4142 4.33763 11.3325 4.32129 11.25 4.32129C11.1675 4.32129 11.0858 4.33763 11.0097 4.36936C10.9335 4.40109 10.8644 4.44758 10.8063 4.50616L6.15003 9.16866L4.19378 7.20616C4.13345 7.14789 4.06224 7.10207 3.98421 7.07132C3.90617 7.04056 3.82284 7.02548 3.73898 7.02693C3.65512 7.02838 3.57236 7.04634 3.49544 7.07977C3.41851 7.1132 3.34893 7.16146 3.29065 7.22179C3.23238 7.28211 3.18656 7.35333 3.15581 7.43136C3.12505 7.5094 3.10997 7.59272 3.11142 7.67659C3.11287 7.76045 3.13083 7.84321 3.16426 7.92013C3.1977 7.99705 3.24595 8.06664 3.30628 8.12491L5.70628 10.5249C5.76438 10.5835 5.83351 10.63 5.90967 10.6617C5.98583 10.6935 6.06752 10.7098 6.15003 10.7098C6.23254 10.7098 6.31423 10.6935 6.39039 10.6617C6.46655 10.63 6.53568 10.5835 6.59378 10.5249L11.6938 5.42491C11.7572 5.36639 11.8078 5.29535 11.8425 5.21629C11.8771 5.13723 11.895 5.05185 11.895 4.96554C11.895 4.87922 11.8771 4.79385 11.8425 4.71478C11.8078 4.63572 11.7572 4.56469 11.6938 4.50616Z",fill:"white"})),ih=e=>B.createElement("svg",{width:15,height:15,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B.createElement("path",{d:"M1.25 2.5C1.25 1.80964 1.80964 1.25 2.5 1.25H8.75C9.44036 1.25 10 1.80964 10 2.5V5H12.5C13.1904 5 13.75 5.55964 13.75 6.25V12.5C13.75 13.1904 13.1904 13.75 12.5 13.75H6.25C5.55964 13.75 5 13.1904 5 12.5V10H2.5C1.80964 10 1.25 9.44036 1.25 8.75V2.5ZM6.25 10V12.5H12.5V6.25H10V8.75C10 9.44036 9.44036 10 8.75 10H6.25ZM8.75 8.75V2.5L2.5 2.5V8.75H8.75Z",fill:"white"}));function nh({isHidden:e,isDisabled:h,onClick:g,mode:y}){const{t:x}=me();return u.jsxs("button",{hidden:e,disabled:h,"data-testid":"copy-to-clipboard",type:"button",onClick:g,"aria-label":x(y==="copy"?K.BUTTON$COPY:K.BUTTON$COPIED),className:"button-base p-1 cursor-pointer",children:[y==="copy"&&u.jsx(ih,{width:15,height:15}),y==="copied"&&u.jsx(rh,{width:15,height:15})]})}function Dt({type:e,message:h,children:g,actions:y}){const[x,L]=pe.useState(!1),[D,o]=pe.useState(!1),i=async()=>{await navigator.clipboard.writeText(h),o(!0)};return pe.useEffect(()=>{let d;return D&&(d=setTimeout(()=>{o(!1)},2e3)),()=>{clearTimeout(d)}},[D]),u.jsxs("article",{"data-testid":`${e}-message`,onMouseEnter:()=>L(!0),onMouseLeave:()=>L(!1),className:we("rounded-xl relative w-fit max-w-full last:mb-4","flex flex-col gap-2",e==="user"&&" p-4 bg-tertiary self-end",e==="agent"&&"mt-6 w-full max-w-full bg-transparent"),children:[u.jsxs("div",{className:we("absolute -top-2.5 -right-2.5",x?"flex":"hidden","items-center gap-1"),children:[y?.map((d,v)=>d.tooltip?u.jsx(Hr,{tooltip:d.tooltip,ariaLabel:d.tooltip,placement:"top",children:u.jsx("button",{type:"button",onClick:d.onClick,className:"button-base p-1 cursor-pointer","aria-label":`Action ${v+1}`,children:d.icon})},v):u.jsx("button",{type:"button",onClick:d.onClick,className:"button-base p-1 cursor-pointer","aria-label":`Action ${v+1}`,children:d.icon},v)),u.jsx(nh,{isHidden:!x,isDisabled:D,onClick:i,mode:D?"copied":"copy"})]}),u.jsx("div",{className:"text-sm",style:{whiteSpace:"normal",wordBreak:"break-word"},children:u.jsx(Tr,{components:{code:Dr,ul:Lr,ol:Or,a:Oo,p:Ro},remarkPlugins:[Mr,Rr],children:h})}),g]})}function oh({width:e=20,height:h=20,active:g}){return u.jsx("svg",{width:e,height:h,viewBox:`0 0 ${e} ${h}`,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.204 15.0037L6.65511 9.99993L11.204 4.99617L12.1289 5.83701L8.34444 9.99993L12.1289 14.1628L11.204 15.0037Z",fill:g?"#D4D4D4":"#525252"})})}function ah({width:e=20,height:h=20,active:g}){return u.jsx("svg",{width:e,height:h,viewBox:`0 0 ${e} ${h}`,fill:"none",xmlns:"http://www.w3.org/2000/svg",children:u.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.79602 4.99634L13.3449 10.0001L8.79602 15.0038L7.87109 14.163L11.6556 10.0001L7.87109 5.83718L8.79602 4.99634Z",fill:g?"#D4D4D4":"#525252"})})}function Ln({onClick:e,className:h}){return u.jsx("button",{type:"button",onClick:e,className:we("bg-neutral-400 rounded-full w-5 h-5 flex items-center justify-center cursor-pointer",h),children:u.jsx(Yi,{width:18,height:18})})}function lh({src:e,size:h="small"}){return u.jsx("img",{role:"img",alt:"",src:e,className:we("rounded-sm object-cover",h==="small"&&"w-[62px] h-[62px]",h==="large"&&"w-[100px] h-[100px]")})}function ch({src:e,onRemove:h,size:g="small"}){return u.jsxs("div",{"data-testid":"image-preview",className:"relative w-fit shrink-0 py-1",children:[u.jsx(lh,{src:e,size:g}),h&&u.jsx(Ln,{onClick:h,className:"absolute right-[3px] top-[3px] cursor-pointer"})]})}function Dn({size:e="small",images:h,onRemove:g}){const y=pe.useRef(null),[x,L]=pe.useState(!1),[D,o]=pe.useState(!0),[i,d]=pe.useState(!1);pe.useEffect(()=>{const c=y.current;if(c){const _=c.scrollWidth>c.clientWidth;L(_)}},[h]);const v=c=>{const _=c.currentTarget;o(_.scrollLeft===0),d(_.scrollLeft+_.clientWidth===_.scrollWidth)};return u.jsxs("div",{"data-testid":"image-carousel",className:"relative",children:[x&&u.jsx("div",{className:"absolute right-full transform top-1/2 -translate-y-1/2",children:u.jsx(oh,{active:!D})}),u.jsx("div",{ref:y,onScroll:v,className:we("flex overflow-x-auto",e==="small"&&"gap-2",e==="large"&&"gap-4"),children:h.map((c,_)=>u.jsx(ch,{size:e,src:c,onRemove:g?()=>g?.(_):void 0},_))}),x&&u.jsx("div",{className:"absolute left-full transform top-1/2 -translate-y-1/2",children:u.jsx(ah,{active:!i})})]})}function hh({filename:e,onRemove:h}){return u.jsxs("div",{"data-testid":"file-item",className:"flex flex-row gap-x-1 items-center justify-start py-1",children:[u.jsx(ka,{className:"h-4 w-4"}),u.jsx("code",{className:"text-sm flex-1 text-white truncate",children:e}),h&&u.jsx(Ln,{onClick:h})]})}function uh({files:e,onRemove:h}){return u.jsx("div",{"data-testid":"file-list",className:we("flex flex-col gap-y-1.5 justify-start"),children:e.map((g,y)=>u.jsx(hh,{filename:g,onRemove:h?()=>h?.(y):void 0},y))})}function Os({type:e,onClick:h}){const{t:g}=me(),y=e==="confirm",x=g(y?K.ACTION$CONFIRM:K.ACTION$REJECT),L=g(y?K.CHAT_INTERFACE$USER_CONFIRMED:K.CHAT_INTERFACE$USER_REJECTED),D=y?`${g(K.CHAT_INTERFACE$INPUT_CONTINUE_MESSAGE)} `:`${g(K.BUTTON$CANCEL)} `;return u.jsx(Fr,{content:L,closeDelay:100,children:u.jsx("button",{"data-testid":`action-${e}-button`,type:"button","aria-label":x,className:we("rounded px-2 h-6.5 text-sm font-medium leading-5 cursor-pointer hover:opacity-80",e==="confirm"?"bg-tertiary text-white":"bg-white text-[#0D0F11]"),onClick:h,children:D})})}function In({className:e,content:h,icon:g,severity:y,title:x}){return y==="high"?u.jsxs("div",{className:we("flex items-center gap-3.5 bg-[#4A0709] border border-[#FF0006] text-red-400 rounded-xl px-3.5 h-13 text-sm text-white",e),children:[g&&u.jsx("span",{className:"",children:g}),u.jsx("span",{className:"font-bold",children:x}),u.jsx("span",{className:"font-normal",children:h})]}):null}const Nn=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",...e},B.createElement("path",{d:"M12 14C11.4477 14 11 13.5523 11 13V10C11 9.44772 11.4477 9 12 9C12.5523 9 13 9.44772 13 10V13C13 13.5523 12.5523 14 12 14Z",fill:"currentColor"}),B.createElement("path",{d:"M10.5 16.5C10.5 15.6716 11.1716 15 12 15C12.8284 15 13.5 15.6716 13.5 16.5C13.5 17.3284 12.8284 18 12 18C11.1716 18 10.5 17.3284 10.5 16.5Z",fill:"currentColor"}),B.createElement("path",{d:"M10.2301 3.2156C10.98 1.79093 13.02 1.79092 13.7698 3.2156L22.1135 19.0685C22.8144 20.4003 21.8486 22 20.3436 22H3.65635C2.15133 22 1.18556 20.4003 1.88651 19.0685L10.2301 3.2156ZM20.3436 20L12 4.1471L3.65635 20L20.3436 20Z",fill:"currentColor"})),Ls=Fs(e=>({submittedEventIds:[],v1SubmittedEventIds:[],addSubmittedEventId:h=>e(g=>({submittedEventIds:[...g.submittedEventIds,h]})),removeSubmittedEventId:h=>e(g=>({submittedEventIds:g.submittedEventIds.filter(y=>y!==h)})),addV1SubmittedEventId:h=>e(g=>({v1SubmittedEventIds:[...g.v1SubmittedEventIds,h]})),removeV1SubmittedEventId:h=>e(g=>({v1SubmittedEventIds:g.v1SubmittedEventIds.filter(y=>y!==h)}))}));function Zs(){const e=Ls(v=>v.submittedEventIds),h=Ls(v=>v.addSubmittedEventId),{t:g}=me(),{send:y}=Gs(),L=Kt(v=>v.events).filter(Ts).filter(Ms).slice().reverse().find(v=>!Ft(v)||v.source!=="agent"?!1:v.args?.confirmation_state==="awaiting_confirmation"),D=B.useCallback(v=>{L&&(h(L.id),y(Ar(v)))},[y,h]);if(B.useEffect(()=>{if(!L)return;const v=C=>{C.shiftKey&&C.metaKey&&C.key==="Backspace"&&(C.preventDefault(),D(ve.USER_REJECTED))},c=C=>{C.metaKey&&C.key==="Enter"&&(C.preventDefault(),D(ve.USER_CONFIRMED))},_=C=>{v(C),c(C)};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[L,D]),!L||e.includes(L.id))return null;const{args:o}=L,i=o?.security_risk,d=typeof i=="string"?i.toLowerCase()==="high":Number(i)===as.HIGH;return u.jsxs("div",{className:"flex flex-col gap-2 pt-4",children:[d&&u.jsx(In,{content:g(K.CHAT_INTERFACE$HIGH_RISK_WARNING),icon:u.jsx(Nn,{width:16,height:16,color:"#fff"}),severity:"high",title:g(K.COMMON$HIGH_RISK)}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("p",{className:"text-sm font-normal text-white",children:g(K.CHAT_INTERFACE$USER_ASK_CONFIRMATION)}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Os,{type:"reject",onClick:()=>D(ve.USER_REJECTED)}),u.jsx(Os,{type:"confirm",onClick:()=>D(ve.USER_CONFIRMED)})]})]})]})}const dh=e=>{const h=Nr(e)?e.args.content:e.message;if(!e.args.file_urls||e.args.file_urls.length===0)return h;const g=He.t("CHAT_INTERFACE$AUGMENTED_PROMPT_FILES_TITLE");return h.split(g)[0]};function fh({event:e,shouldShowConfirmationButtons:h,microagentStatus:g,microagentConversationId:y,microagentPRUrl:x,actions:L,isLastMessage:D,isInLast10Actions:o,config:i,isCheckingFeedback:d,feedbackData:v}){if(!Nr(e)&&!ur(e))return null;const c=dh(e);return u.jsxs(u.Fragment,{children:[u.jsxs(Dt,{type:e.source,message:c,actions:L,children:[e.args.image_urls&&e.args.image_urls.length>0&&u.jsx(Dn,{size:"small",images:e.args.image_urls}),e.args.file_urls&&e.args.file_urls.length>0&&u.jsx(uh,{files:e.args.file_urls}),h&&u.jsx(Zs,{})]}),u.jsx(Ot,{microagentStatus:g,microagentConversationId:y,microagentPRUrl:x,actions:L}),ur(e)&&e.action==="message"&&u.jsx(Vr,{event:e,isLastMessage:D,isInLast10Actions:o,config:i,isCheckingFeedback:d,feedbackData:v})]})}const ph=e=>{const h=document.createElement("textarea");return h.innerHTML=e,h.value};function Sr(e){const{children:h}=e,g=y=>{try{return ph(y)}catch(x){return Ni.error(String(x)),y}};if(Array.isArray(h)){const y=h.map(x=>typeof x=="string"?g(x):x);return u.jsx("strong",{className:"font-mono",children:y})}return typeof h=="string"?u.jsx("strong",{className:"font-mono",children:g(h)}):u.jsx("strong",{className:"font-mono",children:h})}const _h=e=>{const h=document.createElement("textarea");return h.innerHTML=e,h.value},mh=e=>e?e.endsWith("/")||e.endsWith("\\")?!0:!(e.split(/[/\\]/).pop()||"").includes("."):!1,gh=e=>{if(!e)return"";const h=e.split(/[/\\]/),g=h[h.length-1];return mh(e)&&!g.endsWith("/")?`${g}/`:g};function yr(e){const{children:h}=e,g=y=>{try{const x=_h(y),L=gh(x);return u.jsx("span",{className:"font-mono",title:x,children:L})}catch(x){return Ni.error(String(x)),u.jsx("span",{className:"font-mono",children:y})}};if(Array.isArray(h)){const y=h.map(x=>typeof x=="string"?g(x):x);return u.jsx("strong",{className:"font-mono",children:y})}return typeof h=="string"?u.jsx("strong",{children:g(h)}):u.jsx("strong",{className:"font-mono",children:h})}const es=1e3,jn=e=>`\`\`\`json
${JSON.stringify(e,null,2)}
\`\`\``,Bn=e=>{switch(e){case as.LOW:return He.t("SECURITY$LOW_RISK");case as.MEDIUM:return He.t("SECURITY$MEDIUM_RISK");case as.HIGH:return He.t("SECURITY$HIGH_RISK");case as.UNKNOWN:default:return He.t("SECURITY$UNKNOWN_RISK")}},vh=e=>{let{content:h}=e.args;return h.length>es&&(h=`${e.args.content.slice(0,es)}...`),`${e.args.path}
${h}`},Ch=e=>{let h=`Command:
\`${e.args.command}\``;return e.args.confirmation_state==="awaiting_confirmation"&&(h+=`

${Bn(e.args.security_risk)}`),h},bh=e=>{let h=`\`\`\`
${e.args.code}
\`\`\``;return e.args.confirmation_state==="awaiting_confirmation"&&(h+=`

${Bn(e.args.security_risk)}`),h},Sh=e=>`Browsing ${e.args.url}`,yh=e=>`**Action:**

\`\`\`python
${e.args.browser_actions}
\`\`\``,wh=e=>{const h=e.args.name||"",g=e.args.arguments||{};let y=`**MCP Tool Call:** ${h}

`;return e.args.thought&&(y+=`

**Thought:**
${e.args.thought}`),y+=`

**Arguments:**
\`\`\`json
${JSON.stringify(g,null,2)}
\`\`\``,y},xh=e=>e.args.thought,Eh=e=>e.args.final_thought.trim(),kh=e=>{let h=`**Command:** \`${e.args.command}\``;return e.args.command==="plan"&&e.args.task_list&&e.args.task_list.length>0?(h+=`

**Task List (${e.args.task_list.length} ${e.args.task_list.length===1?"item":"items"}):**
`,e.args.task_list.forEach((g,y)=>{const x={todo:"",in_progress:"",done:""}[g.status]||"";h+=`
${y+1}. ${x} **[${g.status.toUpperCase().replace("_"," ")}]** ${g.title}`,h+=`
   *ID: ${g.id}*`,g.notes&&(h+=`
   *Notes: ${g.notes}*`)})):e.args.command==="plan"&&(h+=`

**Task List:** Empty`),h},Ah=()=>"",Th=e=>{switch(e.action){case"read":case"edit":return Ah();case"write":return vh(e);case"run":return Ch(e);case"run_ipython":return bh(e);case"browse":return Sh(e);case"browse_interactive":return yh(e);case"call_tool_mcp":return wh(e);case"think":return xh(e);case"finish":return Eh(e);case"task_tracking":return kh(e);default:return jn(e)}},Ys=e=>{const h=e.content.length>0,g=e.content.toLowerCase().includes("error:");switch(e.observation){case"run":{const y=e.extras.metadata.exit_code;return y===-1?"timeout":y===0?"success":"error"}case"run_ipython":case"read":case"edit":return!h||g?"error":"success";case"mcp":try{const y=JSON.parse(e.content);if(typeof y?.isError=="boolean")return y.isError?"error":"success"}catch{return h?"success":"error"}return h?"success":"error";default:return"success"}},Mh=e=>`\`\`\`
${e.content}
\`\`\``,Rh=e=>{let{content:h}=e;return h.length>es&&(h=`${h.slice(0,es)}...`),`Output:
\`\`\`sh
${h.trim()||He.t("OBSERVATION$COMMAND_NO_OUTPUT")}
\`\`\``},Oh=(e,h)=>h?`\`\`\`diff
${e.extras.diff}
\`\`\``:e.content,Lh=e=>{let h=`**URL:** ${e.extras.url}
`;return e.extras.error&&(h+=`

**Error:**
${e.extras.error}
`),h+=`

**Output:**
${e.content}`,h.length>es&&(h=`${h.slice(0,es)}...(truncated)`),h},Dh=e=>{let h="";if(e.extras.recall_type==="workspace_context"){if(e.extras.repo_name&&(h+=`

**Repository:** ${e.extras.repo_name}`),e.extras.repo_directory&&(h+=`

**Directory:** ${e.extras.repo_directory}`),e.extras.date&&(h+=`

**Date:** ${e.extras.date}`),e.extras.runtime_hosts&&Object.keys(e.extras.runtime_hosts).length>0){h+=`

**Available Hosts**`;for(const[g,y]of Object.entries(e.extras.runtime_hosts))h+=`

- ${g} (port ${y})`}e.extras.repo_instructions&&(h+=`

**Repository Instructions:**

${e.extras.repo_instructions}`),e.extras.conversation_instructions&&(h+=`

**Conversation Instructions:**

${e.extras.conversation_instructions}`),e.extras.additional_agent_instructions&&(h+=`

**Additional Instructions:**

${e.extras.additional_agent_instructions}`)}if(e.extras.microagent_knowledge&&e.extras.microagent_knowledge.length>0){h+=`

**Triggered Microagent Knowledge:**`;for(const g of e.extras.microagent_knowledge)h+=`

- **${g.name}** (triggered by keyword: ${g.trigger})

${g.content}`}if(e.extras.custom_secrets_descriptions&&Object.keys(e.extras.custom_secrets_descriptions).length>0){h+=`

**Custom Secrets**`;for(const[g,y]of Object.entries(e.extras.custom_secrets_descriptions))h+=`

- $${g}: ${y}`}return h},Ih=e=>{const{command:h,task_list:g}=e.extras;let y=`**Command:** \`${h}\``;return h==="plan"&&g.length>0?(y+=`

**Task List (${g.length} ${g.length===1?"item":"items"}):**
`,g.forEach((x,L)=>{const D={todo:"",in_progress:"",done:""}[x.status]||"";y+=`
${L+1}. ${D} **[${x.status.toUpperCase().replace("_"," ")}]** ${x.title}`,y+=`
   *ID: ${x.id}*`,x.notes&&(y+=`
   *Notes: ${x.notes}*`)})):h==="plan"&&(y+=`

**Task List:** Empty`),e.content&&e.content.trim()&&(y+=`

**Result:** ${e.content.trim()}`),y},Nh=e=>{switch(e.observation){case"read":return Mh(e);case"edit":return Oh(e,Ys(e)==="success");case"run_ipython":case"run":return Rh(e);case"browse":return Lh(e);case"recall":return Dh(e);case"task_tracking":return Ih(e);default:return jn(e)}},Ei=e=>typeof e.path=="string",ki=e=>typeof e.command=="string",Ai=(e,h)=>e?e.length>h?`${e.substring(0,h)}...`:e:"",Ds=e=>{let h="",g="";if(Ft(e)){const y=`ACTION_MESSAGE$${e.action.toUpperCase()}`;He.exists(y)?h=u.jsx(Rs,{i18nKey:y,values:{path:Ei(e.args)&&e.args.path,command:ki(e.args)&&Ai(e.args.command,80),mcp_tool_name:e.action==="call_tool_mcp"&&e.args.name},components:{path:u.jsx(yr,{}),cmd:u.jsx(Sr,{})}}):h=e.action.toUpperCase(),g=Th(e)}if(Ps(e)){const y=`OBSERVATION_MESSAGE$${e.observation.toUpperCase()}`;He.exists(y)?h=u.jsx(Rs,{i18nKey:y,values:{path:Ei(e.extras)&&e.extras.path,command:ki(e.extras)&&Ai(e.extras.command,80),mcp_tool_name:e.observation==="mcp"&&e.extras.name},components:{path:u.jsx(yr,{}),cmd:u.jsx(Sr,{})}}):h=e.observation.toUpperCase(),g=Nh(e)}return{title:h??He.t("EVENT$UNKNOWN_EVENT"),details:g??He.t("EVENT$UNKNOWN_EVENT")}};function jh({event:e,microagentStatus:h,microagentConversationId:g,microagentPRUrl:y,actions:x,isLastMessage:L,isInLast10Actions:D,config:o,isCheckingFeedback:i,feedbackData:d}){return jr(e)?u.jsxs(u.Fragment,{children:[u.jsx(Dt,{type:"agent",message:Ds(e).details,actions:x}),u.jsx(Ot,{microagentStatus:h,microagentConversationId:g,microagentPRUrl:y,actions:x}),u.jsx(Vr,{event:e,isLastMessage:L,isInLast10Actions:D,config:o,isCheckingFeedback:i,feedbackData:d})]}):null}function Bh({event:e}){return ji(e)?u.jsx("div",{children:u.jsx(Dt,{type:"agent",message:e.content})}):null}function Js({title:e,details:h,success:g,initiallyExpanded:y=!1}){const[x,L]=pe.useState(y);return u.jsxs("div",{className:"flex flex-col gap-2 border-l-2 pl-2 my-2 py-2 border-neutral-300 text-sm w-full",children:[u.jsxs("div",{className:"flex items-center justify-between font-bold text-neutral-300",children:[u.jsxs("div",{children:[e,h&&u.jsx("button",{type:"button",onClick:()=>L(D=>!D),className:"cursor-pointer text-left",children:x?u.jsx(Mn,{className:"h-4 w-4 ml-2 inline fill-neutral-300"}):u.jsx(Tn,{className:"h-4 w-4 ml-2 inline fill-neutral-300"})})]}),g&&u.jsx(hr,{status:g})]}),x&&(typeof h=="string"?u.jsx(Tr,{components:{code:Dr,ul:Lr,ol:Or},remarkPlugins:[Mr,Rr],children:h}):h)]})}function Ph({event:e}){const{t:h}=me();let g;try{g=JSON.parse(e.content)}catch{g=e.content}const y=e.extras.arguments&&Object.keys(e.extras.arguments).length>0;return u.jsxs("div",{className:"flex flex-col gap-4",children:[y&&u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsx("h3",{className:"text-sm font-semibold text-gray-300",children:h("MCP_OBSERVATION$ARGUMENTS")})}),u.jsx("div",{className:"p-3 bg-gray-900 rounded-md overflow-auto text-gray-300 max-h-[200px] shadow-inner",children:u.jsx(br,{name:!1,src:e.extras.arguments,theme:mr,collapsed:1,displayDataTypes:!1})})]}),u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsx("h3",{className:"text-sm font-semibold text-gray-300",children:h("MCP_OBSERVATION$OUTPUT")})}),u.jsx("div",{className:"p-3 bg-gray-900 rounded-md overflow-auto text-gray-300 max-h-[300px] shadow-inner",children:typeof g=="object"&&g!==null?u.jsx(br,{name:!1,src:g,theme:mr,collapsed:1,displayDataTypes:!1}):u.jsx("pre",{className:"whitespace-pre-wrap",children:e.content.trim()||h("OBSERVATION$MCP_NO_OUTPUT")})})]})]})}function Fh({event:e,shouldShowConfirmationButtons:h}){return Bi(e)?u.jsxs("div",{children:[u.jsx(Js,{title:Ds(e).title,details:u.jsx(Ph,{event:e}),success:Ys(e)}),h&&u.jsx(Zs,{})]}):null}function Hh({status:e}){return u.jsx("span",{className:"text-lg",children:ga(e)})}function $h({status:e}){return u.jsx("span",{className:`text-xs px-2 py-1 rounded uppercase font-semibold ${va(e)}`,children:e.replace("_"," ")})}function Uh({task:e,index:h}){const{t:g}=me();return u.jsx("div",{className:"border-l-2 border-gray-600 pl-3",children:u.jsxs("div",{className:"flex items-start gap-2",children:[u.jsx(Hh,{status:e.status}),u.jsxs("div",{className:"flex-1",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsxs(Le.Text,{className:"text-sm text-gray-400",children:[h+1,"."]}),u.jsx($h,{status:e.status})]}),u.jsx("h4",{className:"font-medium text-white mb-1",children:e.title}),u.jsxs(Le.Text,{className:"text-xs text-gray-400 mb-1",children:[g("TASK_TRACKING_OBSERVATION$TASK_ID"),": ",e.id]}),e.notes&&u.jsxs(Le.Text,{className:"text-sm text-gray-300 italic",children:[g("TASK_TRACKING_OBSERVATION$TASK_NOTES"),": ",e.notes]})]})]})})}function Wh({taskList:e}){const{t:h}=me();return u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs(Le.H3,{children:[h("TASK_TRACKING_OBSERVATION$TASK_LIST")," (",e.length," ",e.length===1?"item":"items",")"]})}),u.jsx("div",{className:"p-3 bg-gray-900 rounded-md overflow-auto text-gray-300 max-h-[400px] shadow-inner",children:u.jsx("div",{className:"space-y-3",children:e.map((g,y)=>u.jsx(Uh,{task:g,index:y},g.id))})})]})}function Vh({content:e}){const{t:h}=me();return u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsx(Le.H3,{children:h("TASK_TRACKING_OBSERVATION$RESULT")})}),u.jsx("div",{className:"p-3 bg-gray-900 rounded-md overflow-auto text-gray-300 shadow-inner",children:u.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:e.trim()})})]})}function zh({event:e}){const{command:h,task_list:g}=e.extras,y=h==="plan"&&g.length>0;return u.jsxs("div",{className:"flex flex-col gap-4",children:[y&&u.jsx(Wh,{taskList:g}),e.content&&e.content.trim()&&u.jsx(Vh,{content:e.content})]})}function Gh({event:e,shouldShowConfirmationButtons:h}){const{t:g}=me();if(!Pi(e))return null;const{command:y}=e.extras;let x,L=!1;return y==="plan"?(x=g("OBSERVATION_MESSAGE$TASK_TRACKING_PLAN"),L=!0):(x=g("OBSERVATION_MESSAGE$TASK_TRACKING_VIEW"),L=!1),u.jsxs("div",{children:[u.jsx(Js,{title:x,details:u.jsx(zh,{event:e}),success:Ys(e),initiallyExpanded:L}),h&&u.jsx(Zs,{})]})}const Kh=e=>"thought"in e&&!!e.thought;function qh({event:e,microagentStatus:h,microagentConversationId:g,microagentPRUrl:y,actions:x}){return Ft(e)?Kh(e.args)&&e.action!=="think"?u.jsxs("div",{children:[u.jsx(Dt,{type:"agent",message:e.args.thought,actions:x}),u.jsx(Ot,{microagentStatus:h,microagentConversationId:g,microagentPRUrl:y,actions:x})]}):u.jsx(Ot,{microagentStatus:h,microagentConversationId:g,microagentPRUrl:y,actions:x}):null}const Zh=e=>"thought"in e&&!!e.thought;function Yh({event:e,shouldShowConfirmationButtons:h}){return u.jsxs("div",{children:[Ft(e)&&Zh(e.args)&&e.action!=="think"&&u.jsx(Dt,{type:"agent",message:e.args.thought}),u.jsx(Js,{title:Ds(e).title,details:Ds(e).details,success:Ps(e)?Ys(e):void 0}),h&&u.jsx(Zs,{})]})}function Jh({event:e,hasObservationPair:h,isAwaitingUserConfirmation:g,isLastMessage:y,microagentStatus:x,microagentConversationId:L,microagentPRUrl:D,actions:o,isInLast10Actions:i}){const d=y&&e.source==="agent"&&g,{data:v}=us(),{data:c={exists:!1},isLoading:_}=J1(e.id),C={microagentStatus:x,microagentConversationId:L,microagentPRUrl:D,actions:o,isLastMessage:y,isInLast10Actions:i,config:v,isCheckingFeedback:_,feedbackData:c};return Ir(e)?u.jsx(sh,{event:e,...C}):h&&Ft(e)?u.jsx(qh,{event:e,microagentStatus:x,microagentConversationId:L,microagentPRUrl:D,actions:o}):jr(e)?u.jsx(jh,{event:e,...C}):Nr(e)||ur(e)?u.jsx(fh,{event:e,shouldShowConfirmationButtons:d,...C}):ji(e)?u.jsx(Bh,{event:e}):Bi(e)?u.jsx(Fh,{event:e,shouldShowConfirmationButtons:d}):Pi(e)?u.jsx(Gh,{event:e,shouldShowConfirmationButtons:d}):u.jsx(Yh,{event:e,shouldShowConfirmationButtons:d})}const Xh=e=>{const{conversationId:h}=nt();return qt({queryKey:["memory","prompt",h,e],queryFn:()=>vt.getMicroagentPrompt(h,e),enabled:!!h,staleTime:1e3*60*5,gcTime:1e3*60*15})};function Qh(){const{t:e}=me();return u.jsxs(fs,{children:[u.jsx("h2",{className:"font-bold text-[20px] leading-6 -tracking-[0.01em] flex items-center gap-2",children:e("MICROAGENT$ADD_TO_MICROAGENT")}),u.jsx(gr,{size:"lg"}),u.jsx(Le.Text,{children:e("MICROAGENT$WAIT_FOR_RUNTIME")})]})}function eu(){const{t:e}=me();return u.jsx("textarea",{required:!0,disabled:!0,defaultValue:"",placeholder:e("MICROAGENT$LOADING_PROMPT"),rows:6,className:we("bg-tertiary border border-[#717888] w-full rounded p-2 placeholder:italic placeholder:text-tertiary-alt resize-none","disabled:bg-[#2D2F36] disabled:border-[#2D2F36] disabled:cursor-not-allowed")})}const tu=e=>{const{conversationId:h}=nt();return qt({queryKey:["files","microagents",h,e],queryFn:()=>vt.getFiles(h,e),enabled:!!h,select:g=>g.map(y=>y.replace(e,""))})};function su({onClose:e,onLaunch:h,eventId:g,isLoading:y,selectedRepo:x}){const{t:L}=me(),{runtimeActive:D}=an(),{data:o}=Ie(),{data:i,isLoading:d}=Xh(g),{data:v,isLoading:c}=tu(`${x}/.openhands/microagents`),[_,C]=pe.useState([]);if(o?.conversation_version==="V1")return null;const m=r=>{const t=r.get("query-input")?.toString(),s=r.get("target-input")?.toString();t&&s&&h(t,s,_)},l=r=>{r.preventDefault();const t=new FormData(r.currentTarget);m(t)};return u.jsxs(Us,{onClose:e,children:[!D&&u.jsx(Qh,{}),D&&u.jsxs(fs,{className:"items-start w-[728px]",children:[u.jsxs("div",{className:"flex items-center justify-between w-full",children:[u.jsxs("h2",{className:"font-bold text-[20px] leading-6 -tracking-[0.01em] flex items-center gap-2",children:[L("MICROAGENT$ADD_TO_MICROAGENT"),u.jsx("a",{href:"https://docs.all-hands.dev/usage/prompting/microagents-overview#microagents-overview",target:"_blank",rel:"noopener noreferrer",children:u.jsx(ri,{className:"text-primary"})})]}),u.jsx("button",{type:"button",onClick:e,children:u.jsx(Yi,{})})]}),u.jsx(Le.Text,{className:"text-sm text-[#A3A3A3] font-normal leading-5",children:L("MICROAGENT$DEFINITION")}),u.jsxs("form",{"data-testid":"launch-microagent-modal",onSubmit:l,className:"flex flex-col gap-6 w-full",children:[u.jsxs("label",{htmlFor:"query-input",className:"flex flex-col gap-2.5 w-full text-sm",children:[L("MICROAGENT$WHAT_TO_REMEMBER"),d&&u.jsx(eu,{}),!d&&u.jsx("textarea",{required:!0,"data-testid":"query-input",name:"query-input",defaultValue:i,placeholder:L("MICROAGENT$DESCRIBE_WHAT_TO_ADD"),rows:6,className:we("bg-tertiary border border-[#717888] w-full rounded p-2 placeholder:italic placeholder:text-tertiary-alt resize-none","disabled:bg-[#2D2F36] disabled:border-[#2D2F36] disabled:cursor-not-allowed")})]}),u.jsx(Ta,{testId:"target-input",name:"target-input",label:L("MICROAGENT$WHERE_TO_PUT"),placeholder:L("MICROAGENT$SELECT_FILE_OR_CUSTOM"),required:!0,allowsCustomValue:!0,isLoading:c,items:v?.map(r=>({key:r,label:r}))||[]}),u.jsxs("label",{htmlFor:"trigger-input",className:"flex flex-col gap-2.5 w-full text-sm",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[L("MICROAGENT$ADD_TRIGGERS"),u.jsx("a",{href:"https://docs.all-hands.dev/usage/prompting/microagents-keyword",target:"_blank",rel:"noopener noreferrer",children:u.jsx(ri,{className:"text-primary"})})]}),u.jsx(Lo,{name:"trigger-input",value:_,placeholder:L("MICROAGENT$TYPE_TRIGGER_SPACE"),onChange:C})]}),u.jsxs("div",{className:"flex items-center justify-end gap-2",children:[u.jsx(cs,{type:"button",variant:"secondary",onClick:e,children:L("MICROAGENT$CANCEL")}),u.jsx(cs,{type:"submit",variant:"primary",isDisabled:y||d||c,children:L("MICROAGENT$LAUNCH")})]})]})]})]})}const ru=e=>B.createElement("svg",{id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 22.3 18.66",...e},B.createElement("defs",null,B.createElement("style",null,`
      .st0 {
        stroke-miterlimit: 10;
      }

      .st0, .st1 {
        fill: none;
        stroke: currentColor;
        stroke-linecap: round;
        stroke-width: 2px;
      }

      .st1 {
        stroke-linejoin: round;
      }
    `)),B.createElement("path",{className:"st1",d:"M15.15,12.54h3.26c1.58,0,2.93-1.29,2.9-2.88-.03-1.53-1.28-2.77-2.82-2.77-.04,0-.08,0-.11,0,.13-.44.16-.92.04-1.43-.27-1.17-1.27-2.05-2.46-2.17-.74-.07-1.43.14-1.97.55,0,0,0-.02,0-.03,0-1.56-1.26-2.82-2.82-2.82s-2.82,1.26-2.82,2.82c0,0,0,.02,0,.03-.54-.4-1.23-.62-1.97-.55-1.19.12-2.19,1-2.46,2.17-.12.5-.09.99.04,1.43-.04,0-.08,0-.11,0-1.56,0-2.82,1.26-2.82,2.82s1.26,2.82,2.82,2.82l1.29.03c.41,0,.74.34.74.75v1.85c0,1.38,1.12,2.5,2.5,2.5h.29c1.44,0,2.6-1.17,2.6-2.6V6.49"}),B.createElement("polyline",{className:"st0",points:"7.97 9.74 11.22 6.49 14.47 9.74"})),iu=e=>typeof e=="object"&&e!==null&&"error"in e&&e.error===!0,nu=e=>dr(e)&&Fi(e)&&e.extras.agent_state===ve.ERROR,Pn=pe.memo(({messages:e,isAwaitingUserConfirmation:h})=>{const{createConversationAndSubscribe:g,isPending:y,unsubscribeFromConversation:x}=Do(),{getOptimisticUserMessage:L}=Hs(),{conversationId:D}=nt(),{data:o}=Io(D),{data:i}=Ie(),d=i?.conversation_version==="V1",v=L(),[c,_]=pe.useState(null),[C,S]=pe.useState(!1),[m,l]=pe.useState([]),{t:r}=me(),t=pe.useCallback(f=>Ft(f)?!!e.some(w=>Ps(w)&&w.cause===f.id):!1,[e]),s=pe.useCallback(f=>m.find(M=>M.eventId===f)?.status||null,[m]),n=pe.useCallback(f=>m.find(M=>M.eventId===f)?.conversationId||void 0,[m]),p=pe.useCallback(f=>m.find(M=>M.eventId===f)?.prUrl||void 0,[m]),a=pe.useCallback((f,w)=>{if(iu(f)||nu(f))l(M=>M.map(N=>N.conversationId===w?{...N,status:Ze.ERROR}:N));else if(dr(f)&&Fi(f))(f.extras.agent_state===ve.FINISHED||f.extras.agent_state===ve.AWAITING_USER_INPUT)&&(l(M=>M.map(N=>N.conversationId===w?{...N,status:Ze.COMPLETED}:N)),x(w));else if(dr(f)&&jr(f)){const M=No(f.args.final_thought||"");M&&l(N=>N.map(O=>O.conversationId===w?{...O,status:Ze.COMPLETED,prUrl:M}:O)),x(w)}else l(M=>M.find(O=>O.conversationId===w)?.status===Ze.WAITING?M.map(O=>O.conversationId===w?{...O,status:Ze.CREATING}:O):M)},[l,x]),b=(f,w,M)=>{const N=`Target file: ${w}

Description: ${f}

Triggers: ${M.join(", ")}`;!o||!o.selected_repository||!o.selected_branch||!o.git_provider||!c||g({query:f,conversationInstructions:N,repository:{name:o.selected_repository,branch:o.selected_branch,gitProvider:o.git_provider},onSuccessCallback:O=>{S(!1),l(I=>[...I.filter(z=>z.eventId!==c),{eventId:c,conversationId:O,status:Ze.WAITING}])},onEventCallback:(O,I)=>{a(O,I)}})};return u.jsxs(u.Fragment,{children:[e.map((f,w)=>u.jsx(Jh,{event:f,hasObservationPair:t(f),isAwaitingUserConfirmation:h,isLastMessage:e.length-1===w,microagentStatus:s(f.id),microagentConversationId:n(f.id),microagentPRUrl:p(f.id),actions:o?.selected_repository&&!d?[{icon:u.jsx(ru,{className:"w-[14px] h-[14px] text-white"}),onClick:()=>{_(f.id),S(!0)},tooltip:r("MICROAGENT$ADD_TO_MEMORY")}]:void 0,isInLast10Actions:e.length-1-w<10},w)),v&&u.jsx(Dt,{type:"user",message:v}),o?.selected_repository&&!d&&C&&c&&wa.createPortal(u.jsx(su,{onClose:()=>S(!1),onLaunch:b,selectedRepo:o.selected_repository.split("/").pop()||"",eventId:c,isLoading:y}),document.getElementById("modal-portal-exit")||document.body)]})},(e,h)=>e.messages.length===h.messages.length);Pn.displayName="Messages";function ou({suggestion:e,onClick:h}){const{t:g}=me(),y=B.useMemo(()=>{switch(e.label){case"INCREASE_TEST_COVERAGE":return u.jsx(vn,{width:24,height:24,color:"#fff"});case"AUTO_MERGE_PRS":return u.jsx(Cn,{width:19,height:20,color:"#fff"});case"FIX_README":return u.jsx(bn,{width:24,height:24,color:"#fff"});case"CLEAN_DEPENDENCIES":return u.jsx(Sn,{width:24,height:24,color:"#fff"});default:return null}},[e]);return u.jsxs("button",{type:"button",className:"list-none border border-[#525252] rounded-[15px] hover:bg-tertiary flex-1 flex items-center justify-center cursor-pointer gap-[10px] h-[55px] px-4",onClick:()=>h(e.value),children:[y,u.jsx("span",{"data-testid":"suggestion",className:"text-[15px] font-normal leading-5 text-[#DEDFE0] text-center cursor-pointer",children:g(e.label)})]})}function au({suggestions:e,onSuggestionClick:h}){return u.jsx("div",{"data-testid":"suggestions",className:"grid grid-cols-2 gap-5 max-w-fit",children:e.map((g,y)=>u.jsx(ou,{suggestion:g,onClick:h},y))})}const lu=e=>B.createElement("svg",{width:88,height:104,viewBox:"0 0 88 104",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B.createElement("g",{clipPath:"url(#clip0_8467_30797)"},B.createElement("path",{d:"M74.1747 56.6311C73.5609 56.6016 72.9881 56.2174 72.7425 55.6026C72.4064 54.7604 72.8098 53.7999 73.6428 53.457C76.361 52.3488 79.3422 51.7784 82.2621 51.8109C83.1594 51.8227 83.8843 52.5675 83.8726 53.4777C83.8609 54.388 83.1244 55.118 82.2241 55.1061C79.731 55.0766 77.1852 55.5642 74.8616 56.51C74.6365 56.6016 74.3998 56.64 74.1718 56.6282L74.1747 56.6311Z",fill:"white"}),B.createElement("path",{d:"M70.8756 52.133C70.5424 52.1152 70.2092 51.997 69.9315 51.7665C69.2329 51.1931 69.1248 50.1558 69.6918 49.4495C72.1294 46.4084 74.8184 43.5387 77.6916 40.9143C78.358 40.3055 79.3897 40.3557 79.9918 41.0325C80.5939 41.7064 80.5413 42.7496 79.8749 43.3584C77.1274 45.8675 74.5525 48.6131 72.223 51.5212C71.8839 51.9468 71.3783 52.1536 70.8756 52.13V52.133Z",fill:"white"}),B.createElement("path",{d:"M66.1371 48.9823C65.8916 48.9704 65.646 48.9025 65.4181 48.7695C64.6347 48.3232 64.36 47.3154 64.8013 46.5234C66.1868 44.0438 67.0344 41.2391 67.2507 38.4108C67.3208 37.5035 68.11 36.8238 69.0014 36.8947C69.8987 36.9657 70.571 37.7577 70.5008 38.665C70.2465 41.9721 69.2586 45.2496 67.6394 48.1459C67.3267 48.7074 66.7362 49.0118 66.14 48.9823H66.1371Z",fill:"white"}),B.createElement("path",{d:"M29.8105 34.0286C30.5938 34.4394 31.269 35.1191 31.8944 35.7722L38.1902 43.3085C36.8749 44.7211 35.545 46.1575 34.639 47.8686C34.2473 48.6104 33.9141 49.4291 33.2535 49.9433C32.5433 50.493 31.5963 50.5817 30.7136 50.7265C29.4802 50.9334 28.276 51.2939 27.1332 51.8052C27.1332 51.8052 19.7297 45.395 19.4023 43.8818C19.4023 43.8818 29.2142 33.7182 29.8105 34.0315V34.0286Z",fill:"#CF8329"}),B.createElement("path",{d:"M29.1701 35.1662C29.3776 35.2785 29.5676 35.4085 29.7634 35.5385C29.9593 35.6686 29.5413 35.3376 29.8453 35.6065C29.9447 35.6922 30.044 35.7779 30.1405 35.8666C30.4298 36.1296 30.7192 36.4074 30.9793 36.7C31.0582 36.7887 31.1313 36.8803 31.2073 36.9719L32.5693 38.6033C33.8232 40.1046 35.08 41.6089 36.3339 43.1102C36.6467 43.4856 36.9594 43.8609 37.2751 44.2362V42.3832C36.3485 43.3792 35.4395 44.387 34.627 45.4834C34.2441 46.0006 33.8875 46.5355 33.5806 47.1C33.4316 47.3749 33.2942 47.6586 33.1481 47.9364C33.075 48.0753 33.0019 48.2112 32.9201 48.3442C32.8938 48.3885 32.6512 48.7461 32.7973 48.554C32.7184 48.6575 32.6219 48.7462 32.5343 48.8437C32.4115 48.9501 32.4057 48.9619 32.5196 48.8703C32.4553 48.9146 32.391 48.956 32.3238 48.9944C32.2566 49.0328 32.0082 49.1481 32.2186 49.0624C32.0754 49.1215 31.9263 49.1629 31.7773 49.2013C31.2365 49.3431 30.6783 49.3993 30.1317 49.5027C28.872 49.7362 27.6649 50.147 26.4928 50.6642L28.0507 50.877C25.7767 48.9087 23.4852 46.8813 21.4831 44.6263C21.3399 44.4638 21.1967 44.2983 21.0593 44.1298C20.9979 44.053 20.9395 43.9762 20.8781 43.8993C20.7758 43.7752 21.1061 44.2126 20.9833 44.0412C20.957 44.0028 20.9278 43.9643 20.9015 43.9289C20.8167 43.8077 20.7349 43.6836 20.6647 43.5535C20.6413 43.5092 20.6238 43.4501 20.5917 43.4087C20.7963 43.6954 20.6998 43.7279 20.6589 43.5476L20.3228 44.8066C21.4013 43.6895 22.4915 42.5812 23.5875 41.4789C25.3734 39.682 27.1592 37.8762 29.0473 36.1887C29.2373 36.0173 29.4302 35.8488 29.6261 35.6833C29.7108 35.6095 29.7985 35.5385 29.8862 35.4676C29.9213 35.4381 29.9563 35.4115 29.9914 35.3849C30.1639 35.24 29.6816 35.6124 29.854 35.4912C29.971 35.4085 30.0879 35.3287 30.2048 35.2489C30.4181 35.107 30.0849 35.2903 30.0353 35.308C30.0499 35.3021 30.0645 35.2991 30.0762 35.2962C29.7664 35.3789 29.4916 35.311 29.173 35.1721C29.7927 35.444 30.5994 35.3553 30.9413 34.6785C31.2336 34.1022 31.1196 33.186 30.4532 32.8905C29.477 32.459 28.7785 33.0294 28.0507 33.6175C27.3697 34.1672 26.7296 34.7701 26.0924 35.3701C24.403 36.9601 22.7633 38.6033 21.1324 40.2553C20.2497 41.1479 19.3261 42.0197 18.4902 42.9566C17.4964 44.0737 18.762 45.4539 19.4898 46.2991C20.2585 47.1887 21.0973 48.0162 21.942 48.8289C23.3333 50.1677 24.7625 51.471 26.221 52.7359C26.7003 53.1497 27.2147 53.197 27.7788 52.9487C27.8578 52.9132 27.9367 52.8778 28.0156 52.8453C27.9045 52.8896 27.9191 52.8837 28.0624 52.8275C28.2027 52.7743 28.343 52.7182 28.4862 52.6679C28.7697 52.5645 29.0561 52.4729 29.3484 52.3872C29.9447 52.2128 30.5526 52.0798 31.1635 51.9793C32.4086 51.7754 33.6771 51.5183 34.5539 50.5135C35.4308 49.5086 35.878 48.2024 36.6437 47.1148C36.67 47.0764 36.9652 46.6774 36.8425 46.8399C36.9272 46.7306 37.012 46.6212 37.0997 46.5148C37.3014 46.2636 37.5089 46.0154 37.7193 45.773C38.1724 45.2499 38.6429 44.7446 39.1135 44.2392C39.625 43.6895 39.5782 42.9418 39.1135 42.3862C37.1172 39.9982 35.1239 37.6103 33.1276 35.2223C32.3706 34.318 31.4937 33.4579 30.4561 32.8935C29.8599 32.5684 29.0123 32.7457 28.6878 33.387C28.3634 34.0283 28.5359 34.8263 29.176 35.175L29.1701 35.1662Z",fill:"#231F20"}),B.createElement("path",{d:"M29.2868 6.20326C28.7373 6.80615 28.5094 7.66322 28.749 8.44639C29.7779 11.786 26.4108 17.5342 23.7072 17.4692C19.3873 17.3687 3.92852 19.7714 1.53766 40.4148C0.982323 45.2025 2.83246 56.1847 3.70931 60.3755C3.91683 61.3626 4.7206 62.1073 5.70851 62.2314C7.16407 62.4147 8.42088 61.2148 8.33319 59.7341C7.83047 51.3615 8.29227 37.9086 19.9426 47.3865C20.8662 48.1372 22.2019 48.0604 23.0466 47.2181L32.7007 37.5658C33.5161 36.7501 33.6272 35.4586 32.9608 34.5129C31.0493 31.791 28.3106 25.9245 35.2347 20.7851C35.9304 20.2679 37.6519 19.0119 39.5722 19.532C40.3321 19.7389 41.1447 19.5793 41.7351 19.0503L45.8884 15.3295C46.7214 14.5847 46.9172 13.3553 46.3677 12.3771C44.1932 8.52028 39.8674 4.06947 35.7521 1.74358C34.8139 1.21161 33.633 1.41553 32.9053 2.21644L29.2839 6.19734L29.2868 6.20326Z",fill:"#C9C7C7"}),B.createElement("path",{d:"M28.2728 5.17518C27.3462 6.23912 27.0247 7.5454 27.393 8.9167C27.4368 9.0822 27.4661 9.25066 27.4982 9.41911C27.5274 9.56688 27.4777 9.21815 27.4748 9.23588C27.4748 9.28317 27.4865 9.34227 27.4894 9.3866C27.4982 9.49004 27.5011 9.59053 27.5041 9.69396C27.507 9.86538 27.5041 10.0368 27.4924 10.2082C27.4865 10.3028 27.4748 10.3973 27.469 10.4919C27.4573 10.6131 27.393 10.6456 27.4865 10.3678C27.469 10.418 27.469 10.4801 27.4602 10.5333C27.3959 10.9264 27.3024 11.3135 27.1855 11.6948C27.127 11.8898 27.0598 12.0819 26.9896 12.274C26.9721 12.3243 26.9341 12.3893 26.9253 12.4395C26.9253 12.4454 27.0481 12.1528 26.9838 12.2947C26.9341 12.4011 26.8903 12.5104 26.8435 12.6168C26.6681 13.004 26.4694 13.3793 26.2531 13.7428C26.1566 13.9024 26.0573 14.0591 25.952 14.2157C25.8965 14.2985 25.841 14.3783 25.7825 14.458C25.7504 14.5024 25.7124 14.5467 25.6831 14.594C25.7094 14.5526 25.8936 14.3251 25.765 14.4817C25.5282 14.7684 25.2886 15.0491 25.0197 15.3062C24.9349 15.386 24.6631 15.5456 24.6309 15.6491C24.6339 15.6402 24.9524 15.4156 24.7683 15.5427C24.7391 15.5634 24.7128 15.584 24.6835 15.6047C24.6075 15.6579 24.5345 15.7082 24.4556 15.7555C24.327 15.8353 24.1808 15.8885 24.0551 15.9712C23.9441 16.0421 24.2743 15.8855 24.2568 15.8914C24.2188 15.9003 24.1808 15.921 24.1428 15.9357C24.0668 15.9594 23.9908 15.986 23.9148 16.0037C23.8593 16.0185 23.8008 16.0244 23.7453 16.0392C23.5612 16.0894 24.1136 16.0274 23.8564 16.0214C23.757 16.0214 23.6576 16.0214 23.5583 16.0214C22.6522 16.0126 21.752 16.1101 20.8547 16.2313C18.3644 16.5711 15.9356 17.3543 13.6821 18.4685C10.733 19.9255 8.08197 22.0652 6.04769 24.6689C3.27687 28.2124 1.54656 32.4268 0.660951 36.8392C0.25468 38.8193 -0.0229867 40.8289 0.000395797 42.8563C0.0208555 44.6325 0.169919 46.4058 0.359902 48.1701C0.754481 51.8555 1.31566 55.5261 2.00544 59.1642C2.13113 59.8262 2.21004 60.5502 2.45556 61.1797C3.01381 62.622 4.23555 63.5411 5.75833 63.6859C6.91869 63.7952 8.17258 63.2396 8.89159 62.3146C9.29201 61.7974 9.60768 61.2152 9.70413 60.5561C9.77428 60.0715 9.75966 59.6252 9.73336 59.1405C9.66029 57.7278 9.62229 56.3122 9.6486 54.8966C9.66321 54.1755 9.69244 53.4514 9.74505 52.7332C9.77135 52.3875 9.80058 52.0387 9.83858 51.6929C9.84735 51.6072 9.85612 51.5215 9.86781 51.4358C9.89704 51.1964 9.89704 51.2851 9.86196 51.4772C9.89411 51.2999 9.91165 51.1196 9.93795 50.9423C10.0373 50.295 10.163 49.6537 10.3325 49.0213C10.4115 48.7316 10.4962 48.445 10.5956 48.1613C10.6424 48.0253 10.7037 47.8923 10.7447 47.7564C10.7447 47.7475 10.5868 48.1287 10.6716 47.9366C10.6833 47.91 10.695 47.8805 10.7067 47.8539C10.7388 47.78 10.771 47.7091 10.8031 47.6382C10.9142 47.3958 11.0369 47.1594 11.1743 46.9318C11.2386 46.8225 11.3088 46.7161 11.3818 46.6097C11.4169 46.5594 11.4578 46.5092 11.49 46.459C11.5134 46.4205 11.2415 46.7663 11.3351 46.6629C11.3643 46.6304 11.3906 46.5949 11.4169 46.5594C11.5689 46.3762 11.7326 46.2048 11.9109 46.0482C11.9547 46.0097 12.0015 45.9743 12.0453 45.9358C12.1242 45.862 11.6858 46.19 11.9167 46.0393C12.019 45.9713 12.1213 45.9033 12.2294 45.8442C12.323 45.791 12.4194 45.7497 12.5159 45.7024C12.6854 45.6167 12.1359 45.8383 12.3785 45.7615C12.4428 45.7408 12.5042 45.7172 12.5685 45.6994C12.6825 45.664 12.7965 45.6374 12.9134 45.6137C12.9718 45.6019 13.0361 45.5989 13.0946 45.5842C12.9368 45.6255 12.7322 45.6226 12.9952 45.6019C13.2583 45.5812 13.5242 45.6019 13.7902 45.6196C13.9977 45.6344 13.4219 45.5576 13.6967 45.6078C13.7698 45.6196 13.8428 45.6314 13.913 45.6462C14.0767 45.6787 14.2374 45.7172 14.3952 45.7615C14.5414 45.8029 14.6875 45.8501 14.8337 45.8974C14.9155 45.927 14.9973 45.9565 15.0763 45.9861C15.123 46.0038 15.1698 46.0245 15.2166 46.0422C15.3832 46.1043 14.9243 45.9122 15.0879 45.989C15.4562 46.1664 15.8274 46.3319 16.184 46.5299C16.5757 46.7486 16.9585 46.985 17.3327 47.2362C17.5373 47.3722 17.7419 47.514 17.9435 47.6588C18.0488 47.7357 18.154 47.8096 18.2563 47.8894C18.303 47.9219 18.3469 47.9573 18.3936 47.9898C18.4287 48.0164 18.6859 48.2145 18.5164 48.0844C18.3673 47.9692 18.5252 48.0933 18.5486 48.111C18.6099 48.1613 18.6742 48.2115 18.7356 48.2617C18.8262 48.3327 18.9168 48.4066 19.0074 48.4775C19.3348 48.7346 19.6212 48.9178 20.0012 49.0745C20.6588 49.3464 21.3311 49.3966 22.0296 49.2961C22.8188 49.1838 23.5349 48.7671 24.099 48.2085C24.5637 47.7505 25.0197 47.2865 25.4815 46.8284C27.3141 44.996 29.1467 43.1667 30.9764 41.3343L33.148 39.1621C33.8436 38.4646 34.5159 37.7701 34.7292 36.7476C34.9689 35.6038 34.7 34.5369 34.057 33.5853C33.7735 33.1656 33.5104 32.7312 33.2737 32.282C33.1422 32.0308 33.0165 31.7736 32.8996 31.5106C32.8703 31.4456 32.844 31.3806 32.8148 31.3156C32.7213 31.0998 32.8265 31.3333 32.8616 31.4367C32.8119 31.289 32.7505 31.1441 32.6979 30.9964C32.4933 30.4083 32.3618 29.8142 32.2536 29.2025C32.2127 28.9719 32.2887 29.5601 32.2624 29.2704C32.2536 29.1906 32.2449 29.1138 32.239 29.034C32.2244 28.8626 32.2156 28.6941 32.2127 28.5227C32.2069 28.1947 32.2244 27.8725 32.2536 27.5445C32.2828 27.2164 32.2069 27.8253 32.2478 27.5918C32.2624 27.509 32.2741 27.4263 32.2887 27.3406C32.3208 27.1603 32.3618 26.98 32.4056 26.7997C32.4465 26.6401 32.4933 26.4835 32.543 26.3269C32.5722 26.2412 32.6014 26.1555 32.6307 26.0727C32.6482 26.0254 32.6745 25.9752 32.6862 25.9249C32.6745 25.9663 32.5547 26.2353 32.6336 26.055C32.7943 25.6885 32.9697 25.3309 33.1772 24.9851C33.2737 24.8226 33.3789 24.663 33.4841 24.5034C33.5426 24.4147 33.6069 24.332 33.6683 24.2433C33.7764 24.0808 33.4754 24.4827 33.601 24.332C33.642 24.2847 33.677 24.2345 33.7179 24.1842C34.019 23.8089 34.3464 23.4513 34.6912 23.1173C34.8578 22.9548 35.0303 22.7952 35.2057 22.6415C35.4015 22.4701 35.6295 22.21 35.8604 22.0948C35.8195 22.1154 35.6061 22.2869 35.837 22.1154C35.875 22.0859 35.913 22.0563 35.9539 22.0297C36.0036 21.9943 36.0504 21.9588 36.1 21.9233C36.2286 21.8317 36.3572 21.7401 36.4859 21.6544C36.7957 21.4505 37.1143 21.2791 37.4445 21.1165C37.731 20.9747 37.2224 21.1875 37.4621 21.1047C37.5614 21.0692 37.6608 21.0338 37.7602 21.0013C37.9063 20.9569 38.2922 20.7885 38.4412 20.8476C38.4588 20.8535 38.1489 20.8476 38.3155 20.8683C38.3594 20.8742 38.4149 20.8594 38.4588 20.8594C38.5727 20.8535 38.6867 20.8535 38.8036 20.8594C39.1544 20.8771 38.6429 20.8092 38.8913 20.8624C39.0287 20.8919 39.1661 20.9274 39.3034 20.9569C40.569 21.2347 41.7732 20.9097 42.7524 20.0615C43.0183 19.8309 43.2755 19.5916 43.5386 19.3581C44.4856 18.5099 45.4355 17.6617 46.3825 16.8105C46.6397 16.58 46.9232 16.3584 47.1424 16.0924C47.9871 15.0757 48.3583 13.669 47.917 12.3834C47.5604 11.349 46.8618 10.4033 46.2276 9.52551C45.5203 8.54432 44.7662 7.5986 43.9595 6.70016C42.3578 4.91511 40.5749 3.30442 38.64 1.89766C37.7368 1.24156 36.7518 0.496806 35.6821 0.151026C34.4107 -0.259772 32.9931 0.145115 32.0227 1.0406C31.3183 1.68783 30.7075 2.471 30.0644 3.17734C29.4594 3.83935 28.8573 4.50431 28.2523 5.16631C27.7437 5.72488 27.6619 6.67356 28.2523 7.21735C28.8076 7.73159 29.7371 7.81434 30.2807 7.21735C30.9004 6.53466 31.52 5.85492 32.1426 5.17223C32.7651 4.48953 33.3526 3.76251 34.0132 3.12414C34.2762 2.87294 33.8495 3.20098 34.0658 3.0739C34.1155 3.04435 34.434 2.84338 34.247 2.95864C34.0862 3.05913 34.3288 2.935 34.4019 2.91727C34.4574 2.90249 34.6474 2.82565 34.4633 2.89362C34.3025 2.95273 34.4574 2.89362 34.5276 2.89362C34.5773 2.89362 34.6269 2.89362 34.6766 2.89362C34.928 2.88476 34.6445 2.90545 34.6094 2.87294C34.6532 2.91431 34.8958 2.94387 34.9514 2.95569C35.1034 2.98524 34.852 2.92613 34.8432 2.90545C34.8491 2.92022 34.966 2.96455 34.9835 2.97342C35.1121 3.04139 35.2378 3.11528 35.3635 3.18916C35.8195 3.4581 36.2637 3.74477 36.6992 4.04622C36.9067 4.19104 37.1143 4.33585 37.3159 4.48658C37.427 4.56933 37.5381 4.65208 37.6462 4.73483C37.693 4.77029 37.7427 4.80576 37.7865 4.84418C37.5293 4.63435 37.7544 4.82053 37.8099 4.86487C39.5723 6.25685 41.1887 7.84389 42.6354 9.56688C42.8137 9.77967 42.9862 9.99246 43.1586 10.2082C43.2434 10.3146 43.3282 10.421 43.41 10.5303C43.4421 10.5747 43.4918 10.619 43.5152 10.6692C43.4655 10.5717 43.3837 10.4919 43.4889 10.6367C43.7987 11.0564 44.0998 11.482 44.3862 11.9194C44.6551 12.3331 44.9065 12.7557 45.1491 13.1843C45.2514 13.3616 45.0906 13.2079 45.1315 13.1193C45.1228 13.137 45.1725 13.2434 45.1783 13.2641C45.1929 13.3114 45.2017 13.3616 45.2163 13.4118C45.266 13.5951 45.1549 13.4414 45.2163 13.3409C45.19 13.3852 45.2221 13.5833 45.2251 13.6394C45.228 13.8167 45.152 13.6749 45.2426 13.5685C45.2163 13.601 45.2134 13.7192 45.2017 13.7635C45.19 13.8108 45.1695 13.8581 45.1608 13.9054C45.1228 14.0945 45.2864 13.666 45.1929 13.8345C45.1374 13.9379 45.0848 14.0413 45.0234 14.1418C44.8889 14.3664 45.2046 13.9763 45.0058 14.1536C44.9532 14.2009 44.9065 14.2541 44.8539 14.3014C44.7808 14.3694 44.7077 14.4314 44.6347 14.4965L43.4772 15.5309C42.615 16.3052 41.7498 17.0765 40.8876 17.8508C40.8262 17.907 40.7648 17.9602 40.7035 18.0163C40.4959 18.2055 40.911 17.9099 40.6655 18.0311C40.6216 18.0518 40.569 18.0784 40.5281 18.105C40.3673 18.2114 40.7707 18.04 40.5866 18.0843C40.4872 18.1079 40.3849 18.1345 40.2855 18.1641C40.1014 18.2173 40.531 18.1641 40.341 18.1552C40.2709 18.1523 40.2007 18.1611 40.1306 18.1552C40.1189 18.1552 39.9728 18.1523 39.9728 18.1464C39.9698 18.1198 40.2446 18.2055 40.0225 18.1434C39.9202 18.1139 39.8179 18.0902 39.7126 18.0695C39.3794 18.0016 39.0345 17.9572 38.6955 17.9484C38.1694 17.9365 37.6199 18.0163 37.1113 18.1611C35.384 18.6576 33.8378 19.8812 32.5781 21.1313C31.3183 22.3814 30.231 23.9921 29.6991 25.7654C28.8924 28.4636 29.5033 31.3451 30.8039 33.7744C31.0377 34.2118 31.2949 34.6345 31.5726 35.0423C31.6515 35.1576 31.7334 35.2699 31.8035 35.3881C31.7977 35.3792 31.9029 35.5565 31.897 35.5654C31.8824 35.5831 31.821 35.2758 31.8503 35.4442C31.8707 35.5595 31.9058 35.7132 31.9496 35.8196C32.014 35.9762 31.9058 35.6807 31.935 35.6925C31.9438 35.6954 31.9409 35.8964 31.9409 35.8846C31.9409 35.9289 31.9263 35.988 31.935 36.0294C31.9672 36.1979 31.9263 35.8757 31.9555 35.8994C31.9876 35.926 31.8824 36.1831 31.8766 36.2274C31.8561 36.4018 31.9175 36.0767 31.9321 36.1062C31.9438 36.1299 31.8415 36.2924 31.824 36.3249C31.8006 36.3693 31.7743 36.4077 31.748 36.452C31.6515 36.6175 31.6837 36.4225 31.8035 36.3811C31.7655 36.3929 31.6983 36.4993 31.6661 36.5289C31.6574 36.5377 31.6486 36.5466 31.6398 36.5555C31.5901 36.6057 31.5375 36.6559 31.4878 36.7062L30.8477 37.3475C29.1262 39.0675 27.4047 40.7905 25.6802 42.5106C24.4614 43.7282 23.2601 44.9665 22.0209 46.1664C21.9916 46.193 21.9624 46.2196 21.9361 46.2491C21.7549 46.4353 22.1699 46.1073 21.8835 46.2816C21.8426 46.3082 21.7987 46.3289 21.7578 46.3555C21.5386 46.4915 21.9507 46.3141 21.7929 46.3496C21.7023 46.3703 21.6087 46.4058 21.5152 46.4294C21.4217 46.453 21.296 46.4117 21.4626 46.4442C21.6204 46.4767 21.5181 46.4412 21.4538 46.4383C21.3837 46.4353 21.0534 46.4087 21.2551 46.4412C21.4684 46.4767 21.0651 46.3762 21.0154 46.3703C20.8751 46.3526 21.1177 46.4028 21.1352 46.4235C21.1148 46.3969 21.0329 46.3732 21.0037 46.3585C20.9453 46.3289 20.8927 46.2875 20.8342 46.258C20.691 46.1871 20.9394 46.323 20.9365 46.3467C20.9511 46.2728 20.1152 45.6994 20.0655 45.661C19.6563 45.3477 19.2413 45.0404 18.8145 44.7537C17.5051 43.87 16.0057 43.0455 14.4332 42.7854C13.1355 42.5726 11.7881 42.6731 10.6424 43.3883C9.62521 44.0237 8.85067 44.999 8.33625 46.0807C7.14082 48.5898 6.86608 51.4861 6.77547 54.2316C6.72871 55.6354 6.74917 57.0422 6.81055 58.446C6.82516 58.777 6.8427 59.111 6.86023 59.442C6.869 59.6193 6.86316 59.7996 6.87777 59.9739C6.89239 60.1631 6.945 59.7227 6.89239 59.903C6.87777 59.9503 6.87485 60.0005 6.86316 60.0478C6.85147 60.0951 6.83685 60.1424 6.82516 60.1867C6.74624 60.497 6.83978 60.1483 6.84562 60.1513C6.85731 60.1601 6.72286 60.3788 6.71117 60.4025C6.60595 60.6093 6.91869 60.2015 6.69071 60.432C6.65856 60.4645 6.45104 60.6418 6.45689 60.6596C6.45104 60.63 6.71702 60.5059 6.57672 60.565C6.5095 60.5916 6.43935 60.6537 6.37797 60.6891C6.33997 60.7098 6.28736 60.7276 6.25229 60.7542C6.12076 60.8517 6.37505 60.6714 6.37797 60.7039C6.38089 60.7276 6.08569 60.7808 6.05646 60.7926C5.92201 60.8428 6.15876 60.766 6.18214 60.7808C6.16168 60.7689 6.02139 60.7896 5.98631 60.7896C5.93663 60.7896 5.88694 60.7896 5.83725 60.7837C5.62389 60.7719 5.68234 60.6684 5.93663 60.8014C5.89863 60.7837 5.61219 60.7601 5.60635 60.7187C5.60635 60.7128 5.91909 60.8842 5.64142 60.7335C5.59173 60.7069 5.54497 60.6803 5.49528 60.6537C5.48651 60.6478 5.35499 60.565 5.35499 60.565C5.3696 60.5443 5.62389 60.8192 5.40467 60.5946C5.36668 60.5561 5.32576 60.5177 5.28776 60.4763C5.26146 60.4497 5.23807 60.4231 5.21469 60.3936C5.14454 60.3079 5.165 60.3374 5.28192 60.4823C5.28776 60.4793 5.09778 60.2133 5.11532 60.1897C5.12116 60.1808 5.21469 60.5355 5.12993 60.2222C5.11532 60.166 5.09778 60.1128 5.08609 60.0567C5.05101 59.9148 5.02471 59.7671 4.99548 59.6222C4.86395 58.9691 4.73827 58.316 4.61844 57.6628C4.30862 55.9694 4.02803 54.273 3.77375 52.5707C3.7036 52.1008 3.63637 51.6309 3.57207 51.161C3.54284 50.9393 3.51069 50.7206 3.48146 50.499C3.46685 50.3807 3.44931 50.2596 3.4347 50.1414C3.42885 50.0911 3.42301 50.0379 3.41424 49.9877C3.43178 50.0793 3.44347 50.2271 3.42301 50.0497C3.3061 49.104 3.19795 48.1583 3.10734 47.2096C2.94659 45.5191 2.82091 43.8168 2.84721 42.1204C2.85306 41.7717 2.86475 41.423 2.88813 41.0772C2.8969 40.9294 2.90859 40.7817 2.92321 40.6339C2.93198 40.5571 2.93782 40.4832 2.94659 40.4093C2.95536 40.3354 2.96413 40.2645 2.97289 40.1906C2.98459 40.0931 2.98459 40.0931 2.97289 40.1965L2.99043 40.0517C3.16288 38.7779 3.39086 37.513 3.68898 36.2629C3.95496 35.1517 4.27647 34.0522 4.66228 32.9794C4.75581 32.7223 4.85226 32.4652 4.95164 32.2081C4.9721 32.1549 4.99548 32.1017 5.01594 32.0455C5.01009 32.0574 4.91949 32.279 4.98379 32.1283C5.04225 31.9894 5.1007 31.8475 5.15916 31.7086C5.36375 31.2328 5.58004 30.7659 5.81387 30.3048C6.24937 29.4359 6.73748 28.5937 7.27527 27.7868C7.39511 27.6095 7.51494 27.4322 7.64062 27.2549C7.70785 27.1603 7.77215 27.0687 7.83938 26.9771C7.8686 26.9386 7.89783 26.9002 7.92706 26.8588C8.12289 26.5929 7.778 27.0509 7.89783 26.8973C8.17258 26.5515 8.4444 26.2057 8.73083 25.8717C9.27155 25.2482 9.84735 24.6571 10.4553 24.0985C10.7505 23.8266 11.0545 23.5665 11.3643 23.3124C11.4403 23.2503 11.5163 23.1883 11.5952 23.1291C11.8495 22.9252 11.3818 23.2887 11.5864 23.1351C11.7413 23.0198 11.8933 22.9045 12.0511 22.7922C13.2232 21.9499 14.4829 21.2288 15.7982 20.6378C15.9414 20.5727 16.0846 20.5107 16.2278 20.4516C16.4617 20.3511 16.3535 20.4279 16.1782 20.4693C16.2658 20.4486 16.3564 20.3984 16.4383 20.3659C16.7364 20.2476 17.0375 20.1383 17.3385 20.0349C17.9085 19.8398 18.4843 19.6654 19.0688 19.5177C19.5862 19.3847 20.1093 19.2694 20.6384 19.1748C20.8839 19.1305 21.1294 19.0921 21.3749 19.0566C21.4334 19.0478 21.4918 19.0418 21.5503 19.033C21.752 19.0034 21.1411 19.0832 21.41 19.0507C21.5211 19.0389 21.6321 19.0241 21.7461 19.0123C22.6113 18.9207 23.5027 18.9916 24.3591 18.8527C25.9725 18.5926 27.2205 17.2804 28.1558 16.0214C29.1584 14.6708 29.9095 13.0158 30.2018 11.349C30.3596 10.4476 30.3947 9.58462 30.2544 8.68027C30.2281 8.51181 30.193 8.34335 30.1492 8.17785C30.12 8.07441 30.0907 7.97098 30.0674 7.86754C30.0089 7.62224 30.0498 8.0685 30.0703 7.82025C30.0703 7.79661 30.0761 7.61042 30.0791 7.61337C30.0995 7.62224 30.0206 7.87936 30.0703 7.72568C30.082 7.6843 30.1813 7.39468 30.1697 7.37399C30.1813 7.39468 30.0469 7.61337 30.1346 7.48334C30.1638 7.44196 30.1813 7.38876 30.2077 7.34443C30.2252 7.31488 30.3216 7.18189 30.3216 7.16711C30.3246 7.19075 30.0966 7.44787 30.2866 7.22917C30.7805 6.66174 30.8828 5.73079 30.2866 5.17814C29.7429 4.67572 28.7872 4.56933 28.2581 5.17814L28.2728 5.17518Z",fill:"#231F20"}),B.createElement("path",{d:"M73.8511 93.2459C76.3501 90.5949 78.6357 87.6218 80.3543 84.3886C81.9327 81.4244 83.3648 77.6828 82.3331 74.293C81.655 72.0647 80.0328 70.0964 78.1973 68.7339C77.2649 68.0424 76.1572 67.5163 75.0231 67.2799C74.5847 67.1883 74.1492 67.1439 73.7166 67.1292C73.8657 65.5155 73.629 63.8812 72.983 62.3828C72.1559 60.4677 70.6009 58.8541 68.8122 57.8345C67.3683 57.0099 65.7754 56.5844 64.1561 56.4927C64.083 53.0674 61.9085 49.787 58.9711 48.1556C57.875 47.5468 56.6737 47.1419 55.4374 46.9321C54.8528 43.4743 51.9066 40.6607 48.6623 39.6352C44.9357 38.459 40.7269 39.384 37.6053 41.6774C35.6499 43.1108 34.0804 44.9165 32.6921 46.8907C32.2069 46.8907 31.7246 46.9084 31.2453 46.9646C30.0001 47.1094 28.8427 47.4049 27.6853 47.8926C26.6711 48.3181 25.6948 48.8767 24.7625 49.4589C21.3837 51.5661 18.4258 54.5067 16.7773 58.2039C15.2516 61.6233 14.8103 65.3944 15.2692 69.1063C15.7777 73.232 17.1953 77.1716 19.1156 80.8362C21.2259 84.8615 23.9499 88.5675 26.9955 91.9189C29.1613 94.301 31.5492 96.4614 34.171 98.3173C36.8308 100.203 39.7536 101.719 42.8488 102.724C46.1165 103.785 49.6181 104.213 53.0407 103.906C57.1238 103.537 61.0433 102.227 64.6442 100.262C68.0259 98.4149 71.203 96.0683 73.8569 93.2489L73.8511 93.2459ZM78.3259 72.8449C78.3259 72.8449 78.3464 72.8685 78.3551 72.8833C78.5071 73.0724 78.3668 72.9099 78.3259 72.8449ZM76.7534 71.2372C76.8177 71.2844 76.8733 71.3229 76.7534 71.2372V71.2372Z",fill:"#FFE165"}),B.createElement("path",{d:"M31.0027 59.1286C30.3333 61.8092 30.9384 64.6877 32.3588 67.0166C33.9664 69.6498 36.4712 71.7215 39.0667 73.3056C41.4137 74.736 44.1904 75.7379 46.9671 75.469C49.7437 75.2 52.4766 73.8819 53.9526 71.3817C55.2503 69.1858 55.5104 66.0649 54.0081 63.8957C53.1137 62.6042 51.816 61.818 50.4715 61.0733C50.1909 60.9166 49.9103 60.76 49.6356 60.5945C49.4894 60.5058 49.3462 60.4142 49.203 60.3197C49.1329 60.2724 49.0627 60.2221 48.9926 60.1748C48.6535 59.9414 49.2059 60.3699 48.8961 60.098C48.6535 59.8852 48.4197 59.6695 48.2034 59.4271C48.0894 59.3 47.9842 59.1641 47.8731 59.037C47.7241 58.8656 48.0017 59.2262 47.8731 59.037C47.8117 58.9483 47.7474 58.8626 47.689 58.774C46.8735 57.5741 46.2977 56.2294 45.6226 54.9497C45.0234 53.8148 44.3102 52.748 43.4509 51.7934C41.8755 50.0408 39.8763 48.7493 37.7076 47.8834C35.6821 47.0736 33.4081 46.7101 31.2394 46.9613C29.9943 47.1061 28.8369 47.4017 27.6794 47.8893C26.6652 48.3149 25.689 48.8734 24.7566 49.4557C21.3778 51.5628 18.42 54.5034 16.7715 58.2006C15.2458 61.62 14.8044 65.3911 15.2633 69.1031C15.7719 73.2288 17.1894 77.1683 19.1097 80.833C21.22 84.8582 23.9441 88.5643 26.9896 91.9157C29.1554 94.2977 31.5434 96.4581 34.1651 98.3141C36.7869 100.17 39.7477 101.716 42.843 102.721C46.1107 103.782 49.6122 104.21 53.0348 103.903C57.118 103.533 61.0375 102.224 64.6384 100.259C68.0201 98.4116 71.1972 96.065 73.8511 93.2456C76.3501 90.5946 78.6357 87.6215 80.3543 84.3883C81.9327 81.4241 83.3648 77.6825 82.3331 74.2927C81.655 72.0644 80.0328 70.0961 78.1973 68.7336C77.2649 68.0421 76.1572 67.516 75.0231 67.2796C73.6669 66.9988 72.3575 67.117 71.0189 67.4303C66.357 68.5268 62.2241 71.4083 59.0616 74.9784C56.6971 77.65 54.3004 80.8803 54.8177 84.6809C55.148 87.1073 56.9835 89.2499 59.0207 90.4557C60.0671 91.0763 61.2479 91.4635 62.4638 91.5315C63.6125 91.5965 64.805 91.2773 65.863 90.8458C68.2685 89.8617 70.2531 88.1446 72.036 86.2709C72.5563 85.7241 72.6176 84.7548 72.036 84.2198C71.4544 83.6849 70.5629 83.6347 70.0076 84.2198C69.5399 84.7104 69.0635 85.1922 68.5637 85.6503C68.3591 85.8394 68.1487 86.0256 67.9382 86.2059C67.8213 86.3064 67.7015 86.4068 67.5816 86.5044C67.5232 86.5517 67.4618 86.5989 67.4034 86.6492C67.1812 86.8295 67.5436 86.5487 67.3946 86.6551C66.9386 86.9831 66.4827 87.3053 65.9946 87.586C65.7695 87.7161 65.5386 87.8372 65.3048 87.9495C65.1966 88.0027 65.0885 88.05 64.9803 88.1003C64.7465 88.2067 65.0066 88.0884 65.0446 88.0766C64.9657 88.0973 64.8868 88.1387 64.8079 88.1682C64.3227 88.3515 63.82 88.4904 63.3114 88.5849C63.2442 88.5968 63.1799 88.6086 63.1127 88.6204C62.8262 88.6736 63.1916 88.5997 63.1974 88.6115C63.1974 88.6086 62.8671 88.6352 62.8321 88.6352C62.7239 88.6352 62.6187 88.6352 62.5106 88.6322C62.4492 88.6322 62.3878 88.6234 62.3264 88.6204C62.0634 88.6056 62.3644 88.6382 62.3703 88.6293C62.344 88.6766 61.7419 88.4963 61.6834 88.4815C61.5782 88.452 61.47 88.4194 61.3677 88.384C61.3064 88.3633 61.2479 88.3397 61.1865 88.319C60.9352 88.2333 61.3794 88.4135 61.2187 88.3337C60.7627 88.1032 60.3185 87.8816 59.9005 87.5831C59.9005 87.5831 59.7456 87.4856 59.7397 87.4649C59.7397 87.4737 60.0291 87.7013 59.8099 87.5181C59.7222 87.4442 59.6316 87.3703 59.5439 87.2934C59.3335 87.1073 59.1318 86.9122 58.9389 86.7053C58.8804 86.6433 58.4683 86.2443 58.4946 86.1793C58.4917 86.1881 58.6817 86.4423 58.5531 86.2532C58.518 86.2 58.4771 86.1468 58.442 86.0936C58.3602 85.9753 58.2842 85.8512 58.2111 85.7271C58.0913 85.5232 57.9802 85.3133 57.8838 85.0976C57.8721 85.074 57.8165 84.9291 57.8107 84.9262C57.8224 84.9262 57.9159 85.2188 57.8633 85.0533C57.8165 84.8966 57.7581 84.7459 57.7172 84.5863C57.6821 84.4445 57.6529 84.3026 57.6265 84.1607C57.6207 84.1282 57.5973 83.945 57.6207 84.1282C57.6441 84.3233 57.6207 84.0898 57.6149 84.0396C57.5915 83.747 57.5915 83.4515 57.6149 83.1589C57.6207 83.085 57.6295 83.0111 57.6353 82.9372C57.6499 82.7303 57.5915 83.1766 57.6324 82.9727C57.6587 82.8456 57.6762 82.7156 57.7025 82.5885C57.7639 82.2959 57.8458 82.0063 57.9393 81.7225C57.9627 81.6516 57.989 81.5807 58.0153 81.5098C58.1059 81.2556 58.0124 81.5009 57.9977 81.5452C58.0357 81.4063 58.1205 81.2645 58.1819 81.1374C58.2374 81.0221 58.2988 80.9069 58.3602 80.7946C58.5765 80.4015 58.8161 80.0232 59.0616 79.6508C59.237 79.3878 59.4153 79.1307 59.6024 78.8736C59.7017 78.7347 59.807 78.5987 59.9063 78.4598C59.6053 78.8765 59.8216 78.5721 59.8917 78.4805C59.9531 78.4007 60.0145 78.3239 60.0759 78.2441C60.6224 77.5525 61.2041 76.8846 61.812 76.2462C62.5164 75.5103 63.2588 74.8129 64.0392 74.1656C64.2233 74.0119 64.4104 73.8612 64.6004 73.7135C64.8108 73.548 64.5741 73.7401 64.5419 73.7578C64.5975 73.7282 64.6559 73.6721 64.7085 73.6307C64.8342 73.5361 64.9628 73.4416 65.0914 73.3499C65.5444 73.0249 66.0092 72.7175 66.4856 72.4279C66.962 72.1382 67.4793 71.8486 67.9908 71.5915C68.2451 71.4644 68.4994 71.3432 68.7595 71.225C68.8998 71.163 69.0401 71.1039 69.1804 71.0418C68.894 71.1659 69.274 71.0034 69.3704 70.9679C69.9579 70.7433 70.5541 70.5453 71.1621 70.3798C71.4544 70.3 71.7467 70.2291 72.0419 70.164C72.1821 70.1345 72.3195 70.1049 72.4598 70.0783C72.5358 70.0636 72.6118 70.0517 72.6849 70.037C72.9479 69.9808 72.5153 70.0488 72.6849 70.034C72.9421 70.0133 73.1993 69.9926 73.4565 69.9956C73.5909 69.9956 73.7254 70.0044 73.8598 70.0133C73.9095 70.0163 73.9592 70.0251 74.0089 70.0281C74.1843 70.0399 73.7312 69.9808 73.9914 70.0281C74.2369 70.0724 74.4795 70.1197 74.7192 70.1877C74.8448 70.2231 74.9734 70.2645 75.0962 70.3059C75.143 70.3236 75.1897 70.3384 75.2365 70.3561C75.558 70.4684 74.9471 70.2202 75.2599 70.365C75.7334 70.5807 76.1835 70.832 76.6073 71.1334C76.6482 71.163 76.6891 71.1925 76.73 71.2221C76.9434 71.3757 76.692 71.1984 76.6687 71.1718C76.7534 71.2694 76.8879 71.3491 76.9843 71.4319C77.1919 71.6122 77.3935 71.8043 77.5864 72.0023C77.7793 72.2003 77.9459 72.3865 78.1125 72.5875C78.1914 72.682 78.2674 72.7796 78.3464 72.8741C78.5188 73.0899 78.3171 72.8505 78.3054 72.818C78.3259 72.883 78.4194 72.9746 78.4604 73.0337C78.7702 73.4741 79.0566 73.9381 79.3021 74.4168C79.3401 74.4937 79.3781 74.5705 79.4132 74.6503C79.4804 74.801 79.4863 75.005 79.3986 74.5971C79.4336 74.7597 79.5155 74.9222 79.5652 75.0848C79.6149 75.2473 79.6499 75.3951 79.6821 75.5547C79.6967 75.6285 79.7113 75.7024 79.7259 75.7793C79.7376 75.8443 79.7873 76.2019 79.7493 75.9182C79.7113 75.6345 79.7493 75.933 79.7551 75.995C79.7639 76.0837 79.7698 76.1723 79.7727 76.261C79.7815 76.4413 79.7844 76.6215 79.7815 76.7989C79.7785 76.9762 79.7698 77.1417 79.7581 77.3131C79.7522 77.4047 79.7435 77.4993 79.7347 77.5909C79.7318 77.6264 79.7259 77.6619 79.723 77.6944C79.6996 77.9663 79.7785 77.3368 79.7347 77.6087C79.609 78.3682 79.4424 79.1129 79.2057 79.8459C79.1443 80.0321 79.0829 80.2153 79.0157 80.3985C78.9835 80.4842 78.9514 80.57 78.9192 80.6586C78.8929 80.7266 78.7468 81.096 78.8432 80.8537C78.9397 80.6113 78.7935 80.966 78.776 81.0133C78.738 81.099 78.7029 81.1876 78.665 81.2733C78.5773 81.4743 78.4867 81.6723 78.3931 81.8674C78.0161 82.6653 77.5923 83.4396 77.1422 84.1992C76.692 84.9587 76.1922 85.7241 75.6778 86.46C75.4265 86.8206 75.1693 87.1752 74.9062 87.5269C74.7104 87.79 75.0699 87.3141 74.9121 87.521C74.8448 87.6097 74.7776 87.6983 74.7075 87.787C74.573 87.9614 74.4356 88.1357 74.2983 88.3101C73.3162 89.5455 72.2728 90.7365 71.1621 91.8595C70.7178 92.3087 70.2648 92.7461 69.7942 93.1658C69.5984 93.3402 69.3996 93.5116 69.195 93.68C68.9524 93.881 68.7069 94.0761 68.4585 94.2711C68.4117 94.3066 68.365 94.342 68.3211 94.3775C68.1516 94.5135 68.5228 94.2238 68.3533 94.3539C68.2159 94.4573 68.0785 94.5637 67.9412 94.6671C66.1699 95.9941 64.2993 97.191 62.3294 98.1929C61.8822 98.4205 61.4291 98.6392 60.9702 98.846C60.754 98.9436 60.5377 99.0381 60.3185 99.1327C60.26 99.1564 60.2015 99.18 60.146 99.2066C59.9999 99.2687 60.2746 99.1505 60.2746 99.1534C60.2746 99.1889 59.9326 99.2894 59.8859 99.3071C59.0061 99.6499 58.1088 99.9514 57.1998 100.206C56.3493 100.442 55.487 100.637 54.619 100.785C54.4144 100.82 54.2098 100.853 54.0052 100.882C53.9584 100.888 53.5638 100.941 53.821 100.909C54.0783 100.876 53.6661 100.927 53.596 100.936C53.181 100.983 52.7659 101.018 52.348 101.045C51.5354 101.095 50.7199 101.104 49.9045 101.071C49.507 101.057 49.1066 101.03 48.709 100.995C48.5045 100.977 48.3028 100.956 48.1011 100.933C48.0427 100.927 47.7211 100.882 47.9813 100.918C48.2414 100.953 47.8497 100.9 47.7854 100.891C46.2451 100.67 44.7253 100.3 43.2492 99.8006C42.8897 99.6795 42.5302 99.5494 42.1766 99.4135C42.0041 99.3485 41.8346 99.2775 41.6651 99.2096C41.4956 99.1416 41.969 99.3366 41.8054 99.2687C41.7732 99.2539 41.7381 99.2391 41.7031 99.2273C41.6008 99.1859 41.5014 99.1416 41.3991 99.0973C40.6976 98.7929 40.0078 98.4619 39.3327 98.1043C38.0203 97.4097 36.7548 96.6236 35.5418 95.7636C35.232 95.5449 34.928 95.3203 34.6269 95.0927C34.5626 95.0425 34.4954 94.9922 34.4311 94.942C34.2879 94.8356 34.7088 95.1607 34.5685 95.0484C34.5305 95.0188 34.4954 94.9893 34.4574 94.9627C34.3084 94.8474 34.1622 94.7322 34.0161 94.6139C33.4491 94.1559 32.8908 93.683 32.3472 93.1954C31.254 92.2142 30.2164 91.1739 29.2197 90.0922C28.4715 89.2795 27.7466 88.446 27.0481 87.589C26.709 87.1723 26.3729 86.7526 26.0456 86.327C25.9608 86.2177 25.879 86.1083 25.7942 85.999C25.6305 85.7862 25.955 86.2147 25.7474 85.9369C25.5721 85.7035 25.3996 85.47 25.2301 85.2335C24.0201 83.5578 22.9035 81.8112 21.9156 79.9937C21.4334 79.107 20.9803 78.2056 20.5653 77.2836C20.3636 76.8403 20.1736 76.394 19.9895 75.9477C19.8931 75.7113 20.0246 76.0127 20.0246 76.0364C20.0246 75.995 19.969 75.8945 19.9574 75.865C19.9164 75.7645 19.8784 75.664 19.8404 75.5635C19.7469 75.3212 19.6563 75.0759 19.5686 74.8306C18.9548 73.1106 18.4755 71.3373 18.192 69.5286C18.1569 69.304 18.1394 69.0765 18.0955 68.8548C18.0955 68.843 18.1335 69.1681 18.116 69.0114C18.1101 68.9553 18.1014 68.8991 18.0955 68.843C18.0809 68.7189 18.0663 68.5918 18.0546 68.4647C18.0137 68.0362 17.9815 67.6047 17.964 67.1761C17.9289 66.3191 17.9435 65.4591 18.0137 64.605C18.0283 64.4188 18.0488 64.2296 18.0692 64.0434C18.1101 63.6711 18.0371 64.2503 18.0692 64.0139C18.0868 63.8957 18.1014 63.7774 18.1218 63.6563C18.1832 63.2484 18.2621 62.8435 18.3527 62.4416C18.5339 61.6407 18.7707 60.8516 19.0659 60.0862C19.2003 59.7374 18.9899 60.2605 19.0717 60.0655C19.1068 59.9798 19.1419 59.8941 19.1799 59.8084C19.2705 59.6015 19.364 59.3946 19.4605 59.1907C19.6417 58.8154 19.8346 58.4459 20.045 58.0854C20.2555 57.7248 20.4805 57.3613 20.7202 57.0126C20.8371 56.8412 20.957 56.6727 21.0797 56.5072C21.2902 56.2205 20.9131 56.72 21.0739 56.5161C21.1528 56.4156 21.2288 56.3181 21.3077 56.2205C21.8806 55.5112 22.506 54.8463 23.1754 54.2316C23.5203 53.9124 23.8768 53.608 24.2422 53.3124C24.3211 53.2474 24.4263 53.1854 24.4965 53.1115C24.2276 53.404 24.4497 53.1469 24.5637 53.0642C24.7683 52.9135 24.9758 52.7627 25.1833 52.6179C26.0514 52.015 26.9575 51.4742 27.8928 50.9836C28.1237 50.8624 28.3575 50.7412 28.5943 50.6289C28.6966 50.5787 28.8018 50.5314 28.907 50.4841C28.9567 50.4634 29.1554 50.3748 28.9596 50.4605C28.7492 50.5521 29.0151 50.4398 29.059 50.4221C29.5266 50.2447 30.0089 50.1029 30.4999 49.9935C30.7367 49.9403 30.9734 49.9019 31.2102 49.8605C31.4469 49.8192 31.1634 49.8605 31.1342 49.8694C31.1897 49.8546 31.2686 49.8546 31.3271 49.8458C31.4557 49.831 31.5843 49.8192 31.7129 49.8103C32.2273 49.7719 32.7447 49.7719 33.2591 49.8014C33.5017 49.8162 33.7413 49.8428 33.9839 49.8665C34.1447 49.8812 33.8582 49.8517 33.8612 49.8517C33.9109 49.8458 33.9985 49.8724 34.0541 49.8812C34.1973 49.9049 34.3434 49.9285 34.4866 49.9551C34.9835 50.0497 35.4746 50.1738 35.9568 50.3245C36.1906 50.3984 36.4245 50.4782 36.6525 50.5639C36.6963 50.5817 37.1026 50.7324 36.8921 50.6555C36.7051 50.5846 36.8658 50.6437 36.9009 50.6614C36.9915 50.6999 37.0821 50.7383 37.1727 50.7797C37.6374 50.9895 38.0905 51.223 38.5289 51.483C38.9673 51.7431 39.3882 52.0298 39.8003 52.3283C39.9523 52.4376 39.8529 52.2928 39.7302 52.2721C39.7623 52.278 39.8705 52.3815 39.8851 52.3933C39.9757 52.4642 40.0634 52.5381 40.1511 52.612C40.3498 52.7805 40.5456 52.9578 40.7356 53.1381C41.101 53.4868 41.4488 53.8592 41.7703 54.2493C41.8521 54.3498 41.934 54.4532 42.0158 54.5537C42.159 54.734 41.972 54.4739 41.9603 54.4769C41.9661 54.4769 42.083 54.6453 42.0743 54.6364C42.2379 54.867 42.3929 55.1034 42.5419 55.3428C43.258 56.5102 43.7987 57.7721 44.4534 58.9749C45.1666 60.2842 46.0376 61.5077 47.2213 62.4209C48.3086 63.2603 49.5771 63.7863 50.6995 64.5695C50.7346 64.5961 50.9538 64.7498 50.8018 64.6375C50.6498 64.5252 50.8602 64.6877 50.8953 64.7143C51.0064 64.8089 51.1174 64.9064 51.2197 65.0098C51.3396 65.131 51.4506 65.2581 51.5617 65.3852C51.6728 65.5123 51.5413 65.4738 51.512 65.3202C51.5208 65.3704 51.5968 65.4443 51.6231 65.4886C51.6962 65.6009 51.7605 65.7191 51.8218 65.8403C51.8511 65.8994 51.8803 65.9615 51.9095 66.0206C51.9826 66.1713 51.8774 66.1122 51.8832 65.9526C51.8803 66.0413 51.9709 66.2038 51.9943 66.2866C52.0381 66.4314 52.0732 66.5821 52.1024 66.7299C52.117 66.8038 52.1463 67.1407 52.1404 66.9515C52.1346 66.7417 52.1521 67.1791 52.1521 67.2293C52.1609 67.5101 52.1434 67.785 52.1229 68.0628C52.1083 68.2637 52.1697 67.8116 52.1287 68.0066C52.1171 68.0568 52.1112 68.11 52.1024 68.1632C52.0761 68.3021 52.0469 68.441 52.0148 68.577C51.9855 68.6982 51.9504 68.8164 51.9154 68.9346C51.8949 69.0026 51.8715 69.0705 51.8481 69.1356C51.7897 69.307 51.8043 69.3011 51.8569 69.1356C51.7809 69.3809 51.6348 69.6262 51.5091 69.8508C51.4477 69.9572 51.3834 70.0636 51.3162 70.167C51.2782 70.2261 51.2373 70.2822 51.1993 70.3414C51.0093 70.631 51.3425 70.1759 51.211 70.3266C51.0298 70.5364 50.8515 70.7433 50.6498 70.9354C50.5387 71.0418 50.4247 71.1393 50.3078 71.2398C50.2055 71.3314 50.2318 71.3905 50.3458 71.2162C50.3137 71.2664 50.2114 71.3137 50.1617 71.3491C49.9132 71.5235 49.656 71.6802 49.3901 71.822C49.2732 71.8841 49.1562 71.9432 49.0364 71.9993C48.9692 72.0318 48.899 72.0614 48.8289 72.0909C48.6389 72.1796 49.1504 71.9786 48.8055 72.0969C48.2443 72.2949 47.689 72.422 47.1073 72.5372C46.9028 72.5786 47.3412 72.5165 47.1337 72.5372C47.0781 72.5431 47.0197 72.549 46.9641 72.5549C46.8151 72.5697 46.6631 72.5815 46.5111 72.5875C46.21 72.6022 45.909 72.5993 45.6079 72.5875C45.4589 72.5786 45.3098 72.5668 45.1608 72.552C45.0965 72.5461 44.8919 72.5136 45.19 72.5579C45.1286 72.549 45.0672 72.5402 45.0058 72.5313C44.661 72.4781 44.3161 72.4042 43.977 72.3156C43.6994 72.2446 43.4217 72.1589 43.1499 72.0673C42.995 72.0141 42.84 71.958 42.6851 71.8988C42.6091 71.8693 42.5302 71.8397 42.4542 71.8072C42.6442 71.8841 42.5156 71.8309 42.4016 71.7806C41.8141 71.5206 41.2471 71.2221 40.6947 70.897C40.1423 70.5719 39.6045 70.2143 39.0784 69.8389C38.9439 69.7414 38.8095 69.6439 38.678 69.5464C38.6137 69.4991 38.2834 69.2449 38.4967 69.4134C38.2074 69.1858 37.9239 68.9553 37.6462 68.7159C37.0909 68.2371 36.5589 67.7288 36.065 67.185C35.8341 66.9308 35.6178 66.6619 35.4015 66.3959C35.2933 66.2629 35.4103 66.4107 35.4278 66.4314C35.3752 66.3575 35.3197 66.2836 35.267 66.2068C35.1472 66.0383 35.0332 65.864 34.9221 65.6896C34.7585 65.4266 34.6036 65.1576 34.4603 64.8828C34.3931 64.7498 34.3259 64.6168 34.2645 64.4808C34.2411 64.4276 34.0833 64.0671 34.1564 64.2444C34.2294 64.4217 34.0862 64.0553 34.0658 63.9991C34.0161 63.8572 33.9693 63.7154 33.9255 63.5706C33.8436 63.3016 33.7735 63.0268 33.7179 62.7519C33.6916 62.6219 33.6683 62.4948 33.6449 62.3648C33.6332 62.2909 33.6215 62.217 33.6127 62.1431C33.6566 62.4475 33.6244 62.2407 33.6215 62.1756C33.604 61.8949 33.5806 61.6141 33.5835 61.3333C33.5864 61.0526 33.604 60.7718 33.6332 60.4911C33.5981 60.8073 33.6536 60.3965 33.6712 60.299C33.7004 60.1512 33.7355 60.0034 33.7706 59.8557C33.9547 59.1198 33.5075 58.2509 32.7476 58.0824C31.9876 57.914 31.1926 58.3307 30.9939 59.1168L31.0027 59.1286Z",fill:"#231F20"}),B.createElement("path",{d:"M54.0603 64.8212C54.1363 64.7118 54.2152 64.6054 54.2942 64.4961C54.5484 64.1355 54.11 64.7236 54.3818 64.3779C54.5192 64.2035 54.6595 64.0291 54.8027 63.8577C55.1476 63.4499 55.5101 63.0568 55.89 62.6844C56.2086 62.3741 56.5389 62.0756 56.8809 61.7948C56.9101 61.7712 57.255 61.4993 56.9919 61.7003C57.0796 61.6323 57.1702 61.5673 57.2579 61.5023C57.4917 61.3338 57.7285 61.1713 57.9711 61.0176C58.3452 60.7812 58.731 60.5654 59.1285 60.3674C59.3536 60.258 59.5815 60.1398 59.8154 60.0541C59.5202 60.1635 59.7189 60.0925 59.7803 60.0719C59.9206 60.0216 60.058 59.9684 60.1982 59.9182C60.587 59.7852 60.9786 59.6729 61.3791 59.5842C61.5603 59.5428 61.7444 59.5074 61.9256 59.4749C62.0162 59.4601 62.1098 59.4483 62.2004 59.4305C62.3027 59.4158 62.2734 59.4187 62.1127 59.4394C62.1858 59.4305 62.2618 59.4217 62.3348 59.4128C62.7411 59.3714 63.1503 59.3507 63.5595 59.3567C63.7436 59.3567 63.9307 59.3655 64.1148 59.3773C64.2259 59.3833 64.3369 59.3921 64.448 59.4039C64.5035 59.4098 64.8689 59.469 64.524 59.4099C64.9274 59.4808 65.3249 59.5517 65.7194 59.6611C65.8977 59.7113 66.076 59.7674 66.2514 59.8266C66.3595 59.862 66.4647 59.9034 66.57 59.9448C66.2455 59.8266 66.643 59.9773 66.7103 60.0098C67.0815 60.1812 67.4439 60.3792 67.7888 60.6009C67.9525 60.7073 68.1132 60.8196 68.271 60.9348C68.5896 61.1624 68.0401 60.728 68.3354 60.988C68.4523 61.0915 68.575 61.189 68.689 61.2954C68.9754 61.5584 69.2473 61.8421 69.4957 62.1436C69.5337 62.1909 69.7909 62.4953 69.5512 62.2027C69.6243 62.2913 69.6886 62.3918 69.7529 62.4894C69.8844 62.6815 70.0072 62.8824 70.1212 63.0834C70.2352 63.2844 70.3316 63.4971 70.4339 63.707C70.6034 64.0528 70.3404 63.4262 70.469 63.7897C70.507 63.8991 70.5479 64.0084 70.583 64.1207C70.659 64.3601 70.7233 64.6054 70.7759 64.8537C70.7964 64.9482 70.811 65.0458 70.8285 65.1403C70.8519 65.2999 70.8519 65.297 70.8314 65.1256C70.8402 65.2054 70.849 65.2852 70.8548 65.3679C70.8987 65.8644 70.8987 66.3639 70.8607 66.8604C70.8607 66.8958 70.811 67.3125 70.8548 66.9963C70.8373 67.1204 70.8197 67.2475 70.7964 67.3717C70.7437 67.6613 70.6765 67.945 70.5976 68.2287C70.393 68.9587 70.8753 69.8364 71.6206 70.0019C72.3659 70.1674 73.1551 69.7478 73.3743 68.9676C73.9822 66.7894 73.8712 64.4576 72.9768 62.383C72.1496 60.4679 70.5947 58.8542 68.8059 57.8346C65.2401 55.7984 60.7623 56.1589 57.2374 58.0917C54.9372 59.3537 53.0666 61.2451 51.5613 63.3848C51.1258 64.0055 51.459 65.031 52.1021 65.3649C52.8532 65.7521 53.5927 65.4832 54.0603 64.8182V64.8212Z",fill:"#231F20"}),B.createElement("path",{d:"M64.1126 57.5835C64.5393 53.7799 62.2157 49.9586 58.9684 48.1558C57.3054 47.2337 55.3968 46.7697 53.5028 46.7608C51.4276 46.752 49.4342 47.3342 47.5812 48.2533C45.3248 49.3734 43.4162 51.1378 42.174 53.3514C41.8028 54.0104 42.022 54.9739 42.7147 55.3315C43.4074 55.6891 44.2755 55.494 44.673 54.7847C44.8074 54.5453 44.9477 54.3089 45.0968 54.0813C45.1465 54.0074 45.1962 53.9306 45.2488 53.8567C45.2692 53.8272 45.5352 53.4725 45.3306 53.7326C45.6258 53.3484 45.9473 52.9878 46.2951 52.648C46.45 52.4943 46.6108 52.3465 46.7774 52.2047C46.8768 52.119 46.9791 52.0362 47.0784 51.9535C47.4 51.6875 46.9265 52.0539 47.134 51.9091C47.5519 51.6224 47.9641 51.3358 48.4083 51.0875C48.8 50.8688 49.2062 50.6767 49.6125 50.4905C50.0188 50.3043 49.3553 50.5851 49.7733 50.4226C49.858 50.3901 49.9457 50.3546 50.0305 50.325C50.2789 50.2305 50.5303 50.1448 50.7846 50.065C51.1499 49.9527 51.524 49.861 51.9011 49.7931C51.9742 49.7783 52.5499 49.6778 52.1875 49.7399C52.4009 49.7044 52.6259 49.6926 52.8451 49.6808C53.231 49.6571 53.6168 49.6571 53.9997 49.6749C54.2013 49.6837 54.403 49.7044 54.6047 49.7221C54.8677 49.7487 54.6134 49.7192 54.5696 49.7162C54.7128 49.7221 54.8648 49.7606 55.0051 49.7872C55.3646 49.8551 55.7241 49.9408 56.0749 50.0472C56.2678 50.1063 56.4607 50.1714 56.6477 50.2423C56.7266 50.2718 56.9722 50.3546 56.6623 50.2423C56.7822 50.2837 56.8991 50.3457 57.016 50.3989C57.3667 50.5644 57.7058 50.7506 58.0331 50.9604C58.188 51.058 58.3342 51.1644 58.4833 51.2678C58.7872 51.4806 58.2377 51.058 58.5212 51.2974C58.6031 51.3683 58.6879 51.4363 58.7697 51.5072C59.0678 51.7702 59.3513 52.0539 59.6115 52.3554C59.7284 52.4913 59.854 52.6273 59.9534 52.778C59.7518 52.4795 59.892 52.7012 59.9447 52.778C60.0177 52.8814 60.0879 52.9878 60.1551 53.0942C60.3889 53.4577 60.5935 53.8419 60.7718 54.235C60.801 54.303 60.9735 54.6133 60.7981 54.2853C60.8478 54.3769 60.8741 54.4892 60.9092 54.5867C60.9793 54.7906 61.0407 54.9945 61.0962 55.2014C61.1518 55.4083 61.1956 55.6181 61.2336 55.828C61.2453 55.893 61.3155 56.2506 61.2482 55.8812C61.2658 55.9846 61.2716 56.0939 61.2804 56.1974C61.3155 56.6584 61.3038 57.1195 61.2512 57.5776C61.1664 58.3341 61.9702 59.0582 62.6863 59.0286C63.5368 58.9932 64.0308 58.3873 64.1214 57.5776L64.1126 57.5835Z",fill:"#231F20"}),B.createElement("path",{d:"M55.5453 48.2413C55.5833 44.1954 52.3068 40.7878 48.6621 39.6382C44.9355 38.4619 40.7266 39.3869 37.6051 41.6803C35.4743 43.2437 33.7966 45.2475 32.3148 47.4345C31.891 48.061 32.2037 49.0777 32.8555 49.4146C33.595 49.7958 34.3578 49.5416 34.8138 48.8678C35.0944 48.4541 35.3808 48.0462 35.6789 47.6472C35.486 47.9073 35.7578 47.5468 35.7754 47.5231C35.8309 47.4522 35.8864 47.3813 35.9449 47.3074C36.129 47.0769 36.3161 46.8493 36.509 46.6247C37.1608 45.8681 37.8652 45.1529 38.6339 44.5145C38.7216 44.4407 38.8093 44.3697 38.8969 44.2988C38.6456 44.4998 38.9992 44.222 39.0255 44.2042C39.2097 44.0683 39.3967 43.9382 39.5867 43.8141C40.0281 43.5215 40.4869 43.2555 40.9634 43.0221C41.1212 42.9452 41.2819 42.8743 41.4427 42.8004C41.773 42.6497 41.1504 42.9068 41.4895 42.7797C41.5567 42.7561 41.621 42.7295 41.6882 42.7029C42.0916 42.5522 42.5037 42.4251 42.9187 42.3216C43.2695 42.2359 43.626 42.168 43.9826 42.1089C44.3392 42.0497 43.6845 42.1325 44.0499 42.1C44.158 42.0911 44.2661 42.0763 44.3772 42.0675C44.5964 42.0497 44.8127 42.0379 45.0319 42.035C45.3973 42.0261 45.7655 42.0379 46.1309 42.0675C46.2361 42.0763 46.356 42.0763 46.4612 42.1C46.1192 42.0172 46.4699 42.1 46.5342 42.1118C46.7535 42.1473 46.9697 42.1887 47.186 42.2389C47.566 42.3276 47.943 42.4369 48.3113 42.5699C48.399 42.6024 48.4925 42.629 48.5744 42.6704C48.2529 42.5108 48.5919 42.6822 48.6474 42.7058C48.8491 42.7975 49.0449 42.895 49.2378 43.0043C49.3986 43.093 49.5564 43.1876 49.7084 43.2881C49.8019 43.3472 49.8926 43.4092 49.9832 43.4742C49.9978 43.4831 50.293 43.6929 50.0971 43.5511C49.9013 43.4092 50.1878 43.625 50.2024 43.6397C50.2871 43.7107 50.3719 43.7816 50.4537 43.8555C50.6174 44.0033 50.7752 44.154 50.9302 44.3136C51.0851 44.4732 51.2283 44.6357 51.3686 44.8042C51.4358 44.8869 51.5147 44.9697 51.5732 45.0583C51.3657 44.7362 51.5439 45.0258 51.5936 45.0997C51.8567 45.481 52.0876 45.8829 52.2776 46.3025C52.298 46.3469 52.3536 46.4385 52.3623 46.4946C52.2893 46.3055 52.2805 46.2878 52.336 46.4355C52.3594 46.5006 52.3828 46.5656 52.4062 46.6306C52.4705 46.8256 52.5289 47.0207 52.5757 47.2217C52.5991 47.3192 52.6195 47.4197 52.6371 47.5202C52.6605 47.6443 52.7628 47.8423 52.6488 47.5497C52.7218 47.7389 52.6838 48.0433 52.6809 48.2442C52.6751 49.0038 53.3473 49.7278 54.116 49.6953C54.8847 49.6628 55.5423 49.057 55.5511 48.2442L55.5453 48.2413Z",fill:"#231F20"}),B.createElement("path",{d:"M45.2517 74.8135C45.1201 77.3817 46.5318 79.9499 48.4872 81.5192C50.5799 83.1979 53.1929 84.0106 55.8527 83.6383C56.598 83.5348 57.0861 82.5536 56.8757 81.865C56.6243 81.0375 55.9199 80.7183 55.122 80.8306C55.499 80.7774 55.0226 80.8336 54.9495 80.8395C54.8414 80.8454 54.7303 80.8513 54.6222 80.8513C54.3825 80.8513 54.1428 80.8425 53.9032 80.8218C53.5349 80.7893 54.0464 80.8602 53.7658 80.807C53.6547 80.7863 53.5407 80.7686 53.4297 80.7479C53.1666 80.6947 52.9065 80.6297 52.6493 80.5499C52.4272 80.4819 52.2079 80.4021 51.9917 80.3194C52.3161 80.4464 51.9186 80.2809 51.8543 80.2514C51.7315 80.1923 51.6088 80.1332 51.486 80.0682C51.2785 79.9588 51.0739 79.8406 50.8781 79.7135C50.7465 79.6278 50.6179 79.5362 50.4893 79.4475C50.2292 79.2702 50.6852 79.6189 50.4221 79.3973C50.0188 79.0545 49.6417 78.688 49.3027 78.2772C49.2121 78.1678 49.0601 78.0319 49.2442 78.2033C49.139 78.1028 49.0572 77.9314 48.9782 77.8073C48.8526 77.6093 48.7356 77.4024 48.6304 77.1926C48.569 77.0714 48.5193 76.9473 48.458 76.8261C48.4171 76.7286 48.4258 76.7552 48.4872 76.9089C48.4609 76.8379 48.4346 76.767 48.4083 76.6961C48.3352 76.4833 48.2709 76.2705 48.2183 76.0518C48.1832 75.9099 48.1598 75.7651 48.1306 75.6203C48.0751 75.3277 48.1423 75.8804 48.1248 75.5582C48.1102 75.31 48.1043 75.0647 48.116 74.8135C48.154 74.0539 47.4291 73.3299 46.6809 73.3624C45.8713 73.3978 45.2867 74.0037 45.2458 74.8135H45.2517Z",fill:"#231F20"}),B.createElement("path",{d:"M51.9237 66.1125C51.9062 66.0652 51.8916 66.0238 51.8887 65.9854V65.9795C51.8887 66.0534 51.9091 66.1007 51.9237 66.1125Z",fill:"#231F20"}),B.createElement("path",{d:"M19.9688 75.8741C19.9688 75.8741 19.9775 75.8918 19.9834 75.9036C19.9746 75.8859 19.9717 75.877 19.9688 75.8711V75.8741Z",fill:"#231F20"}),B.createElement("path",{d:"M64.5596 73.7491C64.5596 73.7491 64.5566 73.7491 64.5537 73.7521C64.5596 73.7491 64.5654 73.7432 64.5712 73.7402C64.5683 73.7402 64.5625 73.7461 64.5596 73.7491Z",fill:"#231F20"}),B.createElement("path",{d:"M59.8413 78.5459C59.6718 78.7794 59.7653 78.6493 59.8413 78.5459V78.5459Z",fill:"#231F20"}),B.createElement("path",{d:"M79.4657 74.7805C79.454 74.7479 79.4452 74.7154 79.4336 74.6859C79.4306 74.677 79.4277 74.6681 79.4219 74.6593C79.4219 74.6563 79.4189 74.6534 79.416 74.6475C79.4715 74.8928 79.4832 74.8691 79.4628 74.7805H79.4657Z",fill:"#231F20"}),B.createElement("path",{d:"M51.6053 65.4747C51.576 65.4363 51.5351 65.389 51.5205 65.3506C51.5205 65.3506 51.5205 65.3477 51.5176 65.3477C51.541 65.4393 51.5965 65.4866 51.6082 65.4777L51.6053 65.4747Z",fill:"#231F20"}),B.createElement("path",{d:"M24.4206 53.2158C24.3592 53.2808 24.3767 53.2602 24.4206 53.2158V53.2158Z",fill:"#231F20"}),B.createElement("path",{d:"M36.8629 50.6501C36.7781 50.6176 36.819 50.6324 36.8629 50.6501V50.6501Z",fill:"#231F20"}),B.createElement("path",{d:"M74.997 100.895C74.047 100.315 67.8858 93.5387 64.9834 89.9863C66.0444 87.8673 71.7643 80.1685 75.9323 80.8926C75.9323 80.8926 85.6769 88.7273 86.5684 90.3646C87.7726 92.5723 80.6964 101.613 74.994 100.895H74.997Z",fill:"#CF8329"}),B.createElement("path",{d:"M75.637 99.7537C75.6107 99.736 75.5844 99.7182 75.5581 99.7005C75.3974 99.5941 75.8884 99.9724 75.716 99.8217C75.6341 99.7508 75.5494 99.6798 75.4704 99.6089C75.2337 99.3961 75.0057 99.1715 74.7807 98.9469C74.1376 98.3056 73.5122 97.6465 72.8925 96.9845C71.2937 95.2733 69.7271 93.5297 68.1897 91.7623C67.4152 90.8728 66.6494 89.9743 65.9012 89.0611L66.1116 90.6363C66.4156 90.0305 66.7985 89.4631 67.1843 88.9104C67.31 88.7331 67.4356 88.5558 67.5642 88.3784C67.6344 88.2809 67.7016 88.1775 67.7805 88.0858C67.7718 88.0977 67.5701 88.3607 67.7045 88.1863C67.7513 88.1272 67.7981 88.0652 67.8448 88.0061C68.1722 87.5834 68.5112 87.1697 68.859 86.7648C69.581 85.9255 70.3468 85.1246 71.1681 84.3857C71.3785 84.1995 71.589 84.0163 71.8082 83.839C71.89 83.771 71.9952 83.7119 72.0683 83.6321C71.8315 83.8892 71.9602 83.7148 72.0537 83.6469C72.118 83.5996 72.1852 83.5493 72.2495 83.502C72.6616 83.2065 73.0884 82.9317 73.5355 82.6952C73.6554 82.6332 73.7752 82.5711 73.898 82.5149C73.9418 82.4943 73.9857 82.4765 74.0295 82.4558C74.3101 82.3258 73.9418 82.4854 74.0149 82.4617C74.2546 82.3849 74.4855 82.2933 74.731 82.2342C74.8479 82.2046 74.9677 82.1869 75.0846 82.1633C75.2805 82.1219 74.959 82.1899 74.9473 82.181C74.9706 82.2017 75.1314 82.1633 75.1694 82.1633C75.2834 82.1573 75.3974 82.1544 75.5114 82.1603C75.5523 82.1603 75.5932 82.1662 75.6341 82.1662C75.9615 82.178 75.3974 82.1278 75.6107 82.1603L75.0233 81.8204C77.9987 84.2143 80.9741 86.6436 83.7654 89.2562C84.3587 89.8118 84.9257 90.3822 85.4577 90.9969C85.5337 91.0856 85.2209 90.6275 85.3729 90.8876C85.3963 90.9289 85.4226 90.9733 85.4489 91.0117C85.6068 91.2363 85.3671 90.6748 85.4051 90.8964C85.4109 90.926 85.4197 90.9614 85.4285 90.991C85.4723 91.124 85.3437 91.1388 85.408 90.793C85.3846 90.9201 85.3992 91.1181 85.3992 91.2511C85.3905 90.7989 85.4255 91.0619 85.3905 91.2186C85.3671 91.3279 85.3379 91.4343 85.3057 91.5407C85.2765 91.6382 85.2443 91.7358 85.2093 91.8333C85.1976 91.8658 85.1829 91.8983 85.1713 91.9338C85.0953 92.1495 85.3115 91.6116 85.2151 91.8244C85.1099 92.0608 85.0047 92.2943 84.8848 92.5219C84.6335 93.0007 84.3441 93.4617 84.0343 93.905C83.9495 94.0262 83.8648 94.1444 83.7771 94.2626C83.7215 94.3365 83.5432 94.5375 83.8092 94.2242C83.7595 94.2833 83.7157 94.3454 83.6689 94.4045C83.4702 94.6586 83.2627 94.9098 83.0493 95.1522C82.6167 95.6516 82.1578 96.1275 81.6756 96.5767C81.4154 96.819 81.1495 97.0554 80.8747 97.283C80.7286 97.4042 80.5678 97.5165 80.4275 97.6436C80.714 97.3835 80.5181 97.5726 80.4421 97.6288C80.3545 97.6938 80.2668 97.7588 80.1791 97.8209C79.5945 98.2376 78.9807 98.6159 78.3377 98.9321C78.177 99.0119 78.0133 99.0828 77.8496 99.1567C77.5953 99.269 78.139 99.0474 77.8788 99.1449C77.7853 99.1804 77.6918 99.2158 77.5982 99.2483C77.2972 99.3547 76.9932 99.4434 76.6834 99.5143C76.5197 99.5498 76.3561 99.5764 76.1924 99.6059C75.9352 99.6532 76.5022 99.5853 76.2421 99.5971C76.1485 99.603 76.055 99.6148 75.9644 99.6178C75.6429 99.6355 75.3185 99.6237 74.9999 99.5852C74.3247 99.5055 73.6758 100.244 73.7051 100.894C73.7372 101.672 74.2779 102.118 74.9999 102.204C76.9085 102.431 78.8668 101.704 80.486 100.738C82.2104 99.7094 83.7625 98.3292 85.0631 96.7924C86.1855 95.4654 87.2406 93.9789 87.7813 92.3002C87.9888 91.6589 88.0824 90.9437 87.9216 90.2787C87.7784 89.6965 87.3838 89.2266 86.9922 88.7922C85.9955 87.6839 84.8497 86.6998 83.7303 85.7186C82.3654 84.5217 80.9741 83.3513 79.577 82.1928C78.7148 81.4776 77.8467 80.7683 76.9757 80.062C76.888 79.991 76.8032 79.9231 76.7126 79.8551C76.2538 79.5005 75.5377 79.4945 74.9736 79.5507C73.974 79.6512 73.0387 79.9822 72.156 80.4639C70.3701 81.4362 68.8269 82.8962 67.4707 84.4034C66.2782 85.7274 65.1529 87.1579 64.2235 88.6858C64.0949 88.8986 63.9692 89.1114 63.8581 89.333C63.5775 89.8916 63.6886 90.4413 64.0686 90.9082C65.4949 92.6519 66.9826 94.3424 68.4849 96.0181C69.8966 97.5933 71.323 99.1626 72.8165 100.661C73.293 101.137 73.784 101.669 74.3569 102.026C74.9297 102.384 75.8153 102.148 76.1252 101.533C76.4554 100.88 76.2567 100.132 75.637 99.7448V99.7537Z",fill:"#231F20"})),B.createElement("defs",null,B.createElement("clipPath",{id:"clip0_8467_30797"},B.createElement("rect",{width:88,height:104,fill:"white"}))));K.SUGGESTIONS$HACKER_NEWS;K.SUGGESTIONS$HELLO_WORLD;K.SUGGESTIONS$TODO_APP;const cu={repo:ls};function hu({onSuggestionsClick:e}){const{t:h}=me(),{shouldHideSuggestions:g}=ot();return u.jsx(Ji,{children:!g&&u.jsxs(tl.div,{"data-testid":"chat-suggestions",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3,ease:"easeInOut"},className:"absolute top-0 left-0 right-0 bottom-[151px] flex flex-col items-center justify-center pointer-events-auto",children:[u.jsxs("div",{className:"flex flex-col items-center p-4 rounded-xl w-full",children:[u.jsx(lu,{width:86,height:103}),u.jsx("span",{className:"text-[32px] font-bold leading-5 text-white pt-4 pb-6",children:h(K.LANDING$TITLE)})]}),u.jsx(au,{suggestions:Object.entries(cu.repo).slice(0,4).map(([y,x])=>({label:y,value:x})),onSuggestionClick:e})]})})}const Ti={files:[],initialPrompt:null,selectedRepository:null,selectedRepositoryProvider:null,replayJson:null},uu=Fs(e=>({...Ti,addFile:h=>e(g=>({files:[...g.files,h]})),removeFile:h=>e(g=>({files:g.files.filter((y,x)=>x!==h)})),clearFiles:()=>e(()=>({files:[]})),setInitialPrompt:h=>e(()=>({initialPrompt:h})),clearInitialPrompt:()=>e(()=>({initialPrompt:null})),setSelectedRepository:h=>e(()=>({selectedRepository:h})),clearSelectedRepository:()=>e(()=>({selectedRepository:null})),setSelectedRepositoryProvider:h=>e(()=>({selectedRepositoryProvider:h})),setReplayJson:h=>e(()=>({replayJson:h})),reset:()=>e(()=>Ti)})),du=e=>B.createElement("svg",{width:12,height:17,viewBox:"0 0 12 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.5304 6.46978L10.4697 7.53044L6.75006 3.81077L6.75006 17.0001H5.25006L5.25006 3.81077L1.53039 7.53044L0.469727 6.46978L6.00006 0.939453L11.5304 6.46978Z",fill:"white"}));function fu({onClick:e}){return u.jsx("button",{type:"button",onClick:e,"data-testid":"scroll-to-bottom",className:"button-base p-1 hover:bg-neutral-500 rotate-180 cursor-pointer",children:u.jsx(du,{width:15,height:15})})}function pu({message:e}){return u.jsx("div",{className:"w-full rounded-lg p-2 text-black border border-red-800 bg-red-500",children:He.exists(e)?u.jsx(Rs,{i18nKey:e,components:{a:u.jsx(vo,{className:"underline font-bold cursor-pointer",to:"/settings/billing",children:"link"})}}):e})}const Mi=["system","agent_state_changed","change_agent_state"],_u=["recall"],mu=["think"],gu=e=>Ft(e)?jo(e)&&e.source==="user"?!1:!Mi.concat(_u).includes(e.action):Ps(e)?Bo(e)&&e.source==="user"?!1:!Mi.concat(mu).includes(e.observation):!0,vu=e=>e.some(h=>Ft(h)&&h.source==="user");class Cu{static async respondToConfirmation(h,g,y,x){const L=Go(g),D=Ca(x),{data:o}=await Vo.post(`${L}/api/conversations/${h}/events/respond_to_confirmation`,y,{headers:D});return o}}const bu=()=>Lt({mutationKey:["respond-to-confirmation"],mutationFn:async({conversationId:e,conversationUrl:h,sessionApiKey:g,accept:y})=>{const x={accept:y};return Cu.respondToConfirmation(e,h,x,g)}});function Fn(){const e=Ls(c=>c.v1SubmittedEventIds),h=Ls(c=>c.addV1SubmittedEventId),{t:g}=me(),{data:y}=Ie(),{curAgentState:x}=Ct(),{mutate:L}=bu(),o=Kt(c=>c.events).filter(As).slice().reverse().find(c=>c.source!=="agent"?!1:x===ve.AWAITING_USER_CONFIRMATION),i=B.useCallback(c=>{!o||!y||(h(o.id),L({conversationId:y.conversation_id,conversationUrl:y.url||"",sessionApiKey:y.session_api_key,accept:c}))},[o,y,h,L]);if(B.useEffect(()=>{if(!o)return;const c=S=>{S.shiftKey&&S.metaKey&&S.key==="Backspace"&&(S.preventDefault(),i(!1))},_=S=>{S.metaKey&&S.key==="Enter"&&(S.preventDefault(),i(!0))},C=S=>{c(S),_(S)};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[o,i]),x!==ve.AWAITING_USER_CONFIRMATION||!o||e.includes(o.id))return null;const v=(Rt(o)?o.security_risk:Pt.UNKNOWN)===Pt.HIGH;return u.jsxs("div",{className:"flex flex-col gap-2 pt-4",children:[v&&u.jsx(In,{content:g(K.CHAT_INTERFACE$HIGH_RISK_WARNING),icon:u.jsx(Nn,{width:16,height:16,color:"#fff"}),severity:"high",title:g(K.COMMON$HIGH_RISK)}),u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("p",{className:"text-sm font-normal text-white",children:g(K.CHAT_INTERFACE$USER_ASK_CONFIRMATION)}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx(Os,{type:"reject",onClick:()=>i(!1)}),u.jsx(Os,{type:"confirm",onClick:()=>i(!0)})]})]})]})}const Su=e=>{const h=e.llm_message;if(!h||!h.content)return"";let g="";if(h.content&&(Array.isArray(h.content)?g=h.content.filter(D=>D.type==="text").map(D=>D.text).join(`
`):typeof h.content=="string"&&(g=h.content)),!(Array.isArray(h.content)&&h.content.some(D=>D.type==="image")))return g;const x=He.t("CHAT_INTERFACE$AUGMENTED_PROMPT_FILES_TITLE");return g.split(x)[0]};function yu({event:e,microagentStatus:h,microagentConversationId:g,microagentPRUrl:y,actions:x,isLastMessage:L}){const D=Su(e),o=[];return Array.isArray(e.llm_message.content)&&e.llm_message.content.forEach(i=>{i.type==="image"&&o.push(...i.image_urls)}),u.jsxs(u.Fragment,{children:[u.jsxs(Dt,{type:e.source,message:D,actions:x,children:[o.length>0&&u.jsx(Dn,{size:"small",images:o}),L&&u.jsx(Fn,{})]}),u.jsx(Ot,{microagentStatus:h,microagentConversationId:g,microagentPRUrl:y,actions:x})]})}function wu({event:e,microagentStatus:h,microagentConversationId:g,microagentPRUrl:y,actions:x}){if(!Rt(e))return null;const L=e.thought.filter(D=>D.type==="text").map(D=>D.text).join(`
`);return L&&e.action.kind!=="ThinkAction"?u.jsxs("div",{children:[u.jsx(Dt,{type:"agent",message:L,actions:x}),u.jsx(Ot,{microagentStatus:h,microagentConversationId:g,microagentPRUrl:y,actions:x})]}):u.jsx(Ot,{microagentStatus:h,microagentConversationId:g,microagentPRUrl:y,actions:x})}function xu({event:e,microagentStatus:h,microagentConversationId:g,microagentPRUrl:y,actions:x}){return Bs(e)?u.jsxs("div",{children:[u.jsx(Rn,{errorId:e.id,defaultMessage:e.error}),u.jsx(Ot,{microagentStatus:h,microagentConversationId:g,microagentPRUrl:y,actions:x})]}):null}const zt=1e3,Hn=e=>`\`\`\`json
${JSON.stringify(e,null,2)}
\`\`\``,Eu=e=>{switch(e){case Pt.LOW:return He.t("SECURITY$LOW_RISK");case Pt.MEDIUM:return He.t("SECURITY$MEDIUM_RISK");case Pt.HIGH:return He.t("SECURITY$HIGH_RISK");case Pt.UNKNOWN:default:return He.t("SECURITY$UNKNOWN_RISK")}},ks=()=>"",ku=e=>{if(e.command!=="create"||!e.file_text)return ks();let h=e.file_text;return h.length>zt&&(h=`${h.slice(0,zt)}...`),`${e.path}
${h}`},Au=e=>{let h=`Command:
\`${e.action.command}\``;return(e.security_risk===Pt.HIGH||e.security_risk===Pt.MEDIUM)&&(h+=`

${Eu(e.security_risk)}`),h},Tu=e=>{let h=`**MCP Tool Call**

`;return h+=`**Arguments:**
\`\`\`json
${JSON.stringify(e.data,null,2)}
\`\`\``,h},Mu=e=>e.thought,Ru=e=>e.message.trim(),Ou=e=>{let h=`**Command:** \`${e.command}\``;return e.command==="plan"&&(e.task_list&&e.task_list.length>0?(h+=`

**Task List (${e.task_list.length} ${e.task_list.length===1?"item":"items"}):**
`,e.task_list.forEach((g,y)=>{const L={todo:"",in_progress:"",done:""}[g.status]||"";h+=`
${y+1}. ${L} **[${g.status.toUpperCase().replace("_"," ")}]** ${g.title}`,g.notes&&(h+=`
   *Notes: ${g.notes}*`)})):h+=`

**Task List:** Empty`),h},Lu=e=>{switch(e.kind){case"BrowserNavigateAction":if("url"in e)return`Browsing ${e.url}`;break;case"BrowserClickAction":case"BrowserTypeAction":case"BrowserGetStateAction":case"BrowserGetContentAction":case"BrowserScrollAction":case"BrowserGoBackAction":case"BrowserListTabsAction":case"BrowserSwitchTabAction":case"BrowserCloseTabAction":return ks();default:return ks()}return ks()},Du=e=>{const{action:h}=e;switch(h.kind){case"FileEditorAction":case"StrReplaceEditorAction":return ku(h);case"ExecuteBashAction":return Au(e);case"MCPToolAction":return Tu(h);case"ThinkAction":return Mu(h);case"FinishAction":return Ru(h);case"TaskTrackerAction":return Ou(h);case"BrowserNavigateAction":case"BrowserClickAction":case"BrowserTypeAction":case"BrowserGetStateAction":case"BrowserGetContentAction":case"BrowserScrollAction":case"BrowserGoBackAction":case"BrowserListTabsAction":case"BrowserSwitchTabAction":case"BrowserCloseTabAction":return Lu(h);default:return Hn(e)}},$n=e=>{const{observation:h}=e;switch(h.kind){case"ExecuteBashObservation":{const y=h.exit_code,{metadata:x}=h;return y===-1||x.exit_code===-1?"timeout":y===0||x.exit_code===0?"success":"error"}case"FileEditorObservation":case"StrReplaceEditorObservation":return h.error?"error":"success";case"MCPToolObservation":return h.is_error?"error":"success";default:return"success"}},Iu=e=>{const{observation:h}=e;return h.error?`**Error:**
${h.error}`:$n(e)==="success"&&"old_content"in h&&"new_content"in h&&h.old_content&&h.new_content||h.command==="view"?`\`\`\`
${h.output}
\`\`\``:h.output},Nu=e=>{const{observation:h}=e;let{output:g}=h;return g.length>zt&&(g=`${g.slice(0,zt)}...`),`Output:
\`\`\`sh
${g.trim()||He.t("OBSERVATION$COMMAND_NO_OUTPUT")}
\`\`\``},ju=e=>{const{observation:h}=e;let g="";return"error"in h&&h.error&&(g+=`**Error:**
${h.error}

`),g+=`**Output:**
${h.output}`,g.length>zt&&(g=`${g.slice(0,zt)}...(truncated)`),g},Bu=e=>{const{observation:h}=e,g=h.content.filter(x=>x.type==="text").map(x=>x.text).join(`
`);let y=`**Tool:** ${h.tool_name}

`;return h.is_error?y+=`**Error:**
${g}`:y+=`**Result:**
${g}`,y.length>zt&&(y=`${y.slice(0,zt)}...`),y},Pu=e=>{const{observation:h}=e,{command:g,task_list:y}=h;let x=`**Command:** \`${g}\``;return g==="plan"&&y.length>0?(x+=`

**Task List (${y.length} ${y.length===1?"item":"items"}):**
`,y.forEach((L,D)=>{const i={todo:"",in_progress:"",done:""}[L.status]||"";x+=`
${D+1}. ${i} **[${L.status.toUpperCase().replace("_"," ")}]** ${L.title}`,L.notes&&(x+=`
   *Notes: ${L.notes}*`)})):g==="plan"&&(x+=`

**Task List:** Empty`),"content"in h&&h.content&&h.content.trim()&&(x+=`

**Result:** ${h.content.trim()}`),x},Fu=e=>{const{observation:h}=e;return h.content||""},Hu=e=>{const{observation:h}=e;return h.message||""},$u=e=>{switch(e.observation.kind){case"FileEditorObservation":case"StrReplaceEditorObservation":return Iu(e);case"ExecuteBashObservation":return Nu(e);case"BrowserObservation":return ju(e);case"MCPToolObservation":return Bu(e);case"TaskTrackerObservation":return Pu(e);case"ThinkObservation":return Fu(e);case"FinishObservation":return Hu(e);default:return Hn(e)}},Un=(e,h)=>e?e.length>h?`${e.substring(0,h)}...`:e:"",Wn=(e,h)=>He.exists(e)?u.jsx(Rs,{i18nKey:e,values:h,components:{path:u.jsx(yr,{}),cmd:u.jsx(Sr,{})}}):e,Uu=e=>{if(!Rt(e))return"";const h=e.action.kind;let g="",y={};switch(h){case"ExecuteBashAction":g="ACTION_MESSAGE$RUN",y={command:Un(e.action.command,80)};break;case"FileEditorAction":case"StrReplaceEditorAction":e.action.command==="view"?g="ACTION_MESSAGE$READ":e.action.command==="create"?g="ACTION_MESSAGE$WRITE":g="ACTION_MESSAGE$EDIT",y={path:e.action.path};break;case"MCPToolAction":g="ACTION_MESSAGE$CALL_TOOL_MCP",y={mcp_tool_name:e.tool_name};break;case"ThinkAction":g="ACTION_MESSAGE$THINK";break;case"FinishAction":g="ACTION_MESSAGE$FINISH";break;case"TaskTrackerAction":g="ACTION_MESSAGE$TASK_TRACKING";break;case"BrowserNavigateAction":g="ACTION_MESSAGE$BROWSE";break;default:return h.replace("Action","").toUpperCase()}return g?Wn(g,y):h},Wu=e=>{if(!ts(e))return"";const h=e.observation.kind;let g="",y={};switch(h){case"ExecuteBashObservation":g="OBSERVATION_MESSAGE$RUN",y={command:e.observation.command?Un(e.observation.command,80):""};break;case"FileEditorObservation":case"StrReplaceEditorObservation":e.observation.command==="view"?g="OBSERVATION_MESSAGE$READ":g="OBSERVATION_MESSAGE$EDIT",y={path:e.observation.path||""};break;case"MCPToolObservation":g="OBSERVATION_MESSAGE$MCP",y={mcp_tool_name:e.observation.tool_name};break;case"BrowserObservation":g="OBSERVATION_MESSAGE$BROWSE";break;case"TaskTrackerObservation":g="OBSERVATION_MESSAGE$TASK_TRACKING";break;default:return h.replace("Observation","").toUpperCase()}return g?Wn(g,y):h},Vn=e=>{let h="",g="";return Rt(e)?(h=Uu(e),g=Du(e)):ts(e)&&(h=Wu(e),g=$u(e)),{title:h||He.t("EVENT$UNKNOWN_EVENT"),details:g||He.t("EVENT$UNKNOWN_EVENT")}};function Vu({event:e,microagentStatus:h,microagentConversationId:g,microagentPRUrl:y,actions:x}){return u.jsxs(u.Fragment,{children:[u.jsx(Dt,{type:"agent",message:Vn(e).details,actions:x}),u.jsx(Ot,{microagentStatus:h,microagentConversationId:g,microagentPRUrl:y,actions:x})]})}function zu({event:e,isLastMessage:h}){const{title:g,details:y}=Vn(e);return u.jsxs("div",{children:[u.jsx(Js,{title:g,details:y,success:ts(e)?$n(e):void 0,initiallyExpanded:!1}),h&&u.jsx(Fn,{})]})}function Gu({event:e,hasObservationPair:h,isLastMessage:g,microagentStatus:y,microagentConversationId:x,microagentPRUrl:L,actions:D,isInLast10Actions:o}){const{data:i}=us(),c={microagentStatus:y,microagentConversationId:x,microagentPRUrl:L,actions:D,isLastMessage:g,isInLast10Actions:o,config:i,isCheckingFeedback:!1,feedbackData:{exists:!1}};return Bs(e)?u.jsx(xu,{event:e,...c}):h&&Rt(e)?u.jsx(wu,{event:e,microagentStatus:y,microagentConversationId:x,microagentPRUrl:L,actions:D}):Rt(e)&&e.action.kind==="FinishAction"?u.jsx(Vu,{event:e,...c}):!Rt(e)&&!ts(e)?u.jsx(yu,{event:e,...c,isLastMessage:g}):u.jsx(zu,{event:e,isLastMessage:g})}const zn=pe.memo(({messages:e})=>{const{getOptimisticUserMessage:h}=Hs(),g=h(),y=pe.useCallback(x=>Rt(x)?!!e.some(L=>ts(L)&&L.action_id===x.id):!1,[e]);return u.jsxs(u.Fragment,{children:[e.map((x,L)=>u.jsx(Gu,{event:x,hasObservationPair:y(x),isLastMessage:e.length-1===L,isInLast10Actions:e.length-1-L<10},x.id)),g&&u.jsx(Dt,{type:"user",message:g})]})},(e,h)=>e.messages.length===h.messages.length);zn.displayName="Messages";const Ku=["ThinkAction"],qu=["ThinkObservation"],Zu=e=>{if(Er(e))return!1;if(Rt(e)){const h=e.action.kind;return h==="ExecuteBashAction"&&e.source==="user"?!1:!Ku.includes(h)}if(ts(e)){const h=e.observation.kind;return!qu.includes(h)}return!!(Po(e)||Bs(e))},Yu=e=>e.some(h=>h.source==="user"),Ju=()=>Lt({mutationKey:["upload-files"],mutationFn:e=>vt.uploadFiles(e.conversationId,e.files),onSuccess:async()=>{},meta:{disableToast:!0}}),Xu=()=>Lt({mutationKey:["v1-upload-files"],mutationFn:async e=>{const{conversationUrl:h,sessionApiKey:g,files:y}=e,x=y.map(async i=>{try{const d=`/workspace/${i.name}`;return await $s.uploadFile(h,g,i,d),{success:!0,fileName:i.name,filePath:d}}catch(d){return{success:!1,fileName:i.name,filePath:`/workspace/${i.name}`,error:d instanceof Error?d.message:"Unknown error"}}}),L=await Promise.allSettled(x),D=[],o=[];return L.forEach(i=>{i.status==="fulfilled"?i.value.success?D.push(i.value.filePath):o.push({name:i.value.fileName,reason:i.value.error}):o.push({name:"unknown",reason:i.reason?.message||"Upload failed"})}),{uploaded_files:D,skipped_files:o}},meta:{disableToast:!0}}),Qu=()=>{const{data:e}=Ie(),h=e?.conversation_version==="V1",g=Ju(),y=Xu();return Lt({mutationKey:["unified-upload-files"],mutationFn:async x=>{const{conversationId:L,files:D}=x;return h?y.mutateAsync({conversationUrl:e?.url,sessionApiKey:e?.session_api_key,files:D}):g.mutateAsync({conversationId:L,files:D})},meta:{disableToast:!0}})},e0=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",...e},B.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 3.25C9.92893 3.25 8.25 4.92893 8.25 7V10H7C6.44772 10 6 10.4477 6 11V19C6 19.5523 6.44772 20 7 20H17C17.5523 20 18 19.5523 18 19V11C18 10.4477 17.5523 10 17 10H15.75V7C15.75 4.92893 14.0711 3.25 12 3.25ZM14.25 10V7C14.25 5.75736 13.2426 4.75 12 4.75C10.7574 4.75 9.75 5.75736 9.75 7V10H14.25Z",fill:"currentColor"}));function t0(){const{t:e}=me(),{data:h}=za();return h?.CONFIRMATION_MODE?u.jsx(Fr,{content:e(K.COMMON$CONFIRMATION_MODE_ENABLED),closeDelay:100,className:"bg-white text-black hover:bg-transparent",children:u.jsx("div",{className:"flex items-center justify-center w-[26px] h-[26px] rounded-lg bg-[#25272D]",children:u.jsx(e0,{width:15,height:15})})}):null}function s0(e,h){return e?"github":h?"replay":"direct"}function Gn(){const{setMessageToSend:e}=ot(),{data:h}=Ie(),{errorMessage:g}=js(),{isLoadingMessages:y}=kr(),{isTask:x}=Ks(),L=Wr(),{send:D}=Gs(),o=Kt(ee=>ee.events),{setOptimisticUserMessage:i,getOptimisticUserMessage:d}=Hs(),{t:v}=me(),c=pe.useRef(null),{scrollDomToBottom:_,onChatBodyScroll:C,hitBottom:S,autoScroll:m,setAutoScroll:l,setHitBottom:r}=An(c),{data:t}=us(),{curAgentState:s}=Ct(),[n,p]=pe.useState("positive"),[a,b]=pe.useState(!1),{selectedRepository:f,replayJson:w}=uu(),M=Is(),{mutateAsync:N}=Qu(),O=d(),I=h?.conversation_version==="V1",z=pe.useRef(L?.isLoadingHistory);pe.useEffect(()=>{const ee=z.current,_e=L?.isLoadingHistory;ee&&!_e&&c.current&&c.current.scrollTo({top:c.current.scrollHeight,behavior:"instant"}),z.current=_e},[L?.isLoadingHistory,c]);const Y=o.filter(Ts).filter(Ms).filter(gu),ne=o.filter(As).filter(Zu),U=Y.length||ne.length,se=pe.useMemo(()=>o.filter(Ts).filter(Ms).some(ee=>Ft(ee)&&ee.source==="agent"&&ee.action!=="system")||o.filter(As).some(ee=>ee.source==="agent"&&!Fo(ee)&&!Er(ee)),[o]),T=async(ee,_e,V)=>{const j=[..._e],J=[...V];U===0?Qt.capture("initial_query_submitted",{entry_point:s0(f!==null,w!==null),query_character_length:ee.length,replay_json_size:w?.length}):Qt.capture("user_message_sent",{session_message_count:U,current_message_length:ee.length});const re=[...j,...J],he=ln(re);if(!he.isValid){Ye(`Error: ${he.errorMessage}`);return}const le=j.map(oe=>Ol(oe)),Ee=await Promise.all(le),Me=new Date().toISOString(),{skipped_files:Re,uploaded_files:je}=J.length>0?await N({conversationId:M.conversationId,files:J}):{skipped_files:[],uploaded_files:[]};Re.forEach(oe=>Ye(oe.reason));const be=`${v("CHAT_INTERFACE$AUGMENTED_PROMPT_FILES_TITLE")}: ${je.join(`

`)}`,gt=je.length>0?`${ee}

${be}`:ee;D(Nl(gt,Ee,je,Me)),i(ee),e("")},P=async ee=>{b(!0),p(ee)},F={scrollRef:c,autoScroll:m,setAutoScroll:l,scrollDomToBottom:_,hitBottom:S,setHitBottom:r,onChatBodyScroll:C},W=vu(Y),Q=Yu(ne),ce=W||Q;return u.jsx(eh,{value:F,children:u.jsxs("div",{className:"h-full flex flex-col justify-between pr-0 md:pr-4 relative",children:[!se&&!O&&!ce&&u.jsx(hu,{onSuggestionsClick:ee=>e(ee)}),u.jsxs("div",{ref:c,onScroll:ee=>C(ee.currentTarget),className:"custom-scrollbar-always flex flex-col grow overflow-y-auto overflow-x-hidden px-4 pt-4 gap-2 fast-smooth-scroll",children:[y&&!I&&!x&&u.jsx("div",{className:"flex justify-center",children:u.jsx(oi,{size:"small"})}),L?.isLoadingHistory&&I&&!x&&u.jsx("div",{className:"flex justify-center",children:u.jsx(oi,{size:"small"})}),!y&&W&&u.jsx(Pn,{messages:Y,isAwaitingUserConfirmation:s===ve.AWAITING_USER_CONFIRMATION}),!L?.isLoadingHistory&&Q&&u.jsx(zn,{messages:ne})]}),u.jsxs("div",{className:"flex flex-col gap-[6px]",children:[u.jsxs("div",{className:"flex justify-between relative",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(t0,{}),U>0&&!I&&u.jsx(Il,{onPositiveFeedback:()=>P("positive"),onNegativeFeedback:()=>P("negative"),isSaasMode:t?.APP_MODE==="saas"})]}),u.jsx("div",{className:"absolute left-1/2 transform -translate-x-1/2 bottom-0",children:s===ve.RUNNING&&u.jsx(Y1,{})}),!S&&u.jsx(fu,{onClick:_})]}),g&&u.jsx(pu,{message:g}),u.jsx(V1,{onSubmit:T})]}),t?.APP_MODE!=="saas"&&!I&&u.jsx(Z1,{isOpen:a,onClose:()=>b(!1),polarity:n})]})})}function r0(){const{t:e}=me();return u.jsxs("div",{className:"bg-[#25272D] border border-[#525252] rounded-xl flex flex-col items-center justify-center h-full w-full",children:[u.jsx(qs,{className:"animate-spin w-16 h-16",color:"white"}),u.jsx("span",{className:"text-2xl font-normal leading-5 text-white p-4",children:e(K.HOME$LOADING)})]})}function i0({isActive:e,children:h}){return u.jsx("div",{className:we("absolute inset-0",e?"block":"hidden"),children:h})}function n0({children:e}){return u.jsx("div",{className:"bg-[#25272D] border border-[#525252] rounded-xl flex flex-col h-full w-full",children:e})}function o0({children:e}){return u.jsx("div",{className:"overflow-hidden flex-grow rounded-b-xl h-full w-full relative",children:e})}function a0({title:e}){return u.jsx("div",{className:"flex flex-row items-center justify-between border-b border-[#474A54] py-2 px-3",children:u.jsx("span",{className:"text-xs font-medium text-white",children:e})})}var ar={exports:{}},Ri;function l0(){return Ri||(Ri=1,(function(e,h){(function(g,y){e.exports=y()})(self,(()=>(()=>{var g={};return(()=>{var y=g;Object.defineProperty(y,"__esModule",{value:!0}),y.FitAddon=void 0,y.FitAddon=class{activate(x){this._terminal=x}dispose(){}fit(){const x=this.proposeDimensions();if(!x||!this._terminal||isNaN(x.cols)||isNaN(x.rows))return;const L=this._terminal._core;this._terminal.rows===x.rows&&this._terminal.cols===x.cols||(L._renderService.clear(),this._terminal.resize(x.cols,x.rows))}proposeDimensions(){if(!this._terminal||!this._terminal.element||!this._terminal.element.parentElement)return;const x=this._terminal._core,L=x._renderService.dimensions;if(L.css.cell.width===0||L.css.cell.height===0)return;const D=this._terminal.options.scrollback===0?0:x.viewport.scrollBarWidth,o=window.getComputedStyle(this._terminal.element.parentElement),i=parseInt(o.getPropertyValue("height")),d=Math.max(0,parseInt(o.getPropertyValue("width"))),v=window.getComputedStyle(this._terminal.element),c=i-(parseInt(v.getPropertyValue("padding-top"))+parseInt(v.getPropertyValue("padding-bottom"))),_=d-(parseInt(v.getPropertyValue("padding-right"))+parseInt(v.getPropertyValue("padding-left")))-D;return{cols:Math.max(2,Math.floor(_/L.css.cell.width)),rows:Math.max(1,Math.floor(c/L.css.cell.height))}}}})(),g})()))})(ar)),ar.exports}var c0=l0(),lr={exports:{}},Oi;function h0(){return Oi||(Oi=1,(function(e,h){(function(g,y){e.exports=y()})(globalThis,(()=>(()=>{var g={4567:function(D,o,i){var d=this&&this.__decorate||function(t,s,n,p){var a,b=arguments.length,f=b<3?s:p===null?p=Object.getOwnPropertyDescriptor(s,n):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(t,s,n,p);else for(var w=t.length-1;w>=0;w--)(a=t[w])&&(f=(b<3?a(f):b>3?a(s,n,f):a(s,n))||f);return b>3&&f&&Object.defineProperty(s,n,f),f},v=this&&this.__param||function(t,s){return function(n,p){s(n,p,t)}};Object.defineProperty(o,"__esModule",{value:!0}),o.AccessibilityManager=void 0;const c=i(9042),_=i(9924),C=i(844),S=i(4725),m=i(2585),l=i(3656);let r=o.AccessibilityManager=class extends C.Disposable{constructor(t,s,n,p){super(),this._terminal=t,this._coreBrowserService=n,this._renderService=p,this._rowColumns=new WeakMap,this._liveRegionLineCount=0,this._charsToConsume=[],this._charsToAnnounce="",this._accessibilityContainer=this._coreBrowserService.mainDocument.createElement("div"),this._accessibilityContainer.classList.add("xterm-accessibility"),this._rowContainer=this._coreBrowserService.mainDocument.createElement("div"),this._rowContainer.setAttribute("role","list"),this._rowContainer.classList.add("xterm-accessibility-tree"),this._rowElements=[];for(let a=0;a<this._terminal.rows;a++)this._rowElements[a]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[a]);if(this._topBoundaryFocusListener=a=>this._handleBoundaryFocus(a,0),this._bottomBoundaryFocusListener=a=>this._handleBoundaryFocus(a,1),this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions(),this._accessibilityContainer.appendChild(this._rowContainer),this._liveRegion=this._coreBrowserService.mainDocument.createElement("div"),this._liveRegion.classList.add("live-region"),this._liveRegion.setAttribute("aria-live","assertive"),this._accessibilityContainer.appendChild(this._liveRegion),this._liveRegionDebouncer=this.register(new _.TimeBasedDebouncer(this._renderRows.bind(this))),!this._terminal.element)throw new Error("Cannot enable accessibility before Terminal.open");this._terminal.element.insertAdjacentElement("afterbegin",this._accessibilityContainer),this.register(this._terminal.onResize((a=>this._handleResize(a.rows)))),this.register(this._terminal.onRender((a=>this._refreshRows(a.start,a.end)))),this.register(this._terminal.onScroll((()=>this._refreshRows()))),this.register(this._terminal.onA11yChar((a=>this._handleChar(a)))),this.register(this._terminal.onLineFeed((()=>this._handleChar(`
`)))),this.register(this._terminal.onA11yTab((a=>this._handleTab(a)))),this.register(this._terminal.onKey((a=>this._handleKey(a.key)))),this.register(this._terminal.onBlur((()=>this._clearLiveRegion()))),this.register(this._renderService.onDimensionsChange((()=>this._refreshRowsDimensions()))),this.register((0,l.addDisposableDomListener)(document,"selectionchange",(()=>this._handleSelectionChange()))),this.register(this._coreBrowserService.onDprChange((()=>this._refreshRowsDimensions()))),this._refreshRows(),this.register((0,C.toDisposable)((()=>{this._accessibilityContainer.remove(),this._rowElements.length=0})))}_handleTab(t){for(let s=0;s<t;s++)this._handleChar(" ")}_handleChar(t){this._liveRegionLineCount<21&&(this._charsToConsume.length>0?this._charsToConsume.shift()!==t&&(this._charsToAnnounce+=t):this._charsToAnnounce+=t,t===`
`&&(this._liveRegionLineCount++,this._liveRegionLineCount===21&&(this._liveRegion.textContent+=c.tooMuchOutput)))}_clearLiveRegion(){this._liveRegion.textContent="",this._liveRegionLineCount=0}_handleKey(t){this._clearLiveRegion(),new RegExp("\\p{Control}","u").test(t)||this._charsToConsume.push(t)}_refreshRows(t,s){this._liveRegionDebouncer.refresh(t,s,this._terminal.rows)}_renderRows(t,s){const n=this._terminal.buffer,p=n.lines.length.toString();for(let a=t;a<=s;a++){const b=n.lines.get(n.ydisp+a),f=[],w=b?.translateToString(!0,void 0,void 0,f)||"",M=(n.ydisp+a+1).toString(),N=this._rowElements[a];N&&(w.length===0?(N.innerText="",this._rowColumns.set(N,[0,1])):(N.textContent=w,this._rowColumns.set(N,f)),N.setAttribute("aria-posinset",M),N.setAttribute("aria-setsize",p))}this._announceCharacters()}_announceCharacters(){this._charsToAnnounce.length!==0&&(this._liveRegion.textContent+=this._charsToAnnounce,this._charsToAnnounce="")}_handleBoundaryFocus(t,s){const n=t.target,p=this._rowElements[s===0?1:this._rowElements.length-2];if(n.getAttribute("aria-posinset")===(s===0?"1":`${this._terminal.buffer.lines.length}`)||t.relatedTarget!==p)return;let a,b;if(s===0?(a=n,b=this._rowElements.pop(),this._rowContainer.removeChild(b)):(a=this._rowElements.shift(),b=n,this._rowContainer.removeChild(a)),a.removeEventListener("focus",this._topBoundaryFocusListener),b.removeEventListener("focus",this._bottomBoundaryFocusListener),s===0){const f=this._createAccessibilityTreeNode();this._rowElements.unshift(f),this._rowContainer.insertAdjacentElement("afterbegin",f)}else{const f=this._createAccessibilityTreeNode();this._rowElements.push(f),this._rowContainer.appendChild(f)}this._rowElements[0].addEventListener("focus",this._topBoundaryFocusListener),this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._terminal.scrollLines(s===0?-1:1),this._rowElements[s===0?1:this._rowElements.length-2].focus(),t.preventDefault(),t.stopImmediatePropagation()}_handleSelectionChange(){if(this._rowElements.length===0)return;const t=document.getSelection();if(!t)return;if(t.isCollapsed)return void(this._rowContainer.contains(t.anchorNode)&&this._terminal.clearSelection());if(!t.anchorNode||!t.focusNode)return void console.error("anchorNode and/or focusNode are null");let s={node:t.anchorNode,offset:t.anchorOffset},n={node:t.focusNode,offset:t.focusOffset};if((s.node.compareDocumentPosition(n.node)&Node.DOCUMENT_POSITION_PRECEDING||s.node===n.node&&s.offset>n.offset)&&([s,n]=[n,s]),s.node.compareDocumentPosition(this._rowElements[0])&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_FOLLOWING)&&(s={node:this._rowElements[0].childNodes[0],offset:0}),!this._rowContainer.contains(s.node))return;const p=this._rowElements.slice(-1)[0];if(n.node.compareDocumentPosition(p)&(Node.DOCUMENT_POSITION_CONTAINED_BY|Node.DOCUMENT_POSITION_PRECEDING)&&(n={node:p,offset:p.textContent?.length??0}),!this._rowContainer.contains(n.node))return;const a=({node:w,offset:M})=>{const N=w instanceof Text?w.parentNode:w;let O=parseInt(N?.getAttribute("aria-posinset"),10)-1;if(isNaN(O))return console.warn("row is invalid. Race condition?"),null;const I=this._rowColumns.get(N);if(!I)return console.warn("columns is null. Race condition?"),null;let z=M<I.length?I[M]:I.slice(-1)[0]+1;return z>=this._terminal.cols&&(++O,z=0),{row:O,column:z}},b=a(s),f=a(n);if(b&&f){if(b.row>f.row||b.row===f.row&&b.column>=f.column)throw new Error("invalid range");this._terminal.select(b.column,b.row,(f.row-b.row)*this._terminal.cols-b.column+f.column)}}_handleResize(t){this._rowElements[this._rowElements.length-1].removeEventListener("focus",this._bottomBoundaryFocusListener);for(let s=this._rowContainer.children.length;s<this._terminal.rows;s++)this._rowElements[s]=this._createAccessibilityTreeNode(),this._rowContainer.appendChild(this._rowElements[s]);for(;this._rowElements.length>t;)this._rowContainer.removeChild(this._rowElements.pop());this._rowElements[this._rowElements.length-1].addEventListener("focus",this._bottomBoundaryFocusListener),this._refreshRowsDimensions()}_createAccessibilityTreeNode(){const t=this._coreBrowserService.mainDocument.createElement("div");return t.setAttribute("role","listitem"),t.tabIndex=-1,this._refreshRowDimensions(t),t}_refreshRowsDimensions(){if(this._renderService.dimensions.css.cell.height){this._accessibilityContainer.style.width=`${this._renderService.dimensions.css.canvas.width}px`,this._rowElements.length!==this._terminal.rows&&this._handleResize(this._terminal.rows);for(let t=0;t<this._terminal.rows;t++)this._refreshRowDimensions(this._rowElements[t])}}_refreshRowDimensions(t){t.style.height=`${this._renderService.dimensions.css.cell.height}px`}};o.AccessibilityManager=r=d([v(1,m.IInstantiationService),v(2,S.ICoreBrowserService),v(3,S.IRenderService)],r)},3614:(D,o)=>{function i(_){return _.replace(/\r?\n/g,"\r")}function d(_,C){return C?"\x1B[200~"+_+"\x1B[201~":_}function v(_,C,S,m){_=d(_=i(_),S.decPrivateModes.bracketedPasteMode&&m.rawOptions.ignoreBracketedPasteMode!==!0),S.triggerDataEvent(_,!0),C.value=""}function c(_,C,S){const m=S.getBoundingClientRect(),l=_.clientX-m.left-10,r=_.clientY-m.top-10;C.style.width="20px",C.style.height="20px",C.style.left=`${l}px`,C.style.top=`${r}px`,C.style.zIndex="1000",C.focus()}Object.defineProperty(o,"__esModule",{value:!0}),o.rightClickHandler=o.moveTextAreaUnderMouseCursor=o.paste=o.handlePasteEvent=o.copyHandler=o.bracketTextForPaste=o.prepareTextForTerminal=void 0,o.prepareTextForTerminal=i,o.bracketTextForPaste=d,o.copyHandler=function(_,C){_.clipboardData&&_.clipboardData.setData("text/plain",C.selectionText),_.preventDefault()},o.handlePasteEvent=function(_,C,S,m){_.stopPropagation(),_.clipboardData&&v(_.clipboardData.getData("text/plain"),C,S,m)},o.paste=v,o.moveTextAreaUnderMouseCursor=c,o.rightClickHandler=function(_,C,S,m,l){c(_,C,S),l&&m.rightClickSelect(_),C.value=m.selectionText,C.select()}},7239:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorContrastCache=void 0;const d=i(1505);o.ColorContrastCache=class{constructor(){this._color=new d.TwoKeyMap,this._css=new d.TwoKeyMap}setCss(v,c,_){this._css.set(v,c,_)}getCss(v,c){return this._css.get(v,c)}setColor(v,c,_){this._color.set(v,c,_)}getColor(v,c){return this._color.get(v,c)}clear(){this._color.clear(),this._css.clear()}}},3656:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.addDisposableDomListener=void 0,o.addDisposableDomListener=function(i,d,v,c){i.addEventListener(d,v,c);let _=!1;return{dispose:()=>{_||(_=!0,i.removeEventListener(d,v,c))}}}},3551:function(D,o,i){var d=this&&this.__decorate||function(r,t,s,n){var p,a=arguments.length,b=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,s):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(r,t,s,n);else for(var f=r.length-1;f>=0;f--)(p=r[f])&&(b=(a<3?p(b):a>3?p(t,s,b):p(t,s))||b);return a>3&&b&&Object.defineProperty(t,s,b),b},v=this&&this.__param||function(r,t){return function(s,n){t(s,n,r)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Linkifier=void 0;const c=i(3656),_=i(8460),C=i(844),S=i(2585),m=i(4725);let l=o.Linkifier=class extends C.Disposable{get currentLink(){return this._currentLink}constructor(r,t,s,n,p){super(),this._element=r,this._mouseService=t,this._renderService=s,this._bufferService=n,this._linkProviderService=p,this._linkCacheDisposables=[],this._isMouseOut=!0,this._wasResized=!1,this._activeLine=-1,this._onShowLinkUnderline=this.register(new _.EventEmitter),this.onShowLinkUnderline=this._onShowLinkUnderline.event,this._onHideLinkUnderline=this.register(new _.EventEmitter),this.onHideLinkUnderline=this._onHideLinkUnderline.event,this.register((0,C.getDisposeArrayDisposable)(this._linkCacheDisposables)),this.register((0,C.toDisposable)((()=>{this._lastMouseEvent=void 0,this._activeProviderReplies?.clear()}))),this.register(this._bufferService.onResize((()=>{this._clearCurrentLink(),this._wasResized=!0}))),this.register((0,c.addDisposableDomListener)(this._element,"mouseleave",(()=>{this._isMouseOut=!0,this._clearCurrentLink()}))),this.register((0,c.addDisposableDomListener)(this._element,"mousemove",this._handleMouseMove.bind(this))),this.register((0,c.addDisposableDomListener)(this._element,"mousedown",this._handleMouseDown.bind(this))),this.register((0,c.addDisposableDomListener)(this._element,"mouseup",this._handleMouseUp.bind(this)))}_handleMouseMove(r){this._lastMouseEvent=r;const t=this._positionFromMouseEvent(r,this._element,this._mouseService);if(!t)return;this._isMouseOut=!1;const s=r.composedPath();for(let n=0;n<s.length;n++){const p=s[n];if(p.classList.contains("xterm"))break;if(p.classList.contains("xterm-hover"))return}this._lastBufferCell&&t.x===this._lastBufferCell.x&&t.y===this._lastBufferCell.y||(this._handleHover(t),this._lastBufferCell=t)}_handleHover(r){if(this._activeLine!==r.y||this._wasResized)return this._clearCurrentLink(),this._askForLink(r,!1),void(this._wasResized=!1);this._currentLink&&this._linkAtPosition(this._currentLink.link,r)||(this._clearCurrentLink(),this._askForLink(r,!0))}_askForLink(r,t){this._activeProviderReplies&&t||(this._activeProviderReplies?.forEach((n=>{n?.forEach((p=>{p.link.dispose&&p.link.dispose()}))})),this._activeProviderReplies=new Map,this._activeLine=r.y);let s=!1;for(const[n,p]of this._linkProviderService.linkProviders.entries())t?this._activeProviderReplies?.get(n)&&(s=this._checkLinkProviderResult(n,r,s)):p.provideLinks(r.y,(a=>{if(this._isMouseOut)return;const b=a?.map((f=>({link:f})));this._activeProviderReplies?.set(n,b),s=this._checkLinkProviderResult(n,r,s),this._activeProviderReplies?.size===this._linkProviderService.linkProviders.length&&this._removeIntersectingLinks(r.y,this._activeProviderReplies)}))}_removeIntersectingLinks(r,t){const s=new Set;for(let n=0;n<t.size;n++){const p=t.get(n);if(p)for(let a=0;a<p.length;a++){const b=p[a],f=b.link.range.start.y<r?0:b.link.range.start.x,w=b.link.range.end.y>r?this._bufferService.cols:b.link.range.end.x;for(let M=f;M<=w;M++){if(s.has(M)){p.splice(a--,1);break}s.add(M)}}}}_checkLinkProviderResult(r,t,s){if(!this._activeProviderReplies)return s;const n=this._activeProviderReplies.get(r);let p=!1;for(let a=0;a<r;a++)this._activeProviderReplies.has(a)&&!this._activeProviderReplies.get(a)||(p=!0);if(!p&&n){const a=n.find((b=>this._linkAtPosition(b.link,t)));a&&(s=!0,this._handleNewLink(a))}if(this._activeProviderReplies.size===this._linkProviderService.linkProviders.length&&!s)for(let a=0;a<this._activeProviderReplies.size;a++){const b=this._activeProviderReplies.get(a)?.find((f=>this._linkAtPosition(f.link,t)));if(b){s=!0,this._handleNewLink(b);break}}return s}_handleMouseDown(){this._mouseDownLink=this._currentLink}_handleMouseUp(r){if(!this._currentLink)return;const t=this._positionFromMouseEvent(r,this._element,this._mouseService);t&&this._mouseDownLink===this._currentLink&&this._linkAtPosition(this._currentLink.link,t)&&this._currentLink.link.activate(r,this._currentLink.link.text)}_clearCurrentLink(r,t){this._currentLink&&this._lastMouseEvent&&(!r||!t||this._currentLink.link.range.start.y>=r&&this._currentLink.link.range.end.y<=t)&&(this._linkLeave(this._element,this._currentLink.link,this._lastMouseEvent),this._currentLink=void 0,(0,C.disposeArray)(this._linkCacheDisposables))}_handleNewLink(r){if(!this._lastMouseEvent)return;const t=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);t&&this._linkAtPosition(r.link,t)&&(this._currentLink=r,this._currentLink.state={decorations:{underline:r.link.decorations===void 0||r.link.decorations.underline,pointerCursor:r.link.decorations===void 0||r.link.decorations.pointerCursor},isHovered:!0},this._linkHover(this._element,r.link,this._lastMouseEvent),r.link.decorations={},Object.defineProperties(r.link.decorations,{pointerCursor:{get:()=>this._currentLink?.state?.decorations.pointerCursor,set:s=>{this._currentLink?.state&&this._currentLink.state.decorations.pointerCursor!==s&&(this._currentLink.state.decorations.pointerCursor=s,this._currentLink.state.isHovered&&this._element.classList.toggle("xterm-cursor-pointer",s))}},underline:{get:()=>this._currentLink?.state?.decorations.underline,set:s=>{this._currentLink?.state&&this._currentLink?.state?.decorations.underline!==s&&(this._currentLink.state.decorations.underline=s,this._currentLink.state.isHovered&&this._fireUnderlineEvent(r.link,s))}}}),this._linkCacheDisposables.push(this._renderService.onRenderedViewportChange((s=>{if(!this._currentLink)return;const n=s.start===0?0:s.start+1+this._bufferService.buffer.ydisp,p=this._bufferService.buffer.ydisp+1+s.end;if(this._currentLink.link.range.start.y>=n&&this._currentLink.link.range.end.y<=p&&(this._clearCurrentLink(n,p),this._lastMouseEvent)){const a=this._positionFromMouseEvent(this._lastMouseEvent,this._element,this._mouseService);a&&this._askForLink(a,!1)}}))))}_linkHover(r,t,s){this._currentLink?.state&&(this._currentLink.state.isHovered=!0,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!0),this._currentLink.state.decorations.pointerCursor&&r.classList.add("xterm-cursor-pointer")),t.hover&&t.hover(s,t.text)}_fireUnderlineEvent(r,t){const s=r.range,n=this._bufferService.buffer.ydisp,p=this._createLinkUnderlineEvent(s.start.x-1,s.start.y-n-1,s.end.x,s.end.y-n-1,void 0);(t?this._onShowLinkUnderline:this._onHideLinkUnderline).fire(p)}_linkLeave(r,t,s){this._currentLink?.state&&(this._currentLink.state.isHovered=!1,this._currentLink.state.decorations.underline&&this._fireUnderlineEvent(t,!1),this._currentLink.state.decorations.pointerCursor&&r.classList.remove("xterm-cursor-pointer")),t.leave&&t.leave(s,t.text)}_linkAtPosition(r,t){const s=r.range.start.y*this._bufferService.cols+r.range.start.x,n=r.range.end.y*this._bufferService.cols+r.range.end.x,p=t.y*this._bufferService.cols+t.x;return s<=p&&p<=n}_positionFromMouseEvent(r,t,s){const n=s.getCoords(r,t,this._bufferService.cols,this._bufferService.rows);if(n)return{x:n[0],y:n[1]+this._bufferService.buffer.ydisp}}_createLinkUnderlineEvent(r,t,s,n,p){return{x1:r,y1:t,x2:s,y2:n,cols:this._bufferService.cols,fg:p}}};o.Linkifier=l=d([v(1,m.IMouseService),v(2,m.IRenderService),v(3,S.IBufferService),v(4,m.ILinkProviderService)],l)},9042:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.tooMuchOutput=o.promptLabel=void 0,o.promptLabel="Terminal input",o.tooMuchOutput="Too much output to announce, navigate to rows manually to read"},3730:function(D,o,i){var d=this&&this.__decorate||function(m,l,r,t){var s,n=arguments.length,p=n<3?l:t===null?t=Object.getOwnPropertyDescriptor(l,r):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(m,l,r,t);else for(var a=m.length-1;a>=0;a--)(s=m[a])&&(p=(n<3?s(p):n>3?s(l,r,p):s(l,r))||p);return n>3&&p&&Object.defineProperty(l,r,p),p},v=this&&this.__param||function(m,l){return function(r,t){l(r,t,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkProvider=void 0;const c=i(511),_=i(2585);let C=o.OscLinkProvider=class{constructor(m,l,r){this._bufferService=m,this._optionsService=l,this._oscLinkService=r}provideLinks(m,l){const r=this._bufferService.buffer.lines.get(m-1);if(!r)return void l(void 0);const t=[],s=this._optionsService.rawOptions.linkHandler,n=new c.CellData,p=r.getTrimmedLength();let a=-1,b=-1,f=!1;for(let w=0;w<p;w++)if(b!==-1||r.hasContent(w)){if(r.loadCell(w,n),n.hasExtendedAttrs()&&n.extended.urlId){if(b===-1){b=w,a=n.extended.urlId;continue}f=n.extended.urlId!==a}else b!==-1&&(f=!0);if(f||b!==-1&&w===p-1){const M=this._oscLinkService.getLinkData(a)?.uri;if(M){const N={start:{x:b+1,y:m},end:{x:w+(f||w!==p-1?0:1),y:m}};let O=!1;if(!s?.allowNonHttpProtocols)try{const I=new URL(M);["http:","https:"].includes(I.protocol)||(O=!0)}catch{O=!0}O||t.push({text:M,range:N,activate:(I,z)=>s?s.activate(I,z,N):S(0,z),hover:(I,z)=>s?.hover?.(I,z,N),leave:(I,z)=>s?.leave?.(I,z,N)})}f=!1,n.hasExtendedAttrs()&&n.extended.urlId?(b=w,a=n.extended.urlId):(b=-1,a=-1)}}l(t)}};function S(m,l){if(confirm(`Do you want to navigate to ${l}?

WARNING: This link could potentially be dangerous`)){const r=window.open();if(r){try{r.opener=null}catch{}r.location.href=l}else console.warn("Opening link blocked as opener could not be cleared")}}o.OscLinkProvider=C=d([v(0,_.IBufferService),v(1,_.IOptionsService),v(2,_.IOscLinkService)],C)},6193:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.RenderDebouncer=void 0,o.RenderDebouncer=class{constructor(i,d){this._renderCallback=i,this._coreBrowserService=d,this._refreshCallbacks=[]}dispose(){this._animationFrame&&(this._coreBrowserService.window.cancelAnimationFrame(this._animationFrame),this._animationFrame=void 0)}addRefreshCallback(i){return this._refreshCallbacks.push(i),this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh()))),this._animationFrame}refresh(i,d,v){this._rowCount=v,i=i!==void 0?i:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,i):i,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d,this._animationFrame||(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._animationFrame=void 0,this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return void this._runRefreshCallbacks();const i=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(i,d),this._runRefreshCallbacks()}_runRefreshCallbacks(){for(const i of this._refreshCallbacks)i(0);this._refreshCallbacks=[]}}},3236:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Terminal=void 0;const d=i(3614),v=i(3656),c=i(3551),_=i(9042),C=i(3730),S=i(1680),m=i(3107),l=i(5744),r=i(2950),t=i(1296),s=i(428),n=i(4269),p=i(5114),a=i(8934),b=i(3230),f=i(9312),w=i(4725),M=i(6731),N=i(8055),O=i(8969),I=i(8460),z=i(844),Y=i(6114),ne=i(8437),U=i(2584),se=i(7399),T=i(5941),P=i(9074),F=i(2585),W=i(5435),Q=i(4567),ce=i(779);class ee extends O.CoreTerminal{get onFocus(){return this._onFocus.event}get onBlur(){return this._onBlur.event}get onA11yChar(){return this._onA11yCharEmitter.event}get onA11yTab(){return this._onA11yTabEmitter.event}get onWillOpen(){return this._onWillOpen.event}constructor(V={}){super(V),this.browser=Y,this._keyDownHandled=!1,this._keyDownSeen=!1,this._keyPressHandled=!1,this._unprocessedDeadKey=!1,this._accessibilityManager=this.register(new z.MutableDisposable),this._onCursorMove=this.register(new I.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onKey=this.register(new I.EventEmitter),this.onKey=this._onKey.event,this._onRender=this.register(new I.EventEmitter),this.onRender=this._onRender.event,this._onSelectionChange=this.register(new I.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onTitleChange=this.register(new I.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onBell=this.register(new I.EventEmitter),this.onBell=this._onBell.event,this._onFocus=this.register(new I.EventEmitter),this._onBlur=this.register(new I.EventEmitter),this._onA11yCharEmitter=this.register(new I.EventEmitter),this._onA11yTabEmitter=this.register(new I.EventEmitter),this._onWillOpen=this.register(new I.EventEmitter),this._setup(),this._decorationService=this._instantiationService.createInstance(P.DecorationService),this._instantiationService.setService(F.IDecorationService,this._decorationService),this._linkProviderService=this._instantiationService.createInstance(ce.LinkProviderService),this._instantiationService.setService(w.ILinkProviderService,this._linkProviderService),this._linkProviderService.registerLinkProvider(this._instantiationService.createInstance(C.OscLinkProvider)),this.register(this._inputHandler.onRequestBell((()=>this._onBell.fire()))),this.register(this._inputHandler.onRequestRefreshRows(((j,J)=>this.refresh(j,J)))),this.register(this._inputHandler.onRequestSendFocus((()=>this._reportFocus()))),this.register(this._inputHandler.onRequestReset((()=>this.reset()))),this.register(this._inputHandler.onRequestWindowsOptionsReport((j=>this._reportWindowsOptions(j)))),this.register(this._inputHandler.onColor((j=>this._handleColorEvent(j)))),this.register((0,I.forwardEvent)(this._inputHandler.onCursorMove,this._onCursorMove)),this.register((0,I.forwardEvent)(this._inputHandler.onTitleChange,this._onTitleChange)),this.register((0,I.forwardEvent)(this._inputHandler.onA11yChar,this._onA11yCharEmitter)),this.register((0,I.forwardEvent)(this._inputHandler.onA11yTab,this._onA11yTabEmitter)),this.register(this._bufferService.onResize((j=>this._afterResize(j.cols,j.rows)))),this.register((0,z.toDisposable)((()=>{this._customKeyEventHandler=void 0,this.element?.parentNode?.removeChild(this.element)})))}_handleColorEvent(V){if(this._themeService)for(const j of V){let J,re="";switch(j.index){case 256:J="foreground",re="10";break;case 257:J="background",re="11";break;case 258:J="cursor",re="12";break;default:J="ansi",re="4;"+j.index}switch(j.type){case 0:const he=N.color.toColorRGB(J==="ansi"?this._themeService.colors.ansi[j.index]:this._themeService.colors[J]);this.coreService.triggerDataEvent(`${U.C0.ESC}]${re};${(0,T.toRgbString)(he)}${U.C1_ESCAPED.ST}`);break;case 1:if(J==="ansi")this._themeService.modifyColors((le=>le.ansi[j.index]=N.channels.toColor(...j.color)));else{const le=J;this._themeService.modifyColors((Ee=>Ee[le]=N.channels.toColor(...j.color)))}break;case 2:this._themeService.restoreColor(j.index)}}}_setup(){super._setup(),this._customKeyEventHandler=void 0}get buffer(){return this.buffers.active}focus(){this.textarea&&this.textarea.focus({preventScroll:!0})}_handleScreenReaderModeOptionChange(V){V?!this._accessibilityManager.value&&this._renderService&&(this._accessibilityManager.value=this._instantiationService.createInstance(Q.AccessibilityManager,this)):this._accessibilityManager.clear()}_handleTextAreaFocus(V){this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(U.C0.ESC+"[I"),this.element.classList.add("focus"),this._showCursor(),this._onFocus.fire()}blur(){return this.textarea?.blur()}_handleTextAreaBlur(){this.textarea.value="",this.refresh(this.buffer.y,this.buffer.y),this.coreService.decPrivateModes.sendFocus&&this.coreService.triggerDataEvent(U.C0.ESC+"[O"),this.element.classList.remove("focus"),this._onBlur.fire()}_syncTextArea(){if(!this.textarea||!this.buffer.isCursorInViewport||this._compositionHelper.isComposing||!this._renderService)return;const V=this.buffer.ybase+this.buffer.y,j=this.buffer.lines.get(V);if(!j)return;const J=Math.min(this.buffer.x,this.cols-1),re=this._renderService.dimensions.css.cell.height,he=j.getWidth(J),le=this._renderService.dimensions.css.cell.width*he,Ee=this.buffer.y*this._renderService.dimensions.css.cell.height,Me=J*this._renderService.dimensions.css.cell.width;this.textarea.style.left=Me+"px",this.textarea.style.top=Ee+"px",this.textarea.style.width=le+"px",this.textarea.style.height=re+"px",this.textarea.style.lineHeight=re+"px",this.textarea.style.zIndex="-5"}_initGlobal(){this._bindKeys(),this.register((0,v.addDisposableDomListener)(this.element,"copy",(j=>{this.hasSelection()&&(0,d.copyHandler)(j,this._selectionService)})));const V=j=>(0,d.handlePasteEvent)(j,this.textarea,this.coreService,this.optionsService);this.register((0,v.addDisposableDomListener)(this.textarea,"paste",V)),this.register((0,v.addDisposableDomListener)(this.element,"paste",V)),Y.isFirefox?this.register((0,v.addDisposableDomListener)(this.element,"mousedown",(j=>{j.button===2&&(0,d.rightClickHandler)(j,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))):this.register((0,v.addDisposableDomListener)(this.element,"contextmenu",(j=>{(0,d.rightClickHandler)(j,this.textarea,this.screenElement,this._selectionService,this.options.rightClickSelectsWord)}))),Y.isLinux&&this.register((0,v.addDisposableDomListener)(this.element,"auxclick",(j=>{j.button===1&&(0,d.moveTextAreaUnderMouseCursor)(j,this.textarea,this.screenElement)})))}_bindKeys(){this.register((0,v.addDisposableDomListener)(this.textarea,"keyup",(V=>this._keyUp(V)),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keydown",(V=>this._keyDown(V)),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"keypress",(V=>this._keyPress(V)),!0)),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionstart",(()=>this._compositionHelper.compositionstart()))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionupdate",(V=>this._compositionHelper.compositionupdate(V)))),this.register((0,v.addDisposableDomListener)(this.textarea,"compositionend",(()=>this._compositionHelper.compositionend()))),this.register((0,v.addDisposableDomListener)(this.textarea,"input",(V=>this._inputEvent(V)),!0)),this.register(this.onRender((()=>this._compositionHelper.updateCompositionElements())))}open(V){if(!V)throw new Error("Terminal requires a parent element.");if(V.isConnected||this._logService.debug("Terminal.open was called on an element that was not attached to the DOM"),this.element?.ownerDocument.defaultView&&this._coreBrowserService)return void(this.element.ownerDocument.defaultView!==this._coreBrowserService.window&&(this._coreBrowserService.window=this.element.ownerDocument.defaultView));this._document=V.ownerDocument,this.options.documentOverride&&this.options.documentOverride instanceof Document&&(this._document=this.optionsService.rawOptions.documentOverride),this.element=this._document.createElement("div"),this.element.dir="ltr",this.element.classList.add("terminal"),this.element.classList.add("xterm"),V.appendChild(this.element);const j=this._document.createDocumentFragment();this._viewportElement=this._document.createElement("div"),this._viewportElement.classList.add("xterm-viewport"),j.appendChild(this._viewportElement),this._viewportScrollArea=this._document.createElement("div"),this._viewportScrollArea.classList.add("xterm-scroll-area"),this._viewportElement.appendChild(this._viewportScrollArea),this.screenElement=this._document.createElement("div"),this.screenElement.classList.add("xterm-screen"),this.register((0,v.addDisposableDomListener)(this.screenElement,"mousemove",(J=>this.updateCursorStyle(J)))),this._helperContainer=this._document.createElement("div"),this._helperContainer.classList.add("xterm-helpers"),this.screenElement.appendChild(this._helperContainer),j.appendChild(this.screenElement),this.textarea=this._document.createElement("textarea"),this.textarea.classList.add("xterm-helper-textarea"),this.textarea.setAttribute("aria-label",_.promptLabel),Y.isChromeOS||this.textarea.setAttribute("aria-multiline","false"),this.textarea.setAttribute("autocorrect","off"),this.textarea.setAttribute("autocapitalize","off"),this.textarea.setAttribute("spellcheck","false"),this.textarea.tabIndex=0,this._coreBrowserService=this.register(this._instantiationService.createInstance(p.CoreBrowserService,this.textarea,V.ownerDocument.defaultView??window,this._document??typeof window<"u"?window.document:null)),this._instantiationService.setService(w.ICoreBrowserService,this._coreBrowserService),this.register((0,v.addDisposableDomListener)(this.textarea,"focus",(J=>this._handleTextAreaFocus(J)))),this.register((0,v.addDisposableDomListener)(this.textarea,"blur",(()=>this._handleTextAreaBlur()))),this._helperContainer.appendChild(this.textarea),this._charSizeService=this._instantiationService.createInstance(s.CharSizeService,this._document,this._helperContainer),this._instantiationService.setService(w.ICharSizeService,this._charSizeService),this._themeService=this._instantiationService.createInstance(M.ThemeService),this._instantiationService.setService(w.IThemeService,this._themeService),this._characterJoinerService=this._instantiationService.createInstance(n.CharacterJoinerService),this._instantiationService.setService(w.ICharacterJoinerService,this._characterJoinerService),this._renderService=this.register(this._instantiationService.createInstance(b.RenderService,this.rows,this.screenElement)),this._instantiationService.setService(w.IRenderService,this._renderService),this.register(this._renderService.onRenderedViewportChange((J=>this._onRender.fire(J)))),this.onResize((J=>this._renderService.resize(J.cols,J.rows))),this._compositionView=this._document.createElement("div"),this._compositionView.classList.add("composition-view"),this._compositionHelper=this._instantiationService.createInstance(r.CompositionHelper,this.textarea,this._compositionView),this._helperContainer.appendChild(this._compositionView),this._mouseService=this._instantiationService.createInstance(a.MouseService),this._instantiationService.setService(w.IMouseService,this._mouseService),this.linkifier=this.register(this._instantiationService.createInstance(c.Linkifier,this.screenElement)),this.element.appendChild(j);try{this._onWillOpen.fire(this.element)}catch{}this._renderService.hasRenderer()||this._renderService.setRenderer(this._createRenderer()),this.viewport=this._instantiationService.createInstance(S.Viewport,this._viewportElement,this._viewportScrollArea),this.viewport.onRequestScrollLines((J=>this.scrollLines(J.amount,J.suppressScrollEvent,1))),this.register(this._inputHandler.onRequestSyncScrollBar((()=>this.viewport.syncScrollArea()))),this.register(this.viewport),this.register(this.onCursorMove((()=>{this._renderService.handleCursorMove(),this._syncTextArea()}))),this.register(this.onResize((()=>this._renderService.handleResize(this.cols,this.rows)))),this.register(this.onBlur((()=>this._renderService.handleBlur()))),this.register(this.onFocus((()=>this._renderService.handleFocus()))),this.register(this._renderService.onDimensionsChange((()=>this.viewport.syncScrollArea()))),this._selectionService=this.register(this._instantiationService.createInstance(f.SelectionService,this.element,this.screenElement,this.linkifier)),this._instantiationService.setService(w.ISelectionService,this._selectionService),this.register(this._selectionService.onRequestScrollLines((J=>this.scrollLines(J.amount,J.suppressScrollEvent)))),this.register(this._selectionService.onSelectionChange((()=>this._onSelectionChange.fire()))),this.register(this._selectionService.onRequestRedraw((J=>this._renderService.handleSelectionChanged(J.start,J.end,J.columnSelectMode)))),this.register(this._selectionService.onLinuxMouseSelection((J=>{this.textarea.value=J,this.textarea.focus(),this.textarea.select()}))),this.register(this._onScroll.event((J=>{this.viewport.syncScrollArea(),this._selectionService.refresh()}))),this.register((0,v.addDisposableDomListener)(this._viewportElement,"scroll",(()=>this._selectionService.refresh()))),this.register(this._instantiationService.createInstance(m.BufferDecorationRenderer,this.screenElement)),this.register((0,v.addDisposableDomListener)(this.element,"mousedown",(J=>this._selectionService.handleMouseDown(J)))),this.coreMouseService.areMouseEventsActive?(this._selectionService.disable(),this.element.classList.add("enable-mouse-events")):this._selectionService.enable(),this.options.screenReaderMode&&(this._accessibilityManager.value=this._instantiationService.createInstance(Q.AccessibilityManager,this)),this.register(this.optionsService.onSpecificOptionChange("screenReaderMode",(J=>this._handleScreenReaderModeOptionChange(J)))),this.options.overviewRulerWidth&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement))),this.optionsService.onSpecificOptionChange("overviewRulerWidth",(J=>{!this._overviewRulerRenderer&&J&&this._viewportElement&&this.screenElement&&(this._overviewRulerRenderer=this.register(this._instantiationService.createInstance(l.OverviewRulerRenderer,this._viewportElement,this.screenElement)))})),this._charSizeService.measure(),this.refresh(0,this.rows-1),this._initGlobal(),this.bindMouse()}_createRenderer(){return this._instantiationService.createInstance(t.DomRenderer,this,this._document,this.element,this.screenElement,this._viewportElement,this._helperContainer,this.linkifier)}bindMouse(){const V=this,j=this.element;function J(le){const Ee=V._mouseService.getMouseReportCoords(le,V.screenElement);if(!Ee)return!1;let Me,Re;switch(le.overrideType||le.type){case"mousemove":Re=32,le.buttons===void 0?(Me=3,le.button!==void 0&&(Me=le.button<3?le.button:3)):Me=1&le.buttons?0:4&le.buttons?1:2&le.buttons?2:3;break;case"mouseup":Re=0,Me=le.button<3?le.button:3;break;case"mousedown":Re=1,Me=le.button<3?le.button:3;break;case"wheel":if(V._customWheelEventHandler&&V._customWheelEventHandler(le)===!1||V.viewport.getLinesScrolled(le)===0)return!1;Re=le.deltaY<0?0:1,Me=4;break;default:return!1}return!(Re===void 0||Me===void 0||Me>4)&&V.coreMouseService.triggerMouseEvent({col:Ee.col,row:Ee.row,x:Ee.x,y:Ee.y,button:Me,action:Re,ctrl:le.ctrlKey,alt:le.altKey,shift:le.shiftKey})}const re={mouseup:null,wheel:null,mousedrag:null,mousemove:null},he={mouseup:le=>(J(le),le.buttons||(this._document.removeEventListener("mouseup",re.mouseup),re.mousedrag&&this._document.removeEventListener("mousemove",re.mousedrag)),this.cancel(le)),wheel:le=>(J(le),this.cancel(le,!0)),mousedrag:le=>{le.buttons&&J(le)},mousemove:le=>{le.buttons||J(le)}};this.register(this.coreMouseService.onProtocolChange((le=>{le?(this.optionsService.rawOptions.logLevel==="debug"&&this._logService.debug("Binding to mouse events:",this.coreMouseService.explainEvents(le)),this.element.classList.add("enable-mouse-events"),this._selectionService.disable()):(this._logService.debug("Unbinding from mouse events."),this.element.classList.remove("enable-mouse-events"),this._selectionService.enable()),8&le?re.mousemove||(j.addEventListener("mousemove",he.mousemove),re.mousemove=he.mousemove):(j.removeEventListener("mousemove",re.mousemove),re.mousemove=null),16&le?re.wheel||(j.addEventListener("wheel",he.wheel,{passive:!1}),re.wheel=he.wheel):(j.removeEventListener("wheel",re.wheel),re.wheel=null),2&le?re.mouseup||(re.mouseup=he.mouseup):(this._document.removeEventListener("mouseup",re.mouseup),re.mouseup=null),4&le?re.mousedrag||(re.mousedrag=he.mousedrag):(this._document.removeEventListener("mousemove",re.mousedrag),re.mousedrag=null)}))),this.coreMouseService.activeProtocol=this.coreMouseService.activeProtocol,this.register((0,v.addDisposableDomListener)(j,"mousedown",(le=>{if(le.preventDefault(),this.focus(),this.coreMouseService.areMouseEventsActive&&!this._selectionService.shouldForceSelection(le))return J(le),re.mouseup&&this._document.addEventListener("mouseup",re.mouseup),re.mousedrag&&this._document.addEventListener("mousemove",re.mousedrag),this.cancel(le)}))),this.register((0,v.addDisposableDomListener)(j,"wheel",(le=>{if(!re.wheel){if(this._customWheelEventHandler&&this._customWheelEventHandler(le)===!1)return!1;if(!this.buffer.hasScrollback){const Ee=this.viewport.getLinesScrolled(le);if(Ee===0)return;const Me=U.C0.ESC+(this.coreService.decPrivateModes.applicationCursorKeys?"O":"[")+(le.deltaY<0?"A":"B");let Re="";for(let je=0;je<Math.abs(Ee);je++)Re+=Me;return this.coreService.triggerDataEvent(Re,!0),this.cancel(le,!0)}return this.viewport.handleWheel(le)?this.cancel(le):void 0}}),{passive:!1})),this.register((0,v.addDisposableDomListener)(j,"touchstart",(le=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchStart(le),this.cancel(le)}),{passive:!0})),this.register((0,v.addDisposableDomListener)(j,"touchmove",(le=>{if(!this.coreMouseService.areMouseEventsActive)return this.viewport.handleTouchMove(le)?void 0:this.cancel(le)}),{passive:!1}))}refresh(V,j){this._renderService?.refreshRows(V,j)}updateCursorStyle(V){this._selectionService?.shouldColumnSelect(V)?this.element.classList.add("column-select"):this.element.classList.remove("column-select")}_showCursor(){this.coreService.isCursorInitialized||(this.coreService.isCursorInitialized=!0,this.refresh(this.buffer.y,this.buffer.y))}scrollLines(V,j,J=0){J===1?(super.scrollLines(V,j,J),this.refresh(0,this.rows-1)):this.viewport?.scrollLines(V)}paste(V){(0,d.paste)(V,this.textarea,this.coreService,this.optionsService)}attachCustomKeyEventHandler(V){this._customKeyEventHandler=V}attachCustomWheelEventHandler(V){this._customWheelEventHandler=V}registerLinkProvider(V){return this._linkProviderService.registerLinkProvider(V)}registerCharacterJoiner(V){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");const j=this._characterJoinerService.register(V);return this.refresh(0,this.rows-1),j}deregisterCharacterJoiner(V){if(!this._characterJoinerService)throw new Error("Terminal must be opened first");this._characterJoinerService.deregister(V)&&this.refresh(0,this.rows-1)}get markers(){return this.buffer.markers}registerMarker(V){return this.buffer.addMarker(this.buffer.ybase+this.buffer.y+V)}registerDecoration(V){return this._decorationService.registerDecoration(V)}hasSelection(){return!!this._selectionService&&this._selectionService.hasSelection}select(V,j,J){this._selectionService.setSelection(V,j,J)}getSelection(){return this._selectionService?this._selectionService.selectionText:""}getSelectionPosition(){if(this._selectionService&&this._selectionService.hasSelection)return{start:{x:this._selectionService.selectionStart[0],y:this._selectionService.selectionStart[1]},end:{x:this._selectionService.selectionEnd[0],y:this._selectionService.selectionEnd[1]}}}clearSelection(){this._selectionService?.clearSelection()}selectAll(){this._selectionService?.selectAll()}selectLines(V,j){this._selectionService?.selectLines(V,j)}_keyDown(V){if(this._keyDownHandled=!1,this._keyDownSeen=!0,this._customKeyEventHandler&&this._customKeyEventHandler(V)===!1)return!1;const j=this.browser.isMac&&this.options.macOptionIsMeta&&V.altKey;if(!j&&!this._compositionHelper.keydown(V))return this.options.scrollOnUserInput&&this.buffer.ybase!==this.buffer.ydisp&&this.scrollToBottom(),!1;j||V.key!=="Dead"&&V.key!=="AltGraph"||(this._unprocessedDeadKey=!0);const J=(0,se.evaluateKeyboardEvent)(V,this.coreService.decPrivateModes.applicationCursorKeys,this.browser.isMac,this.options.macOptionIsMeta);if(this.updateCursorStyle(V),J.type===3||J.type===2){const re=this.rows-1;return this.scrollLines(J.type===2?-re:re),this.cancel(V,!0)}return J.type===1&&this.selectAll(),!!this._isThirdLevelShift(this.browser,V)||(J.cancel&&this.cancel(V,!0),!J.key||!!(V.key&&!V.ctrlKey&&!V.altKey&&!V.metaKey&&V.key.length===1&&V.key.charCodeAt(0)>=65&&V.key.charCodeAt(0)<=90)||(this._unprocessedDeadKey?(this._unprocessedDeadKey=!1,!0):(J.key!==U.C0.ETX&&J.key!==U.C0.CR||(this.textarea.value=""),this._onKey.fire({key:J.key,domEvent:V}),this._showCursor(),this.coreService.triggerDataEvent(J.key,!0),!this.optionsService.rawOptions.screenReaderMode||V.altKey||V.ctrlKey?this.cancel(V,!0):void(this._keyDownHandled=!0))))}_isThirdLevelShift(V,j){const J=V.isMac&&!this.options.macOptionIsMeta&&j.altKey&&!j.ctrlKey&&!j.metaKey||V.isWindows&&j.altKey&&j.ctrlKey&&!j.metaKey||V.isWindows&&j.getModifierState("AltGraph");return j.type==="keypress"?J:J&&(!j.keyCode||j.keyCode>47)}_keyUp(V){this._keyDownSeen=!1,this._customKeyEventHandler&&this._customKeyEventHandler(V)===!1||((function(j){return j.keyCode===16||j.keyCode===17||j.keyCode===18})(V)||this.focus(),this.updateCursorStyle(V),this._keyPressHandled=!1)}_keyPress(V){let j;if(this._keyPressHandled=!1,this._keyDownHandled||this._customKeyEventHandler&&this._customKeyEventHandler(V)===!1)return!1;if(this.cancel(V),V.charCode)j=V.charCode;else if(V.which===null||V.which===void 0)j=V.keyCode;else{if(V.which===0||V.charCode===0)return!1;j=V.which}return!(!j||(V.altKey||V.ctrlKey||V.metaKey)&&!this._isThirdLevelShift(this.browser,V)||(j=String.fromCharCode(j),this._onKey.fire({key:j,domEvent:V}),this._showCursor(),this.coreService.triggerDataEvent(j,!0),this._keyPressHandled=!0,this._unprocessedDeadKey=!1,0))}_inputEvent(V){if(V.data&&V.inputType==="insertText"&&(!V.composed||!this._keyDownSeen)&&!this.optionsService.rawOptions.screenReaderMode){if(this._keyPressHandled)return!1;this._unprocessedDeadKey=!1;const j=V.data;return this.coreService.triggerDataEvent(j,!0),this.cancel(V),!0}return!1}resize(V,j){V!==this.cols||j!==this.rows?super.resize(V,j):this._charSizeService&&!this._charSizeService.hasValidSize&&this._charSizeService.measure()}_afterResize(V,j){this._charSizeService?.measure(),this.viewport?.syncScrollArea(!0)}clear(){if(this.buffer.ybase!==0||this.buffer.y!==0){this.buffer.clearAllMarkers(),this.buffer.lines.set(0,this.buffer.lines.get(this.buffer.ybase+this.buffer.y)),this.buffer.lines.length=1,this.buffer.ydisp=0,this.buffer.ybase=0,this.buffer.y=0;for(let V=1;V<this.rows;V++)this.buffer.lines.push(this.buffer.getBlankLine(ne.DEFAULT_ATTR_DATA));this._onScroll.fire({position:this.buffer.ydisp,source:0}),this.viewport?.reset(),this.refresh(0,this.rows-1)}}reset(){this.options.rows=this.rows,this.options.cols=this.cols;const V=this._customKeyEventHandler;this._setup(),super.reset(),this._selectionService?.reset(),this._decorationService.reset(),this.viewport?.reset(),this._customKeyEventHandler=V,this.refresh(0,this.rows-1)}clearTextureAtlas(){this._renderService?.clearTextureAtlas()}_reportFocus(){this.element?.classList.contains("focus")?this.coreService.triggerDataEvent(U.C0.ESC+"[I"):this.coreService.triggerDataEvent(U.C0.ESC+"[O")}_reportWindowsOptions(V){if(this._renderService)switch(V){case W.WindowsOptionsReportType.GET_WIN_SIZE_PIXELS:const j=this._renderService.dimensions.css.canvas.width.toFixed(0),J=this._renderService.dimensions.css.canvas.height.toFixed(0);this.coreService.triggerDataEvent(`${U.C0.ESC}[4;${J};${j}t`);break;case W.WindowsOptionsReportType.GET_CELL_SIZE_PIXELS:const re=this._renderService.dimensions.css.cell.width.toFixed(0),he=this._renderService.dimensions.css.cell.height.toFixed(0);this.coreService.triggerDataEvent(`${U.C0.ESC}[6;${he};${re}t`)}}cancel(V,j){if(this.options.cancelEvents||j)return V.preventDefault(),V.stopPropagation(),!1}}o.Terminal=ee},9924:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TimeBasedDebouncer=void 0,o.TimeBasedDebouncer=class{constructor(i,d=1e3){this._renderCallback=i,this._debounceThresholdMS=d,this._lastRefreshMs=0,this._additionalRefreshRequested=!1}dispose(){this._refreshTimeoutID&&clearTimeout(this._refreshTimeoutID)}refresh(i,d,v){this._rowCount=v,i=i!==void 0?i:0,d=d!==void 0?d:this._rowCount-1,this._rowStart=this._rowStart!==void 0?Math.min(this._rowStart,i):i,this._rowEnd=this._rowEnd!==void 0?Math.max(this._rowEnd,d):d;const c=Date.now();if(c-this._lastRefreshMs>=this._debounceThresholdMS)this._lastRefreshMs=c,this._innerRefresh();else if(!this._additionalRefreshRequested){const _=c-this._lastRefreshMs,C=this._debounceThresholdMS-_;this._additionalRefreshRequested=!0,this._refreshTimeoutID=window.setTimeout((()=>{this._lastRefreshMs=Date.now(),this._innerRefresh(),this._additionalRefreshRequested=!1,this._refreshTimeoutID=void 0}),C)}}_innerRefresh(){if(this._rowStart===void 0||this._rowEnd===void 0||this._rowCount===void 0)return;const i=Math.max(this._rowStart,0),d=Math.min(this._rowEnd,this._rowCount-1);this._rowStart=void 0,this._rowEnd=void 0,this._renderCallback(i,d)}}},1680:function(D,o,i){var d=this&&this.__decorate||function(r,t,s,n){var p,a=arguments.length,b=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,s):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(r,t,s,n);else for(var f=r.length-1;f>=0;f--)(p=r[f])&&(b=(a<3?p(b):a>3?p(t,s,b):p(t,s))||b);return a>3&&b&&Object.defineProperty(t,s,b),b},v=this&&this.__param||function(r,t){return function(s,n){t(s,n,r)}};Object.defineProperty(o,"__esModule",{value:!0}),o.Viewport=void 0;const c=i(3656),_=i(4725),C=i(8460),S=i(844),m=i(2585);let l=o.Viewport=class extends S.Disposable{constructor(r,t,s,n,p,a,b,f){super(),this._viewportElement=r,this._scrollArea=t,this._bufferService=s,this._optionsService=n,this._charSizeService=p,this._renderService=a,this._coreBrowserService=b,this.scrollBarWidth=0,this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._wheelPartialScroll=0,this._refreshAnimationFrame=null,this._ignoreNextScrollEvent=!1,this._smoothScrollState={startTime:0,origin:-1,target:-1},this._onRequestScrollLines=this.register(new C.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this.scrollBarWidth=this._viewportElement.offsetWidth-this._scrollArea.offsetWidth||15,this.register((0,c.addDisposableDomListener)(this._viewportElement,"scroll",this._handleScroll.bind(this))),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((w=>this._activeBuffer=w.activeBuffer))),this._renderDimensions=this._renderService.dimensions,this.register(this._renderService.onDimensionsChange((w=>this._renderDimensions=w))),this._handleThemeChange(f.colors),this.register(f.onChangeColors((w=>this._handleThemeChange(w)))),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.syncScrollArea()))),setTimeout((()=>this.syncScrollArea()))}_handleThemeChange(r){this._viewportElement.style.backgroundColor=r.background.css}reset(){this._currentRowHeight=0,this._currentDeviceCellHeight=0,this._lastRecordedBufferLength=0,this._lastRecordedViewportHeight=0,this._lastRecordedBufferHeight=0,this._lastTouchY=0,this._lastScrollTop=0,this._coreBrowserService.window.requestAnimationFrame((()=>this.syncScrollArea()))}_refresh(r){if(r)return this._innerRefresh(),void(this._refreshAnimationFrame!==null&&this._coreBrowserService.window.cancelAnimationFrame(this._refreshAnimationFrame));this._refreshAnimationFrame===null&&(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._innerRefresh())))}_innerRefresh(){if(this._charSizeService.height>0){this._currentRowHeight=this._renderDimensions.device.cell.height/this._coreBrowserService.dpr,this._currentDeviceCellHeight=this._renderDimensions.device.cell.height,this._lastRecordedViewportHeight=this._viewportElement.offsetHeight;const t=Math.round(this._currentRowHeight*this._lastRecordedBufferLength)+(this._lastRecordedViewportHeight-this._renderDimensions.css.canvas.height);this._lastRecordedBufferHeight!==t&&(this._lastRecordedBufferHeight=t,this._scrollArea.style.height=this._lastRecordedBufferHeight+"px")}const r=this._bufferService.buffer.ydisp*this._currentRowHeight;this._viewportElement.scrollTop!==r&&(this._ignoreNextScrollEvent=!0,this._viewportElement.scrollTop=r),this._refreshAnimationFrame=null}syncScrollArea(r=!1){if(this._lastRecordedBufferLength!==this._bufferService.buffer.lines.length)return this._lastRecordedBufferLength=this._bufferService.buffer.lines.length,void this._refresh(r);this._lastRecordedViewportHeight===this._renderService.dimensions.css.canvas.height&&this._lastScrollTop===this._activeBuffer.ydisp*this._currentRowHeight&&this._renderDimensions.device.cell.height===this._currentDeviceCellHeight||this._refresh(r)}_handleScroll(r){if(this._lastScrollTop=this._viewportElement.scrollTop,!this._viewportElement.offsetParent)return;if(this._ignoreNextScrollEvent)return this._ignoreNextScrollEvent=!1,void this._onRequestScrollLines.fire({amount:0,suppressScrollEvent:!0});const t=Math.round(this._lastScrollTop/this._currentRowHeight)-this._bufferService.buffer.ydisp;this._onRequestScrollLines.fire({amount:t,suppressScrollEvent:!0})}_smoothScroll(){if(this._isDisposed||this._smoothScrollState.origin===-1||this._smoothScrollState.target===-1)return;const r=this._smoothScrollPercent();this._viewportElement.scrollTop=this._smoothScrollState.origin+Math.round(r*(this._smoothScrollState.target-this._smoothScrollState.origin)),r<1?this._coreBrowserService.window.requestAnimationFrame((()=>this._smoothScroll())):this._clearSmoothScrollState()}_smoothScrollPercent(){return this._optionsService.rawOptions.smoothScrollDuration&&this._smoothScrollState.startTime?Math.max(Math.min((Date.now()-this._smoothScrollState.startTime)/this._optionsService.rawOptions.smoothScrollDuration,1),0):1}_clearSmoothScrollState(){this._smoothScrollState.startTime=0,this._smoothScrollState.origin=-1,this._smoothScrollState.target=-1}_bubbleScroll(r,t){const s=this._viewportElement.scrollTop+this._lastRecordedViewportHeight;return!(t<0&&this._viewportElement.scrollTop!==0||t>0&&s<this._lastRecordedBufferHeight)||(r.cancelable&&r.preventDefault(),!1)}handleWheel(r){const t=this._getPixelsScrolled(r);return t!==0&&(this._optionsService.rawOptions.smoothScrollDuration?(this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target===-1?this._smoothScrollState.target=this._viewportElement.scrollTop+t:this._smoothScrollState.target+=t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()):this._viewportElement.scrollTop+=t,this._bubbleScroll(r,t))}scrollLines(r){if(r!==0)if(this._optionsService.rawOptions.smoothScrollDuration){const t=r*this._currentRowHeight;this._smoothScrollState.startTime=Date.now(),this._smoothScrollPercent()<1?(this._smoothScrollState.origin=this._viewportElement.scrollTop,this._smoothScrollState.target=this._smoothScrollState.origin+t,this._smoothScrollState.target=Math.max(Math.min(this._smoothScrollState.target,this._viewportElement.scrollHeight),0),this._smoothScroll()):this._clearSmoothScrollState()}else this._onRequestScrollLines.fire({amount:r,suppressScrollEvent:!1})}_getPixelsScrolled(r){if(r.deltaY===0||r.shiftKey)return 0;let t=this._applyScrollModifier(r.deltaY,r);return r.deltaMode===WheelEvent.DOM_DELTA_LINE?t*=this._currentRowHeight:r.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._currentRowHeight*this._bufferService.rows),t}getBufferElements(r,t){let s,n="";const p=[],a=t??this._bufferService.buffer.lines.length,b=this._bufferService.buffer.lines;for(let f=r;f<a;f++){const w=b.get(f);if(!w)continue;const M=b.get(f+1)?.isWrapped;if(n+=w.translateToString(!M),!M||f===b.length-1){const N=document.createElement("div");N.textContent=n,p.push(N),n.length>0&&(s=N),n=""}}return{bufferElements:p,cursorElement:s}}getLinesScrolled(r){if(r.deltaY===0||r.shiftKey)return 0;let t=this._applyScrollModifier(r.deltaY,r);return r.deltaMode===WheelEvent.DOM_DELTA_PIXEL?(t/=this._currentRowHeight+0,this._wheelPartialScroll+=t,t=Math.floor(Math.abs(this._wheelPartialScroll))*(this._wheelPartialScroll>0?1:-1),this._wheelPartialScroll%=1):r.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t*=this._bufferService.rows),t}_applyScrollModifier(r,t){const s=this._optionsService.rawOptions.fastScrollModifier;return s==="alt"&&t.altKey||s==="ctrl"&&t.ctrlKey||s==="shift"&&t.shiftKey?r*this._optionsService.rawOptions.fastScrollSensitivity*this._optionsService.rawOptions.scrollSensitivity:r*this._optionsService.rawOptions.scrollSensitivity}handleTouchStart(r){this._lastTouchY=r.touches[0].pageY}handleTouchMove(r){const t=this._lastTouchY-r.touches[0].pageY;return this._lastTouchY=r.touches[0].pageY,t!==0&&(this._viewportElement.scrollTop+=t,this._bubbleScroll(r,t))}};o.Viewport=l=d([v(2,m.IBufferService),v(3,m.IOptionsService),v(4,_.ICharSizeService),v(5,_.IRenderService),v(6,_.ICoreBrowserService),v(7,_.IThemeService)],l)},3107:function(D,o,i){var d=this&&this.__decorate||function(m,l,r,t){var s,n=arguments.length,p=n<3?l:t===null?t=Object.getOwnPropertyDescriptor(l,r):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(m,l,r,t);else for(var a=m.length-1;a>=0;a--)(s=m[a])&&(p=(n<3?s(p):n>3?s(l,r,p):s(l,r))||p);return n>3&&p&&Object.defineProperty(l,r,p),p},v=this&&this.__param||function(m,l){return function(r,t){l(r,t,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferDecorationRenderer=void 0;const c=i(4725),_=i(844),C=i(2585);let S=o.BufferDecorationRenderer=class extends _.Disposable{constructor(m,l,r,t,s){super(),this._screenElement=m,this._bufferService=l,this._coreBrowserService=r,this._decorationService=t,this._renderService=s,this._decorationElements=new Map,this._altBufferIsActive=!1,this._dimensionsChanged=!1,this._container=document.createElement("div"),this._container.classList.add("xterm-decoration-container"),this._screenElement.appendChild(this._container),this.register(this._renderService.onRenderedViewportChange((()=>this._doRefreshDecorations()))),this.register(this._renderService.onDimensionsChange((()=>{this._dimensionsChanged=!0,this._queueRefresh()}))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._altBufferIsActive=this._bufferService.buffer===this._bufferService.buffers.alt}))),this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh()))),this.register(this._decorationService.onDecorationRemoved((n=>this._removeDecoration(n)))),this.register((0,_.toDisposable)((()=>{this._container.remove(),this._decorationElements.clear()})))}_queueRefresh(){this._animationFrame===void 0&&(this._animationFrame=this._renderService.addRefreshCallback((()=>{this._doRefreshDecorations(),this._animationFrame=void 0})))}_doRefreshDecorations(){for(const m of this._decorationService.decorations)this._renderDecoration(m);this._dimensionsChanged=!1}_renderDecoration(m){this._refreshStyle(m),this._dimensionsChanged&&this._refreshXPosition(m)}_createElement(m){const l=this._coreBrowserService.mainDocument.createElement("div");l.classList.add("xterm-decoration"),l.classList.toggle("xterm-decoration-top-layer",m?.options?.layer==="top"),l.style.width=`${Math.round((m.options.width||1)*this._renderService.dimensions.css.cell.width)}px`,l.style.height=(m.options.height||1)*this._renderService.dimensions.css.cell.height+"px",l.style.top=(m.marker.line-this._bufferService.buffers.active.ydisp)*this._renderService.dimensions.css.cell.height+"px",l.style.lineHeight=`${this._renderService.dimensions.css.cell.height}px`;const r=m.options.x??0;return r&&r>this._bufferService.cols&&(l.style.display="none"),this._refreshXPosition(m,l),l}_refreshStyle(m){const l=m.marker.line-this._bufferService.buffers.active.ydisp;if(l<0||l>=this._bufferService.rows)m.element&&(m.element.style.display="none",m.onRenderEmitter.fire(m.element));else{let r=this._decorationElements.get(m);r||(r=this._createElement(m),m.element=r,this._decorationElements.set(m,r),this._container.appendChild(r),m.onDispose((()=>{this._decorationElements.delete(m),r.remove()}))),r.style.top=l*this._renderService.dimensions.css.cell.height+"px",r.style.display=this._altBufferIsActive?"none":"block",m.onRenderEmitter.fire(r)}}_refreshXPosition(m,l=m.element){if(!l)return;const r=m.options.x??0;(m.options.anchor||"left")==="right"?l.style.right=r?r*this._renderService.dimensions.css.cell.width+"px":"":l.style.left=r?r*this._renderService.dimensions.css.cell.width+"px":""}_removeDecoration(m){this._decorationElements.get(m)?.remove(),this._decorationElements.delete(m),m.dispose()}};o.BufferDecorationRenderer=S=d([v(1,C.IBufferService),v(2,c.ICoreBrowserService),v(3,C.IDecorationService),v(4,c.IRenderService)],S)},5871:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ColorZoneStore=void 0,o.ColorZoneStore=class{constructor(){this._zones=[],this._zonePool=[],this._zonePoolIndex=0,this._linePadding={full:0,left:0,center:0,right:0}}get zones(){return this._zonePool.length=Math.min(this._zonePool.length,this._zones.length),this._zones}clear(){this._zones.length=0,this._zonePoolIndex=0}addDecoration(i){if(i.options.overviewRulerOptions){for(const d of this._zones)if(d.color===i.options.overviewRulerOptions.color&&d.position===i.options.overviewRulerOptions.position){if(this._lineIntersectsZone(d,i.marker.line))return;if(this._lineAdjacentToZone(d,i.marker.line,i.options.overviewRulerOptions.position))return void this._addLineToZone(d,i.marker.line)}if(this._zonePoolIndex<this._zonePool.length)return this._zonePool[this._zonePoolIndex].color=i.options.overviewRulerOptions.color,this._zonePool[this._zonePoolIndex].position=i.options.overviewRulerOptions.position,this._zonePool[this._zonePoolIndex].startBufferLine=i.marker.line,this._zonePool[this._zonePoolIndex].endBufferLine=i.marker.line,void this._zones.push(this._zonePool[this._zonePoolIndex++]);this._zones.push({color:i.options.overviewRulerOptions.color,position:i.options.overviewRulerOptions.position,startBufferLine:i.marker.line,endBufferLine:i.marker.line}),this._zonePool.push(this._zones[this._zones.length-1]),this._zonePoolIndex++}}setPadding(i){this._linePadding=i}_lineIntersectsZone(i,d){return d>=i.startBufferLine&&d<=i.endBufferLine}_lineAdjacentToZone(i,d,v){return d>=i.startBufferLine-this._linePadding[v||"full"]&&d<=i.endBufferLine+this._linePadding[v||"full"]}_addLineToZone(i,d){i.startBufferLine=Math.min(i.startBufferLine,d),i.endBufferLine=Math.max(i.endBufferLine,d)}}},5744:function(D,o,i){var d=this&&this.__decorate||function(s,n,p,a){var b,f=arguments.length,w=f<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,p):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(s,n,p,a);else for(var M=s.length-1;M>=0;M--)(b=s[M])&&(w=(f<3?b(w):f>3?b(n,p,w):b(n,p))||w);return f>3&&w&&Object.defineProperty(n,p,w),w},v=this&&this.__param||function(s,n){return function(p,a){n(p,a,s)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OverviewRulerRenderer=void 0;const c=i(5871),_=i(4725),C=i(844),S=i(2585),m={full:0,left:0,center:0,right:0},l={full:0,left:0,center:0,right:0},r={full:0,left:0,center:0,right:0};let t=o.OverviewRulerRenderer=class extends C.Disposable{get _width(){return this._optionsService.options.overviewRulerWidth||0}constructor(s,n,p,a,b,f,w){super(),this._viewportElement=s,this._screenElement=n,this._bufferService=p,this._decorationService=a,this._renderService=b,this._optionsService=f,this._coreBrowserService=w,this._colorZoneStore=new c.ColorZoneStore,this._shouldUpdateDimensions=!0,this._shouldUpdateAnchor=!0,this._lastKnownBufferLength=0,this._canvas=this._coreBrowserService.mainDocument.createElement("canvas"),this._canvas.classList.add("xterm-decoration-overview-ruler"),this._refreshCanvasDimensions(),this._viewportElement.parentElement?.insertBefore(this._canvas,this._viewportElement);const M=this._canvas.getContext("2d");if(!M)throw new Error("Ctx cannot be null");this._ctx=M,this._registerDecorationListeners(),this._registerBufferChangeListeners(),this._registerDimensionChangeListeners(),this.register((0,C.toDisposable)((()=>{this._canvas?.remove()})))}_registerDecorationListeners(){this.register(this._decorationService.onDecorationRegistered((()=>this._queueRefresh(void 0,!0)))),this.register(this._decorationService.onDecorationRemoved((()=>this._queueRefresh(void 0,!0))))}_registerBufferChangeListeners(){this.register(this._renderService.onRenderedViewportChange((()=>this._queueRefresh()))),this.register(this._bufferService.buffers.onBufferActivate((()=>{this._canvas.style.display=this._bufferService.buffer===this._bufferService.buffers.alt?"none":"block"}))),this.register(this._bufferService.onScroll((()=>{this._lastKnownBufferLength!==this._bufferService.buffers.normal.lines.length&&(this._refreshDrawHeightConstants(),this._refreshColorZonePadding())})))}_registerDimensionChangeListeners(){this.register(this._renderService.onRender((()=>{this._containerHeight&&this._containerHeight===this._screenElement.clientHeight||(this._queueRefresh(!0),this._containerHeight=this._screenElement.clientHeight)}))),this.register(this._optionsService.onSpecificOptionChange("overviewRulerWidth",(()=>this._queueRefresh(!0)))),this.register(this._coreBrowserService.onDprChange((()=>this._queueRefresh(!0)))),this._queueRefresh(!0)}_refreshDrawConstants(){const s=Math.floor(this._canvas.width/3),n=Math.ceil(this._canvas.width/3);l.full=this._canvas.width,l.left=s,l.center=n,l.right=s,this._refreshDrawHeightConstants(),r.full=0,r.left=0,r.center=l.left,r.right=l.left+l.center}_refreshDrawHeightConstants(){m.full=Math.round(2*this._coreBrowserService.dpr);const s=this._canvas.height/this._bufferService.buffer.lines.length,n=Math.round(Math.max(Math.min(s,12),6)*this._coreBrowserService.dpr);m.left=n,m.center=n,m.right=n}_refreshColorZonePadding(){this._colorZoneStore.setPadding({full:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.full),left:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.left),center:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.center),right:Math.floor(this._bufferService.buffers.active.lines.length/(this._canvas.height-1)*m.right)}),this._lastKnownBufferLength=this._bufferService.buffers.normal.lines.length}_refreshCanvasDimensions(){this._canvas.style.width=`${this._width}px`,this._canvas.width=Math.round(this._width*this._coreBrowserService.dpr),this._canvas.style.height=`${this._screenElement.clientHeight}px`,this._canvas.height=Math.round(this._screenElement.clientHeight*this._coreBrowserService.dpr),this._refreshDrawConstants(),this._refreshColorZonePadding()}_refreshDecorations(){this._shouldUpdateDimensions&&this._refreshCanvasDimensions(),this._ctx.clearRect(0,0,this._canvas.width,this._canvas.height),this._colorZoneStore.clear();for(const n of this._decorationService.decorations)this._colorZoneStore.addDecoration(n);this._ctx.lineWidth=1;const s=this._colorZoneStore.zones;for(const n of s)n.position!=="full"&&this._renderColorZone(n);for(const n of s)n.position==="full"&&this._renderColorZone(n);this._shouldUpdateDimensions=!1,this._shouldUpdateAnchor=!1}_renderColorZone(s){this._ctx.fillStyle=s.color,this._ctx.fillRect(r[s.position||"full"],Math.round((this._canvas.height-1)*(s.startBufferLine/this._bufferService.buffers.active.lines.length)-m[s.position||"full"]/2),l[s.position||"full"],Math.round((this._canvas.height-1)*((s.endBufferLine-s.startBufferLine)/this._bufferService.buffers.active.lines.length)+m[s.position||"full"]))}_queueRefresh(s,n){this._shouldUpdateDimensions=s||this._shouldUpdateDimensions,this._shouldUpdateAnchor=n||this._shouldUpdateAnchor,this._animationFrame===void 0&&(this._animationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>{this._refreshDecorations(),this._animationFrame=void 0})))}};o.OverviewRulerRenderer=t=d([v(2,S.IBufferService),v(3,S.IDecorationService),v(4,_.IRenderService),v(5,S.IOptionsService),v(6,_.ICoreBrowserService)],t)},2950:function(D,o,i){var d=this&&this.__decorate||function(m,l,r,t){var s,n=arguments.length,p=n<3?l:t===null?t=Object.getOwnPropertyDescriptor(l,r):t;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")p=Reflect.decorate(m,l,r,t);else for(var a=m.length-1;a>=0;a--)(s=m[a])&&(p=(n<3?s(p):n>3?s(l,r,p):s(l,r))||p);return n>3&&p&&Object.defineProperty(l,r,p),p},v=this&&this.__param||function(m,l){return function(r,t){l(r,t,m)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CompositionHelper=void 0;const c=i(4725),_=i(2585),C=i(2584);let S=o.CompositionHelper=class{get isComposing(){return this._isComposing}constructor(m,l,r,t,s,n){this._textarea=m,this._compositionView=l,this._bufferService=r,this._optionsService=t,this._coreService=s,this._renderService=n,this._isComposing=!1,this._isSendingComposition=!1,this._compositionPosition={start:0,end:0},this._dataAlreadySent=""}compositionstart(){this._isComposing=!0,this._compositionPosition.start=this._textarea.value.length,this._compositionView.textContent="",this._dataAlreadySent="",this._compositionView.classList.add("active")}compositionupdate(m){this._compositionView.textContent=m.data,this.updateCompositionElements(),setTimeout((()=>{this._compositionPosition.end=this._textarea.value.length}),0)}compositionend(){this._finalizeComposition(!0)}keydown(m){if(this._isComposing||this._isSendingComposition){if(m.keyCode===229||m.keyCode===16||m.keyCode===17||m.keyCode===18)return!1;this._finalizeComposition(!1)}return m.keyCode!==229||(this._handleAnyTextareaChanges(),!1)}_finalizeComposition(m){if(this._compositionView.classList.remove("active"),this._isComposing=!1,m){const l={start:this._compositionPosition.start,end:this._compositionPosition.end};this._isSendingComposition=!0,setTimeout((()=>{if(this._isSendingComposition){let r;this._isSendingComposition=!1,l.start+=this._dataAlreadySent.length,r=this._isComposing?this._textarea.value.substring(l.start,l.end):this._textarea.value.substring(l.start),r.length>0&&this._coreService.triggerDataEvent(r,!0)}}),0)}else{this._isSendingComposition=!1;const l=this._textarea.value.substring(this._compositionPosition.start,this._compositionPosition.end);this._coreService.triggerDataEvent(l,!0)}}_handleAnyTextareaChanges(){const m=this._textarea.value;setTimeout((()=>{if(!this._isComposing){const l=this._textarea.value,r=l.replace(m,"");this._dataAlreadySent=r,l.length>m.length?this._coreService.triggerDataEvent(r,!0):l.length<m.length?this._coreService.triggerDataEvent(`${C.C0.DEL}`,!0):l.length===m.length&&l!==m&&this._coreService.triggerDataEvent(l,!0)}}),0)}updateCompositionElements(m){if(this._isComposing){if(this._bufferService.buffer.isCursorInViewport){const l=Math.min(this._bufferService.buffer.x,this._bufferService.cols-1),r=this._renderService.dimensions.css.cell.height,t=this._bufferService.buffer.y*this._renderService.dimensions.css.cell.height,s=l*this._renderService.dimensions.css.cell.width;this._compositionView.style.left=s+"px",this._compositionView.style.top=t+"px",this._compositionView.style.height=r+"px",this._compositionView.style.lineHeight=r+"px",this._compositionView.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._compositionView.style.fontSize=this._optionsService.rawOptions.fontSize+"px";const n=this._compositionView.getBoundingClientRect();this._textarea.style.left=s+"px",this._textarea.style.top=t+"px",this._textarea.style.width=Math.max(n.width,1)+"px",this._textarea.style.height=Math.max(n.height,1)+"px",this._textarea.style.lineHeight=n.height+"px"}m||setTimeout((()=>this.updateCompositionElements(!0)),0)}}};o.CompositionHelper=S=d([v(2,_.IBufferService),v(3,_.IOptionsService),v(4,_.ICoreService),v(5,c.IRenderService)],S)},9806:(D,o)=>{function i(d,v,c){const _=c.getBoundingClientRect(),C=d.getComputedStyle(c),S=parseInt(C.getPropertyValue("padding-left")),m=parseInt(C.getPropertyValue("padding-top"));return[v.clientX-_.left-S,v.clientY-_.top-m]}Object.defineProperty(o,"__esModule",{value:!0}),o.getCoords=o.getCoordsRelativeToElement=void 0,o.getCoordsRelativeToElement=i,o.getCoords=function(d,v,c,_,C,S,m,l,r){if(!S)return;const t=i(d,v,c);return t?(t[0]=Math.ceil((t[0]+(r?m/2:0))/m),t[1]=Math.ceil(t[1]/l),t[0]=Math.min(Math.max(t[0],1),_+(r?1:0)),t[1]=Math.min(Math.max(t[1],1),C),t):void 0}},9504:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.moveToCellSequence=void 0;const d=i(2584);function v(l,r,t,s){const n=l-c(l,t),p=r-c(r,t),a=Math.abs(n-p)-(function(b,f,w){let M=0;const N=b-c(b,w),O=f-c(f,w);for(let I=0;I<Math.abs(N-O);I++){const z=_(b,f)==="A"?-1:1;w.buffer.lines.get(N+z*I)?.isWrapped&&M++}return M})(l,r,t);return m(a,S(_(l,r),s))}function c(l,r){let t=0,s=r.buffer.lines.get(l),n=s?.isWrapped;for(;n&&l>=0&&l<r.rows;)t++,s=r.buffer.lines.get(--l),n=s?.isWrapped;return t}function _(l,r){return l>r?"A":"B"}function C(l,r,t,s,n,p){let a=l,b=r,f="";for(;a!==t||b!==s;)a+=n?1:-1,n&&a>p.cols-1?(f+=p.buffer.translateBufferLineToString(b,!1,l,a),a=0,l=0,b++):!n&&a<0&&(f+=p.buffer.translateBufferLineToString(b,!1,0,l+1),a=p.cols-1,l=a,b--);return f+p.buffer.translateBufferLineToString(b,!1,l,a)}function S(l,r){const t=r?"O":"[";return d.C0.ESC+t+l}function m(l,r){l=Math.floor(l);let t="";for(let s=0;s<l;s++)t+=r;return t}o.moveToCellSequence=function(l,r,t,s){const n=t.buffer.x,p=t.buffer.y;if(!t.buffer.hasScrollback)return(function(f,w,M,N,O,I){return v(w,N,O,I).length===0?"":m(C(f,w,f,w-c(w,O),!1,O).length,S("D",I))})(n,p,0,r,t,s)+v(p,r,t,s)+(function(f,w,M,N,O,I){let z;z=v(w,N,O,I).length>0?N-c(N,O):w;const Y=N,ne=(function(U,se,T,P,F,W){let Q;return Q=v(T,P,F,W).length>0?P-c(P,F):se,U<T&&Q<=P||U>=T&&Q<P?"C":"D"})(f,w,M,N,O,I);return m(C(f,z,M,Y,ne==="C",O).length,S(ne,I))})(n,p,l,r,t,s);let a;if(p===r)return a=n>l?"D":"C",m(Math.abs(n-l),S(a,s));a=p>r?"D":"C";const b=Math.abs(p-r);return m((function(f,w){return w.cols-f})(p>r?l:n,t)+(b-1)*t.cols+1+((p>r?n:l)-1),S(a,s))}},1296:function(D,o,i){var d=this&&this.__decorate||function(I,z,Y,ne){var U,se=arguments.length,T=se<3?z:ne===null?ne=Object.getOwnPropertyDescriptor(z,Y):ne;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")T=Reflect.decorate(I,z,Y,ne);else for(var P=I.length-1;P>=0;P--)(U=I[P])&&(T=(se<3?U(T):se>3?U(z,Y,T):U(z,Y))||T);return se>3&&T&&Object.defineProperty(z,Y,T),T},v=this&&this.__param||function(I,z){return function(Y,ne){z(Y,ne,I)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRenderer=void 0;const c=i(3787),_=i(2550),C=i(2223),S=i(6171),m=i(6052),l=i(4725),r=i(8055),t=i(8460),s=i(844),n=i(2585),p="xterm-dom-renderer-owner-",a="xterm-rows",b="xterm-fg-",f="xterm-bg-",w="xterm-focus",M="xterm-selection";let N=1,O=o.DomRenderer=class extends s.Disposable{constructor(I,z,Y,ne,U,se,T,P,F,W,Q,ce,ee){super(),this._terminal=I,this._document=z,this._element=Y,this._screenElement=ne,this._viewportElement=U,this._helperContainer=se,this._linkifier2=T,this._charSizeService=F,this._optionsService=W,this._bufferService=Q,this._coreBrowserService=ce,this._themeService=ee,this._terminalClass=N++,this._rowElements=[],this._selectionRenderModel=(0,m.createSelectionRenderModel)(),this.onRequestRedraw=this.register(new t.EventEmitter).event,this._rowContainer=this._document.createElement("div"),this._rowContainer.classList.add(a),this._rowContainer.style.lineHeight="normal",this._rowContainer.setAttribute("aria-hidden","true"),this._refreshRowElements(this._bufferService.cols,this._bufferService.rows),this._selectionContainer=this._document.createElement("div"),this._selectionContainer.classList.add(M),this._selectionContainer.setAttribute("aria-hidden","true"),this.dimensions=(0,S.createRenderDimensions)(),this._updateDimensions(),this.register(this._optionsService.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._themeService.onChangeColors((_e=>this._injectCss(_e)))),this._injectCss(this._themeService.colors),this._rowFactory=P.createInstance(c.DomRendererRowFactory,document),this._element.classList.add(p+this._terminalClass),this._screenElement.appendChild(this._rowContainer),this._screenElement.appendChild(this._selectionContainer),this.register(this._linkifier2.onShowLinkUnderline((_e=>this._handleLinkHover(_e)))),this.register(this._linkifier2.onHideLinkUnderline((_e=>this._handleLinkLeave(_e)))),this.register((0,s.toDisposable)((()=>{this._element.classList.remove(p+this._terminalClass),this._rowContainer.remove(),this._selectionContainer.remove(),this._widthCache.dispose(),this._themeStyleElement.remove(),this._dimensionsStyleElement.remove()}))),this._widthCache=new _.WidthCache(this._document,this._helperContainer),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}_updateDimensions(){const I=this._coreBrowserService.dpr;this.dimensions.device.char.width=this._charSizeService.width*I,this.dimensions.device.char.height=Math.ceil(this._charSizeService.height*I),this.dimensions.device.cell.width=this.dimensions.device.char.width+Math.round(this._optionsService.rawOptions.letterSpacing),this.dimensions.device.cell.height=Math.floor(this.dimensions.device.char.height*this._optionsService.rawOptions.lineHeight),this.dimensions.device.char.left=0,this.dimensions.device.char.top=0,this.dimensions.device.canvas.width=this.dimensions.device.cell.width*this._bufferService.cols,this.dimensions.device.canvas.height=this.dimensions.device.cell.height*this._bufferService.rows,this.dimensions.css.canvas.width=Math.round(this.dimensions.device.canvas.width/I),this.dimensions.css.canvas.height=Math.round(this.dimensions.device.canvas.height/I),this.dimensions.css.cell.width=this.dimensions.css.canvas.width/this._bufferService.cols,this.dimensions.css.cell.height=this.dimensions.css.canvas.height/this._bufferService.rows;for(const Y of this._rowElements)Y.style.width=`${this.dimensions.css.canvas.width}px`,Y.style.height=`${this.dimensions.css.cell.height}px`,Y.style.lineHeight=`${this.dimensions.css.cell.height}px`,Y.style.overflow="hidden";this._dimensionsStyleElement||(this._dimensionsStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._dimensionsStyleElement));const z=`${this._terminalSelector} .${a} span { display: inline-block; height: 100%; vertical-align: top;}`;this._dimensionsStyleElement.textContent=z,this._selectionContainer.style.height=this._viewportElement.style.height,this._screenElement.style.width=`${this.dimensions.css.canvas.width}px`,this._screenElement.style.height=`${this.dimensions.css.canvas.height}px`}_injectCss(I){this._themeStyleElement||(this._themeStyleElement=this._document.createElement("style"),this._screenElement.appendChild(this._themeStyleElement));let z=`${this._terminalSelector} .${a} { color: ${I.foreground.css}; font-family: ${this._optionsService.rawOptions.fontFamily}; font-size: ${this._optionsService.rawOptions.fontSize}px; font-kerning: none; white-space: pre}`;z+=`${this._terminalSelector} .${a} .xterm-dim { color: ${r.color.multiplyOpacity(I.foreground,.5).css};}`,z+=`${this._terminalSelector} span:not(.xterm-bold) { font-weight: ${this._optionsService.rawOptions.fontWeight};}${this._terminalSelector} span.xterm-bold { font-weight: ${this._optionsService.rawOptions.fontWeightBold};}${this._terminalSelector} span.xterm-italic { font-style: italic;}`;const Y=`blink_underline_${this._terminalClass}`,ne=`blink_bar_${this._terminalClass}`,U=`blink_block_${this._terminalClass}`;z+=`@keyframes ${Y} { 50% {  border-bottom-style: hidden; }}`,z+=`@keyframes ${ne} { 50% {  box-shadow: none; }}`,z+=`@keyframes ${U} { 0% {  background-color: ${I.cursor.css};  color: ${I.cursorAccent.css}; } 50% {  background-color: inherit;  color: ${I.cursor.css}; }}`,z+=`${this._terminalSelector} .${a}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-underline { animation: ${Y} 1s step-end infinite;}${this._terminalSelector} .${a}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-bar { animation: ${ne} 1s step-end infinite;}${this._terminalSelector} .${a}.${w} .xterm-cursor.xterm-cursor-blink.xterm-cursor-block { animation: ${U} 1s step-end infinite;}${this._terminalSelector} .${a} .xterm-cursor.xterm-cursor-block { background-color: ${I.cursor.css}; color: ${I.cursorAccent.css};}${this._terminalSelector} .${a} .xterm-cursor.xterm-cursor-block:not(.xterm-cursor-blink) { background-color: ${I.cursor.css} !important; color: ${I.cursorAccent.css} !important;}${this._terminalSelector} .${a} .xterm-cursor.xterm-cursor-outline { outline: 1px solid ${I.cursor.css}; outline-offset: -1px;}${this._terminalSelector} .${a} .xterm-cursor.xterm-cursor-bar { box-shadow: ${this._optionsService.rawOptions.cursorWidth}px 0 0 ${I.cursor.css} inset;}${this._terminalSelector} .${a} .xterm-cursor.xterm-cursor-underline { border-bottom: 1px ${I.cursor.css}; border-bottom-style: solid; height: calc(100% - 1px);}`,z+=`${this._terminalSelector} .${M} { position: absolute; top: 0; left: 0; z-index: 1; pointer-events: none;}${this._terminalSelector}.focus .${M} div { position: absolute; background-color: ${I.selectionBackgroundOpaque.css};}${this._terminalSelector} .${M} div { position: absolute; background-color: ${I.selectionInactiveBackgroundOpaque.css};}`;for(const[se,T]of I.ansi.entries())z+=`${this._terminalSelector} .${b}${se} { color: ${T.css}; }${this._terminalSelector} .${b}${se}.xterm-dim { color: ${r.color.multiplyOpacity(T,.5).css}; }${this._terminalSelector} .${f}${se} { background-color: ${T.css}; }`;z+=`${this._terminalSelector} .${b}${C.INVERTED_DEFAULT_COLOR} { color: ${r.color.opaque(I.background).css}; }${this._terminalSelector} .${b}${C.INVERTED_DEFAULT_COLOR}.xterm-dim { color: ${r.color.multiplyOpacity(r.color.opaque(I.background),.5).css}; }${this._terminalSelector} .${f}${C.INVERTED_DEFAULT_COLOR} { background-color: ${I.foreground.css}; }`,this._themeStyleElement.textContent=z}_setDefaultSpacing(){const I=this.dimensions.css.cell.width-this._widthCache.get("W",!1,!1);this._rowContainer.style.letterSpacing=`${I}px`,this._rowFactory.defaultSpacing=I}handleDevicePixelRatioChange(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}_refreshRowElements(I,z){for(let Y=this._rowElements.length;Y<=z;Y++){const ne=this._document.createElement("div");this._rowContainer.appendChild(ne),this._rowElements.push(ne)}for(;this._rowElements.length>z;)this._rowContainer.removeChild(this._rowElements.pop())}handleResize(I,z){this._refreshRowElements(I,z),this._updateDimensions(),this.handleSelectionChanged(this._selectionRenderModel.selectionStart,this._selectionRenderModel.selectionEnd,this._selectionRenderModel.columnSelectMode)}handleCharSizeChanged(){this._updateDimensions(),this._widthCache.clear(),this._setDefaultSpacing()}handleBlur(){this._rowContainer.classList.remove(w),this.renderRows(0,this._bufferService.rows-1)}handleFocus(){this._rowContainer.classList.add(w),this.renderRows(this._bufferService.buffer.y,this._bufferService.buffer.y)}handleSelectionChanged(I,z,Y){if(this._selectionContainer.replaceChildren(),this._rowFactory.handleSelectionChanged(I,z,Y),this.renderRows(0,this._bufferService.rows-1),!I||!z)return;this._selectionRenderModel.update(this._terminal,I,z,Y);const ne=this._selectionRenderModel.viewportStartRow,U=this._selectionRenderModel.viewportEndRow,se=this._selectionRenderModel.viewportCappedStartRow,T=this._selectionRenderModel.viewportCappedEndRow;if(se>=this._bufferService.rows||T<0)return;const P=this._document.createDocumentFragment();if(Y){const F=I[0]>z[0];P.appendChild(this._createSelectionElement(se,F?z[0]:I[0],F?I[0]:z[0],T-se+1))}else{const F=ne===se?I[0]:0,W=se===U?z[0]:this._bufferService.cols;P.appendChild(this._createSelectionElement(se,F,W));const Q=T-se-1;if(P.appendChild(this._createSelectionElement(se+1,0,this._bufferService.cols,Q)),se!==T){const ce=U===T?z[0]:this._bufferService.cols;P.appendChild(this._createSelectionElement(T,0,ce))}}this._selectionContainer.appendChild(P)}_createSelectionElement(I,z,Y,ne=1){const U=this._document.createElement("div"),se=z*this.dimensions.css.cell.width;let T=this.dimensions.css.cell.width*(Y-z);return se+T>this.dimensions.css.canvas.width&&(T=this.dimensions.css.canvas.width-se),U.style.height=ne*this.dimensions.css.cell.height+"px",U.style.top=I*this.dimensions.css.cell.height+"px",U.style.left=`${se}px`,U.style.width=`${T}px`,U}handleCursorMove(){}_handleOptionsChanged(){this._updateDimensions(),this._injectCss(this._themeService.colors),this._widthCache.setFont(this._optionsService.rawOptions.fontFamily,this._optionsService.rawOptions.fontSize,this._optionsService.rawOptions.fontWeight,this._optionsService.rawOptions.fontWeightBold),this._setDefaultSpacing()}clear(){for(const I of this._rowElements)I.replaceChildren()}renderRows(I,z){const Y=this._bufferService.buffer,ne=Y.ybase+Y.y,U=Math.min(Y.x,this._bufferService.cols-1),se=this._optionsService.rawOptions.cursorBlink,T=this._optionsService.rawOptions.cursorStyle,P=this._optionsService.rawOptions.cursorInactiveStyle;for(let F=I;F<=z;F++){const W=F+Y.ydisp,Q=this._rowElements[F],ce=Y.lines.get(W);if(!Q||!ce)break;Q.replaceChildren(...this._rowFactory.createRow(ce,W,W===ne,T,P,U,se,this.dimensions.css.cell.width,this._widthCache,-1,-1))}}get _terminalSelector(){return`.${p}${this._terminalClass}`}_handleLinkHover(I){this._setCellUnderline(I.x1,I.x2,I.y1,I.y2,I.cols,!0)}_handleLinkLeave(I){this._setCellUnderline(I.x1,I.x2,I.y1,I.y2,I.cols,!1)}_setCellUnderline(I,z,Y,ne,U,se){Y<0&&(I=0),ne<0&&(z=0);const T=this._bufferService.rows-1;Y=Math.max(Math.min(Y,T),0),ne=Math.max(Math.min(ne,T),0),U=Math.min(U,this._bufferService.cols);const P=this._bufferService.buffer,F=P.ybase+P.y,W=Math.min(P.x,U-1),Q=this._optionsService.rawOptions.cursorBlink,ce=this._optionsService.rawOptions.cursorStyle,ee=this._optionsService.rawOptions.cursorInactiveStyle;for(let _e=Y;_e<=ne;++_e){const V=_e+P.ydisp,j=this._rowElements[_e],J=P.lines.get(V);if(!j||!J)break;j.replaceChildren(...this._rowFactory.createRow(J,V,V===F,ce,ee,W,Q,this.dimensions.css.cell.width,this._widthCache,se?_e===Y?I:0:-1,se?(_e===ne?z:U)-1:-1))}}};o.DomRenderer=O=d([v(7,n.IInstantiationService),v(8,l.ICharSizeService),v(9,n.IOptionsService),v(10,n.IBufferService),v(11,l.ICoreBrowserService),v(12,l.IThemeService)],O)},3787:function(D,o,i){var d=this&&this.__decorate||function(a,b,f,w){var M,N=arguments.length,O=N<3?b:w===null?w=Object.getOwnPropertyDescriptor(b,f):w;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")O=Reflect.decorate(a,b,f,w);else for(var I=a.length-1;I>=0;I--)(M=a[I])&&(O=(N<3?M(O):N>3?M(b,f,O):M(b,f))||O);return N>3&&O&&Object.defineProperty(b,f,O),O},v=this&&this.__param||function(a,b){return function(f,w){b(f,w,a)}};Object.defineProperty(o,"__esModule",{value:!0}),o.DomRendererRowFactory=void 0;const c=i(2223),_=i(643),C=i(511),S=i(2585),m=i(8055),l=i(4725),r=i(4269),t=i(6171),s=i(3734);let n=o.DomRendererRowFactory=class{constructor(a,b,f,w,M,N,O){this._document=a,this._characterJoinerService=b,this._optionsService=f,this._coreBrowserService=w,this._coreService=M,this._decorationService=N,this._themeService=O,this._workCell=new C.CellData,this._columnSelectMode=!1,this.defaultSpacing=0}handleSelectionChanged(a,b,f){this._selectionStart=a,this._selectionEnd=b,this._columnSelectMode=f}createRow(a,b,f,w,M,N,O,I,z,Y,ne){const U=[],se=this._characterJoinerService.getJoinedCharacters(b),T=this._themeService.colors;let P,F=a.getNoBgTrimmedLength();f&&F<N+1&&(F=N+1);let W=0,Q="",ce=0,ee=0,_e=0,V=!1,j=0,J=!1,re=0;const he=[],le=Y!==-1&&ne!==-1;for(let Ee=0;Ee<F;Ee++){a.loadCell(Ee,this._workCell);let Me=this._workCell.getWidth();if(Me===0)continue;let Re=!1,je=Ee,be=this._workCell;if(se.length>0&&Ee===se[0][0]){Re=!0;const ye=se.shift();be=new r.JoinedCellData(this._workCell,a.translateToString(!0,ye[0],ye[1]),ye[1]-ye[0]),je=ye[1]-1,Me=be.getWidth()}const gt=this._isCellInSelection(Ee,b),oe=f&&Ee===N,Je=le&&Ee>=Y&&Ee<=ne;let It=!1;this._decorationService.forEachDecorationAtCell(Ee,b,void 0,(ye=>{It=!0}));let Nt=be.getChars()||_.WHITESPACE_CELL_CHAR;if(Nt===" "&&(be.isUnderline()||be.isOverline())&&(Nt=""),re=Me*I-z.get(Nt,be.isBold(),be.isItalic()),P){if(W&&(gt&&J||!gt&&!J&&be.bg===ce)&&(gt&&J&&T.selectionForeground||be.fg===ee)&&be.extended.ext===_e&&Je===V&&re===j&&!oe&&!Re&&!It){be.isInvisible()?Q+=_.WHITESPACE_CELL_CHAR:Q+=Nt,W++;continue}W&&(P.textContent=Q),P=this._document.createElement("span"),W=0,Q=""}else P=this._document.createElement("span");if(ce=be.bg,ee=be.fg,_e=be.extended.ext,V=Je,j=re,J=gt,Re&&N>=Ee&&N<=je&&(N=Ee),!this._coreService.isCursorHidden&&oe&&this._coreService.isCursorInitialized){if(he.push("xterm-cursor"),this._coreBrowserService.isFocused)O&&he.push("xterm-cursor-blink"),he.push(w==="bar"?"xterm-cursor-bar":w==="underline"?"xterm-cursor-underline":"xterm-cursor-block");else if(M)switch(M){case"outline":he.push("xterm-cursor-outline");break;case"block":he.push("xterm-cursor-block");break;case"bar":he.push("xterm-cursor-bar");break;case"underline":he.push("xterm-cursor-underline")}}if(be.isBold()&&he.push("xterm-bold"),be.isItalic()&&he.push("xterm-italic"),be.isDim()&&he.push("xterm-dim"),Q=be.isInvisible()?_.WHITESPACE_CELL_CHAR:be.getChars()||_.WHITESPACE_CELL_CHAR,be.isUnderline()&&(he.push(`xterm-underline-${be.extended.underlineStyle}`),Q===" "&&(Q=""),!be.isUnderlineColorDefault()))if(be.isUnderlineColorRGB())P.style.textDecorationColor=`rgb(${s.AttributeData.toColorRGB(be.getUnderlineColor()).join(",")})`;else{let ye=be.getUnderlineColor();this._optionsService.rawOptions.drawBoldTextInBrightColors&&be.isBold()&&ye<8&&(ye+=8),P.style.textDecorationColor=T.ansi[ye].css}be.isOverline()&&(he.push("xterm-overline"),Q===" "&&(Q="")),be.isStrikethrough()&&he.push("xterm-strikethrough"),Je&&(P.style.textDecoration="underline");let We=be.getFgColor(),Ve=be.getFgColorMode(),Xe=be.getBgColor(),bt=be.getBgColorMode();const te=!!be.isInverse();if(te){const ye=We;We=Xe,Xe=ye;const $e=Ve;Ve=bt,bt=$e}let Z,ae,ge,xe=!1;switch(this._decorationService.forEachDecorationAtCell(Ee,b,void 0,(ye=>{ye.options.layer!=="top"&&xe||(ye.backgroundColorRGB&&(bt=50331648,Xe=ye.backgroundColorRGB.rgba>>8&16777215,Z=ye.backgroundColorRGB),ye.foregroundColorRGB&&(Ve=50331648,We=ye.foregroundColorRGB.rgba>>8&16777215,ae=ye.foregroundColorRGB),xe=ye.options.layer==="top")})),!xe&&gt&&(Z=this._coreBrowserService.isFocused?T.selectionBackgroundOpaque:T.selectionInactiveBackgroundOpaque,Xe=Z.rgba>>8&16777215,bt=50331648,xe=!0,T.selectionForeground&&(Ve=50331648,We=T.selectionForeground.rgba>>8&16777215,ae=T.selectionForeground)),xe&&he.push("xterm-decoration-top"),bt){case 16777216:case 33554432:ge=T.ansi[Xe],he.push(`xterm-bg-${Xe}`);break;case 50331648:ge=m.channels.toColor(Xe>>16,Xe>>8&255,255&Xe),this._addStyle(P,`background-color:#${p((Xe>>>0).toString(16),"0",6)}`);break;default:te?(ge=T.foreground,he.push(`xterm-bg-${c.INVERTED_DEFAULT_COLOR}`)):ge=T.background}switch(Z||be.isDim()&&(Z=m.color.multiplyOpacity(ge,.5)),Ve){case 16777216:case 33554432:be.isBold()&&We<8&&this._optionsService.rawOptions.drawBoldTextInBrightColors&&(We+=8),this._applyMinimumContrast(P,ge,T.ansi[We],be,Z,void 0)||he.push(`xterm-fg-${We}`);break;case 50331648:const ye=m.channels.toColor(We>>16&255,We>>8&255,255&We);this._applyMinimumContrast(P,ge,ye,be,Z,ae)||this._addStyle(P,`color:#${p(We.toString(16),"0",6)}`);break;default:this._applyMinimumContrast(P,ge,T.foreground,be,Z,ae)||te&&he.push(`xterm-fg-${c.INVERTED_DEFAULT_COLOR}`)}he.length&&(P.className=he.join(" "),he.length=0),oe||Re||It?P.textContent=Q:W++,re!==this.defaultSpacing&&(P.style.letterSpacing=`${re}px`),U.push(P),Ee=je}return P&&W&&(P.textContent=Q),U}_applyMinimumContrast(a,b,f,w,M,N){if(this._optionsService.rawOptions.minimumContrastRatio===1||(0,t.treatGlyphAsBackgroundColor)(w.getCode()))return!1;const O=this._getContrastCache(w);let I;if(M||N||(I=O.getColor(b.rgba,f.rgba)),I===void 0){const z=this._optionsService.rawOptions.minimumContrastRatio/(w.isDim()?2:1);I=m.color.ensureContrastRatio(M||b,N||f,z),O.setColor((M||b).rgba,(N||f).rgba,I??null)}return!!I&&(this._addStyle(a,`color:${I.css}`),!0)}_getContrastCache(a){return a.isDim()?this._themeService.colors.halfContrastCache:this._themeService.colors.contrastCache}_addStyle(a,b){a.setAttribute("style",`${a.getAttribute("style")||""}${b};`)}_isCellInSelection(a,b){const f=this._selectionStart,w=this._selectionEnd;return!(!f||!w)&&(this._columnSelectMode?f[0]<=w[0]?a>=f[0]&&b>=f[1]&&a<w[0]&&b<=w[1]:a<f[0]&&b>=f[1]&&a>=w[0]&&b<=w[1]:b>f[1]&&b<w[1]||f[1]===w[1]&&b===f[1]&&a>=f[0]&&a<w[0]||f[1]<w[1]&&b===w[1]&&a<w[0]||f[1]<w[1]&&b===f[1]&&a>=f[0])}};function p(a,b,f){for(;a.length<f;)a=b+a;return a}o.DomRendererRowFactory=n=d([v(1,l.ICharacterJoinerService),v(2,S.IOptionsService),v(3,l.ICoreBrowserService),v(4,S.ICoreService),v(5,S.IDecorationService),v(6,l.IThemeService)],n)},2550:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WidthCache=void 0,o.WidthCache=class{constructor(i,d){this._flat=new Float32Array(256),this._font="",this._fontSize=0,this._weight="normal",this._weightBold="bold",this._measureElements=[],this._container=i.createElement("div"),this._container.classList.add("xterm-width-cache-measure-container"),this._container.setAttribute("aria-hidden","true"),this._container.style.whiteSpace="pre",this._container.style.fontKerning="none";const v=i.createElement("span");v.classList.add("xterm-char-measure-element");const c=i.createElement("span");c.classList.add("xterm-char-measure-element"),c.style.fontWeight="bold";const _=i.createElement("span");_.classList.add("xterm-char-measure-element"),_.style.fontStyle="italic";const C=i.createElement("span");C.classList.add("xterm-char-measure-element"),C.style.fontWeight="bold",C.style.fontStyle="italic",this._measureElements=[v,c,_,C],this._container.appendChild(v),this._container.appendChild(c),this._container.appendChild(_),this._container.appendChild(C),d.appendChild(this._container),this.clear()}dispose(){this._container.remove(),this._measureElements.length=0,this._holey=void 0}clear(){this._flat.fill(-9999),this._holey=new Map}setFont(i,d,v,c){i===this._font&&d===this._fontSize&&v===this._weight&&c===this._weightBold||(this._font=i,this._fontSize=d,this._weight=v,this._weightBold=c,this._container.style.fontFamily=this._font,this._container.style.fontSize=`${this._fontSize}px`,this._measureElements[0].style.fontWeight=`${v}`,this._measureElements[1].style.fontWeight=`${c}`,this._measureElements[2].style.fontWeight=`${v}`,this._measureElements[3].style.fontWeight=`${c}`,this.clear())}get(i,d,v){let c=0;if(!d&&!v&&i.length===1&&(c=i.charCodeAt(0))<256){if(this._flat[c]!==-9999)return this._flat[c];const S=this._measure(i,0);return S>0&&(this._flat[c]=S),S}let _=i;d&&(_+="B"),v&&(_+="I");let C=this._holey.get(_);if(C===void 0){let S=0;d&&(S|=1),v&&(S|=2),C=this._measure(i,S),C>0&&this._holey.set(_,C)}return C}_measure(i,d){const v=this._measureElements[d];return v.textContent=i.repeat(32),v.offsetWidth/32}}},2223:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.TEXT_BASELINE=o.DIM_OPACITY=o.INVERTED_DEFAULT_COLOR=void 0;const d=i(6114);o.INVERTED_DEFAULT_COLOR=257,o.DIM_OPACITY=.5,o.TEXT_BASELINE=d.isFirefox||d.isLegacyEdge?"bottom":"ideographic"},6171:(D,o)=>{function i(v){return 57508<=v&&v<=57558}function d(v){return v>=128512&&v<=128591||v>=127744&&v<=128511||v>=128640&&v<=128767||v>=9728&&v<=9983||v>=9984&&v<=10175||v>=65024&&v<=65039||v>=129280&&v<=129535||v>=127462&&v<=127487}Object.defineProperty(o,"__esModule",{value:!0}),o.computeNextVariantOffset=o.createRenderDimensions=o.treatGlyphAsBackgroundColor=o.allowRescaling=o.isEmoji=o.isRestrictedPowerlineGlyph=o.isPowerlineGlyph=o.throwIfFalsy=void 0,o.throwIfFalsy=function(v){if(!v)throw new Error("value must not be falsy");return v},o.isPowerlineGlyph=i,o.isRestrictedPowerlineGlyph=function(v){return 57520<=v&&v<=57527},o.isEmoji=d,o.allowRescaling=function(v,c,_,C){return c===1&&_>Math.ceil(1.5*C)&&v!==void 0&&v>255&&!d(v)&&!i(v)&&!(function(S){return 57344<=S&&S<=63743})(v)},o.treatGlyphAsBackgroundColor=function(v){return i(v)||(function(c){return 9472<=c&&c<=9631})(v)},o.createRenderDimensions=function(){return{css:{canvas:{width:0,height:0},cell:{width:0,height:0}},device:{canvas:{width:0,height:0},cell:{width:0,height:0},char:{width:0,height:0,left:0,top:0}}}},o.computeNextVariantOffset=function(v,c,_=0){return(v-(2*Math.round(c)-_))%(2*Math.round(c))}},6052:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createSelectionRenderModel=void 0;class i{constructor(){this.clear()}clear(){this.hasSelection=!1,this.columnSelectMode=!1,this.viewportStartRow=0,this.viewportEndRow=0,this.viewportCappedStartRow=0,this.viewportCappedEndRow=0,this.startCol=0,this.endCol=0,this.selectionStart=void 0,this.selectionEnd=void 0}update(v,c,_,C=!1){if(this.selectionStart=c,this.selectionEnd=_,!c||!_||c[0]===_[0]&&c[1]===_[1])return void this.clear();const S=v.buffers.active.ydisp,m=c[1]-S,l=_[1]-S,r=Math.max(m,0),t=Math.min(l,v.rows-1);r>=v.rows||t<0?this.clear():(this.hasSelection=!0,this.columnSelectMode=C,this.viewportStartRow=m,this.viewportEndRow=l,this.viewportCappedStartRow=r,this.viewportCappedEndRow=t,this.startCol=c[0],this.endCol=_[0])}isCellSelected(v,c,_){return!!this.hasSelection&&(_-=v.buffer.active.viewportY,this.columnSelectMode?this.startCol<=this.endCol?c>=this.startCol&&_>=this.viewportCappedStartRow&&c<this.endCol&&_<=this.viewportCappedEndRow:c<this.startCol&&_>=this.viewportCappedStartRow&&c>=this.endCol&&_<=this.viewportCappedEndRow:_>this.viewportStartRow&&_<this.viewportEndRow||this.viewportStartRow===this.viewportEndRow&&_===this.viewportStartRow&&c>=this.startCol&&c<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportEndRow&&c<this.endCol||this.viewportStartRow<this.viewportEndRow&&_===this.viewportStartRow&&c>=this.startCol)}}o.createSelectionRenderModel=function(){return new i}},456:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionModel=void 0,o.SelectionModel=class{constructor(i){this._bufferService=i,this.isSelectAllActive=!1,this.selectionStartLength=0}clearSelection(){this.selectionStart=void 0,this.selectionEnd=void 0,this.isSelectAllActive=!1,this.selectionStartLength=0}get finalSelectionStart(){return this.isSelectAllActive?[0,0]:this.selectionEnd&&this.selectionStart&&this.areSelectionValuesReversed()?this.selectionEnd:this.selectionStart}get finalSelectionEnd(){if(this.isSelectAllActive)return[this._bufferService.cols,this._bufferService.buffer.ybase+this._bufferService.rows-1];if(this.selectionStart){if(!this.selectionEnd||this.areSelectionValuesReversed()){const i=this.selectionStart[0]+this.selectionStartLength;return i>this._bufferService.cols?i%this._bufferService.cols==0?[this._bufferService.cols,this.selectionStart[1]+Math.floor(i/this._bufferService.cols)-1]:[i%this._bufferService.cols,this.selectionStart[1]+Math.floor(i/this._bufferService.cols)]:[i,this.selectionStart[1]]}if(this.selectionStartLength&&this.selectionEnd[1]===this.selectionStart[1]){const i=this.selectionStart[0]+this.selectionStartLength;return i>this._bufferService.cols?[i%this._bufferService.cols,this.selectionStart[1]+Math.floor(i/this._bufferService.cols)]:[Math.max(i,this.selectionEnd[0]),this.selectionEnd[1]]}return this.selectionEnd}}areSelectionValuesReversed(){const i=this.selectionStart,d=this.selectionEnd;return!(!i||!d)&&(i[1]>d[1]||i[1]===d[1]&&i[0]>d[0])}handleTrim(i){return this.selectionStart&&(this.selectionStart[1]-=i),this.selectionEnd&&(this.selectionEnd[1]-=i),this.selectionEnd&&this.selectionEnd[1]<0?(this.clearSelection(),!0):(this.selectionStart&&this.selectionStart[1]<0&&(this.selectionStart[1]=0),!1)}}},428:function(D,o,i){var d=this&&this.__decorate||function(t,s,n,p){var a,b=arguments.length,f=b<3?s:p===null?p=Object.getOwnPropertyDescriptor(s,n):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(t,s,n,p);else for(var w=t.length-1;w>=0;w--)(a=t[w])&&(f=(b<3?a(f):b>3?a(s,n,f):a(s,n))||f);return b>3&&f&&Object.defineProperty(s,n,f),f},v=this&&this.__param||function(t,s){return function(n,p){s(n,p,t)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharSizeService=void 0;const c=i(2585),_=i(8460),C=i(844);let S=o.CharSizeService=class extends C.Disposable{get hasValidSize(){return this.width>0&&this.height>0}constructor(t,s,n){super(),this._optionsService=n,this.width=0,this.height=0,this._onCharSizeChange=this.register(new _.EventEmitter),this.onCharSizeChange=this._onCharSizeChange.event;try{this._measureStrategy=this.register(new r(this._optionsService))}catch{this._measureStrategy=this.register(new l(t,s,this._optionsService))}this.register(this._optionsService.onMultipleOptionChange(["fontFamily","fontSize"],(()=>this.measure())))}measure(){const t=this._measureStrategy.measure();t.width===this.width&&t.height===this.height||(this.width=t.width,this.height=t.height,this._onCharSizeChange.fire())}};o.CharSizeService=S=d([v(2,c.IOptionsService)],S);class m extends C.Disposable{constructor(){super(...arguments),this._result={width:0,height:0}}_validateAndSet(s,n){s!==void 0&&s>0&&n!==void 0&&n>0&&(this._result.width=s,this._result.height=n)}}class l extends m{constructor(s,n,p){super(),this._document=s,this._parentElement=n,this._optionsService=p,this._measureElement=this._document.createElement("span"),this._measureElement.classList.add("xterm-char-measure-element"),this._measureElement.textContent="W".repeat(32),this._measureElement.setAttribute("aria-hidden","true"),this._measureElement.style.whiteSpace="pre",this._measureElement.style.fontKerning="none",this._parentElement.appendChild(this._measureElement)}measure(){return this._measureElement.style.fontFamily=this._optionsService.rawOptions.fontFamily,this._measureElement.style.fontSize=`${this._optionsService.rawOptions.fontSize}px`,this._validateAndSet(Number(this._measureElement.offsetWidth)/32,Number(this._measureElement.offsetHeight)),this._result}}class r extends m{constructor(s){super(),this._optionsService=s,this._canvas=new OffscreenCanvas(100,100),this._ctx=this._canvas.getContext("2d");const n=this._ctx.measureText("W");if(!("width"in n&&"fontBoundingBoxAscent"in n&&"fontBoundingBoxDescent"in n))throw new Error("Required font metrics not supported")}measure(){this._ctx.font=`${this._optionsService.rawOptions.fontSize}px ${this._optionsService.rawOptions.fontFamily}`;const s=this._ctx.measureText("W");return this._validateAndSet(s.width,s.fontBoundingBoxAscent+s.fontBoundingBoxDescent),this._result}}},4269:function(D,o,i){var d=this&&this.__decorate||function(r,t,s,n){var p,a=arguments.length,b=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,s):n;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")b=Reflect.decorate(r,t,s,n);else for(var f=r.length-1;f>=0;f--)(p=r[f])&&(b=(a<3?p(b):a>3?p(t,s,b):p(t,s))||b);return a>3&&b&&Object.defineProperty(t,s,b),b},v=this&&this.__param||function(r,t){return function(s,n){t(s,n,r)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CharacterJoinerService=o.JoinedCellData=void 0;const c=i(3734),_=i(643),C=i(511),S=i(2585);class m extends c.AttributeData{constructor(t,s,n){super(),this.content=0,this.combinedData="",this.fg=t.fg,this.bg=t.bg,this.combinedData=s,this._width=n}isCombined(){return 2097152}getWidth(){return this._width}getChars(){return this.combinedData}getCode(){return 2097151}setFromCharData(t){throw new Error("not implemented")}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.JoinedCellData=m;let l=o.CharacterJoinerService=class Kn{constructor(t){this._bufferService=t,this._characterJoiners=[],this._nextCharacterJoinerId=0,this._workCell=new C.CellData}register(t){const s={id:this._nextCharacterJoinerId++,handler:t};return this._characterJoiners.push(s),s.id}deregister(t){for(let s=0;s<this._characterJoiners.length;s++)if(this._characterJoiners[s].id===t)return this._characterJoiners.splice(s,1),!0;return!1}getJoinedCharacters(t){if(this._characterJoiners.length===0)return[];const s=this._bufferService.buffer.lines.get(t);if(!s||s.length===0)return[];const n=[],p=s.translateToString(!0);let a=0,b=0,f=0,w=s.getFg(0),M=s.getBg(0);for(let N=0;N<s.getTrimmedLength();N++)if(s.loadCell(N,this._workCell),this._workCell.getWidth()!==0){if(this._workCell.fg!==w||this._workCell.bg!==M){if(N-a>1){const O=this._getJoinedRanges(p,f,b,s,a);for(let I=0;I<O.length;I++)n.push(O[I])}a=N,f=b,w=this._workCell.fg,M=this._workCell.bg}b+=this._workCell.getChars().length||_.WHITESPACE_CELL_CHAR.length}if(this._bufferService.cols-a>1){const N=this._getJoinedRanges(p,f,b,s,a);for(let O=0;O<N.length;O++)n.push(N[O])}return n}_getJoinedRanges(t,s,n,p,a){const b=t.substring(s,n);let f=[];try{f=this._characterJoiners[0].handler(b)}catch(w){console.error(w)}for(let w=1;w<this._characterJoiners.length;w++)try{const M=this._characterJoiners[w].handler(b);for(let N=0;N<M.length;N++)Kn._mergeRanges(f,M[N])}catch(M){console.error(M)}return this._stringRangesToCellRanges(f,p,a),f}_stringRangesToCellRanges(t,s,n){let p=0,a=!1,b=0,f=t[p];if(f){for(let w=n;w<this._bufferService.cols;w++){const M=s.getWidth(w),N=s.getString(w).length||_.WHITESPACE_CELL_CHAR.length;if(M!==0){if(!a&&f[0]<=b&&(f[0]=w,a=!0),f[1]<=b){if(f[1]=w,f=t[++p],!f)break;f[0]<=b?(f[0]=w,a=!0):a=!1}b+=N}}f&&(f[1]=this._bufferService.cols)}}static _mergeRanges(t,s){let n=!1;for(let p=0;p<t.length;p++){const a=t[p];if(n){if(s[1]<=a[0])return t[p-1][1]=s[1],t;if(s[1]<=a[1])return t[p-1][1]=Math.max(s[1],a[1]),t.splice(p,1),t;t.splice(p,1),p--}else{if(s[1]<=a[0])return t.splice(p,0,s),t;if(s[1]<=a[1])return a[0]=Math.min(s[0],a[0]),t;s[0]<a[1]&&(a[0]=Math.min(s[0],a[0]),n=!0)}}return n?t[t.length-1][1]=s[1]:t.push(s),t}};o.CharacterJoinerService=l=d([v(0,S.IBufferService)],l)},5114:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreBrowserService=void 0;const d=i(844),v=i(8460),c=i(3656);class _ extends d.Disposable{constructor(m,l,r){super(),this._textarea=m,this._window=l,this.mainDocument=r,this._isFocused=!1,this._cachedIsFocused=void 0,this._screenDprMonitor=new C(this._window),this._onDprChange=this.register(new v.EventEmitter),this.onDprChange=this._onDprChange.event,this._onWindowChange=this.register(new v.EventEmitter),this.onWindowChange=this._onWindowChange.event,this.register(this.onWindowChange((t=>this._screenDprMonitor.setWindow(t)))),this.register((0,v.forwardEvent)(this._screenDprMonitor.onDprChange,this._onDprChange)),this._textarea.addEventListener("focus",(()=>this._isFocused=!0)),this._textarea.addEventListener("blur",(()=>this._isFocused=!1))}get window(){return this._window}set window(m){this._window!==m&&(this._window=m,this._onWindowChange.fire(this._window))}get dpr(){return this.window.devicePixelRatio}get isFocused(){return this._cachedIsFocused===void 0&&(this._cachedIsFocused=this._isFocused&&this._textarea.ownerDocument.hasFocus(),queueMicrotask((()=>this._cachedIsFocused=void 0))),this._cachedIsFocused}}o.CoreBrowserService=_;class C extends d.Disposable{constructor(m){super(),this._parentWindow=m,this._windowResizeListener=this.register(new d.MutableDisposable),this._onDprChange=this.register(new v.EventEmitter),this.onDprChange=this._onDprChange.event,this._outerListener=()=>this._setDprAndFireIfDiffers(),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._updateDpr(),this._setWindowResizeListener(),this.register((0,d.toDisposable)((()=>this.clearListener())))}setWindow(m){this._parentWindow=m,this._setWindowResizeListener(),this._setDprAndFireIfDiffers()}_setWindowResizeListener(){this._windowResizeListener.value=(0,c.addDisposableDomListener)(this._parentWindow,"resize",(()=>this._setDprAndFireIfDiffers()))}_setDprAndFireIfDiffers(){this._parentWindow.devicePixelRatio!==this._currentDevicePixelRatio&&this._onDprChange.fire(this._parentWindow.devicePixelRatio),this._updateDpr()}_updateDpr(){this._outerListener&&(this._resolutionMediaMatchList?.removeListener(this._outerListener),this._currentDevicePixelRatio=this._parentWindow.devicePixelRatio,this._resolutionMediaMatchList=this._parentWindow.matchMedia(`screen and (resolution: ${this._parentWindow.devicePixelRatio}dppx)`),this._resolutionMediaMatchList.addListener(this._outerListener))}clearListener(){this._resolutionMediaMatchList&&this._outerListener&&(this._resolutionMediaMatchList.removeListener(this._outerListener),this._resolutionMediaMatchList=void 0,this._outerListener=void 0)}}},779:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.LinkProviderService=void 0;const d=i(844);class v extends d.Disposable{constructor(){super(),this.linkProviders=[],this.register((0,d.toDisposable)((()=>this.linkProviders.length=0)))}registerLinkProvider(_){return this.linkProviders.push(_),{dispose:()=>{const C=this.linkProviders.indexOf(_);C!==-1&&this.linkProviders.splice(C,1)}}}}o.LinkProviderService=v},8934:function(D,o,i){var d=this&&this.__decorate||function(S,m,l,r){var t,s=arguments.length,n=s<3?m:r===null?r=Object.getOwnPropertyDescriptor(m,l):r;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(S,m,l,r);else for(var p=S.length-1;p>=0;p--)(t=S[p])&&(n=(s<3?t(n):s>3?t(m,l,n):t(m,l))||n);return s>3&&n&&Object.defineProperty(m,l,n),n},v=this&&this.__param||function(S,m){return function(l,r){m(l,r,S)}};Object.defineProperty(o,"__esModule",{value:!0}),o.MouseService=void 0;const c=i(4725),_=i(9806);let C=o.MouseService=class{constructor(S,m){this._renderService=S,this._charSizeService=m}getCoords(S,m,l,r,t){return(0,_.getCoords)(window,S,m,l,r,this._charSizeService.hasValidSize,this._renderService.dimensions.css.cell.width,this._renderService.dimensions.css.cell.height,t)}getMouseReportCoords(S,m){const l=(0,_.getCoordsRelativeToElement)(window,S,m);if(this._charSizeService.hasValidSize)return l[0]=Math.min(Math.max(l[0],0),this._renderService.dimensions.css.canvas.width-1),l[1]=Math.min(Math.max(l[1],0),this._renderService.dimensions.css.canvas.height-1),{col:Math.floor(l[0]/this._renderService.dimensions.css.cell.width),row:Math.floor(l[1]/this._renderService.dimensions.css.cell.height),x:Math.floor(l[0]),y:Math.floor(l[1])}}};o.MouseService=C=d([v(0,c.IRenderService),v(1,c.ICharSizeService)],C)},3230:function(D,o,i){var d=this&&this.__decorate||function(t,s,n,p){var a,b=arguments.length,f=b<3?s:p===null?p=Object.getOwnPropertyDescriptor(s,n):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(t,s,n,p);else for(var w=t.length-1;w>=0;w--)(a=t[w])&&(f=(b<3?a(f):b>3?a(s,n,f):a(s,n))||f);return b>3&&f&&Object.defineProperty(s,n,f),f},v=this&&this.__param||function(t,s){return function(n,p){s(n,p,t)}};Object.defineProperty(o,"__esModule",{value:!0}),o.RenderService=void 0;const c=i(6193),_=i(4725),C=i(8460),S=i(844),m=i(7226),l=i(2585);let r=o.RenderService=class extends S.Disposable{get dimensions(){return this._renderer.value.dimensions}constructor(t,s,n,p,a,b,f,w){super(),this._rowCount=t,this._charSizeService=p,this._renderer=this.register(new S.MutableDisposable),this._pausedResizeTask=new m.DebouncedIdleTask,this._observerDisposable=this.register(new S.MutableDisposable),this._isPaused=!1,this._needsFullRefresh=!1,this._isNextRenderRedrawOnly=!0,this._needsSelectionRefresh=!1,this._canvasWidth=0,this._canvasHeight=0,this._selectionState={start:void 0,end:void 0,columnSelectMode:!1},this._onDimensionsChange=this.register(new C.EventEmitter),this.onDimensionsChange=this._onDimensionsChange.event,this._onRenderedViewportChange=this.register(new C.EventEmitter),this.onRenderedViewportChange=this._onRenderedViewportChange.event,this._onRender=this.register(new C.EventEmitter),this.onRender=this._onRender.event,this._onRefreshRequest=this.register(new C.EventEmitter),this.onRefreshRequest=this._onRefreshRequest.event,this._renderDebouncer=new c.RenderDebouncer(((M,N)=>this._renderRows(M,N)),f),this.register(this._renderDebouncer),this.register(f.onDprChange((()=>this.handleDevicePixelRatioChange()))),this.register(b.onResize((()=>this._fullRefresh()))),this.register(b.buffers.onBufferActivate((()=>this._renderer.value?.clear()))),this.register(n.onOptionChange((()=>this._handleOptionsChanged()))),this.register(this._charSizeService.onCharSizeChange((()=>this.handleCharSizeChanged()))),this.register(a.onDecorationRegistered((()=>this._fullRefresh()))),this.register(a.onDecorationRemoved((()=>this._fullRefresh()))),this.register(n.onMultipleOptionChange(["customGlyphs","drawBoldTextInBrightColors","letterSpacing","lineHeight","fontFamily","fontSize","fontWeight","fontWeightBold","minimumContrastRatio","rescaleOverlappingGlyphs"],(()=>{this.clear(),this.handleResize(b.cols,b.rows),this._fullRefresh()}))),this.register(n.onMultipleOptionChange(["cursorBlink","cursorStyle"],(()=>this.refreshRows(b.buffer.y,b.buffer.y,!0)))),this.register(w.onChangeColors((()=>this._fullRefresh()))),this._registerIntersectionObserver(f.window,s),this.register(f.onWindowChange((M=>this._registerIntersectionObserver(M,s))))}_registerIntersectionObserver(t,s){if("IntersectionObserver"in t){const n=new t.IntersectionObserver((p=>this._handleIntersectionChange(p[p.length-1])),{threshold:0});n.observe(s),this._observerDisposable.value=(0,S.toDisposable)((()=>n.disconnect()))}}_handleIntersectionChange(t){this._isPaused=t.isIntersecting===void 0?t.intersectionRatio===0:!t.isIntersecting,this._isPaused||this._charSizeService.hasValidSize||this._charSizeService.measure(),!this._isPaused&&this._needsFullRefresh&&(this._pausedResizeTask.flush(),this.refreshRows(0,this._rowCount-1),this._needsFullRefresh=!1)}refreshRows(t,s,n=!1){this._isPaused?this._needsFullRefresh=!0:(n||(this._isNextRenderRedrawOnly=!1),this._renderDebouncer.refresh(t,s,this._rowCount))}_renderRows(t,s){this._renderer.value&&(t=Math.min(t,this._rowCount-1),s=Math.min(s,this._rowCount-1),this._renderer.value.renderRows(t,s),this._needsSelectionRefresh&&(this._renderer.value.handleSelectionChanged(this._selectionState.start,this._selectionState.end,this._selectionState.columnSelectMode),this._needsSelectionRefresh=!1),this._isNextRenderRedrawOnly||this._onRenderedViewportChange.fire({start:t,end:s}),this._onRender.fire({start:t,end:s}),this._isNextRenderRedrawOnly=!0)}resize(t,s){this._rowCount=s,this._fireOnCanvasResize()}_handleOptionsChanged(){this._renderer.value&&(this.refreshRows(0,this._rowCount-1),this._fireOnCanvasResize())}_fireOnCanvasResize(){this._renderer.value&&(this._renderer.value.dimensions.css.canvas.width===this._canvasWidth&&this._renderer.value.dimensions.css.canvas.height===this._canvasHeight||this._onDimensionsChange.fire(this._renderer.value.dimensions))}hasRenderer(){return!!this._renderer.value}setRenderer(t){this._renderer.value=t,this._renderer.value&&(this._renderer.value.onRequestRedraw((s=>this.refreshRows(s.start,s.end,!0))),this._needsSelectionRefresh=!0,this._fullRefresh())}addRefreshCallback(t){return this._renderDebouncer.addRefreshCallback(t)}_fullRefresh(){this._isPaused?this._needsFullRefresh=!0:this.refreshRows(0,this._rowCount-1)}clearTextureAtlas(){this._renderer.value&&(this._renderer.value.clearTextureAtlas?.(),this._fullRefresh())}handleDevicePixelRatioChange(){this._charSizeService.measure(),this._renderer.value&&(this._renderer.value.handleDevicePixelRatioChange(),this.refreshRows(0,this._rowCount-1))}handleResize(t,s){this._renderer.value&&(this._isPaused?this._pausedResizeTask.set((()=>this._renderer.value?.handleResize(t,s))):this._renderer.value.handleResize(t,s),this._fullRefresh())}handleCharSizeChanged(){this._renderer.value?.handleCharSizeChanged()}handleBlur(){this._renderer.value?.handleBlur()}handleFocus(){this._renderer.value?.handleFocus()}handleSelectionChanged(t,s,n){this._selectionState.start=t,this._selectionState.end=s,this._selectionState.columnSelectMode=n,this._renderer.value?.handleSelectionChanged(t,s,n)}handleCursorMove(){this._renderer.value?.handleCursorMove()}clear(){this._renderer.value?.clear()}};o.RenderService=r=d([v(2,l.IOptionsService),v(3,_.ICharSizeService),v(4,l.IDecorationService),v(5,l.IBufferService),v(6,_.ICoreBrowserService),v(7,_.IThemeService)],r)},9312:function(D,o,i){var d=this&&this.__decorate||function(f,w,M,N){var O,I=arguments.length,z=I<3?w:N===null?N=Object.getOwnPropertyDescriptor(w,M):N;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")z=Reflect.decorate(f,w,M,N);else for(var Y=f.length-1;Y>=0;Y--)(O=f[Y])&&(z=(I<3?O(z):I>3?O(w,M,z):O(w,M))||z);return I>3&&z&&Object.defineProperty(w,M,z),z},v=this&&this.__param||function(f,w){return function(M,N){w(M,N,f)}};Object.defineProperty(o,"__esModule",{value:!0}),o.SelectionService=void 0;const c=i(9806),_=i(9504),C=i(456),S=i(4725),m=i(8460),l=i(844),r=i(6114),t=i(4841),s=i(511),n=i(2585),p="",a=new RegExp(p,"g");let b=o.SelectionService=class extends l.Disposable{constructor(f,w,M,N,O,I,z,Y,ne){super(),this._element=f,this._screenElement=w,this._linkifier=M,this._bufferService=N,this._coreService=O,this._mouseService=I,this._optionsService=z,this._renderService=Y,this._coreBrowserService=ne,this._dragScrollAmount=0,this._enabled=!0,this._workCell=new s.CellData,this._mouseDownTimeStamp=0,this._oldHasSelection=!1,this._oldSelectionStart=void 0,this._oldSelectionEnd=void 0,this._onLinuxMouseSelection=this.register(new m.EventEmitter),this.onLinuxMouseSelection=this._onLinuxMouseSelection.event,this._onRedrawRequest=this.register(new m.EventEmitter),this.onRequestRedraw=this._onRedrawRequest.event,this._onSelectionChange=this.register(new m.EventEmitter),this.onSelectionChange=this._onSelectionChange.event,this._onRequestScrollLines=this.register(new m.EventEmitter),this.onRequestScrollLines=this._onRequestScrollLines.event,this._mouseMoveListener=U=>this._handleMouseMove(U),this._mouseUpListener=U=>this._handleMouseUp(U),this._coreService.onUserInput((()=>{this.hasSelection&&this.clearSelection()})),this._trimListener=this._bufferService.buffer.lines.onTrim((U=>this._handleTrim(U))),this.register(this._bufferService.buffers.onBufferActivate((U=>this._handleBufferActivate(U)))),this.enable(),this._model=new C.SelectionModel(this._bufferService),this._activeSelectionMode=0,this.register((0,l.toDisposable)((()=>{this._removeMouseDownListeners()})))}reset(){this.clearSelection()}disable(){this.clearSelection(),this._enabled=!1}enable(){this._enabled=!0}get selectionStart(){return this._model.finalSelectionStart}get selectionEnd(){return this._model.finalSelectionEnd}get hasSelection(){const f=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;return!(!f||!w||f[0]===w[0]&&f[1]===w[1])}get selectionText(){const f=this._model.finalSelectionStart,w=this._model.finalSelectionEnd;if(!f||!w)return"";const M=this._bufferService.buffer,N=[];if(this._activeSelectionMode===3){if(f[0]===w[0])return"";const O=f[0]<w[0]?f[0]:w[0],I=f[0]<w[0]?w[0]:f[0];for(let z=f[1];z<=w[1];z++){const Y=M.translateBufferLineToString(z,!0,O,I);N.push(Y)}}else{const O=f[1]===w[1]?w[0]:void 0;N.push(M.translateBufferLineToString(f[1],!0,f[0],O));for(let I=f[1]+1;I<=w[1]-1;I++){const z=M.lines.get(I),Y=M.translateBufferLineToString(I,!0);z?.isWrapped?N[N.length-1]+=Y:N.push(Y)}if(f[1]!==w[1]){const I=M.lines.get(w[1]),z=M.translateBufferLineToString(w[1],!0,0,w[0]);I&&I.isWrapped?N[N.length-1]+=z:N.push(z)}}return N.map((O=>O.replace(a," "))).join(r.isWindows?`\r
`:`
`)}clearSelection(){this._model.clearSelection(),this._removeMouseDownListeners(),this.refresh(),this._onSelectionChange.fire()}refresh(f){this._refreshAnimationFrame||(this._refreshAnimationFrame=this._coreBrowserService.window.requestAnimationFrame((()=>this._refresh()))),r.isLinux&&f&&this.selectionText.length&&this._onLinuxMouseSelection.fire(this.selectionText)}_refresh(){this._refreshAnimationFrame=void 0,this._onRedrawRequest.fire({start:this._model.finalSelectionStart,end:this._model.finalSelectionEnd,columnSelectMode:this._activeSelectionMode===3})}_isClickInSelection(f){const w=this._getMouseBufferCoords(f),M=this._model.finalSelectionStart,N=this._model.finalSelectionEnd;return!!(M&&N&&w)&&this._areCoordsInSelection(w,M,N)}isCellInSelection(f,w){const M=this._model.finalSelectionStart,N=this._model.finalSelectionEnd;return!(!M||!N)&&this._areCoordsInSelection([f,w],M,N)}_areCoordsInSelection(f,w,M){return f[1]>w[1]&&f[1]<M[1]||w[1]===M[1]&&f[1]===w[1]&&f[0]>=w[0]&&f[0]<M[0]||w[1]<M[1]&&f[1]===M[1]&&f[0]<M[0]||w[1]<M[1]&&f[1]===w[1]&&f[0]>=w[0]}_selectWordAtCursor(f,w){const M=this._linkifier.currentLink?.link?.range;if(M)return this._model.selectionStart=[M.start.x-1,M.start.y-1],this._model.selectionStartLength=(0,t.getRangeLength)(M,this._bufferService.cols),this._model.selectionEnd=void 0,!0;const N=this._getMouseBufferCoords(f);return!!N&&(this._selectWordAt(N,w),this._model.selectionEnd=void 0,!0)}selectAll(){this._model.isSelectAllActive=!0,this.refresh(),this._onSelectionChange.fire()}selectLines(f,w){this._model.clearSelection(),f=Math.max(f,0),w=Math.min(w,this._bufferService.buffer.lines.length-1),this._model.selectionStart=[0,f],this._model.selectionEnd=[this._bufferService.cols,w],this.refresh(),this._onSelectionChange.fire()}_handleTrim(f){this._model.handleTrim(f)&&this.refresh()}_getMouseBufferCoords(f){const w=this._mouseService.getCoords(f,this._screenElement,this._bufferService.cols,this._bufferService.rows,!0);if(w)return w[0]--,w[1]--,w[1]+=this._bufferService.buffer.ydisp,w}_getMouseEventScrollAmount(f){let w=(0,c.getCoordsRelativeToElement)(this._coreBrowserService.window,f,this._screenElement)[1];const M=this._renderService.dimensions.css.canvas.height;return w>=0&&w<=M?0:(w>M&&(w-=M),w=Math.min(Math.max(w,-50),50),w/=50,w/Math.abs(w)+Math.round(14*w))}shouldForceSelection(f){return r.isMac?f.altKey&&this._optionsService.rawOptions.macOptionClickForcesSelection:f.shiftKey}handleMouseDown(f){if(this._mouseDownTimeStamp=f.timeStamp,(f.button!==2||!this.hasSelection)&&f.button===0){if(!this._enabled){if(!this.shouldForceSelection(f))return;f.stopPropagation()}f.preventDefault(),this._dragScrollAmount=0,this._enabled&&f.shiftKey?this._handleIncrementalClick(f):f.detail===1?this._handleSingleClick(f):f.detail===2?this._handleDoubleClick(f):f.detail===3&&this._handleTripleClick(f),this._addMouseDownListeners(),this.refresh(!0)}}_addMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.addEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.addEventListener("mouseup",this._mouseUpListener)),this._dragScrollIntervalTimer=this._coreBrowserService.window.setInterval((()=>this._dragScroll()),50)}_removeMouseDownListeners(){this._screenElement.ownerDocument&&(this._screenElement.ownerDocument.removeEventListener("mousemove",this._mouseMoveListener),this._screenElement.ownerDocument.removeEventListener("mouseup",this._mouseUpListener)),this._coreBrowserService.window.clearInterval(this._dragScrollIntervalTimer),this._dragScrollIntervalTimer=void 0}_handleIncrementalClick(f){this._model.selectionStart&&(this._model.selectionEnd=this._getMouseBufferCoords(f))}_handleSingleClick(f){if(this._model.selectionStartLength=0,this._model.isSelectAllActive=!1,this._activeSelectionMode=this.shouldColumnSelect(f)?3:0,this._model.selectionStart=this._getMouseBufferCoords(f),!this._model.selectionStart)return;this._model.selectionEnd=void 0;const w=this._bufferService.buffer.lines.get(this._model.selectionStart[1]);w&&w.length!==this._model.selectionStart[0]&&w.hasWidth(this._model.selectionStart[0])===0&&this._model.selectionStart[0]++}_handleDoubleClick(f){this._selectWordAtCursor(f,!0)&&(this._activeSelectionMode=1)}_handleTripleClick(f){const w=this._getMouseBufferCoords(f);w&&(this._activeSelectionMode=2,this._selectLineAt(w[1]))}shouldColumnSelect(f){return f.altKey&&!(r.isMac&&this._optionsService.rawOptions.macOptionClickForcesSelection)}_handleMouseMove(f){if(f.stopImmediatePropagation(),!this._model.selectionStart)return;const w=this._model.selectionEnd?[this._model.selectionEnd[0],this._model.selectionEnd[1]]:null;if(this._model.selectionEnd=this._getMouseBufferCoords(f),!this._model.selectionEnd)return void this.refresh(!0);this._activeSelectionMode===2?this._model.selectionEnd[1]<this._model.selectionStart[1]?this._model.selectionEnd[0]=0:this._model.selectionEnd[0]=this._bufferService.cols:this._activeSelectionMode===1&&this._selectToWordAt(this._model.selectionEnd),this._dragScrollAmount=this._getMouseEventScrollAmount(f),this._activeSelectionMode!==3&&(this._dragScrollAmount>0?this._model.selectionEnd[0]=this._bufferService.cols:this._dragScrollAmount<0&&(this._model.selectionEnd[0]=0));const M=this._bufferService.buffer;if(this._model.selectionEnd[1]<M.lines.length){const N=M.lines.get(this._model.selectionEnd[1]);N&&N.hasWidth(this._model.selectionEnd[0])===0&&this._model.selectionEnd[0]<this._bufferService.cols&&this._model.selectionEnd[0]++}w&&w[0]===this._model.selectionEnd[0]&&w[1]===this._model.selectionEnd[1]||this.refresh(!0)}_dragScroll(){if(this._model.selectionEnd&&this._model.selectionStart&&this._dragScrollAmount){this._onRequestScrollLines.fire({amount:this._dragScrollAmount,suppressScrollEvent:!1});const f=this._bufferService.buffer;this._dragScrollAmount>0?(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=this._bufferService.cols),this._model.selectionEnd[1]=Math.min(f.ydisp+this._bufferService.rows,f.lines.length-1)):(this._activeSelectionMode!==3&&(this._model.selectionEnd[0]=0),this._model.selectionEnd[1]=f.ydisp),this.refresh()}}_handleMouseUp(f){const w=f.timeStamp-this._mouseDownTimeStamp;if(this._removeMouseDownListeners(),this.selectionText.length<=1&&w<500&&f.altKey&&this._optionsService.rawOptions.altClickMovesCursor){if(this._bufferService.buffer.ybase===this._bufferService.buffer.ydisp){const M=this._mouseService.getCoords(f,this._element,this._bufferService.cols,this._bufferService.rows,!1);if(M&&M[0]!==void 0&&M[1]!==void 0){const N=(0,_.moveToCellSequence)(M[0]-1,M[1]-1,this._bufferService,this._coreService.decPrivateModes.applicationCursorKeys);this._coreService.triggerDataEvent(N,!0)}}}else this._fireEventIfSelectionChanged()}_fireEventIfSelectionChanged(){const f=this._model.finalSelectionStart,w=this._model.finalSelectionEnd,M=!(!f||!w||f[0]===w[0]&&f[1]===w[1]);M?f&&w&&(this._oldSelectionStart&&this._oldSelectionEnd&&f[0]===this._oldSelectionStart[0]&&f[1]===this._oldSelectionStart[1]&&w[0]===this._oldSelectionEnd[0]&&w[1]===this._oldSelectionEnd[1]||this._fireOnSelectionChange(f,w,M)):this._oldHasSelection&&this._fireOnSelectionChange(f,w,M)}_fireOnSelectionChange(f,w,M){this._oldSelectionStart=f,this._oldSelectionEnd=w,this._oldHasSelection=M,this._onSelectionChange.fire()}_handleBufferActivate(f){this.clearSelection(),this._trimListener.dispose(),this._trimListener=f.activeBuffer.lines.onTrim((w=>this._handleTrim(w)))}_convertViewportColToCharacterIndex(f,w){let M=w;for(let N=0;w>=N;N++){const O=f.loadCell(N,this._workCell).getChars().length;this._workCell.getWidth()===0?M--:O>1&&w!==N&&(M+=O-1)}return M}setSelection(f,w,M){this._model.clearSelection(),this._removeMouseDownListeners(),this._model.selectionStart=[f,w],this._model.selectionStartLength=M,this.refresh(),this._fireEventIfSelectionChanged()}rightClickSelect(f){this._isClickInSelection(f)||(this._selectWordAtCursor(f,!1)&&this.refresh(!0),this._fireEventIfSelectionChanged())}_getWordAt(f,w,M=!0,N=!0){if(f[0]>=this._bufferService.cols)return;const O=this._bufferService.buffer,I=O.lines.get(f[1]);if(!I)return;const z=O.translateBufferLineToString(f[1],!1);let Y=this._convertViewportColToCharacterIndex(I,f[0]),ne=Y;const U=f[0]-Y;let se=0,T=0,P=0,F=0;if(z.charAt(Y)===" "){for(;Y>0&&z.charAt(Y-1)===" ";)Y--;for(;ne<z.length&&z.charAt(ne+1)===" ";)ne++}else{let ce=f[0],ee=f[0];I.getWidth(ce)===0&&(se++,ce--),I.getWidth(ee)===2&&(T++,ee++);const _e=I.getString(ee).length;for(_e>1&&(F+=_e-1,ne+=_e-1);ce>0&&Y>0&&!this._isCharWordSeparator(I.loadCell(ce-1,this._workCell));){I.loadCell(ce-1,this._workCell);const V=this._workCell.getChars().length;this._workCell.getWidth()===0?(se++,ce--):V>1&&(P+=V-1,Y-=V-1),Y--,ce--}for(;ee<I.length&&ne+1<z.length&&!this._isCharWordSeparator(I.loadCell(ee+1,this._workCell));){I.loadCell(ee+1,this._workCell);const V=this._workCell.getChars().length;this._workCell.getWidth()===2?(T++,ee++):V>1&&(F+=V-1,ne+=V-1),ne++,ee++}}ne++;let W=Y+U-se+P,Q=Math.min(this._bufferService.cols,ne-Y+se+T-P-F);if(w||z.slice(Y,ne).trim()!==""){if(M&&W===0&&I.getCodePoint(0)!==32){const ce=O.lines.get(f[1]-1);if(ce&&I.isWrapped&&ce.getCodePoint(this._bufferService.cols-1)!==32){const ee=this._getWordAt([this._bufferService.cols-1,f[1]-1],!1,!0,!1);if(ee){const _e=this._bufferService.cols-ee.start;W-=_e,Q+=_e}}}if(N&&W+Q===this._bufferService.cols&&I.getCodePoint(this._bufferService.cols-1)!==32){const ce=O.lines.get(f[1]+1);if(ce?.isWrapped&&ce.getCodePoint(0)!==32){const ee=this._getWordAt([0,f[1]+1],!1,!1,!0);ee&&(Q+=ee.length)}}return{start:W,length:Q}}}_selectWordAt(f,w){const M=this._getWordAt(f,w);if(M){for(;M.start<0;)M.start+=this._bufferService.cols,f[1]--;this._model.selectionStart=[M.start,f[1]],this._model.selectionStartLength=M.length}}_selectToWordAt(f){const w=this._getWordAt(f,!0);if(w){let M=f[1];for(;w.start<0;)w.start+=this._bufferService.cols,M--;if(!this._model.areSelectionValuesReversed())for(;w.start+w.length>this._bufferService.cols;)w.length-=this._bufferService.cols,M++;this._model.selectionEnd=[this._model.areSelectionValuesReversed()?w.start:w.start+w.length,M]}}_isCharWordSeparator(f){return f.getWidth()!==0&&this._optionsService.rawOptions.wordSeparator.indexOf(f.getChars())>=0}_selectLineAt(f){const w=this._bufferService.buffer.getWrappedRangeForLine(f),M={start:{x:0,y:w.first},end:{x:this._bufferService.cols-1,y:w.last}};this._model.selectionStart=[0,w.first],this._model.selectionEnd=void 0,this._model.selectionStartLength=(0,t.getRangeLength)(M,this._bufferService.cols)}};o.SelectionService=b=d([v(3,n.IBufferService),v(4,n.ICoreService),v(5,S.IMouseService),v(6,n.IOptionsService),v(7,S.IRenderService),v(8,S.ICoreBrowserService)],b)},4725:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ILinkProviderService=o.IThemeService=o.ICharacterJoinerService=o.ISelectionService=o.IRenderService=o.IMouseService=o.ICoreBrowserService=o.ICharSizeService=void 0;const d=i(8343);o.ICharSizeService=(0,d.createDecorator)("CharSizeService"),o.ICoreBrowserService=(0,d.createDecorator)("CoreBrowserService"),o.IMouseService=(0,d.createDecorator)("MouseService"),o.IRenderService=(0,d.createDecorator)("RenderService"),o.ISelectionService=(0,d.createDecorator)("SelectionService"),o.ICharacterJoinerService=(0,d.createDecorator)("CharacterJoinerService"),o.IThemeService=(0,d.createDecorator)("ThemeService"),o.ILinkProviderService=(0,d.createDecorator)("LinkProviderService")},6731:function(D,o,i){var d=this&&this.__decorate||function(b,f,w,M){var N,O=arguments.length,I=O<3?f:M===null?M=Object.getOwnPropertyDescriptor(f,w):M;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")I=Reflect.decorate(b,f,w,M);else for(var z=b.length-1;z>=0;z--)(N=b[z])&&(I=(O<3?N(I):O>3?N(f,w,I):N(f,w))||I);return O>3&&I&&Object.defineProperty(f,w,I),I},v=this&&this.__param||function(b,f){return function(w,M){f(w,M,b)}};Object.defineProperty(o,"__esModule",{value:!0}),o.ThemeService=o.DEFAULT_ANSI_COLORS=void 0;const c=i(7239),_=i(8055),C=i(8460),S=i(844),m=i(2585),l=_.css.toColor("#ffffff"),r=_.css.toColor("#000000"),t=_.css.toColor("#ffffff"),s=_.css.toColor("#000000"),n={css:"rgba(255, 255, 255, 0.3)",rgba:4294967117};o.DEFAULT_ANSI_COLORS=Object.freeze((()=>{const b=[_.css.toColor("#2e3436"),_.css.toColor("#cc0000"),_.css.toColor("#4e9a06"),_.css.toColor("#c4a000"),_.css.toColor("#3465a4"),_.css.toColor("#75507b"),_.css.toColor("#06989a"),_.css.toColor("#d3d7cf"),_.css.toColor("#555753"),_.css.toColor("#ef2929"),_.css.toColor("#8ae234"),_.css.toColor("#fce94f"),_.css.toColor("#729fcf"),_.css.toColor("#ad7fa8"),_.css.toColor("#34e2e2"),_.css.toColor("#eeeeec")],f=[0,95,135,175,215,255];for(let w=0;w<216;w++){const M=f[w/36%6|0],N=f[w/6%6|0],O=f[w%6];b.push({css:_.channels.toCss(M,N,O),rgba:_.channels.toRgba(M,N,O)})}for(let w=0;w<24;w++){const M=8+10*w;b.push({css:_.channels.toCss(M,M,M),rgba:_.channels.toRgba(M,M,M)})}return b})());let p=o.ThemeService=class extends S.Disposable{get colors(){return this._colors}constructor(b){super(),this._optionsService=b,this._contrastCache=new c.ColorContrastCache,this._halfContrastCache=new c.ColorContrastCache,this._onChangeColors=this.register(new C.EventEmitter),this.onChangeColors=this._onChangeColors.event,this._colors={foreground:l,background:r,cursor:t,cursorAccent:s,selectionForeground:void 0,selectionBackgroundTransparent:n,selectionBackgroundOpaque:_.color.blend(r,n),selectionInactiveBackgroundTransparent:n,selectionInactiveBackgroundOpaque:_.color.blend(r,n),ansi:o.DEFAULT_ANSI_COLORS.slice(),contrastCache:this._contrastCache,halfContrastCache:this._halfContrastCache},this._updateRestoreColors(),this._setTheme(this._optionsService.rawOptions.theme),this.register(this._optionsService.onSpecificOptionChange("minimumContrastRatio",(()=>this._contrastCache.clear()))),this.register(this._optionsService.onSpecificOptionChange("theme",(()=>this._setTheme(this._optionsService.rawOptions.theme))))}_setTheme(b={}){const f=this._colors;if(f.foreground=a(b.foreground,l),f.background=a(b.background,r),f.cursor=a(b.cursor,t),f.cursorAccent=a(b.cursorAccent,s),f.selectionBackgroundTransparent=a(b.selectionBackground,n),f.selectionBackgroundOpaque=_.color.blend(f.background,f.selectionBackgroundTransparent),f.selectionInactiveBackgroundTransparent=a(b.selectionInactiveBackground,f.selectionBackgroundTransparent),f.selectionInactiveBackgroundOpaque=_.color.blend(f.background,f.selectionInactiveBackgroundTransparent),f.selectionForeground=b.selectionForeground?a(b.selectionForeground,_.NULL_COLOR):void 0,f.selectionForeground===_.NULL_COLOR&&(f.selectionForeground=void 0),_.color.isOpaque(f.selectionBackgroundTransparent)&&(f.selectionBackgroundTransparent=_.color.opacity(f.selectionBackgroundTransparent,.3)),_.color.isOpaque(f.selectionInactiveBackgroundTransparent)&&(f.selectionInactiveBackgroundTransparent=_.color.opacity(f.selectionInactiveBackgroundTransparent,.3)),f.ansi=o.DEFAULT_ANSI_COLORS.slice(),f.ansi[0]=a(b.black,o.DEFAULT_ANSI_COLORS[0]),f.ansi[1]=a(b.red,o.DEFAULT_ANSI_COLORS[1]),f.ansi[2]=a(b.green,o.DEFAULT_ANSI_COLORS[2]),f.ansi[3]=a(b.yellow,o.DEFAULT_ANSI_COLORS[3]),f.ansi[4]=a(b.blue,o.DEFAULT_ANSI_COLORS[4]),f.ansi[5]=a(b.magenta,o.DEFAULT_ANSI_COLORS[5]),f.ansi[6]=a(b.cyan,o.DEFAULT_ANSI_COLORS[6]),f.ansi[7]=a(b.white,o.DEFAULT_ANSI_COLORS[7]),f.ansi[8]=a(b.brightBlack,o.DEFAULT_ANSI_COLORS[8]),f.ansi[9]=a(b.brightRed,o.DEFAULT_ANSI_COLORS[9]),f.ansi[10]=a(b.brightGreen,o.DEFAULT_ANSI_COLORS[10]),f.ansi[11]=a(b.brightYellow,o.DEFAULT_ANSI_COLORS[11]),f.ansi[12]=a(b.brightBlue,o.DEFAULT_ANSI_COLORS[12]),f.ansi[13]=a(b.brightMagenta,o.DEFAULT_ANSI_COLORS[13]),f.ansi[14]=a(b.brightCyan,o.DEFAULT_ANSI_COLORS[14]),f.ansi[15]=a(b.brightWhite,o.DEFAULT_ANSI_COLORS[15]),b.extendedAnsi){const w=Math.min(f.ansi.length-16,b.extendedAnsi.length);for(let M=0;M<w;M++)f.ansi[M+16]=a(b.extendedAnsi[M],o.DEFAULT_ANSI_COLORS[M+16])}this._contrastCache.clear(),this._halfContrastCache.clear(),this._updateRestoreColors(),this._onChangeColors.fire(this.colors)}restoreColor(b){this._restoreColor(b),this._onChangeColors.fire(this.colors)}_restoreColor(b){if(b!==void 0)switch(b){case 256:this._colors.foreground=this._restoreColors.foreground;break;case 257:this._colors.background=this._restoreColors.background;break;case 258:this._colors.cursor=this._restoreColors.cursor;break;default:this._colors.ansi[b]=this._restoreColors.ansi[b]}else for(let f=0;f<this._restoreColors.ansi.length;++f)this._colors.ansi[f]=this._restoreColors.ansi[f]}modifyColors(b){b(this._colors),this._onChangeColors.fire(this.colors)}_updateRestoreColors(){this._restoreColors={foreground:this._colors.foreground,background:this._colors.background,cursor:this._colors.cursor,ansi:this._colors.ansi.slice()}}};function a(b,f){if(b!==void 0)try{return _.css.toColor(b)}catch{}return f}o.ThemeService=p=d([v(0,m.IOptionsService)],p)},6349:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CircularList=void 0;const d=i(8460),v=i(844);class c extends v.Disposable{constructor(C){super(),this._maxLength=C,this.onDeleteEmitter=this.register(new d.EventEmitter),this.onDelete=this.onDeleteEmitter.event,this.onInsertEmitter=this.register(new d.EventEmitter),this.onInsert=this.onInsertEmitter.event,this.onTrimEmitter=this.register(new d.EventEmitter),this.onTrim=this.onTrimEmitter.event,this._array=new Array(this._maxLength),this._startIndex=0,this._length=0}get maxLength(){return this._maxLength}set maxLength(C){if(this._maxLength===C)return;const S=new Array(C);for(let m=0;m<Math.min(C,this.length);m++)S[m]=this._array[this._getCyclicIndex(m)];this._array=S,this._maxLength=C,this._startIndex=0}get length(){return this._length}set length(C){if(C>this._length)for(let S=this._length;S<C;S++)this._array[S]=void 0;this._length=C}get(C){return this._array[this._getCyclicIndex(C)]}set(C,S){this._array[this._getCyclicIndex(C)]=S}push(C){this._array[this._getCyclicIndex(this._length)]=C,this._length===this._maxLength?(this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1)):this._length++}recycle(){if(this._length!==this._maxLength)throw new Error("Can only recycle when the buffer is full");return this._startIndex=++this._startIndex%this._maxLength,this.onTrimEmitter.fire(1),this._array[this._getCyclicIndex(this._length-1)]}get isFull(){return this._length===this._maxLength}pop(){return this._array[this._getCyclicIndex(this._length---1)]}splice(C,S,...m){if(S){for(let l=C;l<this._length-S;l++)this._array[this._getCyclicIndex(l)]=this._array[this._getCyclicIndex(l+S)];this._length-=S,this.onDeleteEmitter.fire({index:C,amount:S})}for(let l=this._length-1;l>=C;l--)this._array[this._getCyclicIndex(l+m.length)]=this._array[this._getCyclicIndex(l)];for(let l=0;l<m.length;l++)this._array[this._getCyclicIndex(C+l)]=m[l];if(m.length&&this.onInsertEmitter.fire({index:C,amount:m.length}),this._length+m.length>this._maxLength){const l=this._length+m.length-this._maxLength;this._startIndex+=l,this._length=this._maxLength,this.onTrimEmitter.fire(l)}else this._length+=m.length}trimStart(C){C>this._length&&(C=this._length),this._startIndex+=C,this._length-=C,this.onTrimEmitter.fire(C)}shiftElements(C,S,m){if(!(S<=0)){if(C<0||C>=this._length)throw new Error("start argument out of range");if(C+m<0)throw new Error("Cannot shift elements in list beyond index 0");if(m>0){for(let r=S-1;r>=0;r--)this.set(C+r+m,this.get(C+r));const l=C+S+m-this._length;if(l>0)for(this._length+=l;this._length>this._maxLength;)this._length--,this._startIndex++,this.onTrimEmitter.fire(1)}else for(let l=0;l<S;l++)this.set(C+l+m,this.get(C+l))}}_getCyclicIndex(C){return(this._startIndex+C)%this._maxLength}}o.CircularList=c},1439:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.clone=void 0,o.clone=function i(d,v=5){if(typeof d!="object")return d;const c=Array.isArray(d)?[]:{};for(const _ in d)c[_]=v<=1?d[_]:d[_]&&i(d[_],v-1);return c}},8055:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.contrastRatio=o.toPaddedHex=o.rgba=o.rgb=o.css=o.color=o.channels=o.NULL_COLOR=void 0;let i=0,d=0,v=0,c=0;var _,C,S,m,l;function r(s){const n=s.toString(16);return n.length<2?"0"+n:n}function t(s,n){return s<n?(n+.05)/(s+.05):(s+.05)/(n+.05)}o.NULL_COLOR={css:"#00000000",rgba:0},(function(s){s.toCss=function(n,p,a,b){return b!==void 0?`#${r(n)}${r(p)}${r(a)}${r(b)}`:`#${r(n)}${r(p)}${r(a)}`},s.toRgba=function(n,p,a,b=255){return(n<<24|p<<16|a<<8|b)>>>0},s.toColor=function(n,p,a,b){return{css:s.toCss(n,p,a,b),rgba:s.toRgba(n,p,a,b)}}})(_||(o.channels=_={})),(function(s){function n(p,a){return c=Math.round(255*a),[i,d,v]=l.toChannels(p.rgba),{css:_.toCss(i,d,v,c),rgba:_.toRgba(i,d,v,c)}}s.blend=function(p,a){if(c=(255&a.rgba)/255,c===1)return{css:a.css,rgba:a.rgba};const b=a.rgba>>24&255,f=a.rgba>>16&255,w=a.rgba>>8&255,M=p.rgba>>24&255,N=p.rgba>>16&255,O=p.rgba>>8&255;return i=M+Math.round((b-M)*c),d=N+Math.round((f-N)*c),v=O+Math.round((w-O)*c),{css:_.toCss(i,d,v),rgba:_.toRgba(i,d,v)}},s.isOpaque=function(p){return(255&p.rgba)==255},s.ensureContrastRatio=function(p,a,b){const f=l.ensureContrastRatio(p.rgba,a.rgba,b);if(f)return _.toColor(f>>24&255,f>>16&255,f>>8&255)},s.opaque=function(p){const a=(255|p.rgba)>>>0;return[i,d,v]=l.toChannels(a),{css:_.toCss(i,d,v),rgba:a}},s.opacity=n,s.multiplyOpacity=function(p,a){return c=255&p.rgba,n(p,c*a/255)},s.toColorRGB=function(p){return[p.rgba>>24&255,p.rgba>>16&255,p.rgba>>8&255]}})(C||(o.color=C={})),(function(s){let n,p;try{const a=document.createElement("canvas");a.width=1,a.height=1;const b=a.getContext("2d",{willReadFrequently:!0});b&&(n=b,n.globalCompositeOperation="copy",p=n.createLinearGradient(0,0,1,1))}catch{}s.toColor=function(a){if(a.match(/#[\da-f]{3,8}/i))switch(a.length){case 4:return i=parseInt(a.slice(1,2).repeat(2),16),d=parseInt(a.slice(2,3).repeat(2),16),v=parseInt(a.slice(3,4).repeat(2),16),_.toColor(i,d,v);case 5:return i=parseInt(a.slice(1,2).repeat(2),16),d=parseInt(a.slice(2,3).repeat(2),16),v=parseInt(a.slice(3,4).repeat(2),16),c=parseInt(a.slice(4,5).repeat(2),16),_.toColor(i,d,v,c);case 7:return{css:a,rgba:(parseInt(a.slice(1),16)<<8|255)>>>0};case 9:return{css:a,rgba:parseInt(a.slice(1),16)>>>0}}const b=a.match(/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(,\s*(0|1|\d?\.(\d+))\s*)?\)/);if(b)return i=parseInt(b[1]),d=parseInt(b[2]),v=parseInt(b[3]),c=Math.round(255*(b[5]===void 0?1:parseFloat(b[5]))),_.toColor(i,d,v,c);if(!n||!p)throw new Error("css.toColor: Unsupported css format");if(n.fillStyle=p,n.fillStyle=a,typeof n.fillStyle!="string")throw new Error("css.toColor: Unsupported css format");if(n.fillRect(0,0,1,1),[i,d,v,c]=n.getImageData(0,0,1,1).data,c!==255)throw new Error("css.toColor: Unsupported css format");return{rgba:_.toRgba(i,d,v,c),css:a}}})(S||(o.css=S={})),(function(s){function n(p,a,b){const f=p/255,w=a/255,M=b/255;return .2126*(f<=.03928?f/12.92:Math.pow((f+.055)/1.055,2.4))+.7152*(w<=.03928?w/12.92:Math.pow((w+.055)/1.055,2.4))+.0722*(M<=.03928?M/12.92:Math.pow((M+.055)/1.055,2.4))}s.relativeLuminance=function(p){return n(p>>16&255,p>>8&255,255&p)},s.relativeLuminance2=n})(m||(o.rgb=m={})),(function(s){function n(a,b,f){const w=a>>24&255,M=a>>16&255,N=a>>8&255;let O=b>>24&255,I=b>>16&255,z=b>>8&255,Y=t(m.relativeLuminance2(O,I,z),m.relativeLuminance2(w,M,N));for(;Y<f&&(O>0||I>0||z>0);)O-=Math.max(0,Math.ceil(.1*O)),I-=Math.max(0,Math.ceil(.1*I)),z-=Math.max(0,Math.ceil(.1*z)),Y=t(m.relativeLuminance2(O,I,z),m.relativeLuminance2(w,M,N));return(O<<24|I<<16|z<<8|255)>>>0}function p(a,b,f){const w=a>>24&255,M=a>>16&255,N=a>>8&255;let O=b>>24&255,I=b>>16&255,z=b>>8&255,Y=t(m.relativeLuminance2(O,I,z),m.relativeLuminance2(w,M,N));for(;Y<f&&(O<255||I<255||z<255);)O=Math.min(255,O+Math.ceil(.1*(255-O))),I=Math.min(255,I+Math.ceil(.1*(255-I))),z=Math.min(255,z+Math.ceil(.1*(255-z))),Y=t(m.relativeLuminance2(O,I,z),m.relativeLuminance2(w,M,N));return(O<<24|I<<16|z<<8|255)>>>0}s.blend=function(a,b){if(c=(255&b)/255,c===1)return b;const f=b>>24&255,w=b>>16&255,M=b>>8&255,N=a>>24&255,O=a>>16&255,I=a>>8&255;return i=N+Math.round((f-N)*c),d=O+Math.round((w-O)*c),v=I+Math.round((M-I)*c),_.toRgba(i,d,v)},s.ensureContrastRatio=function(a,b,f){const w=m.relativeLuminance(a>>8),M=m.relativeLuminance(b>>8);if(t(w,M)<f){if(M<w){const I=n(a,b,f),z=t(w,m.relativeLuminance(I>>8));if(z<f){const Y=p(a,b,f);return z>t(w,m.relativeLuminance(Y>>8))?I:Y}return I}const N=p(a,b,f),O=t(w,m.relativeLuminance(N>>8));if(O<f){const I=n(a,b,f);return O>t(w,m.relativeLuminance(I>>8))?N:I}return N}},s.reduceLuminance=n,s.increaseLuminance=p,s.toChannels=function(a){return[a>>24&255,a>>16&255,a>>8&255,255&a]}})(l||(o.rgba=l={})),o.toPaddedHex=r,o.contrastRatio=t},8969:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CoreTerminal=void 0;const d=i(844),v=i(2585),c=i(4348),_=i(7866),C=i(744),S=i(7302),m=i(6975),l=i(8460),r=i(1753),t=i(1480),s=i(7994),n=i(9282),p=i(5435),a=i(5981),b=i(2660);let f=!1;class w extends d.Disposable{get onScroll(){return this._onScrollApi||(this._onScrollApi=this.register(new l.EventEmitter),this._onScroll.event((N=>{this._onScrollApi?.fire(N.position)}))),this._onScrollApi.event}get cols(){return this._bufferService.cols}get rows(){return this._bufferService.rows}get buffers(){return this._bufferService.buffers}get options(){return this.optionsService.options}set options(N){for(const O in N)this.optionsService.options[O]=N[O]}constructor(N){super(),this._windowsWrappingHeuristics=this.register(new d.MutableDisposable),this._onBinary=this.register(new l.EventEmitter),this.onBinary=this._onBinary.event,this._onData=this.register(new l.EventEmitter),this.onData=this._onData.event,this._onLineFeed=this.register(new l.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onResize=this.register(new l.EventEmitter),this.onResize=this._onResize.event,this._onWriteParsed=this.register(new l.EventEmitter),this.onWriteParsed=this._onWriteParsed.event,this._onScroll=this.register(new l.EventEmitter),this._instantiationService=new c.InstantiationService,this.optionsService=this.register(new S.OptionsService(N)),this._instantiationService.setService(v.IOptionsService,this.optionsService),this._bufferService=this.register(this._instantiationService.createInstance(C.BufferService)),this._instantiationService.setService(v.IBufferService,this._bufferService),this._logService=this.register(this._instantiationService.createInstance(_.LogService)),this._instantiationService.setService(v.ILogService,this._logService),this.coreService=this.register(this._instantiationService.createInstance(m.CoreService)),this._instantiationService.setService(v.ICoreService,this.coreService),this.coreMouseService=this.register(this._instantiationService.createInstance(r.CoreMouseService)),this._instantiationService.setService(v.ICoreMouseService,this.coreMouseService),this.unicodeService=this.register(this._instantiationService.createInstance(t.UnicodeService)),this._instantiationService.setService(v.IUnicodeService,this.unicodeService),this._charsetService=this._instantiationService.createInstance(s.CharsetService),this._instantiationService.setService(v.ICharsetService,this._charsetService),this._oscLinkService=this._instantiationService.createInstance(b.OscLinkService),this._instantiationService.setService(v.IOscLinkService,this._oscLinkService),this._inputHandler=this.register(new p.InputHandler(this._bufferService,this._charsetService,this.coreService,this._logService,this.optionsService,this._oscLinkService,this.coreMouseService,this.unicodeService)),this.register((0,l.forwardEvent)(this._inputHandler.onLineFeed,this._onLineFeed)),this.register(this._inputHandler),this.register((0,l.forwardEvent)(this._bufferService.onResize,this._onResize)),this.register((0,l.forwardEvent)(this.coreService.onData,this._onData)),this.register((0,l.forwardEvent)(this.coreService.onBinary,this._onBinary)),this.register(this.coreService.onRequestScrollToBottom((()=>this.scrollToBottom()))),this.register(this.coreService.onUserInput((()=>this._writeBuffer.handleUserInput()))),this.register(this.optionsService.onMultipleOptionChange(["windowsMode","windowsPty"],(()=>this._handleWindowsPtyOptionChange()))),this.register(this._bufferService.onScroll((O=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this.register(this._inputHandler.onScroll((O=>{this._onScroll.fire({position:this._bufferService.buffer.ydisp,source:0}),this._inputHandler.markRangeDirty(this._bufferService.buffer.scrollTop,this._bufferService.buffer.scrollBottom)}))),this._writeBuffer=this.register(new a.WriteBuffer(((O,I)=>this._inputHandler.parse(O,I)))),this.register((0,l.forwardEvent)(this._writeBuffer.onWriteParsed,this._onWriteParsed))}write(N,O){this._writeBuffer.write(N,O)}writeSync(N,O){this._logService.logLevel<=v.LogLevelEnum.WARN&&!f&&(this._logService.warn("writeSync is unreliable and will be removed soon."),f=!0),this._writeBuffer.writeSync(N,O)}input(N,O=!0){this.coreService.triggerDataEvent(N,O)}resize(N,O){isNaN(N)||isNaN(O)||(N=Math.max(N,C.MINIMUM_COLS),O=Math.max(O,C.MINIMUM_ROWS),this._bufferService.resize(N,O))}scroll(N,O=!1){this._bufferService.scroll(N,O)}scrollLines(N,O,I){this._bufferService.scrollLines(N,O,I)}scrollPages(N){this.scrollLines(N*(this.rows-1))}scrollToTop(){this.scrollLines(-this._bufferService.buffer.ydisp)}scrollToBottom(){this.scrollLines(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp)}scrollToLine(N){const O=N-this._bufferService.buffer.ydisp;O!==0&&this.scrollLines(O)}registerEscHandler(N,O){return this._inputHandler.registerEscHandler(N,O)}registerDcsHandler(N,O){return this._inputHandler.registerDcsHandler(N,O)}registerCsiHandler(N,O){return this._inputHandler.registerCsiHandler(N,O)}registerOscHandler(N,O){return this._inputHandler.registerOscHandler(N,O)}_setup(){this._handleWindowsPtyOptionChange()}reset(){this._inputHandler.reset(),this._bufferService.reset(),this._charsetService.reset(),this.coreService.reset(),this.coreMouseService.reset()}_handleWindowsPtyOptionChange(){let N=!1;const O=this.optionsService.rawOptions.windowsPty;O&&O.buildNumber!==void 0&&O.buildNumber!==void 0?N=O.backend==="conpty"&&O.buildNumber<21376:this.optionsService.rawOptions.windowsMode&&(N=!0),N?this._enableWindowsWrappingHeuristics():this._windowsWrappingHeuristics.clear()}_enableWindowsWrappingHeuristics(){if(!this._windowsWrappingHeuristics.value){const N=[];N.push(this.onLineFeed(n.updateWindowsModeWrappedState.bind(null,this._bufferService))),N.push(this.registerCsiHandler({final:"H"},(()=>((0,n.updateWindowsModeWrappedState)(this._bufferService),!1)))),this._windowsWrappingHeuristics.value=(0,d.toDisposable)((()=>{for(const O of N)O.dispose()}))}}}o.CoreTerminal=w},8460:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.runAndSubscribe=o.forwardEvent=o.EventEmitter=void 0,o.EventEmitter=class{constructor(){this._listeners=[],this._disposed=!1}get event(){return this._event||(this._event=i=>(this._listeners.push(i),{dispose:()=>{if(!this._disposed){for(let d=0;d<this._listeners.length;d++)if(this._listeners[d]===i)return void this._listeners.splice(d,1)}}})),this._event}fire(i,d){const v=[];for(let c=0;c<this._listeners.length;c++)v.push(this._listeners[c]);for(let c=0;c<v.length;c++)v[c].call(void 0,i,d)}dispose(){this.clearListeners(),this._disposed=!0}clearListeners(){this._listeners&&(this._listeners.length=0)}},o.forwardEvent=function(i,d){return i((v=>d.fire(v)))},o.runAndSubscribe=function(i,d){return d(void 0),i((v=>d(v)))}},5435:function(D,o,i){var d=this&&this.__decorate||function(se,T,P,F){var W,Q=arguments.length,ce=Q<3?T:F===null?F=Object.getOwnPropertyDescriptor(T,P):F;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")ce=Reflect.decorate(se,T,P,F);else for(var ee=se.length-1;ee>=0;ee--)(W=se[ee])&&(ce=(Q<3?W(ce):Q>3?W(T,P,ce):W(T,P))||ce);return Q>3&&ce&&Object.defineProperty(T,P,ce),ce},v=this&&this.__param||function(se,T){return function(P,F){T(P,F,se)}};Object.defineProperty(o,"__esModule",{value:!0}),o.InputHandler=o.WindowsOptionsReportType=void 0;const c=i(2584),_=i(7116),C=i(2015),S=i(844),m=i(482),l=i(8437),r=i(8460),t=i(643),s=i(511),n=i(3734),p=i(2585),a=i(1480),b=i(6242),f=i(6351),w=i(5941),M={"(":0,")":1,"*":2,"+":3,"-":1,".":2},N=131072;function O(se,T){if(se>24)return T.setWinLines||!1;switch(se){case 1:return!!T.restoreWin;case 2:return!!T.minimizeWin;case 3:return!!T.setWinPosition;case 4:return!!T.setWinSizePixels;case 5:return!!T.raiseWin;case 6:return!!T.lowerWin;case 7:return!!T.refreshWin;case 8:return!!T.setWinSizeChars;case 9:return!!T.maximizeWin;case 10:return!!T.fullscreenWin;case 11:return!!T.getWinState;case 13:return!!T.getWinPosition;case 14:return!!T.getWinSizePixels;case 15:return!!T.getScreenSizePixels;case 16:return!!T.getCellSizePixels;case 18:return!!T.getWinSizeChars;case 19:return!!T.getScreenSizeChars;case 20:return!!T.getIconTitle;case 21:return!!T.getWinTitle;case 22:return!!T.pushTitle;case 23:return!!T.popTitle;case 24:return!!T.setWinLines}return!1}var I;(function(se){se[se.GET_WIN_SIZE_PIXELS=0]="GET_WIN_SIZE_PIXELS",se[se.GET_CELL_SIZE_PIXELS=1]="GET_CELL_SIZE_PIXELS"})(I||(o.WindowsOptionsReportType=I={}));let z=0;class Y extends S.Disposable{getAttrData(){return this._curAttrData}constructor(T,P,F,W,Q,ce,ee,_e,V=new C.EscapeSequenceParser){super(),this._bufferService=T,this._charsetService=P,this._coreService=F,this._logService=W,this._optionsService=Q,this._oscLinkService=ce,this._coreMouseService=ee,this._unicodeService=_e,this._parser=V,this._parseBuffer=new Uint32Array(4096),this._stringDecoder=new m.StringToUtf32,this._utf8Decoder=new m.Utf8ToUtf32,this._workCell=new s.CellData,this._windowTitle="",this._iconName="",this._windowTitleStack=[],this._iconNameStack=[],this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone(),this._onRequestBell=this.register(new r.EventEmitter),this.onRequestBell=this._onRequestBell.event,this._onRequestRefreshRows=this.register(new r.EventEmitter),this.onRequestRefreshRows=this._onRequestRefreshRows.event,this._onRequestReset=this.register(new r.EventEmitter),this.onRequestReset=this._onRequestReset.event,this._onRequestSendFocus=this.register(new r.EventEmitter),this.onRequestSendFocus=this._onRequestSendFocus.event,this._onRequestSyncScrollBar=this.register(new r.EventEmitter),this.onRequestSyncScrollBar=this._onRequestSyncScrollBar.event,this._onRequestWindowsOptionsReport=this.register(new r.EventEmitter),this.onRequestWindowsOptionsReport=this._onRequestWindowsOptionsReport.event,this._onA11yChar=this.register(new r.EventEmitter),this.onA11yChar=this._onA11yChar.event,this._onA11yTab=this.register(new r.EventEmitter),this.onA11yTab=this._onA11yTab.event,this._onCursorMove=this.register(new r.EventEmitter),this.onCursorMove=this._onCursorMove.event,this._onLineFeed=this.register(new r.EventEmitter),this.onLineFeed=this._onLineFeed.event,this._onScroll=this.register(new r.EventEmitter),this.onScroll=this._onScroll.event,this._onTitleChange=this.register(new r.EventEmitter),this.onTitleChange=this._onTitleChange.event,this._onColor=this.register(new r.EventEmitter),this.onColor=this._onColor.event,this._parseStack={paused:!1,cursorStartX:0,cursorStartY:0,decodedLength:0,position:0},this._specialColors=[256,257,258],this.register(this._parser),this._dirtyRowTracker=new ne(this._bufferService),this._activeBuffer=this._bufferService.buffer,this.register(this._bufferService.buffers.onBufferActivate((j=>this._activeBuffer=j.activeBuffer))),this._parser.setCsiHandlerFallback(((j,J)=>{this._logService.debug("Unknown CSI code: ",{identifier:this._parser.identToString(j),params:J.toArray()})})),this._parser.setEscHandlerFallback((j=>{this._logService.debug("Unknown ESC code: ",{identifier:this._parser.identToString(j)})})),this._parser.setExecuteHandlerFallback((j=>{this._logService.debug("Unknown EXECUTE code: ",{code:j})})),this._parser.setOscHandlerFallback(((j,J,re)=>{this._logService.debug("Unknown OSC code: ",{identifier:j,action:J,data:re})})),this._parser.setDcsHandlerFallback(((j,J,re)=>{J==="HOOK"&&(re=re.toArray()),this._logService.debug("Unknown DCS code: ",{identifier:this._parser.identToString(j),action:J,payload:re})})),this._parser.setPrintHandler(((j,J,re)=>this.print(j,J,re))),this._parser.registerCsiHandler({final:"@"},(j=>this.insertChars(j))),this._parser.registerCsiHandler({intermediates:" ",final:"@"},(j=>this.scrollLeft(j))),this._parser.registerCsiHandler({final:"A"},(j=>this.cursorUp(j))),this._parser.registerCsiHandler({intermediates:" ",final:"A"},(j=>this.scrollRight(j))),this._parser.registerCsiHandler({final:"B"},(j=>this.cursorDown(j))),this._parser.registerCsiHandler({final:"C"},(j=>this.cursorForward(j))),this._parser.registerCsiHandler({final:"D"},(j=>this.cursorBackward(j))),this._parser.registerCsiHandler({final:"E"},(j=>this.cursorNextLine(j))),this._parser.registerCsiHandler({final:"F"},(j=>this.cursorPrecedingLine(j))),this._parser.registerCsiHandler({final:"G"},(j=>this.cursorCharAbsolute(j))),this._parser.registerCsiHandler({final:"H"},(j=>this.cursorPosition(j))),this._parser.registerCsiHandler({final:"I"},(j=>this.cursorForwardTab(j))),this._parser.registerCsiHandler({final:"J"},(j=>this.eraseInDisplay(j,!1))),this._parser.registerCsiHandler({prefix:"?",final:"J"},(j=>this.eraseInDisplay(j,!0))),this._parser.registerCsiHandler({final:"K"},(j=>this.eraseInLine(j,!1))),this._parser.registerCsiHandler({prefix:"?",final:"K"},(j=>this.eraseInLine(j,!0))),this._parser.registerCsiHandler({final:"L"},(j=>this.insertLines(j))),this._parser.registerCsiHandler({final:"M"},(j=>this.deleteLines(j))),this._parser.registerCsiHandler({final:"P"},(j=>this.deleteChars(j))),this._parser.registerCsiHandler({final:"S"},(j=>this.scrollUp(j))),this._parser.registerCsiHandler({final:"T"},(j=>this.scrollDown(j))),this._parser.registerCsiHandler({final:"X"},(j=>this.eraseChars(j))),this._parser.registerCsiHandler({final:"Z"},(j=>this.cursorBackwardTab(j))),this._parser.registerCsiHandler({final:"`"},(j=>this.charPosAbsolute(j))),this._parser.registerCsiHandler({final:"a"},(j=>this.hPositionRelative(j))),this._parser.registerCsiHandler({final:"b"},(j=>this.repeatPrecedingCharacter(j))),this._parser.registerCsiHandler({final:"c"},(j=>this.sendDeviceAttributesPrimary(j))),this._parser.registerCsiHandler({prefix:">",final:"c"},(j=>this.sendDeviceAttributesSecondary(j))),this._parser.registerCsiHandler({final:"d"},(j=>this.linePosAbsolute(j))),this._parser.registerCsiHandler({final:"e"},(j=>this.vPositionRelative(j))),this._parser.registerCsiHandler({final:"f"},(j=>this.hVPosition(j))),this._parser.registerCsiHandler({final:"g"},(j=>this.tabClear(j))),this._parser.registerCsiHandler({final:"h"},(j=>this.setMode(j))),this._parser.registerCsiHandler({prefix:"?",final:"h"},(j=>this.setModePrivate(j))),this._parser.registerCsiHandler({final:"l"},(j=>this.resetMode(j))),this._parser.registerCsiHandler({prefix:"?",final:"l"},(j=>this.resetModePrivate(j))),this._parser.registerCsiHandler({final:"m"},(j=>this.charAttributes(j))),this._parser.registerCsiHandler({final:"n"},(j=>this.deviceStatus(j))),this._parser.registerCsiHandler({prefix:"?",final:"n"},(j=>this.deviceStatusPrivate(j))),this._parser.registerCsiHandler({intermediates:"!",final:"p"},(j=>this.softReset(j))),this._parser.registerCsiHandler({intermediates:" ",final:"q"},(j=>this.setCursorStyle(j))),this._parser.registerCsiHandler({final:"r"},(j=>this.setScrollRegion(j))),this._parser.registerCsiHandler({final:"s"},(j=>this.saveCursor(j))),this._parser.registerCsiHandler({final:"t"},(j=>this.windowOptions(j))),this._parser.registerCsiHandler({final:"u"},(j=>this.restoreCursor(j))),this._parser.registerCsiHandler({intermediates:"'",final:"}"},(j=>this.insertColumns(j))),this._parser.registerCsiHandler({intermediates:"'",final:"~"},(j=>this.deleteColumns(j))),this._parser.registerCsiHandler({intermediates:'"',final:"q"},(j=>this.selectProtected(j))),this._parser.registerCsiHandler({intermediates:"$",final:"p"},(j=>this.requestMode(j,!0))),this._parser.registerCsiHandler({prefix:"?",intermediates:"$",final:"p"},(j=>this.requestMode(j,!1))),this._parser.setExecuteHandler(c.C0.BEL,(()=>this.bell())),this._parser.setExecuteHandler(c.C0.LF,(()=>this.lineFeed())),this._parser.setExecuteHandler(c.C0.VT,(()=>this.lineFeed())),this._parser.setExecuteHandler(c.C0.FF,(()=>this.lineFeed())),this._parser.setExecuteHandler(c.C0.CR,(()=>this.carriageReturn())),this._parser.setExecuteHandler(c.C0.BS,(()=>this.backspace())),this._parser.setExecuteHandler(c.C0.HT,(()=>this.tab())),this._parser.setExecuteHandler(c.C0.SO,(()=>this.shiftOut())),this._parser.setExecuteHandler(c.C0.SI,(()=>this.shiftIn())),this._parser.setExecuteHandler(c.C1.IND,(()=>this.index())),this._parser.setExecuteHandler(c.C1.NEL,(()=>this.nextLine())),this._parser.setExecuteHandler(c.C1.HTS,(()=>this.tabSet())),this._parser.registerOscHandler(0,new b.OscHandler((j=>(this.setTitle(j),this.setIconName(j),!0)))),this._parser.registerOscHandler(1,new b.OscHandler((j=>this.setIconName(j)))),this._parser.registerOscHandler(2,new b.OscHandler((j=>this.setTitle(j)))),this._parser.registerOscHandler(4,new b.OscHandler((j=>this.setOrReportIndexedColor(j)))),this._parser.registerOscHandler(8,new b.OscHandler((j=>this.setHyperlink(j)))),this._parser.registerOscHandler(10,new b.OscHandler((j=>this.setOrReportFgColor(j)))),this._parser.registerOscHandler(11,new b.OscHandler((j=>this.setOrReportBgColor(j)))),this._parser.registerOscHandler(12,new b.OscHandler((j=>this.setOrReportCursorColor(j)))),this._parser.registerOscHandler(104,new b.OscHandler((j=>this.restoreIndexedColor(j)))),this._parser.registerOscHandler(110,new b.OscHandler((j=>this.restoreFgColor(j)))),this._parser.registerOscHandler(111,new b.OscHandler((j=>this.restoreBgColor(j)))),this._parser.registerOscHandler(112,new b.OscHandler((j=>this.restoreCursorColor(j)))),this._parser.registerEscHandler({final:"7"},(()=>this.saveCursor())),this._parser.registerEscHandler({final:"8"},(()=>this.restoreCursor())),this._parser.registerEscHandler({final:"D"},(()=>this.index())),this._parser.registerEscHandler({final:"E"},(()=>this.nextLine())),this._parser.registerEscHandler({final:"H"},(()=>this.tabSet())),this._parser.registerEscHandler({final:"M"},(()=>this.reverseIndex())),this._parser.registerEscHandler({final:"="},(()=>this.keypadApplicationMode())),this._parser.registerEscHandler({final:">"},(()=>this.keypadNumericMode())),this._parser.registerEscHandler({final:"c"},(()=>this.fullReset())),this._parser.registerEscHandler({final:"n"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"o"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"|"},(()=>this.setgLevel(3))),this._parser.registerEscHandler({final:"}"},(()=>this.setgLevel(2))),this._parser.registerEscHandler({final:"~"},(()=>this.setgLevel(1))),this._parser.registerEscHandler({intermediates:"%",final:"@"},(()=>this.selectDefaultCharset())),this._parser.registerEscHandler({intermediates:"%",final:"G"},(()=>this.selectDefaultCharset()));for(const j in _.CHARSETS)this._parser.registerEscHandler({intermediates:"(",final:j},(()=>this.selectCharset("("+j))),this._parser.registerEscHandler({intermediates:")",final:j},(()=>this.selectCharset(")"+j))),this._parser.registerEscHandler({intermediates:"*",final:j},(()=>this.selectCharset("*"+j))),this._parser.registerEscHandler({intermediates:"+",final:j},(()=>this.selectCharset("+"+j))),this._parser.registerEscHandler({intermediates:"-",final:j},(()=>this.selectCharset("-"+j))),this._parser.registerEscHandler({intermediates:".",final:j},(()=>this.selectCharset("."+j))),this._parser.registerEscHandler({intermediates:"/",final:j},(()=>this.selectCharset("/"+j)));this._parser.registerEscHandler({intermediates:"#",final:"8"},(()=>this.screenAlignmentPattern())),this._parser.setErrorHandler((j=>(this._logService.error("Parsing error: ",j),j))),this._parser.registerDcsHandler({intermediates:"$",final:"q"},new f.DcsHandler(((j,J)=>this.requestStatusString(j,J))))}_preserveStack(T,P,F,W){this._parseStack.paused=!0,this._parseStack.cursorStartX=T,this._parseStack.cursorStartY=P,this._parseStack.decodedLength=F,this._parseStack.position=W}_logSlowResolvingAsync(T){this._logService.logLevel<=p.LogLevelEnum.WARN&&Promise.race([T,new Promise(((P,F)=>setTimeout((()=>F("#SLOW_TIMEOUT")),5e3)))]).catch((P=>{if(P!=="#SLOW_TIMEOUT")throw P;console.warn("async parser handler taking longer than 5000 ms")}))}_getCurrentLinkId(){return this._curAttrData.extended.urlId}parse(T,P){let F,W=this._activeBuffer.x,Q=this._activeBuffer.y,ce=0;const ee=this._parseStack.paused;if(ee){if(F=this._parser.parse(this._parseBuffer,this._parseStack.decodedLength,P))return this._logSlowResolvingAsync(F),F;W=this._parseStack.cursorStartX,Q=this._parseStack.cursorStartY,this._parseStack.paused=!1,T.length>N&&(ce=this._parseStack.position+N)}if(this._logService.logLevel<=p.LogLevelEnum.DEBUG&&this._logService.debug("parsing data"+(typeof T=="string"?` "${T}"`:` "${Array.prototype.map.call(T,(j=>String.fromCharCode(j))).join("")}"`),typeof T=="string"?T.split("").map((j=>j.charCodeAt(0))):T),this._parseBuffer.length<T.length&&this._parseBuffer.length<N&&(this._parseBuffer=new Uint32Array(Math.min(T.length,N))),ee||this._dirtyRowTracker.clearRange(),T.length>N)for(let j=ce;j<T.length;j+=N){const J=j+N<T.length?j+N:T.length,re=typeof T=="string"?this._stringDecoder.decode(T.substring(j,J),this._parseBuffer):this._utf8Decoder.decode(T.subarray(j,J),this._parseBuffer);if(F=this._parser.parse(this._parseBuffer,re))return this._preserveStack(W,Q,re,j),this._logSlowResolvingAsync(F),F}else if(!ee){const j=typeof T=="string"?this._stringDecoder.decode(T,this._parseBuffer):this._utf8Decoder.decode(T,this._parseBuffer);if(F=this._parser.parse(this._parseBuffer,j))return this._preserveStack(W,Q,j,0),this._logSlowResolvingAsync(F),F}this._activeBuffer.x===W&&this._activeBuffer.y===Q||this._onCursorMove.fire();const _e=this._dirtyRowTracker.end+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp),V=this._dirtyRowTracker.start+(this._bufferService.buffer.ybase-this._bufferService.buffer.ydisp);V<this._bufferService.rows&&this._onRequestRefreshRows.fire(Math.min(V,this._bufferService.rows-1),Math.min(_e,this._bufferService.rows-1))}print(T,P,F){let W,Q;const ce=this._charsetService.charset,ee=this._optionsService.rawOptions.screenReaderMode,_e=this._bufferService.cols,V=this._coreService.decPrivateModes.wraparound,j=this._coreService.modes.insertMode,J=this._curAttrData;let re=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._activeBuffer.x&&F-P>0&&re.getWidth(this._activeBuffer.x-1)===2&&re.setCellFromCodepoint(this._activeBuffer.x-1,0,1,J);let he=this._parser.precedingJoinState;for(let le=P;le<F;++le){if(W=T[le],W<127&&ce){const je=ce[String.fromCharCode(W)];je&&(W=je.charCodeAt(0))}const Ee=this._unicodeService.charProperties(W,he);Q=a.UnicodeService.extractWidth(Ee);const Me=a.UnicodeService.extractShouldJoin(Ee),Re=Me?a.UnicodeService.extractWidth(he):0;if(he=Ee,ee&&this._onA11yChar.fire((0,m.stringFromCodePoint)(W)),this._getCurrentLinkId()&&this._oscLinkService.addLineToLink(this._getCurrentLinkId(),this._activeBuffer.ybase+this._activeBuffer.y),this._activeBuffer.x+Q-Re>_e){if(V){const je=re;let be=this._activeBuffer.x-Re;for(this._activeBuffer.x=Re,this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData(),!0)):(this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!0),re=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y),Re>0&&re instanceof l.BufferLine&&re.copyCellsFrom(je,be,0,Re,!1);be<_e;)je.setCellFromCodepoint(be++,0,1,J)}else if(this._activeBuffer.x=_e-1,Q===2)continue}if(Me&&this._activeBuffer.x){const je=re.getWidth(this._activeBuffer.x-1)?1:2;re.addCodepointToCell(this._activeBuffer.x-je,W,Q);for(let be=Q-Re;--be>=0;)re.setCellFromCodepoint(this._activeBuffer.x++,0,0,J)}else if(j&&(re.insertCells(this._activeBuffer.x,Q-Re,this._activeBuffer.getNullCell(J)),re.getWidth(_e-1)===2&&re.setCellFromCodepoint(_e-1,t.NULL_CELL_CODE,t.NULL_CELL_WIDTH,J)),re.setCellFromCodepoint(this._activeBuffer.x++,W,Q,J),Q>0)for(;--Q;)re.setCellFromCodepoint(this._activeBuffer.x++,0,0,J)}this._parser.precedingJoinState=he,this._activeBuffer.x<_e&&F-P>0&&re.getWidth(this._activeBuffer.x)===0&&!re.hasContent(this._activeBuffer.x)&&re.setCellFromCodepoint(this._activeBuffer.x,0,1,J),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}registerCsiHandler(T,P){return T.final!=="t"||T.prefix||T.intermediates?this._parser.registerCsiHandler(T,P):this._parser.registerCsiHandler(T,(F=>!O(F.params[0],this._optionsService.rawOptions.windowOptions)||P(F)))}registerDcsHandler(T,P){return this._parser.registerDcsHandler(T,new f.DcsHandler(P))}registerEscHandler(T,P){return this._parser.registerEscHandler(T,P)}registerOscHandler(T,P){return this._parser.registerOscHandler(T,new b.OscHandler(P))}bell(){return this._onRequestBell.fire(),!0}lineFeed(){return this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._optionsService.rawOptions.convertEol&&(this._activeBuffer.x=0),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows?this._activeBuffer.y=this._bufferService.rows-1:this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.x>=this._bufferService.cols&&this._activeBuffer.x--,this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._onLineFeed.fire(),!0}carriageReturn(){return this._activeBuffer.x=0,!0}backspace(){if(!this._coreService.decPrivateModes.reverseWraparound)return this._restrictCursor(),this._activeBuffer.x>0&&this._activeBuffer.x--,!0;if(this._restrictCursor(this._bufferService.cols),this._activeBuffer.x>0)this._activeBuffer.x--;else if(this._activeBuffer.x===0&&this._activeBuffer.y>this._activeBuffer.scrollTop&&this._activeBuffer.y<=this._activeBuffer.scrollBottom&&this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y)?.isWrapped){this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).isWrapped=!1,this._activeBuffer.y--,this._activeBuffer.x=this._bufferService.cols-1;const T=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);T.hasWidth(this._activeBuffer.x)&&!T.hasContent(this._activeBuffer.x)&&this._activeBuffer.x--}return this._restrictCursor(),!0}tab(){if(this._activeBuffer.x>=this._bufferService.cols)return!0;const T=this._activeBuffer.x;return this._activeBuffer.x=this._activeBuffer.nextStop(),this._optionsService.rawOptions.screenReaderMode&&this._onA11yTab.fire(this._activeBuffer.x-T),!0}shiftOut(){return this._charsetService.setgLevel(1),!0}shiftIn(){return this._charsetService.setgLevel(0),!0}_restrictCursor(T=this._bufferService.cols-1){this._activeBuffer.x=Math.min(T,Math.max(0,this._activeBuffer.x)),this._activeBuffer.y=this._coreService.decPrivateModes.origin?Math.min(this._activeBuffer.scrollBottom,Math.max(this._activeBuffer.scrollTop,this._activeBuffer.y)):Math.min(this._bufferService.rows-1,Math.max(0,this._activeBuffer.y)),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_setCursor(T,P){this._dirtyRowTracker.markDirty(this._activeBuffer.y),this._coreService.decPrivateModes.origin?(this._activeBuffer.x=T,this._activeBuffer.y=this._activeBuffer.scrollTop+P):(this._activeBuffer.x=T,this._activeBuffer.y=P),this._restrictCursor(),this._dirtyRowTracker.markDirty(this._activeBuffer.y)}_moveCursor(T,P){this._restrictCursor(),this._setCursor(this._activeBuffer.x+T,this._activeBuffer.y+P)}cursorUp(T){const P=this._activeBuffer.y-this._activeBuffer.scrollTop;return P>=0?this._moveCursor(0,-Math.min(P,T.params[0]||1)):this._moveCursor(0,-(T.params[0]||1)),!0}cursorDown(T){const P=this._activeBuffer.scrollBottom-this._activeBuffer.y;return P>=0?this._moveCursor(0,Math.min(P,T.params[0]||1)):this._moveCursor(0,T.params[0]||1),!0}cursorForward(T){return this._moveCursor(T.params[0]||1,0),!0}cursorBackward(T){return this._moveCursor(-(T.params[0]||1),0),!0}cursorNextLine(T){return this.cursorDown(T),this._activeBuffer.x=0,!0}cursorPrecedingLine(T){return this.cursorUp(T),this._activeBuffer.x=0,!0}cursorCharAbsolute(T){return this._setCursor((T.params[0]||1)-1,this._activeBuffer.y),!0}cursorPosition(T){return this._setCursor(T.length>=2?(T.params[1]||1)-1:0,(T.params[0]||1)-1),!0}charPosAbsolute(T){return this._setCursor((T.params[0]||1)-1,this._activeBuffer.y),!0}hPositionRelative(T){return this._moveCursor(T.params[0]||1,0),!0}linePosAbsolute(T){return this._setCursor(this._activeBuffer.x,(T.params[0]||1)-1),!0}vPositionRelative(T){return this._moveCursor(0,T.params[0]||1),!0}hVPosition(T){return this.cursorPosition(T),!0}tabClear(T){const P=T.params[0];return P===0?delete this._activeBuffer.tabs[this._activeBuffer.x]:P===3&&(this._activeBuffer.tabs={}),!0}cursorForwardTab(T){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let P=T.params[0]||1;for(;P--;)this._activeBuffer.x=this._activeBuffer.nextStop();return!0}cursorBackwardTab(T){if(this._activeBuffer.x>=this._bufferService.cols)return!0;let P=T.params[0]||1;for(;P--;)this._activeBuffer.x=this._activeBuffer.prevStop();return!0}selectProtected(T){const P=T.params[0];return P===1&&(this._curAttrData.bg|=536870912),P!==2&&P!==0||(this._curAttrData.bg&=-536870913),!0}_eraseInBufferLine(T,P,F,W=!1,Q=!1){const ce=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);ce.replaceCells(P,F,this._activeBuffer.getNullCell(this._eraseAttrData()),Q),W&&(ce.isWrapped=!1)}_resetBufferLine(T,P=!1){const F=this._activeBuffer.lines.get(this._activeBuffer.ybase+T);F&&(F.fill(this._activeBuffer.getNullCell(this._eraseAttrData()),P),this._bufferService.buffer.clearMarkers(this._activeBuffer.ybase+T),F.isWrapped=!1)}eraseInDisplay(T,P=!1){let F;switch(this._restrictCursor(this._bufferService.cols),T.params[0]){case 0:for(F=this._activeBuffer.y,this._dirtyRowTracker.markDirty(F),this._eraseInBufferLine(F++,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,P);F<this._bufferService.rows;F++)this._resetBufferLine(F,P);this._dirtyRowTracker.markDirty(F);break;case 1:for(F=this._activeBuffer.y,this._dirtyRowTracker.markDirty(F),this._eraseInBufferLine(F,0,this._activeBuffer.x+1,!0,P),this._activeBuffer.x+1>=this._bufferService.cols&&(this._activeBuffer.lines.get(F+1).isWrapped=!1);F--;)this._resetBufferLine(F,P);this._dirtyRowTracker.markDirty(0);break;case 2:for(F=this._bufferService.rows,this._dirtyRowTracker.markDirty(F-1);F--;)this._resetBufferLine(F,P);this._dirtyRowTracker.markDirty(0);break;case 3:const W=this._activeBuffer.lines.length-this._bufferService.rows;W>0&&(this._activeBuffer.lines.trimStart(W),this._activeBuffer.ybase=Math.max(this._activeBuffer.ybase-W,0),this._activeBuffer.ydisp=Math.max(this._activeBuffer.ydisp-W,0),this._onScroll.fire(0))}return!0}eraseInLine(T,P=!1){switch(this._restrictCursor(this._bufferService.cols),T.params[0]){case 0:this._eraseInBufferLine(this._activeBuffer.y,this._activeBuffer.x,this._bufferService.cols,this._activeBuffer.x===0,P);break;case 1:this._eraseInBufferLine(this._activeBuffer.y,0,this._activeBuffer.x+1,!1,P);break;case 2:this._eraseInBufferLine(this._activeBuffer.y,0,this._bufferService.cols,!0,P)}return this._dirtyRowTracker.markDirty(this._activeBuffer.y),!0}insertLines(T){this._restrictCursor();let P=T.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=this._activeBuffer.ybase+this._activeBuffer.y,W=this._bufferService.rows-1-this._activeBuffer.scrollBottom,Q=this._bufferService.rows-1+this._activeBuffer.ybase-W+1;for(;P--;)this._activeBuffer.lines.splice(Q-1,1),this._activeBuffer.lines.splice(F,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}deleteLines(T){this._restrictCursor();let P=T.params[0]||1;if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const F=this._activeBuffer.ybase+this._activeBuffer.y;let W;for(W=this._bufferService.rows-1-this._activeBuffer.scrollBottom,W=this._bufferService.rows-1+this._activeBuffer.ybase-W;P--;)this._activeBuffer.lines.splice(F,1),this._activeBuffer.lines.splice(W,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.y,this._activeBuffer.scrollBottom),this._activeBuffer.x=0,!0}insertChars(T){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.insertCells(this._activeBuffer.x,T.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}deleteChars(T){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.deleteCells(this._activeBuffer.x,T.params[0]||1,this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}scrollUp(T){let P=T.params[0]||1;for(;P--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,0,this._activeBuffer.getBlankLine(this._eraseAttrData()));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollDown(T){let P=T.params[0]||1;for(;P--;)this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollBottom,1),this._activeBuffer.lines.splice(this._activeBuffer.ybase+this._activeBuffer.scrollTop,0,this._activeBuffer.getBlankLine(l.DEFAULT_ATTR_DATA));return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollLeft(T){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=T.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);W.deleteCells(0,P,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}scrollRight(T){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=T.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);W.insertCells(0,P,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}insertColumns(T){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=T.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);W.insertCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}deleteColumns(T){if(this._activeBuffer.y>this._activeBuffer.scrollBottom||this._activeBuffer.y<this._activeBuffer.scrollTop)return!0;const P=T.params[0]||1;for(let F=this._activeBuffer.scrollTop;F<=this._activeBuffer.scrollBottom;++F){const W=this._activeBuffer.lines.get(this._activeBuffer.ybase+F);W.deleteCells(this._activeBuffer.x,P,this._activeBuffer.getNullCell(this._eraseAttrData())),W.isWrapped=!1}return this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom),!0}eraseChars(T){this._restrictCursor();const P=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y);return P&&(P.replaceCells(this._activeBuffer.x,this._activeBuffer.x+(T.params[0]||1),this._activeBuffer.getNullCell(this._eraseAttrData())),this._dirtyRowTracker.markDirty(this._activeBuffer.y)),!0}repeatPrecedingCharacter(T){const P=this._parser.precedingJoinState;if(!P)return!0;const F=T.params[0]||1,W=a.UnicodeService.extractWidth(P),Q=this._activeBuffer.x-W,ce=this._activeBuffer.lines.get(this._activeBuffer.ybase+this._activeBuffer.y).getString(Q),ee=new Uint32Array(ce.length*F);let _e=0;for(let j=0;j<ce.length;){const J=ce.codePointAt(j)||0;ee[_e++]=J,j+=J>65535?2:1}let V=_e;for(let j=1;j<F;++j)ee.copyWithin(V,0,_e),V+=_e;return this.print(ee,0,V),!0}sendDeviceAttributesPrimary(T){return T.params[0]>0||(this._is("xterm")||this._is("rxvt-unicode")||this._is("screen")?this._coreService.triggerDataEvent(c.C0.ESC+"[?1;2c"):this._is("linux")&&this._coreService.triggerDataEvent(c.C0.ESC+"[?6c")),!0}sendDeviceAttributesSecondary(T){return T.params[0]>0||(this._is("xterm")?this._coreService.triggerDataEvent(c.C0.ESC+"[>0;276;0c"):this._is("rxvt-unicode")?this._coreService.triggerDataEvent(c.C0.ESC+"[>85;95;0c"):this._is("linux")?this._coreService.triggerDataEvent(T.params[0]+"c"):this._is("screen")&&this._coreService.triggerDataEvent(c.C0.ESC+"[>83;40003;0c")),!0}_is(T){return(this._optionsService.rawOptions.termName+"").indexOf(T)===0}setMode(T){for(let P=0;P<T.length;P++)switch(T.params[P]){case 4:this._coreService.modes.insertMode=!0;break;case 20:this._optionsService.options.convertEol=!0}return!0}setModePrivate(T){for(let P=0;P<T.length;P++)switch(T.params[P]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!0;break;case 2:this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),this._charsetService.setgCharset(1,_.DEFAULT_CHARSET),this._charsetService.setgCharset(2,_.DEFAULT_CHARSET),this._charsetService.setgCharset(3,_.DEFAULT_CHARSET);break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(132,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!0,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!0;break;case 12:this._optionsService.options.cursorBlink=!0;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!0;break;case 66:this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire();break;case 9:this._coreMouseService.activeProtocol="X10";break;case 1e3:this._coreMouseService.activeProtocol="VT200";break;case 1002:this._coreMouseService.activeProtocol="DRAG";break;case 1003:this._coreMouseService.activeProtocol="ANY";break;case 1004:this._coreService.decPrivateModes.sendFocus=!0,this._onRequestSendFocus.fire();break;case 1005:this._logService.debug("DECSET 1005 not supported (see #2507)");break;case 1006:this._coreMouseService.activeEncoding="SGR";break;case 1015:this._logService.debug("DECSET 1015 not supported (see #2507)");break;case 1016:this._coreMouseService.activeEncoding="SGR_PIXELS";break;case 25:this._coreService.isCursorHidden=!1;break;case 1048:this.saveCursor();break;case 1049:this.saveCursor();case 47:case 1047:this._bufferService.buffers.activateAltBuffer(this._eraseAttrData()),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!0}return!0}resetMode(T){for(let P=0;P<T.length;P++)switch(T.params[P]){case 4:this._coreService.modes.insertMode=!1;break;case 20:this._optionsService.options.convertEol=!1}return!0}resetModePrivate(T){for(let P=0;P<T.length;P++)switch(T.params[P]){case 1:this._coreService.decPrivateModes.applicationCursorKeys=!1;break;case 3:this._optionsService.rawOptions.windowOptions.setWinLines&&(this._bufferService.resize(80,this._bufferService.rows),this._onRequestReset.fire());break;case 6:this._coreService.decPrivateModes.origin=!1,this._setCursor(0,0);break;case 7:this._coreService.decPrivateModes.wraparound=!1;break;case 12:this._optionsService.options.cursorBlink=!1;break;case 45:this._coreService.decPrivateModes.reverseWraparound=!1;break;case 66:this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire();break;case 9:case 1e3:case 1002:case 1003:this._coreMouseService.activeProtocol="NONE";break;case 1004:this._coreService.decPrivateModes.sendFocus=!1;break;case 1005:this._logService.debug("DECRST 1005 not supported (see #2507)");break;case 1006:case 1016:this._coreMouseService.activeEncoding="DEFAULT";break;case 1015:this._logService.debug("DECRST 1015 not supported (see #2507)");break;case 25:this._coreService.isCursorHidden=!0;break;case 1048:this.restoreCursor();break;case 1049:case 47:case 1047:this._bufferService.buffers.activateNormalBuffer(),T.params[P]===1049&&this.restoreCursor(),this._coreService.isCursorInitialized=!0,this._onRequestRefreshRows.fire(0,this._bufferService.rows-1),this._onRequestSyncScrollBar.fire();break;case 2004:this._coreService.decPrivateModes.bracketedPasteMode=!1}return!0}requestMode(T,P){const F=this._coreService.decPrivateModes,{activeProtocol:W,activeEncoding:Q}=this._coreMouseService,ce=this._coreService,{buffers:ee,cols:_e}=this._bufferService,{active:V,alt:j}=ee,J=this._optionsService.rawOptions,re=Me=>Me?1:2,he=T.params[0];return le=he,Ee=P?he===2?4:he===4?re(ce.modes.insertMode):he===12?3:he===20?re(J.convertEol):0:he===1?re(F.applicationCursorKeys):he===3?J.windowOptions.setWinLines?_e===80?2:_e===132?1:0:0:he===6?re(F.origin):he===7?re(F.wraparound):he===8?3:he===9?re(W==="X10"):he===12?re(J.cursorBlink):he===25?re(!ce.isCursorHidden):he===45?re(F.reverseWraparound):he===66?re(F.applicationKeypad):he===67?4:he===1e3?re(W==="VT200"):he===1002?re(W==="DRAG"):he===1003?re(W==="ANY"):he===1004?re(F.sendFocus):he===1005?4:he===1006?re(Q==="SGR"):he===1015?4:he===1016?re(Q==="SGR_PIXELS"):he===1048?1:he===47||he===1047||he===1049?re(V===j):he===2004?re(F.bracketedPasteMode):0,ce.triggerDataEvent(`${c.C0.ESC}[${P?"":"?"}${le};${Ee}$y`),!0;var le,Ee}_updateAttrColor(T,P,F,W,Q){return P===2?(T|=50331648,T&=-16777216,T|=n.AttributeData.fromColorRGB([F,W,Q])):P===5&&(T&=-50331904,T|=33554432|255&F),T}_extractColor(T,P,F){const W=[0,0,-1,0,0,0];let Q=0,ce=0;do{if(W[ce+Q]=T.params[P+ce],T.hasSubParams(P+ce)){const ee=T.getSubParams(P+ce);let _e=0;do W[1]===5&&(Q=1),W[ce+_e+1+Q]=ee[_e];while(++_e<ee.length&&_e+ce+1+Q<W.length);break}if(W[1]===5&&ce+Q>=2||W[1]===2&&ce+Q>=5)break;W[1]&&(Q=1)}while(++ce+P<T.length&&ce+Q<W.length);for(let ee=2;ee<W.length;++ee)W[ee]===-1&&(W[ee]=0);switch(W[0]){case 38:F.fg=this._updateAttrColor(F.fg,W[1],W[3],W[4],W[5]);break;case 48:F.bg=this._updateAttrColor(F.bg,W[1],W[3],W[4],W[5]);break;case 58:F.extended=F.extended.clone(),F.extended.underlineColor=this._updateAttrColor(F.extended.underlineColor,W[1],W[3],W[4],W[5])}return ce}_processUnderline(T,P){P.extended=P.extended.clone(),(!~T||T>5)&&(T=1),P.extended.underlineStyle=T,P.fg|=268435456,T===0&&(P.fg&=-268435457),P.updateExtended()}_processSGR0(T){T.fg=l.DEFAULT_ATTR_DATA.fg,T.bg=l.DEFAULT_ATTR_DATA.bg,T.extended=T.extended.clone(),T.extended.underlineStyle=0,T.extended.underlineColor&=-67108864,T.updateExtended()}charAttributes(T){if(T.length===1&&T.params[0]===0)return this._processSGR0(this._curAttrData),!0;const P=T.length;let F;const W=this._curAttrData;for(let Q=0;Q<P;Q++)F=T.params[Q],F>=30&&F<=37?(W.fg&=-50331904,W.fg|=16777216|F-30):F>=40&&F<=47?(W.bg&=-50331904,W.bg|=16777216|F-40):F>=90&&F<=97?(W.fg&=-50331904,W.fg|=16777224|F-90):F>=100&&F<=107?(W.bg&=-50331904,W.bg|=16777224|F-100):F===0?this._processSGR0(W):F===1?W.fg|=134217728:F===3?W.bg|=67108864:F===4?(W.fg|=268435456,this._processUnderline(T.hasSubParams(Q)?T.getSubParams(Q)[0]:1,W)):F===5?W.fg|=536870912:F===7?W.fg|=67108864:F===8?W.fg|=1073741824:F===9?W.fg|=2147483648:F===2?W.bg|=134217728:F===21?this._processUnderline(2,W):F===22?(W.fg&=-134217729,W.bg&=-134217729):F===23?W.bg&=-67108865:F===24?(W.fg&=-268435457,this._processUnderline(0,W)):F===25?W.fg&=-536870913:F===27?W.fg&=-67108865:F===28?W.fg&=-1073741825:F===29?W.fg&=2147483647:F===39?(W.fg&=-67108864,W.fg|=16777215&l.DEFAULT_ATTR_DATA.fg):F===49?(W.bg&=-67108864,W.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):F===38||F===48||F===58?Q+=this._extractColor(T,Q,W):F===53?W.bg|=1073741824:F===55?W.bg&=-1073741825:F===59?(W.extended=W.extended.clone(),W.extended.underlineColor=-1,W.updateExtended()):F===100?(W.fg&=-67108864,W.fg|=16777215&l.DEFAULT_ATTR_DATA.fg,W.bg&=-67108864,W.bg|=16777215&l.DEFAULT_ATTR_DATA.bg):this._logService.debug("Unknown SGR attribute: %d.",F);return!0}deviceStatus(T){switch(T.params[0]){case 5:this._coreService.triggerDataEvent(`${c.C0.ESC}[0n`);break;case 6:const P=this._activeBuffer.y+1,F=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${c.C0.ESC}[${P};${F}R`)}return!0}deviceStatusPrivate(T){if(T.params[0]===6){const P=this._activeBuffer.y+1,F=this._activeBuffer.x+1;this._coreService.triggerDataEvent(`${c.C0.ESC}[?${P};${F}R`)}return!0}softReset(T){return this._coreService.isCursorHidden=!1,this._onRequestSyncScrollBar.fire(),this._activeBuffer.scrollTop=0,this._activeBuffer.scrollBottom=this._bufferService.rows-1,this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._coreService.reset(),this._charsetService.reset(),this._activeBuffer.savedX=0,this._activeBuffer.savedY=this._activeBuffer.ybase,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,this._coreService.decPrivateModes.origin=!1,!0}setCursorStyle(T){const P=T.params[0]||1;switch(P){case 1:case 2:this._optionsService.options.cursorStyle="block";break;case 3:case 4:this._optionsService.options.cursorStyle="underline";break;case 5:case 6:this._optionsService.options.cursorStyle="bar"}const F=P%2==1;return this._optionsService.options.cursorBlink=F,!0}setScrollRegion(T){const P=T.params[0]||1;let F;return(T.length<2||(F=T.params[1])>this._bufferService.rows||F===0)&&(F=this._bufferService.rows),F>P&&(this._activeBuffer.scrollTop=P-1,this._activeBuffer.scrollBottom=F-1,this._setCursor(0,0)),!0}windowOptions(T){if(!O(T.params[0],this._optionsService.rawOptions.windowOptions))return!0;const P=T.length>1?T.params[1]:0;switch(T.params[0]){case 14:P!==2&&this._onRequestWindowsOptionsReport.fire(I.GET_WIN_SIZE_PIXELS);break;case 16:this._onRequestWindowsOptionsReport.fire(I.GET_CELL_SIZE_PIXELS);break;case 18:this._bufferService&&this._coreService.triggerDataEvent(`${c.C0.ESC}[8;${this._bufferService.rows};${this._bufferService.cols}t`);break;case 22:P!==0&&P!==2||(this._windowTitleStack.push(this._windowTitle),this._windowTitleStack.length>10&&this._windowTitleStack.shift()),P!==0&&P!==1||(this._iconNameStack.push(this._iconName),this._iconNameStack.length>10&&this._iconNameStack.shift());break;case 23:P!==0&&P!==2||this._windowTitleStack.length&&this.setTitle(this._windowTitleStack.pop()),P!==0&&P!==1||this._iconNameStack.length&&this.setIconName(this._iconNameStack.pop())}return!0}saveCursor(T){return this._activeBuffer.savedX=this._activeBuffer.x,this._activeBuffer.savedY=this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.savedCurAttrData.fg=this._curAttrData.fg,this._activeBuffer.savedCurAttrData.bg=this._curAttrData.bg,this._activeBuffer.savedCharset=this._charsetService.charset,!0}restoreCursor(T){return this._activeBuffer.x=this._activeBuffer.savedX||0,this._activeBuffer.y=Math.max(this._activeBuffer.savedY-this._activeBuffer.ybase,0),this._curAttrData.fg=this._activeBuffer.savedCurAttrData.fg,this._curAttrData.bg=this._activeBuffer.savedCurAttrData.bg,this._charsetService.charset=this._savedCharset,this._activeBuffer.savedCharset&&(this._charsetService.charset=this._activeBuffer.savedCharset),this._restrictCursor(),!0}setTitle(T){return this._windowTitle=T,this._onTitleChange.fire(T),!0}setIconName(T){return this._iconName=T,!0}setOrReportIndexedColor(T){const P=[],F=T.split(";");for(;F.length>1;){const W=F.shift(),Q=F.shift();if(/^\d+$/.exec(W)){const ce=parseInt(W);if(U(ce))if(Q==="?")P.push({type:0,index:ce});else{const ee=(0,w.parseColor)(Q);ee&&P.push({type:1,index:ce,color:ee})}}}return P.length&&this._onColor.fire(P),!0}setHyperlink(T){const P=T.split(";");return!(P.length<2)&&(P[1]?this._createHyperlink(P[0],P[1]):!P[0]&&this._finishHyperlink())}_createHyperlink(T,P){this._getCurrentLinkId()&&this._finishHyperlink();const F=T.split(":");let W;const Q=F.findIndex((ce=>ce.startsWith("id=")));return Q!==-1&&(W=F[Q].slice(3)||void 0),this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=this._oscLinkService.registerLink({id:W,uri:P}),this._curAttrData.updateExtended(),!0}_finishHyperlink(){return this._curAttrData.extended=this._curAttrData.extended.clone(),this._curAttrData.extended.urlId=0,this._curAttrData.updateExtended(),!0}_setOrReportSpecialColor(T,P){const F=T.split(";");for(let W=0;W<F.length&&!(P>=this._specialColors.length);++W,++P)if(F[W]==="?")this._onColor.fire([{type:0,index:this._specialColors[P]}]);else{const Q=(0,w.parseColor)(F[W]);Q&&this._onColor.fire([{type:1,index:this._specialColors[P],color:Q}])}return!0}setOrReportFgColor(T){return this._setOrReportSpecialColor(T,0)}setOrReportBgColor(T){return this._setOrReportSpecialColor(T,1)}setOrReportCursorColor(T){return this._setOrReportSpecialColor(T,2)}restoreIndexedColor(T){if(!T)return this._onColor.fire([{type:2}]),!0;const P=[],F=T.split(";");for(let W=0;W<F.length;++W)if(/^\d+$/.exec(F[W])){const Q=parseInt(F[W]);U(Q)&&P.push({type:2,index:Q})}return P.length&&this._onColor.fire(P),!0}restoreFgColor(T){return this._onColor.fire([{type:2,index:256}]),!0}restoreBgColor(T){return this._onColor.fire([{type:2,index:257}]),!0}restoreCursorColor(T){return this._onColor.fire([{type:2,index:258}]),!0}nextLine(){return this._activeBuffer.x=0,this.index(),!0}keypadApplicationMode(){return this._logService.debug("Serial port requested application keypad."),this._coreService.decPrivateModes.applicationKeypad=!0,this._onRequestSyncScrollBar.fire(),!0}keypadNumericMode(){return this._logService.debug("Switching back to normal keypad."),this._coreService.decPrivateModes.applicationKeypad=!1,this._onRequestSyncScrollBar.fire(),!0}selectDefaultCharset(){return this._charsetService.setgLevel(0),this._charsetService.setgCharset(0,_.DEFAULT_CHARSET),!0}selectCharset(T){return T.length!==2?(this.selectDefaultCharset(),!0):(T[0]==="/"||this._charsetService.setgCharset(M[T[0]],_.CHARSETS[T[1]]||_.DEFAULT_CHARSET),!0)}index(){return this._restrictCursor(),this._activeBuffer.y++,this._activeBuffer.y===this._activeBuffer.scrollBottom+1?(this._activeBuffer.y--,this._bufferService.scroll(this._eraseAttrData())):this._activeBuffer.y>=this._bufferService.rows&&(this._activeBuffer.y=this._bufferService.rows-1),this._restrictCursor(),!0}tabSet(){return this._activeBuffer.tabs[this._activeBuffer.x]=!0,!0}reverseIndex(){if(this._restrictCursor(),this._activeBuffer.y===this._activeBuffer.scrollTop){const T=this._activeBuffer.scrollBottom-this._activeBuffer.scrollTop;this._activeBuffer.lines.shiftElements(this._activeBuffer.ybase+this._activeBuffer.y,T,1),this._activeBuffer.lines.set(this._activeBuffer.ybase+this._activeBuffer.y,this._activeBuffer.getBlankLine(this._eraseAttrData())),this._dirtyRowTracker.markRangeDirty(this._activeBuffer.scrollTop,this._activeBuffer.scrollBottom)}else this._activeBuffer.y--,this._restrictCursor();return!0}fullReset(){return this._parser.reset(),this._onRequestReset.fire(),!0}reset(){this._curAttrData=l.DEFAULT_ATTR_DATA.clone(),this._eraseAttrDataInternal=l.DEFAULT_ATTR_DATA.clone()}_eraseAttrData(){return this._eraseAttrDataInternal.bg&=-67108864,this._eraseAttrDataInternal.bg|=67108863&this._curAttrData.bg,this._eraseAttrDataInternal}setgLevel(T){return this._charsetService.setgLevel(T),!0}screenAlignmentPattern(){const T=new s.CellData;T.content=4194373,T.fg=this._curAttrData.fg,T.bg=this._curAttrData.bg,this._setCursor(0,0);for(let P=0;P<this._bufferService.rows;++P){const F=this._activeBuffer.ybase+this._activeBuffer.y+P,W=this._activeBuffer.lines.get(F);W&&(W.fill(T),W.isWrapped=!1)}return this._dirtyRowTracker.markAllDirty(),this._setCursor(0,0),!0}requestStatusString(T,P){const F=this._bufferService.buffer,W=this._optionsService.rawOptions;return(Q=>(this._coreService.triggerDataEvent(`${c.C0.ESC}${Q}${c.C0.ESC}\\`),!0))(T==='"q'?`P1$r${this._curAttrData.isProtected()?1:0}"q`:T==='"p'?'P1$r61;1"p':T==="r"?`P1$r${F.scrollTop+1};${F.scrollBottom+1}r`:T==="m"?"P1$r0m":T===" q"?`P1$r${{block:2,underline:4,bar:6}[W.cursorStyle]-(W.cursorBlink?1:0)} q`:"P0$r")}markRangeDirty(T,P){this._dirtyRowTracker.markRangeDirty(T,P)}}o.InputHandler=Y;let ne=class{constructor(se){this._bufferService=se,this.clearRange()}clearRange(){this.start=this._bufferService.buffer.y,this.end=this._bufferService.buffer.y}markDirty(se){se<this.start?this.start=se:se>this.end&&(this.end=se)}markRangeDirty(se,T){se>T&&(z=se,se=T,T=z),se<this.start&&(this.start=se),T>this.end&&(this.end=T)}markAllDirty(){this.markRangeDirty(0,this._bufferService.rows-1)}};function U(se){return 0<=se&&se<256}ne=d([v(0,p.IBufferService)],ne)},844:(D,o)=>{function i(d){for(const v of d)v.dispose();d.length=0}Object.defineProperty(o,"__esModule",{value:!0}),o.getDisposeArrayDisposable=o.disposeArray=o.toDisposable=o.MutableDisposable=o.Disposable=void 0,o.Disposable=class{constructor(){this._disposables=[],this._isDisposed=!1}dispose(){this._isDisposed=!0;for(const d of this._disposables)d.dispose();this._disposables.length=0}register(d){return this._disposables.push(d),d}unregister(d){const v=this._disposables.indexOf(d);v!==-1&&this._disposables.splice(v,1)}},o.MutableDisposable=class{constructor(){this._isDisposed=!1}get value(){return this._isDisposed?void 0:this._value}set value(d){this._isDisposed||d===this._value||(this._value?.dispose(),this._value=d)}clear(){this.value=void 0}dispose(){this._isDisposed=!0,this._value?.dispose(),this._value=void 0}},o.toDisposable=function(d){return{dispose:d}},o.disposeArray=i,o.getDisposeArrayDisposable=function(d){return{dispose:()=>i(d)}}},1505:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.FourKeyMap=o.TwoKeyMap=void 0;class i{constructor(){this._data={}}set(v,c,_){this._data[v]||(this._data[v]={}),this._data[v][c]=_}get(v,c){return this._data[v]?this._data[v][c]:void 0}clear(){this._data={}}}o.TwoKeyMap=i,o.FourKeyMap=class{constructor(){this._data=new i}set(d,v,c,_,C){this._data.get(d,v)||this._data.set(d,v,new i),this._data.get(d,v).set(c,_,C)}get(d,v,c,_){return this._data.get(d,v)?.get(c,_)}clear(){this._data.clear()}}},6114:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.isChromeOS=o.isLinux=o.isWindows=o.isIphone=o.isIpad=o.isMac=o.getSafariVersion=o.isSafari=o.isLegacyEdge=o.isFirefox=o.isNode=void 0,o.isNode=typeof process<"u"&&"title"in process;const i=o.isNode?"node":navigator.userAgent,d=o.isNode?"node":navigator.platform;o.isFirefox=i.includes("Firefox"),o.isLegacyEdge=i.includes("Edge"),o.isSafari=/^((?!chrome|android).)*safari/i.test(i),o.getSafariVersion=function(){if(!o.isSafari)return 0;const v=i.match(/Version\/(\d+)/);return v===null||v.length<2?0:parseInt(v[1])},o.isMac=["Macintosh","MacIntel","MacPPC","Mac68K"].includes(d),o.isIpad=d==="iPad",o.isIphone=d==="iPhone",o.isWindows=["Windows","Win16","Win32","WinCE"].includes(d),o.isLinux=d.indexOf("Linux")>=0,o.isChromeOS=/\bCrOS\b/.test(i)},6106:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.SortedList=void 0;let i=0;o.SortedList=class{constructor(d){this._getKey=d,this._array=[]}clear(){this._array.length=0}insert(d){this._array.length!==0?(i=this._search(this._getKey(d)),this._array.splice(i,0,d)):this._array.push(d)}delete(d){if(this._array.length===0)return!1;const v=this._getKey(d);if(v===void 0||(i=this._search(v),i===-1)||this._getKey(this._array[i])!==v)return!1;do if(this._array[i]===d)return this._array.splice(i,1),!0;while(++i<this._array.length&&this._getKey(this._array[i])===v);return!1}*getKeyIterator(d){if(this._array.length!==0&&(i=this._search(d),!(i<0||i>=this._array.length)&&this._getKey(this._array[i])===d))do yield this._array[i];while(++i<this._array.length&&this._getKey(this._array[i])===d)}forEachByKey(d,v){if(this._array.length!==0&&(i=this._search(d),!(i<0||i>=this._array.length)&&this._getKey(this._array[i])===d))do v(this._array[i]);while(++i<this._array.length&&this._getKey(this._array[i])===d)}values(){return[...this._array].values()}_search(d){let v=0,c=this._array.length-1;for(;c>=v;){let _=v+c>>1;const C=this._getKey(this._array[_]);if(C>d)c=_-1;else{if(!(C<d)){for(;_>0&&this._getKey(this._array[_-1])===d;)_--;return _}v=_+1}}return v}}},7226:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DebouncedIdleTask=o.IdleTaskQueue=o.PriorityTaskQueue=void 0;const d=i(6114);class v{constructor(){this._tasks=[],this._i=0}enqueue(C){this._tasks.push(C),this._start()}flush(){for(;this._i<this._tasks.length;)this._tasks[this._i]()||this._i++;this.clear()}clear(){this._idleCallback&&(this._cancelCallback(this._idleCallback),this._idleCallback=void 0),this._i=0,this._tasks.length=0}_start(){this._idleCallback||(this._idleCallback=this._requestCallback(this._process.bind(this)))}_process(C){this._idleCallback=void 0;let S=0,m=0,l=C.timeRemaining(),r=0;for(;this._i<this._tasks.length;){if(S=Date.now(),this._tasks[this._i]()||this._i++,S=Math.max(1,Date.now()-S),m=Math.max(S,m),r=C.timeRemaining(),1.5*m>r)return l-S<-20&&console.warn(`task queue exceeded allotted deadline by ${Math.abs(Math.round(l-S))}ms`),void this._start();l=r}this.clear()}}class c extends v{_requestCallback(C){return setTimeout((()=>C(this._createDeadline(16))))}_cancelCallback(C){clearTimeout(C)}_createDeadline(C){const S=Date.now()+C;return{timeRemaining:()=>Math.max(0,S-Date.now())}}}o.PriorityTaskQueue=c,o.IdleTaskQueue=!d.isNode&&"requestIdleCallback"in window?class extends v{_requestCallback(_){return requestIdleCallback(_)}_cancelCallback(_){cancelIdleCallback(_)}}:c,o.DebouncedIdleTask=class{constructor(){this._queue=new o.IdleTaskQueue}set(_){this._queue.clear(),this._queue.enqueue(_)}flush(){this._queue.flush()}}},9282:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.updateWindowsModeWrappedState=void 0;const d=i(643);o.updateWindowsModeWrappedState=function(v){const c=v.buffer.lines.get(v.buffer.ybase+v.buffer.y-1),_=c?.get(v.cols-1),C=v.buffer.lines.get(v.buffer.ybase+v.buffer.y);C&&_&&(C.isWrapped=_[d.CHAR_DATA_CODE_INDEX]!==d.NULL_CELL_CODE&&_[d.CHAR_DATA_CODE_INDEX]!==d.WHITESPACE_CELL_CODE)}},3734:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ExtendedAttrs=o.AttributeData=void 0;class i{constructor(){this.fg=0,this.bg=0,this.extended=new d}static toColorRGB(c){return[c>>>16&255,c>>>8&255,255&c]}static fromColorRGB(c){return(255&c[0])<<16|(255&c[1])<<8|255&c[2]}clone(){const c=new i;return c.fg=this.fg,c.bg=this.bg,c.extended=this.extended.clone(),c}isInverse(){return 67108864&this.fg}isBold(){return 134217728&this.fg}isUnderline(){return this.hasExtendedAttrs()&&this.extended.underlineStyle!==0?1:268435456&this.fg}isBlink(){return 536870912&this.fg}isInvisible(){return 1073741824&this.fg}isItalic(){return 67108864&this.bg}isDim(){return 134217728&this.bg}isStrikethrough(){return 2147483648&this.fg}isProtected(){return 536870912&this.bg}isOverline(){return 1073741824&this.bg}getFgColorMode(){return 50331648&this.fg}getBgColorMode(){return 50331648&this.bg}isFgRGB(){return(50331648&this.fg)==50331648}isBgRGB(){return(50331648&this.bg)==50331648}isFgPalette(){return(50331648&this.fg)==16777216||(50331648&this.fg)==33554432}isBgPalette(){return(50331648&this.bg)==16777216||(50331648&this.bg)==33554432}isFgDefault(){return(50331648&this.fg)==0}isBgDefault(){return(50331648&this.bg)==0}isAttributeDefault(){return this.fg===0&&this.bg===0}getFgColor(){switch(50331648&this.fg){case 16777216:case 33554432:return 255&this.fg;case 50331648:return 16777215&this.fg;default:return-1}}getBgColor(){switch(50331648&this.bg){case 16777216:case 33554432:return 255&this.bg;case 50331648:return 16777215&this.bg;default:return-1}}hasExtendedAttrs(){return 268435456&this.bg}updateExtended(){this.extended.isEmpty()?this.bg&=-268435457:this.bg|=268435456}getUnderlineColor(){if(268435456&this.bg&&~this.extended.underlineColor)switch(50331648&this.extended.underlineColor){case 16777216:case 33554432:return 255&this.extended.underlineColor;case 50331648:return 16777215&this.extended.underlineColor;default:return this.getFgColor()}return this.getFgColor()}getUnderlineColorMode(){return 268435456&this.bg&&~this.extended.underlineColor?50331648&this.extended.underlineColor:this.getFgColorMode()}isUnderlineColorRGB(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==50331648:this.isFgRGB()}isUnderlineColorPalette(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==16777216||(50331648&this.extended.underlineColor)==33554432:this.isFgPalette()}isUnderlineColorDefault(){return 268435456&this.bg&&~this.extended.underlineColor?(50331648&this.extended.underlineColor)==0:this.isFgDefault()}getUnderlineStyle(){return 268435456&this.fg?268435456&this.bg?this.extended.underlineStyle:1:0}getUnderlineVariantOffset(){return this.extended.underlineVariantOffset}}o.AttributeData=i;class d{get ext(){return this._urlId?-469762049&this._ext|this.underlineStyle<<26:this._ext}set ext(c){this._ext=c}get underlineStyle(){return this._urlId?5:(469762048&this._ext)>>26}set underlineStyle(c){this._ext&=-469762049,this._ext|=c<<26&469762048}get underlineColor(){return 67108863&this._ext}set underlineColor(c){this._ext&=-67108864,this._ext|=67108863&c}get urlId(){return this._urlId}set urlId(c){this._urlId=c}get underlineVariantOffset(){const c=(3758096384&this._ext)>>29;return c<0?4294967288^c:c}set underlineVariantOffset(c){this._ext&=536870911,this._ext|=c<<29&3758096384}constructor(c=0,_=0){this._ext=0,this._urlId=0,this._ext=c,this._urlId=_}clone(){return new d(this._ext,this._urlId)}isEmpty(){return this.underlineStyle===0&&this._urlId===0}}o.ExtendedAttrs=d},9092:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Buffer=o.MAX_BUFFER_SIZE=void 0;const d=i(6349),v=i(7226),c=i(3734),_=i(8437),C=i(4634),S=i(511),m=i(643),l=i(4863),r=i(7116);o.MAX_BUFFER_SIZE=4294967295,o.Buffer=class{constructor(t,s,n){this._hasScrollback=t,this._optionsService=s,this._bufferService=n,this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.tabs={},this.savedY=0,this.savedX=0,this.savedCurAttrData=_.DEFAULT_ATTR_DATA.clone(),this.savedCharset=r.DEFAULT_CHARSET,this.markers=[],this._nullCell=S.CellData.fromCharData([0,m.NULL_CELL_CHAR,m.NULL_CELL_WIDTH,m.NULL_CELL_CODE]),this._whitespaceCell=S.CellData.fromCharData([0,m.WHITESPACE_CELL_CHAR,m.WHITESPACE_CELL_WIDTH,m.WHITESPACE_CELL_CODE]),this._isClearing=!1,this._memoryCleanupQueue=new v.IdleTaskQueue,this._memoryCleanupPosition=0,this._cols=this._bufferService.cols,this._rows=this._bufferService.rows,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}getNullCell(t){return t?(this._nullCell.fg=t.fg,this._nullCell.bg=t.bg,this._nullCell.extended=t.extended):(this._nullCell.fg=0,this._nullCell.bg=0,this._nullCell.extended=new c.ExtendedAttrs),this._nullCell}getWhitespaceCell(t){return t?(this._whitespaceCell.fg=t.fg,this._whitespaceCell.bg=t.bg,this._whitespaceCell.extended=t.extended):(this._whitespaceCell.fg=0,this._whitespaceCell.bg=0,this._whitespaceCell.extended=new c.ExtendedAttrs),this._whitespaceCell}getBlankLine(t,s){return new _.BufferLine(this._bufferService.cols,this.getNullCell(t),s)}get hasScrollback(){return this._hasScrollback&&this.lines.maxLength>this._rows}get isCursorInViewport(){const t=this.ybase+this.y-this.ydisp;return t>=0&&t<this._rows}_getCorrectBufferLength(t){if(!this._hasScrollback)return t;const s=t+this._optionsService.rawOptions.scrollback;return s>o.MAX_BUFFER_SIZE?o.MAX_BUFFER_SIZE:s}fillViewportRows(t){if(this.lines.length===0){t===void 0&&(t=_.DEFAULT_ATTR_DATA);let s=this._rows;for(;s--;)this.lines.push(this.getBlankLine(t))}}clear(){this.ydisp=0,this.ybase=0,this.y=0,this.x=0,this.lines=new d.CircularList(this._getCorrectBufferLength(this._rows)),this.scrollTop=0,this.scrollBottom=this._rows-1,this.setupTabStops()}resize(t,s){const n=this.getNullCell(_.DEFAULT_ATTR_DATA);let p=0;const a=this._getCorrectBufferLength(s);if(a>this.lines.maxLength&&(this.lines.maxLength=a),this.lines.length>0){if(this._cols<t)for(let f=0;f<this.lines.length;f++)p+=+this.lines.get(f).resize(t,n);let b=0;if(this._rows<s)for(let f=this._rows;f<s;f++)this.lines.length<s+this.ybase&&(this._optionsService.rawOptions.windowsMode||this._optionsService.rawOptions.windowsPty.backend!==void 0||this._optionsService.rawOptions.windowsPty.buildNumber!==void 0?this.lines.push(new _.BufferLine(t,n)):this.ybase>0&&this.lines.length<=this.ybase+this.y+b+1?(this.ybase--,b++,this.ydisp>0&&this.ydisp--):this.lines.push(new _.BufferLine(t,n)));else for(let f=this._rows;f>s;f--)this.lines.length>s+this.ybase&&(this.lines.length>this.ybase+this.y+1?this.lines.pop():(this.ybase++,this.ydisp++));if(a<this.lines.maxLength){const f=this.lines.length-a;f>0&&(this.lines.trimStart(f),this.ybase=Math.max(this.ybase-f,0),this.ydisp=Math.max(this.ydisp-f,0),this.savedY=Math.max(this.savedY-f,0)),this.lines.maxLength=a}this.x=Math.min(this.x,t-1),this.y=Math.min(this.y,s-1),b&&(this.y+=b),this.savedX=Math.min(this.savedX,t-1),this.scrollTop=0}if(this.scrollBottom=s-1,this._isReflowEnabled&&(this._reflow(t,s),this._cols>t))for(let b=0;b<this.lines.length;b++)p+=+this.lines.get(b).resize(t,n);this._cols=t,this._rows=s,this._memoryCleanupQueue.clear(),p>.1*this.lines.length&&(this._memoryCleanupPosition=0,this._memoryCleanupQueue.enqueue((()=>this._batchedMemoryCleanup())))}_batchedMemoryCleanup(){let t=!0;this._memoryCleanupPosition>=this.lines.length&&(this._memoryCleanupPosition=0,t=!1);let s=0;for(;this._memoryCleanupPosition<this.lines.length;)if(s+=this.lines.get(this._memoryCleanupPosition++).cleanupMemory(),s>100)return!0;return t}get _isReflowEnabled(){const t=this._optionsService.rawOptions.windowsPty;return t&&t.buildNumber?this._hasScrollback&&t.backend==="conpty"&&t.buildNumber>=21376:this._hasScrollback&&!this._optionsService.rawOptions.windowsMode}_reflow(t,s){this._cols!==t&&(t>this._cols?this._reflowLarger(t,s):this._reflowSmaller(t,s))}_reflowLarger(t,s){const n=(0,C.reflowLargerGetLinesToRemove)(this.lines,this._cols,t,this.ybase+this.y,this.getNullCell(_.DEFAULT_ATTR_DATA));if(n.length>0){const p=(0,C.reflowLargerCreateNewLayout)(this.lines,n);(0,C.reflowLargerApplyNewLayout)(this.lines,p.layout),this._reflowLargerAdjustViewport(t,s,p.countRemoved)}}_reflowLargerAdjustViewport(t,s,n){const p=this.getNullCell(_.DEFAULT_ATTR_DATA);let a=n;for(;a-- >0;)this.ybase===0?(this.y>0&&this.y--,this.lines.length<s&&this.lines.push(new _.BufferLine(t,p))):(this.ydisp===this.ybase&&this.ydisp--,this.ybase--);this.savedY=Math.max(this.savedY-n,0)}_reflowSmaller(t,s){const n=this.getNullCell(_.DEFAULT_ATTR_DATA),p=[];let a=0;for(let b=this.lines.length-1;b>=0;b--){let f=this.lines.get(b);if(!f||!f.isWrapped&&f.getTrimmedLength()<=t)continue;const w=[f];for(;f.isWrapped&&b>0;)f=this.lines.get(--b),w.unshift(f);const M=this.ybase+this.y;if(M>=b&&M<b+w.length)continue;const N=w[w.length-1].getTrimmedLength(),O=(0,C.reflowSmallerGetNewLineLengths)(w,this._cols,t),I=O.length-w.length;let z;z=this.ybase===0&&this.y!==this.lines.length-1?Math.max(0,this.y-this.lines.maxLength+I):Math.max(0,this.lines.length-this.lines.maxLength+I);const Y=[];for(let F=0;F<I;F++){const W=this.getBlankLine(_.DEFAULT_ATTR_DATA,!0);Y.push(W)}Y.length>0&&(p.push({start:b+w.length+a,newLines:Y}),a+=Y.length),w.push(...Y);let ne=O.length-1,U=O[ne];U===0&&(ne--,U=O[ne]);let se=w.length-I-1,T=N;for(;se>=0;){const F=Math.min(T,U);if(w[ne]===void 0)break;if(w[ne].copyCellsFrom(w[se],T-F,U-F,F,!0),U-=F,U===0&&(ne--,U=O[ne]),T-=F,T===0){se--;const W=Math.max(se,0);T=(0,C.getWrappedLineTrimmedLength)(w,W,this._cols)}}for(let F=0;F<w.length;F++)O[F]<t&&w[F].setCell(O[F],n);let P=I-z;for(;P-- >0;)this.ybase===0?this.y<s-1?(this.y++,this.lines.pop()):(this.ybase++,this.ydisp++):this.ybase<Math.min(this.lines.maxLength,this.lines.length+a)-s&&(this.ybase===this.ydisp&&this.ydisp++,this.ybase++);this.savedY=Math.min(this.savedY+I,this.ybase+s-1)}if(p.length>0){const b=[],f=[];for(let ne=0;ne<this.lines.length;ne++)f.push(this.lines.get(ne));const w=this.lines.length;let M=w-1,N=0,O=p[N];this.lines.length=Math.min(this.lines.maxLength,this.lines.length+a);let I=0;for(let ne=Math.min(this.lines.maxLength-1,w+a-1);ne>=0;ne--)if(O&&O.start>M+I){for(let U=O.newLines.length-1;U>=0;U--)this.lines.set(ne--,O.newLines[U]);ne++,b.push({index:M+1,amount:O.newLines.length}),I+=O.newLines.length,O=p[++N]}else this.lines.set(ne,f[M--]);let z=0;for(let ne=b.length-1;ne>=0;ne--)b[ne].index+=z,this.lines.onInsertEmitter.fire(b[ne]),z+=b[ne].amount;const Y=Math.max(0,w+a-this.lines.maxLength);Y>0&&this.lines.onTrimEmitter.fire(Y)}}translateBufferLineToString(t,s,n=0,p){const a=this.lines.get(t);return a?a.translateToString(s,n,p):""}getWrappedRangeForLine(t){let s=t,n=t;for(;s>0&&this.lines.get(s).isWrapped;)s--;for(;n+1<this.lines.length&&this.lines.get(n+1).isWrapped;)n++;return{first:s,last:n}}setupTabStops(t){for(t!=null?this.tabs[t]||(t=this.prevStop(t)):(this.tabs={},t=0);t<this._cols;t+=this._optionsService.rawOptions.tabStopWidth)this.tabs[t]=!0}prevStop(t){for(t==null&&(t=this.x);!this.tabs[--t]&&t>0;);return t>=this._cols?this._cols-1:t<0?0:t}nextStop(t){for(t==null&&(t=this.x);!this.tabs[++t]&&t<this._cols;);return t>=this._cols?this._cols-1:t<0?0:t}clearMarkers(t){this._isClearing=!0;for(let s=0;s<this.markers.length;s++)this.markers[s].line===t&&(this.markers[s].dispose(),this.markers.splice(s--,1));this._isClearing=!1}clearAllMarkers(){this._isClearing=!0;for(let t=0;t<this.markers.length;t++)this.markers[t].dispose(),this.markers.splice(t--,1);this._isClearing=!1}addMarker(t){const s=new l.Marker(t);return this.markers.push(s),s.register(this.lines.onTrim((n=>{s.line-=n,s.line<0&&s.dispose()}))),s.register(this.lines.onInsert((n=>{s.line>=n.index&&(s.line+=n.amount)}))),s.register(this.lines.onDelete((n=>{s.line>=n.index&&s.line<n.index+n.amount&&s.dispose(),s.line>n.index&&(s.line-=n.amount)}))),s.register(s.onDispose((()=>this._removeMarker(s)))),s}_removeMarker(t){this._isClearing||this.markers.splice(this.markers.indexOf(t),1)}}},8437:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLine=o.DEFAULT_ATTR_DATA=void 0;const d=i(3734),v=i(511),c=i(643),_=i(482);o.DEFAULT_ATTR_DATA=Object.freeze(new d.AttributeData);let C=0;class S{constructor(l,r,t=!1){this.isWrapped=t,this._combined={},this._extendedAttrs={},this._data=new Uint32Array(3*l);const s=r||v.CellData.fromCharData([0,c.NULL_CELL_CHAR,c.NULL_CELL_WIDTH,c.NULL_CELL_CODE]);for(let n=0;n<l;++n)this.setCell(n,s);this.length=l}get(l){const r=this._data[3*l+0],t=2097151&r;return[this._data[3*l+1],2097152&r?this._combined[l]:t?(0,_.stringFromCodePoint)(t):"",r>>22,2097152&r?this._combined[l].charCodeAt(this._combined[l].length-1):t]}set(l,r){this._data[3*l+1]=r[c.CHAR_DATA_ATTR_INDEX],r[c.CHAR_DATA_CHAR_INDEX].length>1?(this._combined[l]=r[1],this._data[3*l+0]=2097152|l|r[c.CHAR_DATA_WIDTH_INDEX]<<22):this._data[3*l+0]=r[c.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|r[c.CHAR_DATA_WIDTH_INDEX]<<22}getWidth(l){return this._data[3*l+0]>>22}hasWidth(l){return 12582912&this._data[3*l+0]}getFg(l){return this._data[3*l+1]}getBg(l){return this._data[3*l+2]}hasContent(l){return 4194303&this._data[3*l+0]}getCodePoint(l){const r=this._data[3*l+0];return 2097152&r?this._combined[l].charCodeAt(this._combined[l].length-1):2097151&r}isCombined(l){return 2097152&this._data[3*l+0]}getString(l){const r=this._data[3*l+0];return 2097152&r?this._combined[l]:2097151&r?(0,_.stringFromCodePoint)(2097151&r):""}isProtected(l){return 536870912&this._data[3*l+2]}loadCell(l,r){return C=3*l,r.content=this._data[C+0],r.fg=this._data[C+1],r.bg=this._data[C+2],2097152&r.content&&(r.combinedData=this._combined[l]),268435456&r.bg&&(r.extended=this._extendedAttrs[l]),r}setCell(l,r){2097152&r.content&&(this._combined[l]=r.combinedData),268435456&r.bg&&(this._extendedAttrs[l]=r.extended),this._data[3*l+0]=r.content,this._data[3*l+1]=r.fg,this._data[3*l+2]=r.bg}setCellFromCodepoint(l,r,t,s){268435456&s.bg&&(this._extendedAttrs[l]=s.extended),this._data[3*l+0]=r|t<<22,this._data[3*l+1]=s.fg,this._data[3*l+2]=s.bg}addCodepointToCell(l,r,t){let s=this._data[3*l+0];2097152&s?this._combined[l]+=(0,_.stringFromCodePoint)(r):2097151&s?(this._combined[l]=(0,_.stringFromCodePoint)(2097151&s)+(0,_.stringFromCodePoint)(r),s&=-2097152,s|=2097152):s=r|4194304,t&&(s&=-12582913,s|=t<<22),this._data[3*l+0]=s}insertCells(l,r,t){if((l%=this.length)&&this.getWidth(l-1)===2&&this.setCellFromCodepoint(l-1,0,1,t),r<this.length-l){const s=new v.CellData;for(let n=this.length-l-r-1;n>=0;--n)this.setCell(l+r+n,this.loadCell(l+n,s));for(let n=0;n<r;++n)this.setCell(l+n,t)}else for(let s=l;s<this.length;++s)this.setCell(s,t);this.getWidth(this.length-1)===2&&this.setCellFromCodepoint(this.length-1,0,1,t)}deleteCells(l,r,t){if(l%=this.length,r<this.length-l){const s=new v.CellData;for(let n=0;n<this.length-l-r;++n)this.setCell(l+n,this.loadCell(l+r+n,s));for(let n=this.length-r;n<this.length;++n)this.setCell(n,t)}else for(let s=l;s<this.length;++s)this.setCell(s,t);l&&this.getWidth(l-1)===2&&this.setCellFromCodepoint(l-1,0,1,t),this.getWidth(l)!==0||this.hasContent(l)||this.setCellFromCodepoint(l,0,1,t)}replaceCells(l,r,t,s=!1){if(s)for(l&&this.getWidth(l-1)===2&&!this.isProtected(l-1)&&this.setCellFromCodepoint(l-1,0,1,t),r<this.length&&this.getWidth(r-1)===2&&!this.isProtected(r)&&this.setCellFromCodepoint(r,0,1,t);l<r&&l<this.length;)this.isProtected(l)||this.setCell(l,t),l++;else for(l&&this.getWidth(l-1)===2&&this.setCellFromCodepoint(l-1,0,1,t),r<this.length&&this.getWidth(r-1)===2&&this.setCellFromCodepoint(r,0,1,t);l<r&&l<this.length;)this.setCell(l++,t)}resize(l,r){if(l===this.length)return 4*this._data.length*2<this._data.buffer.byteLength;const t=3*l;if(l>this.length){if(this._data.buffer.byteLength>=4*t)this._data=new Uint32Array(this._data.buffer,0,t);else{const s=new Uint32Array(t);s.set(this._data),this._data=s}for(let s=this.length;s<l;++s)this.setCell(s,r)}else{this._data=this._data.subarray(0,t);const s=Object.keys(this._combined);for(let p=0;p<s.length;p++){const a=parseInt(s[p],10);a>=l&&delete this._combined[a]}const n=Object.keys(this._extendedAttrs);for(let p=0;p<n.length;p++){const a=parseInt(n[p],10);a>=l&&delete this._extendedAttrs[a]}}return this.length=l,4*t*2<this._data.buffer.byteLength}cleanupMemory(){if(4*this._data.length*2<this._data.buffer.byteLength){const l=new Uint32Array(this._data.length);return l.set(this._data),this._data=l,1}return 0}fill(l,r=!1){if(r)for(let t=0;t<this.length;++t)this.isProtected(t)||this.setCell(t,l);else{this._combined={},this._extendedAttrs={};for(let t=0;t<this.length;++t)this.setCell(t,l)}}copyFrom(l){this.length!==l.length?this._data=new Uint32Array(l._data):this._data.set(l._data),this.length=l.length,this._combined={};for(const r in l._combined)this._combined[r]=l._combined[r];this._extendedAttrs={};for(const r in l._extendedAttrs)this._extendedAttrs[r]=l._extendedAttrs[r];this.isWrapped=l.isWrapped}clone(){const l=new S(0);l._data=new Uint32Array(this._data),l.length=this.length;for(const r in this._combined)l._combined[r]=this._combined[r];for(const r in this._extendedAttrs)l._extendedAttrs[r]=this._extendedAttrs[r];return l.isWrapped=this.isWrapped,l}getTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0])return l+(this._data[3*l+0]>>22);return 0}getNoBgTrimmedLength(){for(let l=this.length-1;l>=0;--l)if(4194303&this._data[3*l+0]||50331648&this._data[3*l+2])return l+(this._data[3*l+0]>>22);return 0}copyCellsFrom(l,r,t,s,n){const p=l._data;if(n)for(let b=s-1;b>=0;b--){for(let f=0;f<3;f++)this._data[3*(t+b)+f]=p[3*(r+b)+f];268435456&p[3*(r+b)+2]&&(this._extendedAttrs[t+b]=l._extendedAttrs[r+b])}else for(let b=0;b<s;b++){for(let f=0;f<3;f++)this._data[3*(t+b)+f]=p[3*(r+b)+f];268435456&p[3*(r+b)+2]&&(this._extendedAttrs[t+b]=l._extendedAttrs[r+b])}const a=Object.keys(l._combined);for(let b=0;b<a.length;b++){const f=parseInt(a[b],10);f>=r&&(this._combined[f-r+t]=l._combined[f])}}translateToString(l,r,t,s){r=r??0,t=t??this.length,l&&(t=Math.min(t,this.getTrimmedLength())),s&&(s.length=0);let n="";for(;r<t;){const p=this._data[3*r+0],a=2097151&p,b=2097152&p?this._combined[r]:a?(0,_.stringFromCodePoint)(a):c.WHITESPACE_CELL_CHAR;if(n+=b,s)for(let f=0;f<b.length;++f)s.push(r);r+=p>>22||1}return s&&s.push(r),n}}o.BufferLine=S},4841:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.getRangeLength=void 0,o.getRangeLength=function(i,d){if(i.start.y>i.end.y)throw new Error(`Buffer range end (${i.end.x}, ${i.end.y}) cannot be before start (${i.start.x}, ${i.start.y})`);return d*(i.end.y-i.start.y)+(i.end.x-i.start.x+1)}},4634:(D,o)=>{function i(d,v,c){if(v===d.length-1)return d[v].getTrimmedLength();const _=!d[v].hasContent(c-1)&&d[v].getWidth(c-1)===1,C=d[v+1].getWidth(0)===2;return _&&C?c-1:c}Object.defineProperty(o,"__esModule",{value:!0}),o.getWrappedLineTrimmedLength=o.reflowSmallerGetNewLineLengths=o.reflowLargerApplyNewLayout=o.reflowLargerCreateNewLayout=o.reflowLargerGetLinesToRemove=void 0,o.reflowLargerGetLinesToRemove=function(d,v,c,_,C){const S=[];for(let m=0;m<d.length-1;m++){let l=m,r=d.get(++l);if(!r.isWrapped)continue;const t=[d.get(m)];for(;l<d.length&&r.isWrapped;)t.push(r),r=d.get(++l);if(_>=m&&_<l){m+=t.length-1;continue}let s=0,n=i(t,s,v),p=1,a=0;for(;p<t.length;){const f=i(t,p,v),w=f-a,M=c-n,N=Math.min(w,M);t[s].copyCellsFrom(t[p],a,n,N,!1),n+=N,n===c&&(s++,n=0),a+=N,a===f&&(p++,a=0),n===0&&s!==0&&t[s-1].getWidth(c-1)===2&&(t[s].copyCellsFrom(t[s-1],c-1,n++,1,!1),t[s-1].setCell(c-1,C))}t[s].replaceCells(n,c,C);let b=0;for(let f=t.length-1;f>0&&(f>s||t[f].getTrimmedLength()===0);f--)b++;b>0&&(S.push(m+t.length-b),S.push(b)),m+=t.length-1}return S},o.reflowLargerCreateNewLayout=function(d,v){const c=[];let _=0,C=v[_],S=0;for(let m=0;m<d.length;m++)if(C===m){const l=v[++_];d.onDeleteEmitter.fire({index:m-S,amount:l}),m+=l-1,S+=l,C=v[++_]}else c.push(m);return{layout:c,countRemoved:S}},o.reflowLargerApplyNewLayout=function(d,v){const c=[];for(let _=0;_<v.length;_++)c.push(d.get(v[_]));for(let _=0;_<c.length;_++)d.set(_,c[_]);d.length=v.length},o.reflowSmallerGetNewLineLengths=function(d,v,c){const _=[],C=d.map(((r,t)=>i(d,t,v))).reduce(((r,t)=>r+t));let S=0,m=0,l=0;for(;l<C;){if(C-l<c){_.push(C-l);break}S+=c;const r=i(d,m,v);S>r&&(S-=r,m++);const t=d[m].getWidth(S-1)===2;t&&S--;const s=t?c-1:c;_.push(s),l+=s}return _},o.getWrappedLineTrimmedLength=i},5295:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferSet=void 0;const d=i(8460),v=i(844),c=i(9092);class _ extends v.Disposable{constructor(S,m){super(),this._optionsService=S,this._bufferService=m,this._onBufferActivate=this.register(new d.EventEmitter),this.onBufferActivate=this._onBufferActivate.event,this.reset(),this.register(this._optionsService.onSpecificOptionChange("scrollback",(()=>this.resize(this._bufferService.cols,this._bufferService.rows)))),this.register(this._optionsService.onSpecificOptionChange("tabStopWidth",(()=>this.setupTabStops())))}reset(){this._normal=new c.Buffer(!0,this._optionsService,this._bufferService),this._normal.fillViewportRows(),this._alt=new c.Buffer(!1,this._optionsService,this._bufferService),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}),this.setupTabStops()}get alt(){return this._alt}get active(){return this._activeBuffer}get normal(){return this._normal}activateNormalBuffer(){this._activeBuffer!==this._normal&&(this._normal.x=this._alt.x,this._normal.y=this._alt.y,this._alt.clearAllMarkers(),this._alt.clear(),this._activeBuffer=this._normal,this._onBufferActivate.fire({activeBuffer:this._normal,inactiveBuffer:this._alt}))}activateAltBuffer(S){this._activeBuffer!==this._alt&&(this._alt.fillViewportRows(S),this._alt.x=this._normal.x,this._alt.y=this._normal.y,this._activeBuffer=this._alt,this._onBufferActivate.fire({activeBuffer:this._alt,inactiveBuffer:this._normal}))}resize(S,m){this._normal.resize(S,m),this._alt.resize(S,m),this.setupTabStops(S)}setupTabStops(S){this._normal.setupTabStops(S),this._alt.setupTabStops(S)}}o.BufferSet=_},511:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CellData=void 0;const d=i(482),v=i(643),c=i(3734);class _ extends c.AttributeData{constructor(){super(...arguments),this.content=0,this.fg=0,this.bg=0,this.extended=new c.ExtendedAttrs,this.combinedData=""}static fromCharData(S){const m=new _;return m.setFromCharData(S),m}isCombined(){return 2097152&this.content}getWidth(){return this.content>>22}getChars(){return 2097152&this.content?this.combinedData:2097151&this.content?(0,d.stringFromCodePoint)(2097151&this.content):""}getCode(){return this.isCombined()?this.combinedData.charCodeAt(this.combinedData.length-1):2097151&this.content}setFromCharData(S){this.fg=S[v.CHAR_DATA_ATTR_INDEX],this.bg=0;let m=!1;if(S[v.CHAR_DATA_CHAR_INDEX].length>2)m=!0;else if(S[v.CHAR_DATA_CHAR_INDEX].length===2){const l=S[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0);if(55296<=l&&l<=56319){const r=S[v.CHAR_DATA_CHAR_INDEX].charCodeAt(1);56320<=r&&r<=57343?this.content=1024*(l-55296)+r-56320+65536|S[v.CHAR_DATA_WIDTH_INDEX]<<22:m=!0}else m=!0}else this.content=S[v.CHAR_DATA_CHAR_INDEX].charCodeAt(0)|S[v.CHAR_DATA_WIDTH_INDEX]<<22;m&&(this.combinedData=S[v.CHAR_DATA_CHAR_INDEX],this.content=2097152|S[v.CHAR_DATA_WIDTH_INDEX]<<22)}getAsCharData(){return[this.fg,this.getChars(),this.getWidth(),this.getCode()]}}o.CellData=_},643:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WHITESPACE_CELL_CODE=o.WHITESPACE_CELL_WIDTH=o.WHITESPACE_CELL_CHAR=o.NULL_CELL_CODE=o.NULL_CELL_WIDTH=o.NULL_CELL_CHAR=o.CHAR_DATA_CODE_INDEX=o.CHAR_DATA_WIDTH_INDEX=o.CHAR_DATA_CHAR_INDEX=o.CHAR_DATA_ATTR_INDEX=o.DEFAULT_EXT=o.DEFAULT_ATTR=o.DEFAULT_COLOR=void 0,o.DEFAULT_COLOR=0,o.DEFAULT_ATTR=256|o.DEFAULT_COLOR<<9,o.DEFAULT_EXT=0,o.CHAR_DATA_ATTR_INDEX=0,o.CHAR_DATA_CHAR_INDEX=1,o.CHAR_DATA_WIDTH_INDEX=2,o.CHAR_DATA_CODE_INDEX=3,o.NULL_CELL_CHAR="",o.NULL_CELL_WIDTH=1,o.NULL_CELL_CODE=0,o.WHITESPACE_CELL_CHAR=" ",o.WHITESPACE_CELL_WIDTH=1,o.WHITESPACE_CELL_CODE=32},4863:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Marker=void 0;const d=i(8460),v=i(844);class c{get id(){return this._id}constructor(C){this.line=C,this.isDisposed=!1,this._disposables=[],this._id=c._nextId++,this._onDispose=this.register(new d.EventEmitter),this.onDispose=this._onDispose.event}dispose(){this.isDisposed||(this.isDisposed=!0,this.line=-1,this._onDispose.fire(),(0,v.disposeArray)(this._disposables),this._disposables.length=0)}register(C){return this._disposables.push(C),C}}o.Marker=c,c._nextId=1},7116:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DEFAULT_CHARSET=o.CHARSETS=void 0,o.CHARSETS={},o.DEFAULT_CHARSET=o.CHARSETS.B,o.CHARSETS[0]={"`":"",a:"",b:"",c:"",d:"",e:"",f:"",g:"",h:"",i:"",j:"",k:"",l:"",m:"",n:"",o:"",p:"",q:"",r:"",s:"",t:"",u:"",v:"",w:"",x:"",y:"",z:"","{":"","|":"","}":"","~":""},o.CHARSETS.A={"#":""},o.CHARSETS.B=void 0,o.CHARSETS[4]={"#":"","@":"","[":"ij","\\":"","]":"|","{":"","|":"f","}":"","~":""},o.CHARSETS.C=o.CHARSETS[5]={"[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.R={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},o.CHARSETS.Q={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.K={"@":"","[":"","\\":"","]":"","{":"","|":"","}":"","~":""},o.CHARSETS.Y={"#":"","@":"","[":"","\\":"","]":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.E=o.CHARSETS[6]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS.Z={"#":"","@":"","[":"","\\":"","]":"","{":"","|":"","}":""},o.CHARSETS.H=o.CHARSETS[7]={"@":"","[":"","\\":"","]":"","^":"","`":"","{":"","|":"","}":"","~":""},o.CHARSETS["="]={"#":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":""}},2584:(D,o)=>{var i,d,v;Object.defineProperty(o,"__esModule",{value:!0}),o.C1_ESCAPED=o.C1=o.C0=void 0,(function(c){c.NUL="\0",c.SOH="",c.STX="",c.ETX="",c.EOT="",c.ENQ="",c.ACK="",c.BEL="\x07",c.BS="\b",c.HT="	",c.LF=`
`,c.VT="\v",c.FF="\f",c.CR="\r",c.SO="",c.SI="",c.DLE="",c.DC1="",c.DC2="",c.DC3="",c.DC4="",c.NAK="",c.SYN="",c.ETB="",c.CAN="",c.EM="",c.SUB="",c.ESC="\x1B",c.FS="",c.GS="",c.RS="",c.US="",c.SP=" ",c.DEL=""})(i||(o.C0=i={})),(function(c){c.PAD="",c.HOP="",c.BPH="",c.NBH="",c.IND="",c.NEL="",c.SSA="",c.ESA="",c.HTS="",c.HTJ="",c.VTS="",c.PLD="",c.PLU="",c.RI="",c.SS2="",c.SS3="",c.DCS="",c.PU1="",c.PU2="",c.STS="",c.CCH="",c.MW="",c.SPA="",c.EPA="",c.SOS="",c.SGCI="",c.SCI="",c.CSI="",c.ST="",c.OSC="",c.PM="",c.APC=""})(d||(o.C1=d={})),(function(c){c.ST=`${i.ESC}\\`})(v||(o.C1_ESCAPED=v={}))},7399:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.evaluateKeyboardEvent=void 0;const d=i(2584),v={48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["`","~"],219:["[","{"],220:["\\","|"],221:["]","}"],222:["'",'"']};o.evaluateKeyboardEvent=function(c,_,C,S){const m={type:0,cancel:!1,key:void 0},l=(c.shiftKey?1:0)|(c.altKey?2:0)|(c.ctrlKey?4:0)|(c.metaKey?8:0);switch(c.keyCode){case 0:c.key==="UIKeyInputUpArrow"?m.key=_?d.C0.ESC+"OA":d.C0.ESC+"[A":c.key==="UIKeyInputLeftArrow"?m.key=_?d.C0.ESC+"OD":d.C0.ESC+"[D":c.key==="UIKeyInputRightArrow"?m.key=_?d.C0.ESC+"OC":d.C0.ESC+"[C":c.key==="UIKeyInputDownArrow"&&(m.key=_?d.C0.ESC+"OB":d.C0.ESC+"[B");break;case 8:m.key=c.ctrlKey?"\b":d.C0.DEL,c.altKey&&(m.key=d.C0.ESC+m.key);break;case 9:if(c.shiftKey){m.key=d.C0.ESC+"[Z";break}m.key=d.C0.HT,m.cancel=!0;break;case 13:m.key=c.altKey?d.C0.ESC+d.C0.CR:d.C0.CR,m.cancel=!0;break;case 27:m.key=d.C0.ESC,c.altKey&&(m.key=d.C0.ESC+d.C0.ESC),m.cancel=!0;break;case 37:if(c.metaKey)break;l?(m.key=d.C0.ESC+"[1;"+(l+1)+"D",m.key===d.C0.ESC+"[1;3D"&&(m.key=d.C0.ESC+(C?"b":"[1;5D"))):m.key=_?d.C0.ESC+"OD":d.C0.ESC+"[D";break;case 39:if(c.metaKey)break;l?(m.key=d.C0.ESC+"[1;"+(l+1)+"C",m.key===d.C0.ESC+"[1;3C"&&(m.key=d.C0.ESC+(C?"f":"[1;5C"))):m.key=_?d.C0.ESC+"OC":d.C0.ESC+"[C";break;case 38:if(c.metaKey)break;l?(m.key=d.C0.ESC+"[1;"+(l+1)+"A",C||m.key!==d.C0.ESC+"[1;3A"||(m.key=d.C0.ESC+"[1;5A")):m.key=_?d.C0.ESC+"OA":d.C0.ESC+"[A";break;case 40:if(c.metaKey)break;l?(m.key=d.C0.ESC+"[1;"+(l+1)+"B",C||m.key!==d.C0.ESC+"[1;3B"||(m.key=d.C0.ESC+"[1;5B")):m.key=_?d.C0.ESC+"OB":d.C0.ESC+"[B";break;case 45:c.shiftKey||c.ctrlKey||(m.key=d.C0.ESC+"[2~");break;case 46:m.key=l?d.C0.ESC+"[3;"+(l+1)+"~":d.C0.ESC+"[3~";break;case 36:m.key=l?d.C0.ESC+"[1;"+(l+1)+"H":_?d.C0.ESC+"OH":d.C0.ESC+"[H";break;case 35:m.key=l?d.C0.ESC+"[1;"+(l+1)+"F":_?d.C0.ESC+"OF":d.C0.ESC+"[F";break;case 33:c.shiftKey?m.type=2:c.ctrlKey?m.key=d.C0.ESC+"[5;"+(l+1)+"~":m.key=d.C0.ESC+"[5~";break;case 34:c.shiftKey?m.type=3:c.ctrlKey?m.key=d.C0.ESC+"[6;"+(l+1)+"~":m.key=d.C0.ESC+"[6~";break;case 112:m.key=l?d.C0.ESC+"[1;"+(l+1)+"P":d.C0.ESC+"OP";break;case 113:m.key=l?d.C0.ESC+"[1;"+(l+1)+"Q":d.C0.ESC+"OQ";break;case 114:m.key=l?d.C0.ESC+"[1;"+(l+1)+"R":d.C0.ESC+"OR";break;case 115:m.key=l?d.C0.ESC+"[1;"+(l+1)+"S":d.C0.ESC+"OS";break;case 116:m.key=l?d.C0.ESC+"[15;"+(l+1)+"~":d.C0.ESC+"[15~";break;case 117:m.key=l?d.C0.ESC+"[17;"+(l+1)+"~":d.C0.ESC+"[17~";break;case 118:m.key=l?d.C0.ESC+"[18;"+(l+1)+"~":d.C0.ESC+"[18~";break;case 119:m.key=l?d.C0.ESC+"[19;"+(l+1)+"~":d.C0.ESC+"[19~";break;case 120:m.key=l?d.C0.ESC+"[20;"+(l+1)+"~":d.C0.ESC+"[20~";break;case 121:m.key=l?d.C0.ESC+"[21;"+(l+1)+"~":d.C0.ESC+"[21~";break;case 122:m.key=l?d.C0.ESC+"[23;"+(l+1)+"~":d.C0.ESC+"[23~";break;case 123:m.key=l?d.C0.ESC+"[24;"+(l+1)+"~":d.C0.ESC+"[24~";break;default:if(!c.ctrlKey||c.shiftKey||c.altKey||c.metaKey)if(C&&!S||!c.altKey||c.metaKey)!C||c.altKey||c.ctrlKey||c.shiftKey||!c.metaKey?c.key&&!c.ctrlKey&&!c.altKey&&!c.metaKey&&c.keyCode>=48&&c.key.length===1?m.key=c.key:c.key&&c.ctrlKey&&(c.key==="_"&&(m.key=d.C0.US),c.key==="@"&&(m.key=d.C0.NUL)):c.keyCode===65&&(m.type=1);else{const r=v[c.keyCode],t=r?.[c.shiftKey?1:0];if(t)m.key=d.C0.ESC+t;else if(c.keyCode>=65&&c.keyCode<=90){const s=c.ctrlKey?c.keyCode-64:c.keyCode+32;let n=String.fromCharCode(s);c.shiftKey&&(n=n.toUpperCase()),m.key=d.C0.ESC+n}else if(c.keyCode===32)m.key=d.C0.ESC+(c.ctrlKey?d.C0.NUL:" ");else if(c.key==="Dead"&&c.code.startsWith("Key")){let s=c.code.slice(3,4);c.shiftKey||(s=s.toLowerCase()),m.key=d.C0.ESC+s,m.cancel=!0}}else c.keyCode>=65&&c.keyCode<=90?m.key=String.fromCharCode(c.keyCode-64):c.keyCode===32?m.key=d.C0.NUL:c.keyCode>=51&&c.keyCode<=55?m.key=String.fromCharCode(c.keyCode-51+27):c.keyCode===56?m.key=d.C0.DEL:c.keyCode===219?m.key=d.C0.ESC:c.keyCode===220?m.key=d.C0.FS:c.keyCode===221&&(m.key=d.C0.GS)}return m}},482:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Utf8ToUtf32=o.StringToUtf32=o.utf32ToString=o.stringFromCodePoint=void 0,o.stringFromCodePoint=function(i){return i>65535?(i-=65536,String.fromCharCode(55296+(i>>10))+String.fromCharCode(i%1024+56320)):String.fromCharCode(i)},o.utf32ToString=function(i,d=0,v=i.length){let c="";for(let _=d;_<v;++_){let C=i[_];C>65535?(C-=65536,c+=String.fromCharCode(55296+(C>>10))+String.fromCharCode(C%1024+56320)):c+=String.fromCharCode(C)}return c},o.StringToUtf32=class{constructor(){this._interim=0}clear(){this._interim=0}decode(i,d){const v=i.length;if(!v)return 0;let c=0,_=0;if(this._interim){const C=i.charCodeAt(_++);56320<=C&&C<=57343?d[c++]=1024*(this._interim-55296)+C-56320+65536:(d[c++]=this._interim,d[c++]=C),this._interim=0}for(let C=_;C<v;++C){const S=i.charCodeAt(C);if(55296<=S&&S<=56319){if(++C>=v)return this._interim=S,c;const m=i.charCodeAt(C);56320<=m&&m<=57343?d[c++]=1024*(S-55296)+m-56320+65536:(d[c++]=S,d[c++]=m)}else S!==65279&&(d[c++]=S)}return c}},o.Utf8ToUtf32=class{constructor(){this.interim=new Uint8Array(3)}clear(){this.interim.fill(0)}decode(i,d){const v=i.length;if(!v)return 0;let c,_,C,S,m=0,l=0,r=0;if(this.interim[0]){let n=!1,p=this.interim[0];p&=(224&p)==192?31:(240&p)==224?15:7;let a,b=0;for(;(a=63&this.interim[++b])&&b<4;)p<<=6,p|=a;const f=(224&this.interim[0])==192?2:(240&this.interim[0])==224?3:4,w=f-b;for(;r<w;){if(r>=v)return 0;if(a=i[r++],(192&a)!=128){r--,n=!0;break}this.interim[b++]=a,p<<=6,p|=63&a}n||(f===2?p<128?r--:d[m++]=p:f===3?p<2048||p>=55296&&p<=57343||p===65279||(d[m++]=p):p<65536||p>1114111||(d[m++]=p)),this.interim.fill(0)}const t=v-4;let s=r;for(;s<v;){for(;!(!(s<t)||128&(c=i[s])||128&(_=i[s+1])||128&(C=i[s+2])||128&(S=i[s+3]));)d[m++]=c,d[m++]=_,d[m++]=C,d[m++]=S,s+=4;if(c=i[s++],c<128)d[m++]=c;else if((224&c)==192){if(s>=v)return this.interim[0]=c,m;if(_=i[s++],(192&_)!=128){s--;continue}if(l=(31&c)<<6|63&_,l<128){s--;continue}d[m++]=l}else if((240&c)==224){if(s>=v)return this.interim[0]=c,m;if(_=i[s++],(192&_)!=128){s--;continue}if(s>=v)return this.interim[0]=c,this.interim[1]=_,m;if(C=i[s++],(192&C)!=128){s--;continue}if(l=(15&c)<<12|(63&_)<<6|63&C,l<2048||l>=55296&&l<=57343||l===65279)continue;d[m++]=l}else if((248&c)==240){if(s>=v)return this.interim[0]=c,m;if(_=i[s++],(192&_)!=128){s--;continue}if(s>=v)return this.interim[0]=c,this.interim[1]=_,m;if(C=i[s++],(192&C)!=128){s--;continue}if(s>=v)return this.interim[0]=c,this.interim[1]=_,this.interim[2]=C,m;if(S=i[s++],(192&S)!=128){s--;continue}if(l=(7&c)<<18|(63&_)<<12|(63&C)<<6|63&S,l<65536||l>1114111)continue;d[m++]=l}}return m}}},225:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeV6=void 0;const d=i(1480),v=[[768,879],[1155,1158],[1160,1161],[1425,1469],[1471,1471],[1473,1474],[1476,1477],[1479,1479],[1536,1539],[1552,1557],[1611,1630],[1648,1648],[1750,1764],[1767,1768],[1770,1773],[1807,1807],[1809,1809],[1840,1866],[1958,1968],[2027,2035],[2305,2306],[2364,2364],[2369,2376],[2381,2381],[2385,2388],[2402,2403],[2433,2433],[2492,2492],[2497,2500],[2509,2509],[2530,2531],[2561,2562],[2620,2620],[2625,2626],[2631,2632],[2635,2637],[2672,2673],[2689,2690],[2748,2748],[2753,2757],[2759,2760],[2765,2765],[2786,2787],[2817,2817],[2876,2876],[2879,2879],[2881,2883],[2893,2893],[2902,2902],[2946,2946],[3008,3008],[3021,3021],[3134,3136],[3142,3144],[3146,3149],[3157,3158],[3260,3260],[3263,3263],[3270,3270],[3276,3277],[3298,3299],[3393,3395],[3405,3405],[3530,3530],[3538,3540],[3542,3542],[3633,3633],[3636,3642],[3655,3662],[3761,3761],[3764,3769],[3771,3772],[3784,3789],[3864,3865],[3893,3893],[3895,3895],[3897,3897],[3953,3966],[3968,3972],[3974,3975],[3984,3991],[3993,4028],[4038,4038],[4141,4144],[4146,4146],[4150,4151],[4153,4153],[4184,4185],[4448,4607],[4959,4959],[5906,5908],[5938,5940],[5970,5971],[6002,6003],[6068,6069],[6071,6077],[6086,6086],[6089,6099],[6109,6109],[6155,6157],[6313,6313],[6432,6434],[6439,6440],[6450,6450],[6457,6459],[6679,6680],[6912,6915],[6964,6964],[6966,6970],[6972,6972],[6978,6978],[7019,7027],[7616,7626],[7678,7679],[8203,8207],[8234,8238],[8288,8291],[8298,8303],[8400,8431],[12330,12335],[12441,12442],[43014,43014],[43019,43019],[43045,43046],[64286,64286],[65024,65039],[65056,65059],[65279,65279],[65529,65531]],c=[[68097,68099],[68101,68102],[68108,68111],[68152,68154],[68159,68159],[119143,119145],[119155,119170],[119173,119179],[119210,119213],[119362,119364],[917505,917505],[917536,917631],[917760,917999]];let _;o.UnicodeV6=class{constructor(){if(this.version="6",!_){_=new Uint8Array(65536),_.fill(1),_[0]=0,_.fill(0,1,32),_.fill(0,127,160),_.fill(2,4352,4448),_[9001]=2,_[9002]=2,_.fill(2,11904,42192),_[12351]=1,_.fill(2,44032,55204),_.fill(2,63744,64256),_.fill(2,65040,65050),_.fill(2,65072,65136),_.fill(2,65280,65377),_.fill(2,65504,65511);for(let C=0;C<v.length;++C)_.fill(0,v[C][0],v[C][1]+1)}}wcwidth(C){return C<32?0:C<127?1:C<65536?_[C]:(function(S,m){let l,r=0,t=m.length-1;if(S<m[0][0]||S>m[t][1])return!1;for(;t>=r;)if(l=r+t>>1,S>m[l][1])r=l+1;else{if(!(S<m[l][0]))return!0;t=l-1}return!1})(C,c)?0:C>=131072&&C<=196605||C>=196608&&C<=262141?2:1}charProperties(C,S){let m=this.wcwidth(C),l=m===0&&S!==0;if(l){const r=d.UnicodeService.extractWidth(S);r===0?l=!1:r>m&&(m=r)}return d.UnicodeService.createPropertyValue(0,m,l)}}},5981:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.WriteBuffer=void 0;const d=i(8460),v=i(844);class c extends v.Disposable{constructor(C){super(),this._action=C,this._writeBuffer=[],this._callbacks=[],this._pendingData=0,this._bufferOffset=0,this._isSyncWriting=!1,this._syncCalls=0,this._didUserInput=!1,this._onWriteParsed=this.register(new d.EventEmitter),this.onWriteParsed=this._onWriteParsed.event}handleUserInput(){this._didUserInput=!0}writeSync(C,S){if(S!==void 0&&this._syncCalls>S)return void(this._syncCalls=0);if(this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(void 0),this._syncCalls++,this._isSyncWriting)return;let m;for(this._isSyncWriting=!0;m=this._writeBuffer.shift();){this._action(m);const l=this._callbacks.shift();l&&l()}this._pendingData=0,this._bufferOffset=2147483647,this._isSyncWriting=!1,this._syncCalls=0}write(C,S){if(this._pendingData>5e7)throw new Error("write data discarded, use flow control to avoid losing data");if(!this._writeBuffer.length){if(this._bufferOffset=0,this._didUserInput)return this._didUserInput=!1,this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(S),void this._innerWrite();setTimeout((()=>this._innerWrite()))}this._pendingData+=C.length,this._writeBuffer.push(C),this._callbacks.push(S)}_innerWrite(C=0,S=!0){const m=C||Date.now();for(;this._writeBuffer.length>this._bufferOffset;){const l=this._writeBuffer[this._bufferOffset],r=this._action(l,S);if(r){const s=n=>Date.now()-m>=12?setTimeout((()=>this._innerWrite(0,n))):this._innerWrite(m,n);return void r.catch((n=>(queueMicrotask((()=>{throw n})),Promise.resolve(!1)))).then(s)}const t=this._callbacks[this._bufferOffset];if(t&&t(),this._bufferOffset++,this._pendingData-=l.length,Date.now()-m>=12)break}this._writeBuffer.length>this._bufferOffset?(this._bufferOffset>50&&(this._writeBuffer=this._writeBuffer.slice(this._bufferOffset),this._callbacks=this._callbacks.slice(this._bufferOffset),this._bufferOffset=0),setTimeout((()=>this._innerWrite()))):(this._writeBuffer.length=0,this._callbacks.length=0,this._pendingData=0,this._bufferOffset=0),this._onWriteParsed.fire()}}o.WriteBuffer=c},5941:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.toRgbString=o.parseColor=void 0;const i=/^([\da-f])\/([\da-f])\/([\da-f])$|^([\da-f]{2})\/([\da-f]{2})\/([\da-f]{2})$|^([\da-f]{3})\/([\da-f]{3})\/([\da-f]{3})$|^([\da-f]{4})\/([\da-f]{4})\/([\da-f]{4})$/,d=/^[\da-f]+$/;function v(c,_){const C=c.toString(16),S=C.length<2?"0"+C:C;switch(_){case 4:return C[0];case 8:return S;case 12:return(S+S).slice(0,3);default:return S+S}}o.parseColor=function(c){if(!c)return;let _=c.toLowerCase();if(_.indexOf("rgb:")===0){_=_.slice(4);const C=i.exec(_);if(C){const S=C[1]?15:C[4]?255:C[7]?4095:65535;return[Math.round(parseInt(C[1]||C[4]||C[7]||C[10],16)/S*255),Math.round(parseInt(C[2]||C[5]||C[8]||C[11],16)/S*255),Math.round(parseInt(C[3]||C[6]||C[9]||C[12],16)/S*255)]}}else if(_.indexOf("#")===0&&(_=_.slice(1),d.exec(_)&&[3,6,9,12].includes(_.length))){const C=_.length/3,S=[0,0,0];for(let m=0;m<3;++m){const l=parseInt(_.slice(C*m,C*m+C),16);S[m]=C===1?l<<4:C===2?l:C===3?l>>4:l>>8}return S}},o.toRgbString=function(c,_=16){const[C,S,m]=c;return`rgb:${v(C,_)}/${v(S,_)}/${v(m,_)}`}},5770:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.PAYLOAD_LIMIT=void 0,o.PAYLOAD_LIMIT=1e7},6351:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DcsHandler=o.DcsParser=void 0;const d=i(482),v=i(8742),c=i(5770),_=[];o.DcsParser=class{constructor(){this._handlers=Object.create(null),this._active=_,this._ident=0,this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=_}registerHandler(S,m){this._handlers[S]===void 0&&(this._handlers[S]=[]);const l=this._handlers[S];return l.push(m),{dispose:()=>{const r=l.indexOf(m);r!==-1&&l.splice(r,1)}}}clearHandler(S){this._handlers[S]&&delete this._handlers[S]}setHandlerFallback(S){this._handlerFb=S}reset(){if(this._active.length)for(let S=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;S>=0;--S)this._active[S].unhook(!1);this._stack.paused=!1,this._active=_,this._ident=0}hook(S,m){if(this.reset(),this._ident=S,this._active=this._handlers[S]||_,this._active.length)for(let l=this._active.length-1;l>=0;l--)this._active[l].hook(m);else this._handlerFb(this._ident,"HOOK",m)}put(S,m,l){if(this._active.length)for(let r=this._active.length-1;r>=0;r--)this._active[r].put(S,m,l);else this._handlerFb(this._ident,"PUT",(0,d.utf32ToString)(S,m,l))}unhook(S,m=!0){if(this._active.length){let l=!1,r=this._active.length-1,t=!1;if(this._stack.paused&&(r=this._stack.loopPosition-1,l=m,t=this._stack.fallThrough,this._stack.paused=!1),!t&&l===!1){for(;r>=0&&(l=this._active[r].unhook(S),l!==!0);r--)if(l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!1,l;r--}for(;r>=0;r--)if(l=this._active[r].unhook(!1),l instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=r,this._stack.fallThrough=!0,l}else this._handlerFb(this._ident,"UNHOOK",S);this._active=_,this._ident=0}};const C=new v.Params;C.addParam(0),o.DcsHandler=class{constructor(S){this._handler=S,this._data="",this._params=C,this._hitLimit=!1}hook(S){this._params=S.length>1||S.params[0]?S.clone():C,this._data="",this._hitLimit=!1}put(S,m,l){this._hitLimit||(this._data+=(0,d.utf32ToString)(S,m,l),this._data.length>c.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}unhook(S){let m=!1;if(this._hitLimit)m=!1;else if(S&&(m=this._handler(this._data,this._params),m instanceof Promise))return m.then((l=>(this._params=C,this._data="",this._hitLimit=!1,l)));return this._params=C,this._data="",this._hitLimit=!1,m}}},2015:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.EscapeSequenceParser=o.VT500_TRANSITION_TABLE=o.TransitionTable=void 0;const d=i(844),v=i(8742),c=i(6242),_=i(6351);class C{constructor(r){this.table=new Uint8Array(r)}setDefault(r,t){this.table.fill(r<<4|t)}add(r,t,s,n){this.table[t<<8|r]=s<<4|n}addMany(r,t,s,n){for(let p=0;p<r.length;p++)this.table[t<<8|r[p]]=s<<4|n}}o.TransitionTable=C;const S=160;o.VT500_TRANSITION_TABLE=(function(){const l=new C(4095),r=Array.apply(null,Array(256)).map(((b,f)=>f)),t=(b,f)=>r.slice(b,f),s=t(32,127),n=t(0,24);n.push(25),n.push.apply(n,t(28,32));const p=t(0,14);let a;for(a in l.setDefault(1,0),l.addMany(s,0,2,0),p)l.addMany([24,26,153,154],a,3,0),l.addMany(t(128,144),a,3,0),l.addMany(t(144,152),a,3,0),l.add(156,a,0,0),l.add(27,a,11,1),l.add(157,a,4,8),l.addMany([152,158,159],a,0,7),l.add(155,a,11,3),l.add(144,a,11,9);return l.addMany(n,0,3,0),l.addMany(n,1,3,1),l.add(127,1,0,1),l.addMany(n,8,0,8),l.addMany(n,3,3,3),l.add(127,3,0,3),l.addMany(n,4,3,4),l.add(127,4,0,4),l.addMany(n,6,3,6),l.addMany(n,5,3,5),l.add(127,5,0,5),l.addMany(n,2,3,2),l.add(127,2,0,2),l.add(93,1,4,8),l.addMany(s,8,5,8),l.add(127,8,5,8),l.addMany([156,27,24,26,7],8,6,0),l.addMany(t(28,32),8,0,8),l.addMany([88,94,95],1,0,7),l.addMany(s,7,0,7),l.addMany(n,7,0,7),l.add(156,7,0,0),l.add(127,7,0,7),l.add(91,1,11,3),l.addMany(t(64,127),3,7,0),l.addMany(t(48,60),3,8,4),l.addMany([60,61,62,63],3,9,4),l.addMany(t(48,60),4,8,4),l.addMany(t(64,127),4,7,0),l.addMany([60,61,62,63],4,0,6),l.addMany(t(32,64),6,0,6),l.add(127,6,0,6),l.addMany(t(64,127),6,0,0),l.addMany(t(32,48),3,9,5),l.addMany(t(32,48),5,9,5),l.addMany(t(48,64),5,0,6),l.addMany(t(64,127),5,7,0),l.addMany(t(32,48),4,9,5),l.addMany(t(32,48),1,9,2),l.addMany(t(32,48),2,9,2),l.addMany(t(48,127),2,10,0),l.addMany(t(48,80),1,10,0),l.addMany(t(81,88),1,10,0),l.addMany([89,90,92],1,10,0),l.addMany(t(96,127),1,10,0),l.add(80,1,11,9),l.addMany(n,9,0,9),l.add(127,9,0,9),l.addMany(t(28,32),9,0,9),l.addMany(t(32,48),9,9,12),l.addMany(t(48,60),9,8,10),l.addMany([60,61,62,63],9,9,10),l.addMany(n,11,0,11),l.addMany(t(32,128),11,0,11),l.addMany(t(28,32),11,0,11),l.addMany(n,10,0,10),l.add(127,10,0,10),l.addMany(t(28,32),10,0,10),l.addMany(t(48,60),10,8,10),l.addMany([60,61,62,63],10,0,11),l.addMany(t(32,48),10,9,12),l.addMany(n,12,0,12),l.add(127,12,0,12),l.addMany(t(28,32),12,0,12),l.addMany(t(32,48),12,9,12),l.addMany(t(48,64),12,0,11),l.addMany(t(64,127),12,12,13),l.addMany(t(64,127),10,12,13),l.addMany(t(64,127),9,12,13),l.addMany(n,13,13,13),l.addMany(s,13,13,13),l.add(127,13,0,13),l.addMany([27,156,24,26],13,14,0),l.add(S,0,2,0),l.add(S,8,5,8),l.add(S,6,0,6),l.add(S,11,0,11),l.add(S,13,13,13),l})();class m extends d.Disposable{constructor(r=o.VT500_TRANSITION_TABLE){super(),this._transitions=r,this._parseStack={state:0,handlers:[],handlerPos:0,transition:0,chunkPos:0},this.initialState=0,this.currentState=this.initialState,this._params=new v.Params,this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._printHandlerFb=(t,s,n)=>{},this._executeHandlerFb=t=>{},this._csiHandlerFb=(t,s)=>{},this._escHandlerFb=t=>{},this._errorHandlerFb=t=>t,this._printHandler=this._printHandlerFb,this._executeHandlers=Object.create(null),this._csiHandlers=Object.create(null),this._escHandlers=Object.create(null),this.register((0,d.toDisposable)((()=>{this._csiHandlers=Object.create(null),this._executeHandlers=Object.create(null),this._escHandlers=Object.create(null)}))),this._oscParser=this.register(new c.OscParser),this._dcsParser=this.register(new _.DcsParser),this._errorHandler=this._errorHandlerFb,this.registerEscHandler({final:"\\"},(()=>!0))}_identifier(r,t=[64,126]){let s=0;if(r.prefix){if(r.prefix.length>1)throw new Error("only one byte as prefix supported");if(s=r.prefix.charCodeAt(0),s&&60>s||s>63)throw new Error("prefix must be in range 0x3c .. 0x3f")}if(r.intermediates){if(r.intermediates.length>2)throw new Error("only two bytes as intermediates are supported");for(let p=0;p<r.intermediates.length;++p){const a=r.intermediates.charCodeAt(p);if(32>a||a>47)throw new Error("intermediate must be in range 0x20 .. 0x2f");s<<=8,s|=a}}if(r.final.length!==1)throw new Error("final must be a single byte");const n=r.final.charCodeAt(0);if(t[0]>n||n>t[1])throw new Error(`final must be in range ${t[0]} .. ${t[1]}`);return s<<=8,s|=n,s}identToString(r){const t=[];for(;r;)t.push(String.fromCharCode(255&r)),r>>=8;return t.reverse().join("")}setPrintHandler(r){this._printHandler=r}clearPrintHandler(){this._printHandler=this._printHandlerFb}registerEscHandler(r,t){const s=this._identifier(r,[48,126]);this._escHandlers[s]===void 0&&(this._escHandlers[s]=[]);const n=this._escHandlers[s];return n.push(t),{dispose:()=>{const p=n.indexOf(t);p!==-1&&n.splice(p,1)}}}clearEscHandler(r){this._escHandlers[this._identifier(r,[48,126])]&&delete this._escHandlers[this._identifier(r,[48,126])]}setEscHandlerFallback(r){this._escHandlerFb=r}setExecuteHandler(r,t){this._executeHandlers[r.charCodeAt(0)]=t}clearExecuteHandler(r){this._executeHandlers[r.charCodeAt(0)]&&delete this._executeHandlers[r.charCodeAt(0)]}setExecuteHandlerFallback(r){this._executeHandlerFb=r}registerCsiHandler(r,t){const s=this._identifier(r);this._csiHandlers[s]===void 0&&(this._csiHandlers[s]=[]);const n=this._csiHandlers[s];return n.push(t),{dispose:()=>{const p=n.indexOf(t);p!==-1&&n.splice(p,1)}}}clearCsiHandler(r){this._csiHandlers[this._identifier(r)]&&delete this._csiHandlers[this._identifier(r)]}setCsiHandlerFallback(r){this._csiHandlerFb=r}registerDcsHandler(r,t){return this._dcsParser.registerHandler(this._identifier(r),t)}clearDcsHandler(r){this._dcsParser.clearHandler(this._identifier(r))}setDcsHandlerFallback(r){this._dcsParser.setHandlerFallback(r)}registerOscHandler(r,t){return this._oscParser.registerHandler(r,t)}clearOscHandler(r){this._oscParser.clearHandler(r)}setOscHandlerFallback(r){this._oscParser.setHandlerFallback(r)}setErrorHandler(r){this._errorHandler=r}clearErrorHandler(){this._errorHandler=this._errorHandlerFb}reset(){this.currentState=this.initialState,this._oscParser.reset(),this._dcsParser.reset(),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0,this._parseStack.state!==0&&(this._parseStack.state=2,this._parseStack.handlers=[])}_preserveStack(r,t,s,n,p){this._parseStack.state=r,this._parseStack.handlers=t,this._parseStack.handlerPos=s,this._parseStack.transition=n,this._parseStack.chunkPos=p}parse(r,t,s){let n,p=0,a=0,b=0;if(this._parseStack.state)if(this._parseStack.state===2)this._parseStack.state=0,b=this._parseStack.chunkPos+1;else{if(s===void 0||this._parseStack.state===1)throw this._parseStack.state=1,new Error("improper continuation due to previous async handler, giving up parsing");const f=this._parseStack.handlers;let w=this._parseStack.handlerPos-1;switch(this._parseStack.state){case 3:if(s===!1&&w>-1){for(;w>=0&&(n=f[w](this._params),n!==!0);w--)if(n instanceof Promise)return this._parseStack.handlerPos=w,n}this._parseStack.handlers=[];break;case 4:if(s===!1&&w>-1){for(;w>=0&&(n=f[w](),n!==!0);w--)if(n instanceof Promise)return this._parseStack.handlerPos=w,n}this._parseStack.handlers=[];break;case 6:if(p=r[this._parseStack.chunkPos],n=this._dcsParser.unhook(p!==24&&p!==26,s),n)return n;p===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0;break;case 5:if(p=r[this._parseStack.chunkPos],n=this._oscParser.end(p!==24&&p!==26,s),n)return n;p===27&&(this._parseStack.transition|=1),this._params.reset(),this._params.addParam(0),this._collect=0}this._parseStack.state=0,b=this._parseStack.chunkPos+1,this.precedingJoinState=0,this.currentState=15&this._parseStack.transition}for(let f=b;f<t;++f){switch(p=r[f],a=this._transitions.table[this.currentState<<8|(p<160?p:S)],a>>4){case 2:for(let I=f+1;;++I){if(I>=t||(p=r[I])<32||p>126&&p<S){this._printHandler(r,f,I),f=I-1;break}if(++I>=t||(p=r[I])<32||p>126&&p<S){this._printHandler(r,f,I),f=I-1;break}if(++I>=t||(p=r[I])<32||p>126&&p<S){this._printHandler(r,f,I),f=I-1;break}if(++I>=t||(p=r[I])<32||p>126&&p<S){this._printHandler(r,f,I),f=I-1;break}}break;case 3:this._executeHandlers[p]?this._executeHandlers[p]():this._executeHandlerFb(p),this.precedingJoinState=0;break;case 0:break;case 1:if(this._errorHandler({position:f,code:p,currentState:this.currentState,collect:this._collect,params:this._params,abort:!1}).abort)return;break;case 7:const w=this._csiHandlers[this._collect<<8|p];let M=w?w.length-1:-1;for(;M>=0&&(n=w[M](this._params),n!==!0);M--)if(n instanceof Promise)return this._preserveStack(3,w,M,a,f),n;M<0&&this._csiHandlerFb(this._collect<<8|p,this._params),this.precedingJoinState=0;break;case 8:do switch(p){case 59:this._params.addParam(0);break;case 58:this._params.addSubParam(-1);break;default:this._params.addDigit(p-48)}while(++f<t&&(p=r[f])>47&&p<60);f--;break;case 9:this._collect<<=8,this._collect|=p;break;case 10:const N=this._escHandlers[this._collect<<8|p];let O=N?N.length-1:-1;for(;O>=0&&(n=N[O](),n!==!0);O--)if(n instanceof Promise)return this._preserveStack(4,N,O,a,f),n;O<0&&this._escHandlerFb(this._collect<<8|p),this.precedingJoinState=0;break;case 11:this._params.reset(),this._params.addParam(0),this._collect=0;break;case 12:this._dcsParser.hook(this._collect<<8|p,this._params);break;case 13:for(let I=f+1;;++I)if(I>=t||(p=r[I])===24||p===26||p===27||p>127&&p<S){this._dcsParser.put(r,f,I),f=I-1;break}break;case 14:if(n=this._dcsParser.unhook(p!==24&&p!==26),n)return this._preserveStack(6,[],0,a,f),n;p===27&&(a|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0;break;case 4:this._oscParser.start();break;case 5:for(let I=f+1;;I++)if(I>=t||(p=r[I])<32||p>127&&p<S){this._oscParser.put(r,f,I),f=I-1;break}break;case 6:if(n=this._oscParser.end(p!==24&&p!==26),n)return this._preserveStack(5,[],0,a,f),n;p===27&&(a|=1),this._params.reset(),this._params.addParam(0),this._collect=0,this.precedingJoinState=0}this.currentState=15&a}}}o.EscapeSequenceParser=m},6242:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OscHandler=o.OscParser=void 0;const d=i(5770),v=i(482),c=[];o.OscParser=class{constructor(){this._state=0,this._active=c,this._id=-1,this._handlers=Object.create(null),this._handlerFb=()=>{},this._stack={paused:!1,loopPosition:0,fallThrough:!1}}registerHandler(_,C){this._handlers[_]===void 0&&(this._handlers[_]=[]);const S=this._handlers[_];return S.push(C),{dispose:()=>{const m=S.indexOf(C);m!==-1&&S.splice(m,1)}}}clearHandler(_){this._handlers[_]&&delete this._handlers[_]}setHandlerFallback(_){this._handlerFb=_}dispose(){this._handlers=Object.create(null),this._handlerFb=()=>{},this._active=c}reset(){if(this._state===2)for(let _=this._stack.paused?this._stack.loopPosition-1:this._active.length-1;_>=0;--_)this._active[_].end(!1);this._stack.paused=!1,this._active=c,this._id=-1,this._state=0}_start(){if(this._active=this._handlers[this._id]||c,this._active.length)for(let _=this._active.length-1;_>=0;_--)this._active[_].start();else this._handlerFb(this._id,"START")}_put(_,C,S){if(this._active.length)for(let m=this._active.length-1;m>=0;m--)this._active[m].put(_,C,S);else this._handlerFb(this._id,"PUT",(0,v.utf32ToString)(_,C,S))}start(){this.reset(),this._state=1}put(_,C,S){if(this._state!==3){if(this._state===1)for(;C<S;){const m=_[C++];if(m===59){this._state=2,this._start();break}if(m<48||57<m)return void(this._state=3);this._id===-1&&(this._id=0),this._id=10*this._id+m-48}this._state===2&&S-C>0&&this._put(_,C,S)}}end(_,C=!0){if(this._state!==0){if(this._state!==3)if(this._state===1&&this._start(),this._active.length){let S=!1,m=this._active.length-1,l=!1;if(this._stack.paused&&(m=this._stack.loopPosition-1,S=C,l=this._stack.fallThrough,this._stack.paused=!1),!l&&S===!1){for(;m>=0&&(S=this._active[m].end(_),S!==!0);m--)if(S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=m,this._stack.fallThrough=!1,S;m--}for(;m>=0;m--)if(S=this._active[m].end(!1),S instanceof Promise)return this._stack.paused=!0,this._stack.loopPosition=m,this._stack.fallThrough=!0,S}else this._handlerFb(this._id,"END",_);this._active=c,this._id=-1,this._state=0}}},o.OscHandler=class{constructor(_){this._handler=_,this._data="",this._hitLimit=!1}start(){this._data="",this._hitLimit=!1}put(_,C,S){this._hitLimit||(this._data+=(0,v.utf32ToString)(_,C,S),this._data.length>d.PAYLOAD_LIMIT&&(this._data="",this._hitLimit=!0))}end(_){let C=!1;if(this._hitLimit)C=!1;else if(_&&(C=this._handler(this._data),C instanceof Promise))return C.then((S=>(this._data="",this._hitLimit=!1,S)));return this._data="",this._hitLimit=!1,C}}},8742:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.Params=void 0;const i=2147483647;class d{static fromArray(c){const _=new d;if(!c.length)return _;for(let C=Array.isArray(c[0])?1:0;C<c.length;++C){const S=c[C];if(Array.isArray(S))for(let m=0;m<S.length;++m)_.addSubParam(S[m]);else _.addParam(S)}return _}constructor(c=32,_=32){if(this.maxLength=c,this.maxSubParamsLength=_,_>256)throw new Error("maxSubParamsLength must not be greater than 256");this.params=new Int32Array(c),this.length=0,this._subParams=new Int32Array(_),this._subParamsLength=0,this._subParamsIdx=new Uint16Array(c),this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}clone(){const c=new d(this.maxLength,this.maxSubParamsLength);return c.params.set(this.params),c.length=this.length,c._subParams.set(this._subParams),c._subParamsLength=this._subParamsLength,c._subParamsIdx.set(this._subParamsIdx),c._rejectDigits=this._rejectDigits,c._rejectSubDigits=this._rejectSubDigits,c._digitIsSub=this._digitIsSub,c}toArray(){const c=[];for(let _=0;_<this.length;++_){c.push(this.params[_]);const C=this._subParamsIdx[_]>>8,S=255&this._subParamsIdx[_];S-C>0&&c.push(Array.prototype.slice.call(this._subParams,C,S))}return c}reset(){this.length=0,this._subParamsLength=0,this._rejectDigits=!1,this._rejectSubDigits=!1,this._digitIsSub=!1}addParam(c){if(this._digitIsSub=!1,this.length>=this.maxLength)this._rejectDigits=!0;else{if(c<-1)throw new Error("values lesser than -1 are not allowed");this._subParamsIdx[this.length]=this._subParamsLength<<8|this._subParamsLength,this.params[this.length++]=c>i?i:c}}addSubParam(c){if(this._digitIsSub=!0,this.length)if(this._rejectDigits||this._subParamsLength>=this.maxSubParamsLength)this._rejectSubDigits=!0;else{if(c<-1)throw new Error("values lesser than -1 are not allowed");this._subParams[this._subParamsLength++]=c>i?i:c,this._subParamsIdx[this.length-1]++}}hasSubParams(c){return(255&this._subParamsIdx[c])-(this._subParamsIdx[c]>>8)>0}getSubParams(c){const _=this._subParamsIdx[c]>>8,C=255&this._subParamsIdx[c];return C-_>0?this._subParams.subarray(_,C):null}getSubParamsAll(){const c={};for(let _=0;_<this.length;++_){const C=this._subParamsIdx[_]>>8,S=255&this._subParamsIdx[_];S-C>0&&(c[_]=this._subParams.slice(C,S))}return c}addDigit(c){let _;if(this._rejectDigits||!(_=this._digitIsSub?this._subParamsLength:this.length)||this._digitIsSub&&this._rejectSubDigits)return;const C=this._digitIsSub?this._subParams:this.params,S=C[_-1];C[_-1]=~S?Math.min(10*S+c,i):c}}o.Params=d},5741:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.AddonManager=void 0,o.AddonManager=class{constructor(){this._addons=[]}dispose(){for(let i=this._addons.length-1;i>=0;i--)this._addons[i].instance.dispose()}loadAddon(i,d){const v={instance:d,dispose:d.dispose,isDisposed:!1};this._addons.push(v),d.dispose=()=>this._wrappedAddonDispose(v),d.activate(i)}_wrappedAddonDispose(i){if(i.isDisposed)return;let d=-1;for(let v=0;v<this._addons.length;v++)if(this._addons[v]===i){d=v;break}if(d===-1)throw new Error("Could not dispose an addon that has not been loaded");i.isDisposed=!0,i.dispose.apply(i.instance),this._addons.splice(d,1)}}},8771:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferApiView=void 0;const d=i(3785),v=i(511);o.BufferApiView=class{constructor(c,_){this._buffer=c,this.type=_}init(c){return this._buffer=c,this}get cursorY(){return this._buffer.y}get cursorX(){return this._buffer.x}get viewportY(){return this._buffer.ydisp}get baseY(){return this._buffer.ybase}get length(){return this._buffer.lines.length}getLine(c){const _=this._buffer.lines.get(c);if(_)return new d.BufferLineApiView(_)}getNullCell(){return new v.CellData}}},3785:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferLineApiView=void 0;const d=i(511);o.BufferLineApiView=class{constructor(v){this._line=v}get isWrapped(){return this._line.isWrapped}get length(){return this._line.length}getCell(v,c){if(!(v<0||v>=this._line.length))return c?(this._line.loadCell(v,c),c):this._line.loadCell(v,new d.CellData)}translateToString(v,c,_){return this._line.translateToString(v,c,_)}}},8285:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.BufferNamespaceApi=void 0;const d=i(8771),v=i(8460),c=i(844);class _ extends c.Disposable{constructor(S){super(),this._core=S,this._onBufferChange=this.register(new v.EventEmitter),this.onBufferChange=this._onBufferChange.event,this._normal=new d.BufferApiView(this._core.buffers.normal,"normal"),this._alternate=new d.BufferApiView(this._core.buffers.alt,"alternate"),this._core.buffers.onBufferActivate((()=>this._onBufferChange.fire(this.active)))}get active(){if(this._core.buffers.active===this._core.buffers.normal)return this.normal;if(this._core.buffers.active===this._core.buffers.alt)return this.alternate;throw new Error("Active buffer is neither normal nor alternate")}get normal(){return this._normal.init(this._core.buffers.normal)}get alternate(){return this._alternate.init(this._core.buffers.alt)}}o.BufferNamespaceApi=_},7975:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.ParserApi=void 0,o.ParserApi=class{constructor(i){this._core=i}registerCsiHandler(i,d){return this._core.registerCsiHandler(i,(v=>d(v.toArray())))}addCsiHandler(i,d){return this.registerCsiHandler(i,d)}registerDcsHandler(i,d){return this._core.registerDcsHandler(i,((v,c)=>d(v,c.toArray())))}addDcsHandler(i,d){return this.registerDcsHandler(i,d)}registerEscHandler(i,d){return this._core.registerEscHandler(i,d)}addEscHandler(i,d){return this.registerEscHandler(i,d)}registerOscHandler(i,d){return this._core.registerOscHandler(i,d)}addOscHandler(i,d){return this.registerOscHandler(i,d)}}},7090:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeApi=void 0,o.UnicodeApi=class{constructor(i){this._core=i}register(i){this._core.unicodeService.register(i)}get versions(){return this._core.unicodeService.versions}get activeVersion(){return this._core.unicodeService.activeVersion}set activeVersion(i){this._core.unicodeService.activeVersion=i}}},744:function(D,o,i){var d=this&&this.__decorate||function(l,r,t,s){var n,p=arguments.length,a=p<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,t):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(l,r,t,s);else for(var b=l.length-1;b>=0;b--)(n=l[b])&&(a=(p<3?n(a):p>3?n(r,t,a):n(r,t))||a);return p>3&&a&&Object.defineProperty(r,t,a),a},v=this&&this.__param||function(l,r){return function(t,s){r(t,s,l)}};Object.defineProperty(o,"__esModule",{value:!0}),o.BufferService=o.MINIMUM_ROWS=o.MINIMUM_COLS=void 0;const c=i(8460),_=i(844),C=i(5295),S=i(2585);o.MINIMUM_COLS=2,o.MINIMUM_ROWS=1;let m=o.BufferService=class extends _.Disposable{get buffer(){return this.buffers.active}constructor(l){super(),this.isUserScrolling=!1,this._onResize=this.register(new c.EventEmitter),this.onResize=this._onResize.event,this._onScroll=this.register(new c.EventEmitter),this.onScroll=this._onScroll.event,this.cols=Math.max(l.rawOptions.cols||0,o.MINIMUM_COLS),this.rows=Math.max(l.rawOptions.rows||0,o.MINIMUM_ROWS),this.buffers=this.register(new C.BufferSet(l,this))}resize(l,r){this.cols=l,this.rows=r,this.buffers.resize(l,r),this._onResize.fire({cols:l,rows:r})}reset(){this.buffers.reset(),this.isUserScrolling=!1}scroll(l,r=!1){const t=this.buffer;let s;s=this._cachedBlankLine,s&&s.length===this.cols&&s.getFg(0)===l.fg&&s.getBg(0)===l.bg||(s=t.getBlankLine(l,r),this._cachedBlankLine=s),s.isWrapped=r;const n=t.ybase+t.scrollTop,p=t.ybase+t.scrollBottom;if(t.scrollTop===0){const a=t.lines.isFull;p===t.lines.length-1?a?t.lines.recycle().copyFrom(s):t.lines.push(s.clone()):t.lines.splice(p+1,0,s.clone()),a?this.isUserScrolling&&(t.ydisp=Math.max(t.ydisp-1,0)):(t.ybase++,this.isUserScrolling||t.ydisp++)}else{const a=p-n+1;t.lines.shiftElements(n+1,a-1,-1),t.lines.set(p,s.clone())}this.isUserScrolling||(t.ydisp=t.ybase),this._onScroll.fire(t.ydisp)}scrollLines(l,r,t){const s=this.buffer;if(l<0){if(s.ydisp===0)return;this.isUserScrolling=!0}else l+s.ydisp>=s.ybase&&(this.isUserScrolling=!1);const n=s.ydisp;s.ydisp=Math.max(Math.min(s.ydisp+l,s.ybase),0),n!==s.ydisp&&(r||this._onScroll.fire(s.ydisp))}};o.BufferService=m=d([v(0,S.IOptionsService)],m)},7994:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.CharsetService=void 0,o.CharsetService=class{constructor(){this.glevel=0,this._charsets=[]}reset(){this.charset=void 0,this._charsets=[],this.glevel=0}setgLevel(i){this.glevel=i,this.charset=this._charsets[i]}setgCharset(i,d){this._charsets[i]=d,this.glevel===i&&(this.charset=d)}}},1753:function(D,o,i){var d=this&&this.__decorate||function(s,n,p,a){var b,f=arguments.length,w=f<3?n:a===null?a=Object.getOwnPropertyDescriptor(n,p):a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")w=Reflect.decorate(s,n,p,a);else for(var M=s.length-1;M>=0;M--)(b=s[M])&&(w=(f<3?b(w):f>3?b(n,p,w):b(n,p))||w);return f>3&&w&&Object.defineProperty(n,p,w),w},v=this&&this.__param||function(s,n){return function(p,a){n(p,a,s)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreMouseService=void 0;const c=i(2585),_=i(8460),C=i(844),S={NONE:{events:0,restrict:()=>!1},X10:{events:1,restrict:s=>s.button!==4&&s.action===1&&(s.ctrl=!1,s.alt=!1,s.shift=!1,!0)},VT200:{events:19,restrict:s=>s.action!==32},DRAG:{events:23,restrict:s=>s.action!==32||s.button!==3},ANY:{events:31,restrict:s=>!0}};function m(s,n){let p=(s.ctrl?16:0)|(s.shift?4:0)|(s.alt?8:0);return s.button===4?(p|=64,p|=s.action):(p|=3&s.button,4&s.button&&(p|=64),8&s.button&&(p|=128),s.action===32?p|=32:s.action!==0||n||(p|=3)),p}const l=String.fromCharCode,r={DEFAULT:s=>{const n=[m(s,!1)+32,s.col+32,s.row+32];return n[0]>255||n[1]>255||n[2]>255?"":`\x1B[M${l(n[0])}${l(n[1])}${l(n[2])}`},SGR:s=>{const n=s.action===0&&s.button!==4?"m":"M";return`\x1B[<${m(s,!0)};${s.col};${s.row}${n}`},SGR_PIXELS:s=>{const n=s.action===0&&s.button!==4?"m":"M";return`\x1B[<${m(s,!0)};${s.x};${s.y}${n}`}};let t=o.CoreMouseService=class extends C.Disposable{constructor(s,n){super(),this._bufferService=s,this._coreService=n,this._protocols={},this._encodings={},this._activeProtocol="",this._activeEncoding="",this._lastEvent=null,this._onProtocolChange=this.register(new _.EventEmitter),this.onProtocolChange=this._onProtocolChange.event;for(const p of Object.keys(S))this.addProtocol(p,S[p]);for(const p of Object.keys(r))this.addEncoding(p,r[p]);this.reset()}addProtocol(s,n){this._protocols[s]=n}addEncoding(s,n){this._encodings[s]=n}get activeProtocol(){return this._activeProtocol}get areMouseEventsActive(){return this._protocols[this._activeProtocol].events!==0}set activeProtocol(s){if(!this._protocols[s])throw new Error(`unknown protocol "${s}"`);this._activeProtocol=s,this._onProtocolChange.fire(this._protocols[s].events)}get activeEncoding(){return this._activeEncoding}set activeEncoding(s){if(!this._encodings[s])throw new Error(`unknown encoding "${s}"`);this._activeEncoding=s}reset(){this.activeProtocol="NONE",this.activeEncoding="DEFAULT",this._lastEvent=null}triggerMouseEvent(s){if(s.col<0||s.col>=this._bufferService.cols||s.row<0||s.row>=this._bufferService.rows||s.button===4&&s.action===32||s.button===3&&s.action!==32||s.button!==4&&(s.action===2||s.action===3)||(s.col++,s.row++,s.action===32&&this._lastEvent&&this._equalEvents(this._lastEvent,s,this._activeEncoding==="SGR_PIXELS"))||!this._protocols[this._activeProtocol].restrict(s))return!1;const n=this._encodings[this._activeEncoding](s);return n&&(this._activeEncoding==="DEFAULT"?this._coreService.triggerBinaryEvent(n):this._coreService.triggerDataEvent(n,!0)),this._lastEvent=s,!0}explainEvents(s){return{down:!!(1&s),up:!!(2&s),drag:!!(4&s),move:!!(8&s),wheel:!!(16&s)}}_equalEvents(s,n,p){if(p){if(s.x!==n.x||s.y!==n.y)return!1}else if(s.col!==n.col||s.row!==n.row)return!1;return s.button===n.button&&s.action===n.action&&s.ctrl===n.ctrl&&s.alt===n.alt&&s.shift===n.shift}};o.CoreMouseService=t=d([v(0,c.IBufferService),v(1,c.ICoreService)],t)},6975:function(D,o,i){var d=this&&this.__decorate||function(t,s,n,p){var a,b=arguments.length,f=b<3?s:p===null?p=Object.getOwnPropertyDescriptor(s,n):p;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")f=Reflect.decorate(t,s,n,p);else for(var w=t.length-1;w>=0;w--)(a=t[w])&&(f=(b<3?a(f):b>3?a(s,n,f):a(s,n))||f);return b>3&&f&&Object.defineProperty(s,n,f),f},v=this&&this.__param||function(t,s){return function(n,p){s(n,p,t)}};Object.defineProperty(o,"__esModule",{value:!0}),o.CoreService=void 0;const c=i(1439),_=i(8460),C=i(844),S=i(2585),m=Object.freeze({insertMode:!1}),l=Object.freeze({applicationCursorKeys:!1,applicationKeypad:!1,bracketedPasteMode:!1,origin:!1,reverseWraparound:!1,sendFocus:!1,wraparound:!0});let r=o.CoreService=class extends C.Disposable{constructor(t,s,n){super(),this._bufferService=t,this._logService=s,this._optionsService=n,this.isCursorInitialized=!1,this.isCursorHidden=!1,this._onData=this.register(new _.EventEmitter),this.onData=this._onData.event,this._onUserInput=this.register(new _.EventEmitter),this.onUserInput=this._onUserInput.event,this._onBinary=this.register(new _.EventEmitter),this.onBinary=this._onBinary.event,this._onRequestScrollToBottom=this.register(new _.EventEmitter),this.onRequestScrollToBottom=this._onRequestScrollToBottom.event,this.modes=(0,c.clone)(m),this.decPrivateModes=(0,c.clone)(l)}reset(){this.modes=(0,c.clone)(m),this.decPrivateModes=(0,c.clone)(l)}triggerDataEvent(t,s=!1){if(this._optionsService.rawOptions.disableStdin)return;const n=this._bufferService.buffer;s&&this._optionsService.rawOptions.scrollOnUserInput&&n.ybase!==n.ydisp&&this._onRequestScrollToBottom.fire(),s&&this._onUserInput.fire(),this._logService.debug(`sending data "${t}"`,(()=>t.split("").map((p=>p.charCodeAt(0))))),this._onData.fire(t)}triggerBinaryEvent(t){this._optionsService.rawOptions.disableStdin||(this._logService.debug(`sending binary "${t}"`,(()=>t.split("").map((s=>s.charCodeAt(0))))),this._onBinary.fire(t))}};o.CoreService=r=d([v(0,S.IBufferService),v(1,S.ILogService),v(2,S.IOptionsService)],r)},9074:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.DecorationService=void 0;const d=i(8055),v=i(8460),c=i(844),_=i(6106);let C=0,S=0;class m extends c.Disposable{get decorations(){return this._decorations.values()}constructor(){super(),this._decorations=new _.SortedList((t=>t?.marker.line)),this._onDecorationRegistered=this.register(new v.EventEmitter),this.onDecorationRegistered=this._onDecorationRegistered.event,this._onDecorationRemoved=this.register(new v.EventEmitter),this.onDecorationRemoved=this._onDecorationRemoved.event,this.register((0,c.toDisposable)((()=>this.reset())))}registerDecoration(t){if(t.marker.isDisposed)return;const s=new l(t);if(s){const n=s.marker.onDispose((()=>s.dispose()));s.onDispose((()=>{s&&(this._decorations.delete(s)&&this._onDecorationRemoved.fire(s),n.dispose())})),this._decorations.insert(s),this._onDecorationRegistered.fire(s)}return s}reset(){for(const t of this._decorations.values())t.dispose();this._decorations.clear()}*getDecorationsAtCell(t,s,n){let p=0,a=0;for(const b of this._decorations.getKeyIterator(s))p=b.options.x??0,a=p+(b.options.width??1),t>=p&&t<a&&(!n||(b.options.layer??"bottom")===n)&&(yield b)}forEachDecorationAtCell(t,s,n,p){this._decorations.forEachByKey(s,(a=>{C=a.options.x??0,S=C+(a.options.width??1),t>=C&&t<S&&(!n||(a.options.layer??"bottom")===n)&&p(a)}))}}o.DecorationService=m;class l extends c.Disposable{get isDisposed(){return this._isDisposed}get backgroundColorRGB(){return this._cachedBg===null&&(this.options.backgroundColor?this._cachedBg=d.css.toColor(this.options.backgroundColor):this._cachedBg=void 0),this._cachedBg}get foregroundColorRGB(){return this._cachedFg===null&&(this.options.foregroundColor?this._cachedFg=d.css.toColor(this.options.foregroundColor):this._cachedFg=void 0),this._cachedFg}constructor(t){super(),this.options=t,this.onRenderEmitter=this.register(new v.EventEmitter),this.onRender=this.onRenderEmitter.event,this._onDispose=this.register(new v.EventEmitter),this.onDispose=this._onDispose.event,this._cachedBg=null,this._cachedFg=null,this.marker=t.marker,this.options.overviewRulerOptions&&!this.options.overviewRulerOptions.position&&(this.options.overviewRulerOptions.position="full")}dispose(){this._onDispose.fire(),super.dispose()}}},4348:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.InstantiationService=o.ServiceCollection=void 0;const d=i(2585),v=i(8343);class c{constructor(...C){this._entries=new Map;for(const[S,m]of C)this.set(S,m)}set(C,S){const m=this._entries.get(C);return this._entries.set(C,S),m}forEach(C){for(const[S,m]of this._entries.entries())C(S,m)}has(C){return this._entries.has(C)}get(C){return this._entries.get(C)}}o.ServiceCollection=c,o.InstantiationService=class{constructor(){this._services=new c,this._services.set(d.IInstantiationService,this)}setService(_,C){this._services.set(_,C)}getService(_){return this._services.get(_)}createInstance(_,...C){const S=(0,v.getServiceDependencies)(_).sort(((r,t)=>r.index-t.index)),m=[];for(const r of S){const t=this._services.get(r.id);if(!t)throw new Error(`[createInstance] ${_.name} depends on UNKNOWN service ${r.id}.`);m.push(t)}const l=S.length>0?S[0].index:C.length;if(C.length!==l)throw new Error(`[createInstance] First service dependency of ${_.name} at position ${l+1} conflicts with ${C.length} static arguments`);return new _(...C,...m)}}},7866:function(D,o,i){var d=this&&this.__decorate||function(l,r,t,s){var n,p=arguments.length,a=p<3?r:s===null?s=Object.getOwnPropertyDescriptor(r,t):s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(l,r,t,s);else for(var b=l.length-1;b>=0;b--)(n=l[b])&&(a=(p<3?n(a):p>3?n(r,t,a):n(r,t))||a);return p>3&&a&&Object.defineProperty(r,t,a),a},v=this&&this.__param||function(l,r){return function(t,s){r(t,s,l)}};Object.defineProperty(o,"__esModule",{value:!0}),o.traceCall=o.setTraceLogger=o.LogService=void 0;const c=i(844),_=i(2585),C={trace:_.LogLevelEnum.TRACE,debug:_.LogLevelEnum.DEBUG,info:_.LogLevelEnum.INFO,warn:_.LogLevelEnum.WARN,error:_.LogLevelEnum.ERROR,off:_.LogLevelEnum.OFF};let S,m=o.LogService=class extends c.Disposable{get logLevel(){return this._logLevel}constructor(l){super(),this._optionsService=l,this._logLevel=_.LogLevelEnum.OFF,this._updateLogLevel(),this.register(this._optionsService.onSpecificOptionChange("logLevel",(()=>this._updateLogLevel()))),S=this}_updateLogLevel(){this._logLevel=C[this._optionsService.rawOptions.logLevel]}_evalLazyOptionalParams(l){for(let r=0;r<l.length;r++)typeof l[r]=="function"&&(l[r]=l[r]())}_log(l,r,t){this._evalLazyOptionalParams(t),l.call(console,(this._optionsService.options.logger?"":"xterm.js: ")+r,...t)}trace(l,...r){this._logLevel<=_.LogLevelEnum.TRACE&&this._log(this._optionsService.options.logger?.trace.bind(this._optionsService.options.logger)??console.log,l,r)}debug(l,...r){this._logLevel<=_.LogLevelEnum.DEBUG&&this._log(this._optionsService.options.logger?.debug.bind(this._optionsService.options.logger)??console.log,l,r)}info(l,...r){this._logLevel<=_.LogLevelEnum.INFO&&this._log(this._optionsService.options.logger?.info.bind(this._optionsService.options.logger)??console.info,l,r)}warn(l,...r){this._logLevel<=_.LogLevelEnum.WARN&&this._log(this._optionsService.options.logger?.warn.bind(this._optionsService.options.logger)??console.warn,l,r)}error(l,...r){this._logLevel<=_.LogLevelEnum.ERROR&&this._log(this._optionsService.options.logger?.error.bind(this._optionsService.options.logger)??console.error,l,r)}};o.LogService=m=d([v(0,_.IOptionsService)],m),o.setTraceLogger=function(l){S=l},o.traceCall=function(l,r,t){if(typeof t.value!="function")throw new Error("not supported");const s=t.value;t.value=function(...n){if(S.logLevel!==_.LogLevelEnum.TRACE)return s.apply(this,n);S.trace(`GlyphRenderer#${s.name}(${n.map((a=>JSON.stringify(a))).join(", ")})`);const p=s.apply(this,n);return S.trace(`GlyphRenderer#${s.name} return`,p),p}}},7302:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.OptionsService=o.DEFAULT_OPTIONS=void 0;const d=i(8460),v=i(844),c=i(6114);o.DEFAULT_OPTIONS={cols:80,rows:24,cursorBlink:!1,cursorStyle:"block",cursorWidth:1,cursorInactiveStyle:"outline",customGlyphs:!0,drawBoldTextInBrightColors:!0,documentOverride:null,fastScrollModifier:"alt",fastScrollSensitivity:5,fontFamily:"courier-new, courier, monospace",fontSize:15,fontWeight:"normal",fontWeightBold:"bold",ignoreBracketedPasteMode:!1,lineHeight:1,letterSpacing:0,linkHandler:null,logLevel:"info",logger:null,scrollback:1e3,scrollOnUserInput:!0,scrollSensitivity:1,screenReaderMode:!1,smoothScrollDuration:0,macOptionIsMeta:!1,macOptionClickForcesSelection:!1,minimumContrastRatio:1,disableStdin:!1,allowProposedApi:!1,allowTransparency:!1,tabStopWidth:8,theme:{},rescaleOverlappingGlyphs:!1,rightClickSelectsWord:c.isMac,windowOptions:{},windowsMode:!1,windowsPty:{},wordSeparator:" ()[]{}',\"`",altClickMovesCursor:!0,convertEol:!1,termName:"xterm",cancelEvents:!1,overviewRulerWidth:0};const _=["normal","bold","100","200","300","400","500","600","700","800","900"];class C extends v.Disposable{constructor(m){super(),this._onOptionChange=this.register(new d.EventEmitter),this.onOptionChange=this._onOptionChange.event;const l={...o.DEFAULT_OPTIONS};for(const r in m)if(r in l)try{const t=m[r];l[r]=this._sanitizeAndValidateOption(r,t)}catch(t){console.error(t)}this.rawOptions=l,this.options={...l},this._setupOptions(),this.register((0,v.toDisposable)((()=>{this.rawOptions.linkHandler=null,this.rawOptions.documentOverride=null})))}onSpecificOptionChange(m,l){return this.onOptionChange((r=>{r===m&&l(this.rawOptions[m])}))}onMultipleOptionChange(m,l){return this.onOptionChange((r=>{m.indexOf(r)!==-1&&l()}))}_setupOptions(){const m=r=>{if(!(r in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${r}"`);return this.rawOptions[r]},l=(r,t)=>{if(!(r in o.DEFAULT_OPTIONS))throw new Error(`No option with key "${r}"`);t=this._sanitizeAndValidateOption(r,t),this.rawOptions[r]!==t&&(this.rawOptions[r]=t,this._onOptionChange.fire(r))};for(const r in this.rawOptions){const t={get:m.bind(this,r),set:l.bind(this,r)};Object.defineProperty(this.options,r,t)}}_sanitizeAndValidateOption(m,l){switch(m){case"cursorStyle":if(l||(l=o.DEFAULT_OPTIONS[m]),!(function(r){return r==="block"||r==="underline"||r==="bar"})(l))throw new Error(`"${l}" is not a valid value for ${m}`);break;case"wordSeparator":l||(l=o.DEFAULT_OPTIONS[m]);break;case"fontWeight":case"fontWeightBold":if(typeof l=="number"&&1<=l&&l<=1e3)break;l=_.includes(l)?l:o.DEFAULT_OPTIONS[m];break;case"cursorWidth":l=Math.floor(l);case"lineHeight":case"tabStopWidth":if(l<1)throw new Error(`${m} cannot be less than 1, value: ${l}`);break;case"minimumContrastRatio":l=Math.max(1,Math.min(21,Math.round(10*l)/10));break;case"scrollback":if((l=Math.min(l,4294967295))<0)throw new Error(`${m} cannot be less than 0, value: ${l}`);break;case"fastScrollSensitivity":case"scrollSensitivity":if(l<=0)throw new Error(`${m} cannot be less than or equal to 0, value: ${l}`);break;case"rows":case"cols":if(!l&&l!==0)throw new Error(`${m} must be numeric, value: ${l}`);break;case"windowsPty":l=l??{}}return l}}o.OptionsService=C},2660:function(D,o,i){var d=this&&this.__decorate||function(C,S,m,l){var r,t=arguments.length,s=t<3?S:l===null?l=Object.getOwnPropertyDescriptor(S,m):l;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(C,S,m,l);else for(var n=C.length-1;n>=0;n--)(r=C[n])&&(s=(t<3?r(s):t>3?r(S,m,s):r(S,m))||s);return t>3&&s&&Object.defineProperty(S,m,s),s},v=this&&this.__param||function(C,S){return function(m,l){S(m,l,C)}};Object.defineProperty(o,"__esModule",{value:!0}),o.OscLinkService=void 0;const c=i(2585);let _=o.OscLinkService=class{constructor(C){this._bufferService=C,this._nextId=1,this._entriesWithId=new Map,this._dataByLinkId=new Map}registerLink(C){const S=this._bufferService.buffer;if(C.id===void 0){const n=S.addMarker(S.ybase+S.y),p={data:C,id:this._nextId++,lines:[n]};return n.onDispose((()=>this._removeMarkerFromLink(p,n))),this._dataByLinkId.set(p.id,p),p.id}const m=C,l=this._getEntryIdKey(m),r=this._entriesWithId.get(l);if(r)return this.addLineToLink(r.id,S.ybase+S.y),r.id;const t=S.addMarker(S.ybase+S.y),s={id:this._nextId++,key:this._getEntryIdKey(m),data:m,lines:[t]};return t.onDispose((()=>this._removeMarkerFromLink(s,t))),this._entriesWithId.set(s.key,s),this._dataByLinkId.set(s.id,s),s.id}addLineToLink(C,S){const m=this._dataByLinkId.get(C);if(m&&m.lines.every((l=>l.line!==S))){const l=this._bufferService.buffer.addMarker(S);m.lines.push(l),l.onDispose((()=>this._removeMarkerFromLink(m,l)))}}getLinkData(C){return this._dataByLinkId.get(C)?.data}_getEntryIdKey(C){return`${C.id};;${C.uri}`}_removeMarkerFromLink(C,S){const m=C.lines.indexOf(S);m!==-1&&(C.lines.splice(m,1),C.lines.length===0&&(C.data.id!==void 0&&this._entriesWithId.delete(C.key),this._dataByLinkId.delete(C.id)))}};o.OscLinkService=_=d([v(0,c.IBufferService)],_)},8343:(D,o)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.createDecorator=o.getServiceDependencies=o.serviceRegistry=void 0;const i="di$target",d="di$dependencies";o.serviceRegistry=new Map,o.getServiceDependencies=function(v){return v[d]||[]},o.createDecorator=function(v){if(o.serviceRegistry.has(v))return o.serviceRegistry.get(v);const c=function(_,C,S){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");(function(m,l,r){l[i]===l?l[d].push({id:m,index:r}):(l[d]=[{id:m,index:r}],l[i]=l)})(c,_,S)};return c.toString=()=>v,o.serviceRegistry.set(v,c),c}},2585:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.IDecorationService=o.IUnicodeService=o.IOscLinkService=o.IOptionsService=o.ILogService=o.LogLevelEnum=o.IInstantiationService=o.ICharsetService=o.ICoreService=o.ICoreMouseService=o.IBufferService=void 0;const d=i(8343);var v;o.IBufferService=(0,d.createDecorator)("BufferService"),o.ICoreMouseService=(0,d.createDecorator)("CoreMouseService"),o.ICoreService=(0,d.createDecorator)("CoreService"),o.ICharsetService=(0,d.createDecorator)("CharsetService"),o.IInstantiationService=(0,d.createDecorator)("InstantiationService"),(function(c){c[c.TRACE=0]="TRACE",c[c.DEBUG=1]="DEBUG",c[c.INFO=2]="INFO",c[c.WARN=3]="WARN",c[c.ERROR=4]="ERROR",c[c.OFF=5]="OFF"})(v||(o.LogLevelEnum=v={})),o.ILogService=(0,d.createDecorator)("LogService"),o.IOptionsService=(0,d.createDecorator)("OptionsService"),o.IOscLinkService=(0,d.createDecorator)("OscLinkService"),o.IUnicodeService=(0,d.createDecorator)("UnicodeService"),o.IDecorationService=(0,d.createDecorator)("DecorationService")},1480:(D,o,i)=>{Object.defineProperty(o,"__esModule",{value:!0}),o.UnicodeService=void 0;const d=i(8460),v=i(225);class c{static extractShouldJoin(C){return(1&C)!=0}static extractWidth(C){return C>>1&3}static extractCharKind(C){return C>>3}static createPropertyValue(C,S,m=!1){return(16777215&C)<<3|(3&S)<<1|(m?1:0)}constructor(){this._providers=Object.create(null),this._active="",this._onChange=new d.EventEmitter,this.onChange=this._onChange.event;const C=new v.UnicodeV6;this.register(C),this._active=C.version,this._activeProvider=C}dispose(){this._onChange.dispose()}get versions(){return Object.keys(this._providers)}get activeVersion(){return this._active}set activeVersion(C){if(!this._providers[C])throw new Error(`unknown Unicode version "${C}"`);this._active=C,this._activeProvider=this._providers[C],this._onChange.fire(C)}register(C){this._providers[C.version]=C}wcwidth(C){return this._activeProvider.wcwidth(C)}getStringCellWidth(C){let S=0,m=0;const l=C.length;for(let r=0;r<l;++r){let t=C.charCodeAt(r);if(55296<=t&&t<=56319){if(++r>=l)return S+this.wcwidth(t);const p=C.charCodeAt(r);56320<=p&&p<=57343?t=1024*(t-55296)+p-56320+65536:S+=this.wcwidth(p)}const s=this.charProperties(t,m);let n=c.extractWidth(s);c.extractShouldJoin(s)&&(n-=c.extractWidth(m)),S+=n,m=s}return S}charProperties(C,S){return this._activeProvider.charProperties(C,S)}}o.UnicodeService=c}},y={};function x(D){var o=y[D];if(o!==void 0)return o.exports;var i=y[D]={exports:{}};return g[D].call(i.exports,i,i.exports,x),i.exports}var L={};return(()=>{var D=L;Object.defineProperty(D,"__esModule",{value:!0}),D.Terminal=void 0;const o=x(9042),i=x(3236),d=x(844),v=x(5741),c=x(8285),_=x(7975),C=x(7090),S=["cols","rows"];class m extends d.Disposable{constructor(r){super(),this._core=this.register(new i.Terminal(r)),this._addonManager=this.register(new v.AddonManager),this._publicOptions={...this._core.options};const t=n=>this._core.options[n],s=(n,p)=>{this._checkReadonlyOptions(n),this._core.options[n]=p};for(const n in this._core.options){const p={get:t.bind(this,n),set:s.bind(this,n)};Object.defineProperty(this._publicOptions,n,p)}}_checkReadonlyOptions(r){if(S.includes(r))throw new Error(`Option "${r}" can only be set in the constructor`)}_checkProposedApi(){if(!this._core.optionsService.rawOptions.allowProposedApi)throw new Error("You must set the allowProposedApi option to true to use proposed API")}get onBell(){return this._core.onBell}get onBinary(){return this._core.onBinary}get onCursorMove(){return this._core.onCursorMove}get onData(){return this._core.onData}get onKey(){return this._core.onKey}get onLineFeed(){return this._core.onLineFeed}get onRender(){return this._core.onRender}get onResize(){return this._core.onResize}get onScroll(){return this._core.onScroll}get onSelectionChange(){return this._core.onSelectionChange}get onTitleChange(){return this._core.onTitleChange}get onWriteParsed(){return this._core.onWriteParsed}get element(){return this._core.element}get parser(){return this._parser||(this._parser=new _.ParserApi(this._core)),this._parser}get unicode(){return this._checkProposedApi(),new C.UnicodeApi(this._core)}get textarea(){return this._core.textarea}get rows(){return this._core.rows}get cols(){return this._core.cols}get buffer(){return this._buffer||(this._buffer=this.register(new c.BufferNamespaceApi(this._core))),this._buffer}get markers(){return this._checkProposedApi(),this._core.markers}get modes(){const r=this._core.coreService.decPrivateModes;let t="none";switch(this._core.coreMouseService.activeProtocol){case"X10":t="x10";break;case"VT200":t="vt200";break;case"DRAG":t="drag";break;case"ANY":t="any"}return{applicationCursorKeysMode:r.applicationCursorKeys,applicationKeypadMode:r.applicationKeypad,bracketedPasteMode:r.bracketedPasteMode,insertMode:this._core.coreService.modes.insertMode,mouseTrackingMode:t,originMode:r.origin,reverseWraparoundMode:r.reverseWraparound,sendFocusMode:r.sendFocus,wraparoundMode:r.wraparound}}get options(){return this._publicOptions}set options(r){for(const t in r)this._publicOptions[t]=r[t]}blur(){this._core.blur()}focus(){this._core.focus()}input(r,t=!0){this._core.input(r,t)}resize(r,t){this._verifyIntegers(r,t),this._core.resize(r,t)}open(r){this._core.open(r)}attachCustomKeyEventHandler(r){this._core.attachCustomKeyEventHandler(r)}attachCustomWheelEventHandler(r){this._core.attachCustomWheelEventHandler(r)}registerLinkProvider(r){return this._core.registerLinkProvider(r)}registerCharacterJoiner(r){return this._checkProposedApi(),this._core.registerCharacterJoiner(r)}deregisterCharacterJoiner(r){this._checkProposedApi(),this._core.deregisterCharacterJoiner(r)}registerMarker(r=0){return this._verifyIntegers(r),this._core.registerMarker(r)}registerDecoration(r){return this._checkProposedApi(),this._verifyPositiveIntegers(r.x??0,r.width??0,r.height??0),this._core.registerDecoration(r)}hasSelection(){return this._core.hasSelection()}select(r,t,s){this._verifyIntegers(r,t,s),this._core.select(r,t,s)}getSelection(){return this._core.getSelection()}getSelectionPosition(){return this._core.getSelectionPosition()}clearSelection(){this._core.clearSelection()}selectAll(){this._core.selectAll()}selectLines(r,t){this._verifyIntegers(r,t),this._core.selectLines(r,t)}dispose(){super.dispose()}scrollLines(r){this._verifyIntegers(r),this._core.scrollLines(r)}scrollPages(r){this._verifyIntegers(r),this._core.scrollPages(r)}scrollToTop(){this._core.scrollToTop()}scrollToBottom(){this._core.scrollToBottom()}scrollToLine(r){this._verifyIntegers(r),this._core.scrollToLine(r)}clear(){this._core.clear()}write(r,t){this._core.write(r,t)}writeln(r,t){this._core.write(r),this._core.write(`\r
`,t)}paste(r){this._core.paste(r)}refresh(r,t){this._verifyIntegers(r,t),this._core.refresh(r,t)}reset(){this._core.reset()}clearTextureAtlas(){this._core.clearTextureAtlas()}loadAddon(r){this._addonManager.loadAddon(this,r)}static get strings(){return o}_verifyIntegers(...r){for(const t of r)if(t===1/0||isNaN(t)||t%1!=0)throw new Error("This API only accepts integers")}_verifyPositiveIntegers(...r){for(const t of r)if(t&&(t===1/0||isNaN(t)||t%1!=0||t<0))throw new Error("This API only accepts positive integers")}}D.Terminal=m})(),L})()))})(lr)),lr.exports}var u0=h0();const d0=e=>{const h=/(.*)\[Python Interpreter: (.*)\]/s,g=e.match(h);return g?g[1]?.trim()||"":e},Li=(e,h,g=!1)=>{const{content:y,type:x}=e;if(x==="input"&&g)return;const L=y.replaceAll(`
`,`\r
`).trim();L&&h.writeln(d0(L))},f0={current:0},p0=()=>{const e=xr(o=>o.commands),h=pe.useRef(null),g=pe.useRef(null),y=pe.useRef(null),x=f0,L=()=>new u0.Terminal({fontFamily:"Menlo, Monaco, 'Courier New', monospace",fontSize:14,scrollback:1e3,scrollSensitivity:1,fastScrollModifier:"alt",fastScrollSensitivity:5,allowTransparency:!0,disableStdin:!0,theme:{background:"transparent"}}),D=()=>{h.current&&(g.current&&h.current.loadAddon(g.current),y.current&&(h.current.open(y.current),h.current.write("\x1B[?25l")))};return pe.useEffect(()=>{if(h.current=L(),g.current=new c0.FitAddon,y.current&&(D(),e.length>0)){for(let o=0;o<e.length;o+=1)e[o].type==="input"&&h.current.write("$ "),Li(e[o],h.current,!1);x.current=e.length}return()=>{h.current?.dispose(),x.current=0}},[]),pe.useEffect(()=>{if(h.current&&e.length>0&&x.current<e.length){for(let o=x.current;o<e.length;o+=1)e[o].type==="input"&&h.current.write("$ "),Li(e[o],h.current,!1);x.current=e.length}},[e]),pe.useEffect(()=>{let o=null;return o=new ResizeObserver(()=>{g.current?.fit()}),y.current&&o.observe(y.current),()=>{o?.disconnect()}},[]),y};function _0({className:e,testId:h}){const{t:g}=me();return u.jsx("div",{"data-testid":h,className:we("w-full h-full flex items-center text-center justify-center text-2xl text-tertiary-light",e),children:g("DIFF_VIEWER$WAITING_FOR_RUNTIME")})}function m0(){const{curAgentState:e}=Ct(),h=Ns.includes(e),g=p0();return u.jsxs("div",{className:"h-full flex flex-col rounded-xl",children:[h&&u.jsx(_0,{className:"pt-16"}),u.jsx("div",{className:"flex-1 min-h-0 p-4",children:u.jsx("div",{ref:g,className:we("w-full h-full",h?"p-0 w-0 h-0 opacity-0 overflow-hidden":"")})})]})}const g0=B.lazy(()=>ps(()=>import("./changes-tab-C6F2rPI2.js"),__vite__mapDeps([6,3,7,5,8,9,10,11,12,13,2,4,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46]))),v0=B.lazy(()=>ps(()=>import("./browser-tab-DCq5XuNj.js"),__vite__mapDeps([47,3,18,9,29,7,13,2,4,5,14,15,16,17,12,19,20,21,22,10,23,24,25,8,26,27,28,30,31]))),C0=B.lazy(()=>ps(()=>import("./served-tab-Cyy7ezoG.js"),__vite__mapDeps([48,3,7,28,13,2,4,5,9,14,15,16,17,18,12,19,20,21,22,10,23,24,25,8,26,27,29,30,31,49,50,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46]))),b0=B.lazy(()=>ps(()=>import("./vscode-tab-Dc7Cgb0U.js"),__vite__mapDeps([51,3,18,9,13,2,4,5,14,15,16,17,12,7,19,20,21,22,10,23,24,25,8,26,27,28,29,30,31,33,34,35,36,37,38,49,32,39,40,41,42,43,44,45,46])));function qn(){const{selectedTab:e,shouldShownAgentLoading:h}=ot(),{conversationId:g}=nt(),{t:y}=me(),x=e==="editor",L=e==="browser",D=e==="served",o=e==="vscode",i=e==="terminal",d=[{key:"editor",component:g0,isActive:x},{key:"browser",component:v0,isActive:L},{key:"served",component:C0,isActive:D},{key:"vscode",component:b0,isActive:o},{key:"terminal",component:m0,isActive:i}],v=B.useMemo(()=>x?y(K.COMMON$CHANGES):L?y(K.COMMON$BROWSER):D?y(K.COMMON$APP):o?y(K.COMMON$CODE):i?y(K.COMMON$TERMINAL):"",[x,L,D,o,i]);return h?u.jsx(r0,{}):u.jsxs(n0,{children:[u.jsx(a0,{title:v}),u.jsx(o0,{children:d.map(({key:c,component:_,isActive:C})=>u.jsx(i0,{isActive:C,children:u.jsx(_,{})},c==="terminal"?`${c}-${g}`:c))})]})}function S0({isRightPanelShown:e}){return u.jsxs("div",{className:"relative flex-1 flex flex-col",children:[u.jsx("div",{className:we("bg-base overflow-hidden",e?"h-160":"flex-1"),children:u.jsx(Gn,{})}),u.jsx("div",{className:we("absolute bottom-4 left-0 right-0 top-160 transition-all duration-300 ease-in-out overflow-hidden",e?"h-160 translate-y-0 opacity-100":"h-0 translate-y-full opacity-0"),children:u.jsx("div",{className:"h-full flex flex-col gap-3 pb-2 md:pb-0 pt-2",children:u.jsx(qn,{})})})]})}function y0({isRightPanelShown:e}){return u.jsx("div",{className:"flex justify-center w-full h-full",children:u.jsx("div",{className:we("w-full transition-all duration-300 ease-in-out",e?"max-w-4xl":"max-w-6xl"),children:u.jsx(Gn,{})})})}function w0({onMouseDown:e,className:h}){return u.jsxs("div",{className:we("relative w-1 bg-transparent cursor-ew-resize",h),onMouseDown:e,children:[u.jsx("div",{className:"absolute inset-y-0 left-1/2 w-0.5 -translate-x-1/2"}),u.jsx("div",{className:"absolute inset-y-0 -left-1 -right-1"})]})}function x0({defaultLeftWidth:e=50,minLeftWidth:h=30,maxLeftWidth:g=80,storageKey:y="desktop-layout-panel-width"}={}){const[x,L]=fr(y,e),[D,o]=B.useState(x),[i,d]=B.useState(!1),v=B.useRef(null),c=B.useCallback(l=>Math.max(h,Math.min(g,l)),[h,g]),_=B.useCallback(l=>{l.preventDefault(),d(!0)},[]),C=B.useCallback(l=>{if(!i||!v.current)return;const r=v.current.getBoundingClientRect(),t=l.clientX-r.left,s=r.width,n=t/s*100,p=c(n);o(p)},[i,c]),S=B.useCallback(()=>{i&&(d(!1),L(D))},[i,D,L]);B.useEffect(()=>(i&&(document.addEventListener("mousemove",C),document.addEventListener("mouseup",S),document.body.style.cursor="ew-resize",document.body.style.userSelect="none"),()=>{i&&(document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",S),document.body.style.cursor="",document.body.style.userSelect="")}),[i,C,S]);const m=100-D;return{leftWidth:D,rightWidth:m,isDragging:i,containerRef:v,handleMouseDown:_}}function E0({isRightPanelShown:e}){const{leftWidth:h,rightWidth:g,isDragging:y,containerRef:x,handleMouseDown:L}=x0({defaultLeftWidth:50,minLeftWidth:30,maxLeftWidth:80,storageKey:"desktop-layout-panel-width"});return u.jsx("div",{className:"h-full flex flex-col overflow-hidden",children:u.jsxs("div",{ref:x,className:"flex flex-1 transition-all duration-300 ease-in-out overflow-hidden",style:{transitionProperty:y?"none":"all"},children:[u.jsx("div",{className:"flex flex-col bg-base overflow-hidden transition-all duration-300 ease-in-out",style:{width:e?`${h}%`:"100%",transitionProperty:y?"none":"all"},children:u.jsx(y0,{isRightPanelShown:e})}),e&&u.jsx(w0,{onMouseDown:L}),u.jsx("div",{className:we("transition-all duration-300 ease-in-out overflow-hidden",e?"translate-x-0 opacity-100":"w-0 translate-x-full opacity-0"),style:{width:e?`${g}%`:"0%",transitionProperty:y?"opacity, transform":"all"},children:u.jsx("div",{className:"flex flex-col flex-1 gap-3 min-w-max h-full",children:u.jsx(qn,{})})})]})})}function k0(){const{width:e}=zi(),{isRightPanelShown:h}=ot();return e&&e<=1024?u.jsx(S0,{isRightPanelShown:h}):u.jsx(E0,{isRightPanelShown:h})}const A0=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",...e},B.createElement("path",{d:"M14.25 19.5C14.25 20.7426 13.2426 21.75 12 21.75C10.7574 21.75 9.75 20.7426 9.75 19.5C9.75 18.2574 10.7574 17.25 12 17.25C13.2426 17.25 14.25 18.2574 14.25 19.5ZM14.25 12C14.25 13.2426 13.2426 14.25 12 14.25C10.7574 14.25 9.75 13.2426 9.75 12C9.75 10.7574 10.7574 9.75 12 9.75C13.2426 9.75 14.25 10.7574 14.25 12ZM14.25 4.5C14.25 5.74264 13.2426 6.75 12 6.75C10.7574 6.75 9.75 5.74264 9.75 4.5C9.75 3.25736 10.7574 2.25 12 2.25C13.2426 2.25 14.25 3.25736 14.25 4.5Z",fill:"currentColor"}));function T0({onClick:e,fill:h="#a3a3a3"}){return u.jsx("button",{"data-testid":"ellipsis-button",type:"button",onClick:e,className:"cursor-pointer",children:u.jsx(A0,{width:24,height:24,color:h})})}const M0=e=>B.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",...e},B.createElement("path",{d:"M20.92 15.62C20.8694 15.4988 20.7983 15.3872 20.71 15.29L17.71 12.29C17.5217 12.1017 17.2663 11.9959 17 11.9959C16.7337 11.9959 16.4783 12.1017 16.29 12.29C16.1017 12.4783 15.9959 12.7337 15.9959 13C15.9959 13.2663 16.1017 13.5217 16.29 13.71L17.59 15H12C11.7348 15 11.4804 15.1054 11.2929 15.2929C11.1054 15.4804 11 15.7348 11 16C11 16.2652 11.1054 16.5196 11.2929 16.7071C11.4804 16.8946 11.7348 17 12 17H17.59L16.29 18.29C16.1963 18.383 16.1219 18.4936 16.0711 18.6154C16.0203 18.7373 15.9942 18.868 15.9942 19C15.9942 19.132 16.0203 19.2627 16.0711 19.3846C16.1219 19.5064 16.1963 19.617 16.29 19.71C16.383 19.8037 16.4936 19.8781 16.6154 19.9289C16.7373 19.9797 16.868 20.0058 17 20.0058C17.132 20.0058 17.2627 19.9797 17.3846 19.9289C17.5064 19.8781 17.617 19.8037 17.71 19.71L20.71 16.71C20.8026 16.6161 20.8742 16.5036 20.92 16.38C21.02 16.1365 21.02 15.8635 20.92 15.62ZM14 20H6C5.73478 20 5.48043 19.8946 5.29289 19.7071C5.10536 19.5196 5 19.2652 5 19V5C5 4.73478 5.10536 4.48043 5.29289 4.29289C5.48043 4.10536 5.73478 4 6 4H11V7C11 7.79565 11.3161 8.55871 11.8787 9.12132C12.4413 9.68393 13.2044 10 14 10H18C18.1974 9.99901 18.3901 9.93961 18.5539 9.82928C18.7176 9.71895 18.845 9.56262 18.92 9.38C18.9966 9.19789 19.0175 8.99718 18.9801 8.80319C18.9428 8.6092 18.8488 8.43062 18.71 8.29L12.71 2.29C12.6273 2.21222 12.5328 2.14808 12.43 2.1H12.34L12.06 2H6C5.20435 2 4.44129 2.31607 3.87868 2.87868C3.31607 3.44129 3 4.20435 3 5V19C3 19.7956 3.31607 20.5587 3.87868 21.1213C4.44129 21.6839 5.20435 22 6 22H14C14.2652 22 14.5196 21.8946 14.7071 21.7071C14.8946 21.5196 15 21.2652 15 21C15 20.7348 14.8946 20.4804 14.7071 20.2929C14.5196 20.1054 14.2652 20 14 20ZM13 5.41L15.59 8H14C13.7348 8 13.4804 7.89464 13.2929 7.70711C13.1054 7.51957 13 7.26522 13 7V5.41Z",fill:"currentColor"})),Wt=we("cursor-pointer p-0 h-auto hover:bg-transparent",Be);function R0({onClose:e,onRename:h,onDelete:g,onStop:y,onDisplayCost:x,onShowAgentTools:L,onShowMicroagents:D,onExportConversation:o,onDownloadViaVSCode:i,position:d="bottom"}){const{width:v}=zi(),{t:c}=me(),_=Pr(e),{data:C}=Ie(),S=C?.conversation_version==="V1",m=!!i,l=!!o,r=!!(L||D),t=!!x,s=!!(y||g),n=v&&v<=1024;return u.jsxs(ds,{ref:_,testId:"conversation-name-context-menu",position:d,alignment:"left",className:n?"right-0 translate-x-[34%] left-auto":"",children:[h&&u.jsx(Ue,{testId:"rename-button",onClick:h,className:Wt,children:u.jsx(Ut,{icon:u.jsx(ia,{width:16,height:16}),text:c(K.BUTTON$RENAME),className:Be})}),r&&u.jsx(xs,{testId:"separator-tools"}),D&&!S&&u.jsx(Ue,{testId:"show-microagents-button",onClick:D,className:Wt,children:u.jsx(Ut,{icon:u.jsx($i,{width:16,height:16}),text:c(K.CONVERSATION$SHOW_MICROAGENTS),className:Be})}),L&&u.jsx(Ue,{testId:"show-agent-tools-button",onClick:L,className:Wt,children:u.jsx(Ut,{icon:u.jsx(Ui,{width:16,height:16}),text:c(K.BUTTON$SHOW_AGENT_TOOLS_AND_METADATA),className:Be})}),(l||m)&&!S&&u.jsx(xs,{testId:"separator-export"}),o&&!S&&u.jsx(Ue,{testId:"export-conversation-button",onClick:o,className:Wt,children:u.jsx(Ut,{icon:u.jsx(M0,{width:16,height:16}),text:c(K.BUTTON$EXPORT_CONVERSATION),className:Be})}),i&&!S&&u.jsx(Ue,{testId:"download-vscode-button",onClick:i,className:Wt,children:u.jsx(Ut,{icon:u.jsx(na,{width:16,height:16}),text:c(K.BUTTON$DOWNLOAD_VIA_VSCODE),className:Be})}),(t||s)&&!S&&u.jsx(xs,{testId:"separator-info-control"}),x&&u.jsx(Ue,{testId:"display-cost-button",onClick:x,className:Wt,children:u.jsx(Ut,{icon:u.jsx(oa,{width:16,height:16}),text:c(K.BUTTON$DISPLAY_COST),className:Be})}),y&&u.jsx(Ue,{testId:"stop-button",onClick:y,className:Wt,children:u.jsx(Ut,{icon:u.jsx(Hi,{width:16,height:16}),text:c(K.COMMON$CLOSE_CONVERSATION_STOP_RUNTIME),className:Be})}),g&&u.jsx(Ue,{testId:"delete-button",onClick:g,className:Wt,children:u.jsx(Ut,{icon:u.jsx(aa,{width:16,height:16}),text:c(K.COMMON$DELETE_CONVERSATION),className:Be})})]})}function O0({actions:e,closeModal:h}){return u.jsx(u.Fragment,{children:e.map(({action:g,isDisabled:y,label:x,className:L,closeAfterAction:D})=>u.jsx(Qa,{type:"button",isDisabled:y,onPress:()=>{g(),D&&h()},className:L,children:x},x))})}function L0({maintitle:e,subtitle:h=void 0}){return u.jsxs(u.Fragment,{children:[u.jsx("h3",{children:e}),h&&u.jsx("span",{className:"text-neutral-400 text-sm font-light",children:h})]})}function D0({isOpen:e,onOpenChange:h,title:g,contentClassName:y="max-w-[30rem] p-[40px]",bodyClassName:x="px-0 py-[20px]",isDismissable:L=!0,subtitle:D=void 0,actions:o=[],children:i=null,testID:d}){return u.jsx(ml,{"data-testid":d,isOpen:e,onOpenChange:h,isDismissable:L,backdrop:"blur",hideCloseButton:!0,size:"sm",className:"bg-base-secondary rounded-lg",children:u.jsx(ul,{className:y,children:v=>u.jsxs(u.Fragment,{children:[g&&u.jsx(fl,{className:"flex flex-col p-0",children:u.jsx(L0,{maintitle:g,subtitle:D})}),u.jsx(rl,{className:x,children:i}),o&&o.length>0&&u.jsx(dl,{className:"flex-row flex justify-start p-0",children:u.jsx(O0,{actions:o,closeModal:v})})]})})})}function I0({currentCost:e,maxBudget:h}){const g=e/h*100,y=g>80;return u.jsx("div",{className:"w-full h-1.5 bg-neutral-700 rounded-full overflow-hidden mt-1",children:u.jsx("div",{className:`h-full transition-all duration-300 ${y?"bg-red-500":"bg-blue-500"}`,style:{width:`${Math.min(100,g)}%`}})})}function N0({currentCost:e,maxBudget:h}){const{t:g}=me(),y=e/h*100;return u.jsx("div",{className:"flex justify-end",children:u.jsx("span",{className:"text-xs text-neutral-400",children:g(K.CONVERSATION$BUDGET_USAGE_FORMAT,{currentCost:`$${e.toFixed(4)}`,maxBudget:`$${h.toFixed(4)}`,usagePercentage:y.toFixed(2),used:g(K.CONVERSATION$USED)})})})}function j0({cost:e,maxBudgetPerTask:h}){const{t:g}=me();return e===null?null:u.jsx("div",{className:"border-b border-neutral-700",children:h!==null&&h>0?u.jsxs(u.Fragment,{children:[u.jsx(I0,{currentCost:e,maxBudget:h}),u.jsx(N0,{currentCost:e,maxBudget:h})]}):u.jsx("span",{className:"text-xs text-neutral-400",children:g(K.CONVERSATION$NO_BUDGET_LIMIT)})})}function B0({cost:e,maxBudgetPerTask:h}){const{t:g}=me();return e===null?null:u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex justify-between items-center pb-2",children:[u.jsx("span",{className:"text-lg font-semibold",children:g(K.CONVERSATION$TOTAL_COST)}),u.jsxs("span",{className:"font-semibold",children:["$",e.toFixed(4)]})]}),u.jsx(j0,{cost:e,maxBudgetPerTask:h})]})}function cr({label:e,value:h,labelClassName:g="",valueClassName:y="font-semibold"}){return u.jsxs("div",{className:"flex justify-between items-center border-b border-neutral-700 pb-2",children:[u.jsx("span",{className:g,children:e}),u.jsx("span",{className:y,children:h})]})}function P0({usage:e}){const{t:h}=me();return u.jsxs(u.Fragment,{children:[u.jsx(cr,{label:h(K.CONVERSATION$INPUT),value:e.prompt_tokens.toLocaleString()}),u.jsxs("div",{className:"grid grid-cols-2 gap-2 pl-4 text-sm",children:[u.jsx("span",{className:"text-neutral-400",children:h(K.CONVERSATION$CACHE_HIT)}),u.jsx("span",{className:"text-right",children:e.cache_read_tokens.toLocaleString()}),u.jsx("span",{className:"text-neutral-400",children:h(K.CONVERSATION$CACHE_WRITE)}),u.jsx("span",{className:"text-right",children:e.cache_write_tokens.toLocaleString()})]}),u.jsx(cr,{label:h(K.CONVERSATION$OUTPUT),value:e.completion_tokens.toLocaleString()}),u.jsx(cr,{label:h(K.CONVERSATION$TOTAL),value:(e.prompt_tokens+e.completion_tokens).toLocaleString(),labelClassName:"font-semibold",valueClassName:"font-bold"})]})}function F0({perTurnToken:e,contextWindow:h}){const{t:g}=me(),y=e/h*100,x=Math.min(100,y);return u.jsxs("div",{className:"flex flex-col gap-2",children:[u.jsx("div",{className:"flex items-center justify-between",children:u.jsx("span",{className:"font-semibold",children:g(K.CONVERSATION$CONTEXT_WINDOW)})}),u.jsx("div",{className:"w-full h-1.5 bg-neutral-700 rounded-full overflow-hidden",children:u.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300",style:{width:`${x}%`}})}),u.jsx("div",{className:"flex justify-end",children:u.jsxs("span",{className:"text-xs text-neutral-400",children:[e.toLocaleString()," / ",h.toLocaleString()," (",y.toFixed(2),"% ",g(K.CONVERSATION$USED),")"]})})]})}function H0(){const{t:e}=me();return u.jsx("div",{className:"rounded-md p-4 text-center",children:u.jsx("p",{className:"text-neutral-400",children:e(K.CONVERSATION$NO_METRICS)})})}function $0({isOpen:e,onOpenChange:h}){const{t:g}=me(),y=Ii();return u.jsx(D0,{isOpen:e,onOpenChange:h,title:g(K.CONVERSATION$METRICS_INFO),testID:"metrics-modal",children:u.jsxs("div",{className:"space-y-4",children:[(y?.cost!==null||y?.usage!==null)&&u.jsx("div",{className:"rounded-md p-3",children:u.jsxs("div",{className:"grid gap-3",children:[u.jsx(B0,{cost:y?.cost??null,maxBudgetPerTask:y?.max_budget_per_task??null}),y?.usage!==null&&u.jsxs(u.Fragment,{children:[u.jsx(P0,{usage:y.usage}),u.jsx(F0,{perTurnToken:y.usage.per_turn_token,contextWindow:y.usage.context_window})]})]})}),!y?.cost&&!y?.usage&&u.jsx(H0,{})]})})}function U0(){const{t:e}=me(),{conversationId:h}=Is(),{data:g}=Ie(),{mutate:y}=la(),[x,L]=pe.useState("view"),[D,o]=pe.useState(!1),i=pe.useRef(null),{handleDelete:d,handleStop:v,handleDownloadViaVSCode:c,handleDisplayCost:_,handleShowAgentTools:C,handleShowMicroagents:S,handleExportConversation:m,handleConfirmDelete:l,handleConfirmStop:r,metricsModalVisible:t,setMetricsModalVisible:s,systemModalVisible:n,setSystemModalVisible:p,microagentsModalVisible:a,setMicroagentsModalVisible:b,confirmDeleteModalVisible:f,setConfirmDeleteModalVisible:w,confirmStopModalVisible:M,setConfirmStopModalVisible:N,systemMessage:O,shouldShowStop:I,shouldShowDownload:z,shouldShowExport:Y,shouldShowDisplayCost:ne,shouldShowAgentTools:U,shouldShowMicroagents:se}=yn({conversationId:h,conversationStatus:g?.status,showOptions:!0,onContextMenuToggle:o}),T=()=>{L("edit")},P=()=>{if(i.current?.value&&h){const ee=i.current.value.trim();ee!==g?.title&&y({conversationId:h,newTitle:ee},{onSuccess:()=>{Ko(e(K.CONVERSATION$TITLE_UPDATED))}})}else i.current&&(i.current.value=g?.title??"");L("view")},F=ee=>{ee.key==="Enter"&&ee.currentTarget.blur()},W=ee=>{x==="edit"&&(ee.preventDefault(),ee.stopPropagation())},Q=ee=>{ee.preventDefault(),ee.stopPropagation(),o(!D)},ce=ee=>{ee.preventDefault(),ee.stopPropagation(),L("edit"),o(!1)};return pe.useEffect(()=>{x==="edit"&&i.current?.focus()},[x]),g?u.jsxs(u.Fragment,{children:[u.jsxs("div",{className:"flex items-center gap-2 h-[22px] text-base font-normal text-left pl-0 lg:pl-3.5","data-testid":"conversation-name",children:[x==="edit"?u.jsx("input",{ref:i,"data-testid":"conversation-name-input",onClick:W,onBlur:P,onKeyUp:F,type:"text",defaultValue:g.title,className:"text-white leading-5 bg-transparent border-none outline-none text-base font-normal w-fit max-w-fit field-sizing-content"}):u.jsx("div",{className:"text-white leading-5 w-fit max-w-fit truncate","data-testid":"conversation-name-title",onDoubleClick:T,title:g.title,children:g.title}),x!=="edit"&&u.jsx(ca,{version:g.conversation_version}),x!=="edit"&&u.jsxs("div",{className:"relative flex items-center",children:[u.jsx(T0,{fill:"#B1B9D3",onClick:Q}),D&&u.jsx(R0,{onClose:()=>o(!1),onRename:ce,onDelete:d,onStop:I?v:void 0,onDisplayCost:ne?_:void 0,onShowAgentTools:U?C:void 0,onShowMicroagents:se?S:void 0,onExportConversation:Y?m:void 0,onDownloadViaVSCode:z?c:void 0,position:"bottom"})]})]}),u.jsx($0,{isOpen:t,onOpenChange:s}),u.jsx(wn,{isOpen:n,onClose:()=>p(!1),systemMessage:O?O.args:null}),a&&u.jsx(xn,{onClose:()=>b(!1)}),f&&u.jsx(ha,{onConfirm:l,onCancel:()=>w(!1)}),M&&u.jsx(ua,{onConfirm:r,onCancel:()=>N(!1)})]}):null}const W0=e=>B.createElement("svg",{viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.25 1.125L1.125 2.25V15.75L2.25 16.875H15.75L16.875 15.75V2.25L15.75 1.125H2.25ZM2.25 15.75V2.25H15.75V15.75H2.25ZM6.492 12.7425L7.2705 13.5382L11.2155 9.606V8.922L7.2705 4.977L6.49425 5.772L9.93675 9.2985L6.492 12.7425Z",fill:"currentColor"})),V0=e=>B.createElement("svg",{viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.4375 9C2.4375 5.37563 5.37563 2.4375 9 2.4375C12.6244 2.4375 15.5625 5.37563 15.5625 9C15.5625 12.6244 12.6244 15.5625 9 15.5625C5.37563 15.5625 2.4375 12.6244 2.4375 9ZM4.13812 6.5625C4.81317 5.21867 6.02897 4.19333 7.49996 3.77204C7.15155 4.17641 6.85182 4.65395 6.60713 5.17892C6.40828 5.60556 6.24263 6.06975 6.11494 6.5625H4.13812ZM3.72196 7.6875C3.61778 8.10783 3.5625 8.54746 3.5625 9C3.5625 9.45254 3.61778 9.89217 3.72196 10.3125H5.89738C5.84161 9.88758 5.8125 9.44852 5.8125 8.99998C5.8125 8.55142 5.84161 8.11239 5.89737 7.6875H3.72196ZM7.0333 7.6875C6.97087 8.10689 6.9375 8.54634 6.9375 8.99998C6.9375 9.45367 6.97087 9.89313 7.0333 10.3125H10.9667C11.0291 9.89311 11.0625 9.45367 11.0625 9.00002C11.0625 8.54637 11.0291 8.1069 10.9667 7.6875H7.0333ZM12.1026 7.6875C12.1584 8.1124 12.1875 8.55145 12.1875 9.00002C12.1875 9.44858 12.1584 9.88762 12.1026 10.3125H14.278C14.3822 9.89217 14.4375 9.45254 14.4375 9C14.4375 8.54746 14.3822 8.10783 14.278 7.6875H12.1026ZM13.8619 6.5625H11.885C11.7574 6.06976 11.5917 5.6056 11.3929 5.17897C11.1482 4.65397 10.8484 4.1764 10.5 3.77203C11.971 4.19331 13.1868 5.21866 13.8619 6.5625ZM10.7171 6.5625H7.28293C7.38007 6.23971 7.49559 5.93571 7.62681 5.65419C7.99835 4.85708 8.48101 4.26914 8.99997 3.92442C9.51895 4.26913 10.0016 4.8571 10.3732 5.65424C10.5044 5.93575 10.6199 6.23973 10.7171 6.5625ZM4.13812 11.4375H6.11496C6.24963 11.9572 6.42655 12.4452 6.64015 12.8909C6.87835 13.3879 7.16685 13.8413 7.50006 14.228C6.02902 13.8067 4.81318 12.7814 4.13812 11.4375ZM10.7171 11.4375H7.28295C7.3869 11.7829 7.51191 12.1068 7.65465 12.4047C8.02305 13.1733 8.49456 13.7398 9.00007 14.0756C9.51902 13.7308 10.0017 13.1429 10.3732 12.3458C10.5044 12.0643 10.6199 11.7603 10.7171 11.4375ZM11.3929 12.8211C11.5917 12.3944 11.7574 11.9303 11.8851 11.4375H13.8619C13.1868 12.7813 11.971 13.8067 10.5 14.228C10.8485 13.8236 11.1482 13.346 11.3929 12.8211Z",fill:"currentColor"})),z0=e=>B.createElement("svg",{viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B.createElement("path",{d:"M8.25 9.75C8.10166 9.75 7.95666 9.79399 7.83332 9.8764C7.70999 9.95881 7.61386 10.0759 7.55709 10.213C7.50032 10.35 7.48547 10.5008 7.51441 10.6463C7.54335 10.7918 7.61478 10.9254 7.71967 11.0303C7.82456 11.1352 7.9582 11.2066 8.10368 11.2356C8.24917 11.2645 8.39997 11.2497 8.53701 11.1929C8.67406 11.1361 8.79119 11.04 8.8736 10.9167C8.95601 10.7933 9 10.6483 9 10.5C9 10.3011 8.92098 10.1103 8.78033 9.96967C8.63968 9.82902 8.44891 9.75 8.25 9.75ZM5.25 9.75C5.10166 9.75 4.95666 9.79399 4.83332 9.8764C4.70999 9.95881 4.61386 10.0759 4.55709 10.213C4.50032 10.35 4.48547 10.5008 4.51441 10.6463C4.54335 10.7918 4.61478 10.9254 4.71967 11.0303C4.82456 11.1352 4.9582 11.2066 5.10368 11.2356C5.24917 11.2645 5.39997 11.2497 5.53701 11.1929C5.67406 11.1361 5.79119 11.04 5.8736 10.9167C5.95601 10.7933 6 10.6483 6 10.5C6 10.3011 5.92098 10.1103 5.78033 9.96967C5.63968 9.82902 5.44891 9.75 5.25 9.75ZM16.5 3C16.5 2.40326 16.2629 1.83097 15.841 1.40901C15.419 0.987053 14.8467 0.75 14.25 0.75H3.75C3.15326 0.75 2.58097 0.987053 2.15901 1.40901C1.73705 1.83097 1.5 2.40326 1.5 3V6C1.50331 6.55504 1.71166 7.08927 2.085 7.5C1.71166 7.91073 1.50331 8.44496 1.5 9V12C1.5 12.5967 1.73705 13.169 2.15901 13.591C2.58097 14.0129 3.15326 14.25 3.75 14.25H8.25V15.75H2.25C2.05109 15.75 1.86032 15.829 1.71967 15.9697C1.57902 16.1103 1.5 16.3011 1.5 16.5C1.5 16.6989 1.57902 16.8897 1.71967 17.0303C1.86032 17.171 2.05109 17.25 2.25 17.25H15.75C15.9489 17.25 16.1397 17.171 16.2803 17.0303C16.421 16.8897 16.5 16.6989 16.5 16.5C16.5 16.3011 16.421 16.1103 16.2803 15.9697C16.1397 15.829 15.9489 15.75 15.75 15.75H9.75V14.25H14.25C14.8467 14.25 15.419 14.0129 15.841 13.591C16.2629 13.169 16.5 12.5967 16.5 12V9C16.4967 8.44496 16.2883 7.91073 15.915 7.5C16.2883 7.08927 16.4967 6.55504 16.5 6V3ZM15 12C15 12.1989 14.921 12.3897 14.7803 12.5303C14.6397 12.671 14.4489 12.75 14.25 12.75H3.75C3.55109 12.75 3.36032 12.671 3.21967 12.5303C3.07902 12.3897 3 12.1989 3 12V9C3 8.80109 3.07902 8.61032 3.21967 8.46967C3.36032 8.32902 3.55109 8.25 3.75 8.25H14.25C14.4489 8.25 14.6397 8.32902 14.7803 8.46967C14.921 8.61032 15 8.80109 15 9V12ZM15 6C15 6.19891 14.921 6.38968 14.7803 6.53033C14.6397 6.67098 14.4489 6.75 14.25 6.75H3.75C3.55109 6.75 3.36032 6.67098 3.21967 6.53033C3.07902 6.38968 3 6.19891 3 6V3C3 2.80109 3.07902 2.61032 3.21967 2.46967C3.36032 2.32902 3.55109 2.25 3.75 2.25H14.25C14.4489 2.25 14.6397 2.32902 14.7803 2.46967C14.921 2.61032 15 2.80109 15 3V6ZM8.25 3.75C8.10166 3.75 7.95666 3.79399 7.83332 3.8764C7.70999 3.95881 7.61386 4.07594 7.55709 4.21299C7.50032 4.35003 7.48547 4.50083 7.51441 4.64632C7.54335 4.7918 7.61478 4.92544 7.71967 5.03033C7.82456 5.13522 7.9582 5.20665 8.10368 5.23559C8.24917 5.26453 8.39997 5.24968 8.53701 5.19291C8.67406 5.13614 8.79119 5.04001 8.8736 4.91668C8.95601 4.79334 9 4.64834 9 4.5C9 4.30109 8.92098 4.11032 8.78033 3.96967C8.63968 3.82902 8.44891 3.75 8.25 3.75ZM5.25 3.75C5.10166 3.75 4.95666 3.79399 4.83332 3.8764C4.70999 3.95881 4.61386 4.07594 4.55709 4.21299C4.50032 4.35003 4.48547 4.50083 4.51441 4.64632C4.54335 4.7918 4.61478 4.92544 4.71967 5.03033C4.82456 5.13522 4.9582 5.20665 5.10368 5.23559C5.24917 5.26453 5.39997 5.24968 5.53701 5.19291C5.67406 5.13614 5.79119 5.04001 5.8736 4.91668C5.95601 4.79334 6 4.64834 6 4.5C6 4.30109 5.92098 4.11032 5.78033 3.96967C5.63968 3.82902 5.44891 3.75 5.25 3.75Z",fill:"currentColor"})),G0=e=>B.createElement("svg",{width:26,height:26,viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B.createElement("g",{transform:"scale(1.3) translate(-3, -3)"},B.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.21875 9.04H7.42L6.25 7.85875L7.04875 7.07125L7.825 7.83625L9.41125 6.25L10.21 7.04875L8.21875 9.04ZM11.8637 7.375H20.8637V8.5H11.8637V7.375ZM11.8637 10.75H20.8637V11.875H11.8637V10.75ZM20.8637 14.125H11.8637V15.25H20.8637V14.125ZM11.8637 17.5H20.8637V18.625H11.8637V17.5ZM7.42 12.415H8.21875L10.21 10.4237L9.41125 9.63625L7.825 11.2225L7.04875 10.4462L6.25 11.245L7.42 12.415ZM8.21875 15.8012H7.42L6.25 14.6312L7.04875 13.8325L7.825 14.6088L9.41125 13.0113L10.21 13.81L8.21875 15.8012ZM7.42 19.1875H8.21875L10.21 17.1962L9.41125 16.3975L7.825 17.995L7.04875 17.2188L6.25 18.0062L7.42 19.1875Z",fill:"currentColor"}))),K0=e=>B.createElement("svg",{viewBox:"0 0 20 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e},B.createElement("path",{d:"M12.5063 0.946289L11.4948 2.05386L16.8906 6.98209L11.4928 11.9481L12.5083 13.052L19.1105 6.97807L12.5063 0.946289Z",fill:"currentColor"}),B.createElement("path",{d:"M7.49476 13.0539L8.50634 11.9463L3.11047 7.01806L8.50834 2.05202L7.49275 0.948125L0.890625 7.02208L7.49476 13.0539Z",fill:"currentColor"}));function q0({icon:e,onClick:h,isActive:g}){return u.jsx("button",{type:"button",onClick:()=>{h()},className:we("p-1 rounded-md cursor-pointer","text-[#9299AA] bg-[#0D0F11]",g&&"bg-[#25272D] text-white",g?"hover:text-white hover:bg-tertiary":"hover:text-white hover:bg-[#0D0F11]",g?"focus-within:text-white focus-within:bg-tertiary":"focus-within:text-[#9299AA] focus-within:bg-[#0D0F11]"),children:u.jsx(e,{className:we("w-5 h-5 text-inherit")})})}function Z0({children:e,tooltip:h,ariaLabel:g}){return u.jsx(Hr,{tooltip:h,ariaLabel:g,disabled:!1,placement:"bottom",tooltipClassName:"bg-white text-black text-xs font-medium leading-5",children:e})}function Y0(){const{curAgentState:e}=Ct(),{t:h}=me(),{conversationId:g}=nt(),y=async x=>{if(x.preventDefault(),x.stopPropagation(),g)try{const L=await vt.getVSCodeUrl(g);if(L.vscode_url){const D=Vi(L.vscode_url);D&&window.open(D,"_blank")}}catch{}};return u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx("span",{children:h(K.COMMON$CODE)}),Ns.includes(e)?null:u.jsx(Aa,{className:"w-3 h-3 text-inherit cursor-pointer",onClick:y})]})}function J0(){const{selectedTab:e,isRightPanelShown:h,setHasRightPanelToggled:g,setSelectedTab:y}=ot(),[x,L]=fr("conversation-selected-tab","editor"),[D,o]=fr("conversation-right-panel-shown",!0),i=C=>{y(C),L(C)};B.useEffect(()=>{y(x),g(D)},[y,g,x,D]),B.useEffect(()=>{(()=>{h&&(e||i("editor"))})()},[h,e,i]);const{t:d}=me(),v=C=>{e===C&&h?(g(!1),o(!1)):(i(C),h||(g(!0),o(!0)))},c=C=>h&&e===C,_=[{isActive:c("editor"),icon:G0,onClick:()=>v("editor"),tooltipContent:d(K.COMMON$CHANGES),tooltipAriaLabel:d(K.COMMON$CHANGES)},{isActive:c("vscode"),icon:K0,onClick:()=>v("vscode"),tooltipContent:u.jsx(Y0,{}),tooltipAriaLabel:d(K.COMMON$CODE)},{isActive:c("terminal"),icon:W0,onClick:()=>v("terminal"),tooltipContent:d(K.COMMON$TERMINAL),tooltipAriaLabel:d(K.COMMON$TERMINAL)},{isActive:c("served"),icon:z0,onClick:()=>v("served"),tooltipContent:d(K.COMMON$APP),tooltipAriaLabel:d(K.COMMON$APP)},{isActive:c("browser"),icon:V0,onClick:()=>v("browser"),tooltipContent:d(K.COMMON$BROWSER),tooltipAriaLabel:d(K.COMMON$BROWSER)}];return u.jsx("div",{className:we("relative w-full","flex flex-row justify-start lg:justify-end items-center gap-4.5"),children:_.map(({icon:C,onClick:S,isActive:m,tooltipContent:l,tooltipAriaLabel:r},t)=>u.jsx(Z0,{tooltip:l,ariaLabel:r,children:u.jsx(q0,{icon:C,onClick:S,isActive:m})},t))})}function X0({children:e,conversationId:h,version:g}){const{data:y}=Ie();if(g===0)return u.jsx(Ho,{conversationId:h,children:e});if(g===1)return u.jsx(xl,{conversationId:h,conversationUrl:y?.url,sessionApiKey:y?.session_api_key,children:e});throw new Error(`Unsupported WebSocket provider version: ${g}. Supported versions are 0 and 1.`)}function Q0(){Ml();const{t:e}=me(),{conversationId:h}=nt(),g=Kt(p=>p.clearEvents),{isTask:y,taskStatus:x,taskDetail:L}=Ks(),{data:D,isFetched:o,refetch:i}=Ie(),{mutate:d,isPending:v}=En(),{data:c}=qo(),{providers:_}=ss(),{resetConversationState:C}=ot(),S=wr(),m=xr(p=>p.clearTerminal),l=Di(p=>p.setCurrentAgentState),r=js(p=>p.removeErrorMessage),t=pe.useRef(null);bl(),Rl(),pe.useEffect(()=>{m(),C(),l(ve.LOADING),r(),g(),t.current!==h&&(t.current=null)},[h,m,C,l,r,g]),pe.useEffect(()=>{y&&x==="ERROR"&&Ye(L||e(K.CONVERSATION$FAILED_TO_START_FROM_TASK))},[y,x,L,e]),pe.useEffect(()=>{if(!o||!c)return;if(!D){Ye(e(K.CONVERSATION$NOT_EXIST_OR_NO_PERMISSION)),S("/");return}const p=D.conversation_id,a=D.status;t.current!==p&&(t.current=p,a==="STOPPED"&&!v&&d({conversationId:p,providers:_},{onError:b=>{Ye(e(K.CONVERSATION$FAILED_TO_START_WITH_ERROR,{error:b.message})),i()}}))},[D?.conversation_id,o,c,v,_,d,S,i,e]);const s=D?.conversation_version==="V0",n=u.jsx($o,{children:u.jsx(Al,{children:u.jsxs("div",{"data-testid":"app-route",className:"p-3 md:p-0 flex flex-col h-full gap-3",children:[u.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4.5 pt-2 lg:pt-0",children:[u.jsx(U0,{}),u.jsx(J0,{})]}),u.jsx(k0,{})]})})});return u.jsx(X0,{version:s?0:1,conversationId:h,children:n})}function ed(){return u.jsx(Q0,{})}const Fd=Co(ed);export{_0 as W,Ct as a,Ml as b,Fd as c,nn as u};
