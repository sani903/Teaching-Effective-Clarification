import{R as m,r as u,p as l}from"./chunk-NISHYRIK-CgksP-ke.js";import{u as d}from"./use-config-BtaDlBUv.js";import{u as f}from"./use-is-authed-CJdzFdqm.js";import{u as h}from"./use-user-providers-CPbKIWnc.js";import{u as p}from"./open-hands-axios-DsgPCc-0.js";import{u as g}from"./useInfiniteQuery-DoKcZZP5.js";import{C}from"./feature-flags-1f3MRGYs.js";import{d as v,c as w}from"./utils-C5iw9p3M.js";import{T as E}from"./tooltip-button-CGDIzzom.js";import{u as b}from"./useTranslation-BhtO8iYN.js";const L=()=>{const{data:t}=d(),{data:s}=f(),{providers:r}=h();return m.useMemo(()=>!t?.APP_MODE||!s?!1:t.APP_MODE==="oss"?r.length>0:!0,[t?.APP_MODE,s,r.length])},N=t=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 25 25",fill:"none",...t},u.createElement("path",{d:"M10.8696 23.3696V1.63043C10.8696 0.729971 11.5995 0 12.5 0C13.4005 0 14.1304 0.729971 14.1304 1.63043V23.3696C14.1304 24.27 13.4005 25 12.5 25C11.5995 25 10.8696 24.27 10.8696 23.3696Z",fill:"currentColor"}),u.createElement("path",{d:"M1.63043 10.8641L23.3696 10.8641C24.27 10.8641 25 11.5941 25 12.4946C25 13.395 24.27 14.125 23.3696 14.125L1.63043 14.125C0.729971 14.125 -3.93605e-08 13.395 0 12.4946C3.93605e-08 11.5941 0.729971 10.8641 1.63043 10.8641Z",fill:"currentColor"})),F=(t=20)=>{const{data:s}=f(),r=p();return g({queryKey:["user","conversations","paginated",t],queryFn:async({pageParam:e})=>{const o=await C.getUserConversations(t,e);return o.results.forEach(n=>{r.setQueryData(["user","conversation",n.conversation_id],n)}),o},enabled:!!s,getNextPageParam:e=>e.next_page_id,initialPageParam:void 0})},_=({hasNextPage:t,isFetchingNextPage:s,fetchNextPage:r,threshold:e=100})=>{const o=u.useRef(null),n=u.useCallback(()=>{if(!o.current||s||!t)return;const{scrollTop:a,scrollHeight:i,clientHeight:c}=o.current;a+c>=i-e&&r()},[t,s,r,e]);return u.useEffect(()=>{const a=o.current;if(a)return a.addEventListener("scroll",n),()=>{a.removeEventListener("scroll",n)}},[n]),o};function $({conversationStatus:t}){const{t:s}=b(),r=u.useMemo(()=>{switch(t){case"STOPPED":return"bg-[#3C3C49]";case"RUNNING":return"bg-[#1FBD53]";case"STARTING":return"bg-[#FFD43B]";case"ERROR":return"bg-[#FF684E]";default:return"bg-[#3C3C49]"}},[t]),e=s(v(t));return l.jsx(E,{tooltip:e,ariaLabel:e,placement:"right",showArrow:!0,className:"p-0 border-0 bg-transparent hover:opacity-100",tooltipClassName:"bg-[#1a1a1a] text-white text-xs shadow-lg",children:l.jsx("div",{className:w("w-1.5 h-1.5 rounded-full",r)})})}const O=t=>{const r=new Date().getTime()-t.getTime(),e=Math.floor(r/1e3),o=Math.floor(e/60),n=Math.floor(o/60),a=Math.floor(n/24),i=Math.floor(a/30),c=Math.floor(i/12);return e<60?`${e}s`:o<60?`${o}m`:n<24?`${n}h`:a<30?`${a}d`:i<12?`${i}mo`:`${c}y`};export{$ as C,N as S,F as a,_ as b,O as f,L as u};
