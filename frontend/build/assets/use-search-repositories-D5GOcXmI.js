import{I as Kt,r as d,R as Me,p as E}from"./chunk-NISHYRIK-CgksP-ke.js";import{_ as T,b as xe,G as Ht}from"./optimistic-user-message-store-BLUkFBLR.js";import{c as z,I as dt}from"./utils-C5iw9p3M.js";import{u as Lt}from"./useInfiniteQuery-DoKcZZP5.js";import{u as ct,a as ft}from"./use-config-BtaDlBUv.js";import{u as ht}from"./use-user-providers-CPbKIWnc.js";import{u as Nt}from"./use-is-authed-CJdzFdqm.js";import{G as De}from"./git-service.api-C9ZaYUVf.js";var ce=function(){return ce=Object.assign||function(t){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var u in r)Object.prototype.hasOwnProperty.call(r,u)&&(t[u]=r[u])}return t},ce.apply(this,arguments)};const Je=e=>typeof e=="object"&&e!=null&&e.nodeType===1,et=(e,t)=>(!t||e!=="hidden")&&e!=="visible"&&e!=="clip",we=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const r=getComputedStyle(e,null);return et(r.overflowY,t)||et(r.overflowX,t)||(i=>{const n=(u=>{if(!u.ownerDocument||!u.ownerDocument.defaultView)return null;try{return u.ownerDocument.defaultView.frameElement}catch{return null}})(i);return!!n&&(n.clientHeight<i.scrollHeight||n.clientWidth<i.scrollWidth)})(e)}return!1},Ce=(e,t,r,i,n,u,o,s)=>u<e&&o>t||u>e&&o<t?0:u<=e&&s<=r||o>=t&&s>=r?u-e-i:o>t&&s<r||u<e&&s>r?o-t+n:0,jt=e=>{const t=e.parentElement;return t??(e.getRootNode().host||null)},At=(e,t)=>{var r,i,n,u;if(typeof document>"u")return[];const{scrollMode:o,block:s,inline:a,boundary:p,skipOverflowHiddenElements:v}=t,R=typeof p=="function"?p:U=>U!==p;if(!Je(e))throw new TypeError("Invalid target");const m=document.scrollingElement||document.documentElement,x=[];let y=e;for(;Je(y)&&R(y);){if(y=jt(y),y===m){x.push(y);break}y!=null&&y===document.body&&we(y)&&!we(document.documentElement)||y!=null&&we(y,v)&&x.push(y)}const I=(i=(r=window.visualViewport)==null?void 0:r.width)!=null?i:innerWidth,l=(u=(n=window.visualViewport)==null?void 0:n.height)!=null?u:innerHeight,{scrollX:O,scrollY:w}=window,{height:W,width:D,top:Y,right:X,bottom:P,left:q}=e.getBoundingClientRect(),{top:Q,right:M,bottom:oe,left:fe}=(U=>{const S=window.getComputedStyle(U);return{top:parseFloat(S.scrollMarginTop)||0,right:parseFloat(S.scrollMarginRight)||0,bottom:parseFloat(S.scrollMarginBottom)||0,left:parseFloat(S.scrollMarginLeft)||0}})(e);let K=s==="start"||s==="nearest"?Y-Q:s==="end"?P+oe:Y+W/2-Q+oe,H=a==="center"?q+D/2-fe+M:a==="end"?X+M:q-fe;const te=[];for(let U=0;U<x.length;U++){const S=x[U],{height:ue,width:ae,top:se,right:he,bottom:g,left:f}=S.getBoundingClientRect();if(o==="if-needed"&&Y>=0&&q>=0&&P<=l&&X<=I&&(S===m&&!we(S)||Y>=se&&P<=g&&q>=f&&X<=he))return te;const h=getComputedStyle(S),b=parseInt(h.borderLeftWidth,10),L=parseInt(h.borderTopWidth,10),N=parseInt(h.borderRightWidth,10),j=parseInt(h.borderBottomWidth,10);let V=0,k=0;const A="offsetWidth"in S?S.offsetWidth-S.clientWidth-b-N:0,F="offsetHeight"in S?S.offsetHeight-S.clientHeight-L-j:0,ne="offsetWidth"in S?S.offsetWidth===0?0:ae/S.offsetWidth:0,$="offsetHeight"in S?S.offsetHeight===0?0:ue/S.offsetHeight:0;if(m===S)V=s==="start"?K:s==="end"?K-l:s==="nearest"?Ce(w,w+l,l,L,j,w+K,w+K+W,W):K-l/2,k=a==="start"?H:a==="center"?H-I/2:a==="end"?H-I:Ce(O,O+I,I,b,N,O+H,O+H+D,D),V=Math.max(0,V+w),k=Math.max(0,k+O);else{V=s==="start"?K-se-L:s==="end"?K-g+j+F:s==="nearest"?Ce(se,g,ue,L,j+F,K,K+W,W):K-(se+ue/2)+F/2,k=a==="start"?H-f-b:a==="center"?H-(f+ae/2)+A/2:a==="end"?H-he+N+A:Ce(f,he,ae,b,N+A,H,H+D,D);const{scrollLeft:le,scrollTop:B}=S;V=$===0?0:Math.max(0,Math.min(B+V/$,S.scrollHeight-ue/$+F)),k=ne===0?0:Math.max(0,Math.min(le+k/ne,S.scrollWidth-ae/ne+A)),K+=B-V,H+=le-k}te.push({el:S,top:V,left:k})}return te};var ke={exports:{}},Ve,tt;function Ft(){if(tt)return Ve;tt=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ve=e,Ve}var Ke,nt;function Bt(){if(nt)return Ke;nt=1;var e=Ft();function t(){}function r(){}return r.resetWarningCache=t,Ke=function(){function i(o,s,a,p,v,R){if(R!==e){var m=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw m.name="Invariant Violation",m}}i.isRequired=i;function n(){return i}var u={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:n,element:i,elementType:i,instanceOf:n,node:i,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:r,resetWarningCache:t};return u.PropTypes=u,u},Ke}var rt;function $t(){return rt||(rt=1,ke.exports=Bt()()),ke.exports}var Wt=$t();const c=Kt(Wt);var He={exports:{}},C={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var it;function qt(){if(it)return C;it=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),o=Symbol.for("react.context"),s=Symbol.for("react.server_context"),a=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),x=Symbol.for("react.offscreen"),y;y=Symbol.for("react.module.reference");function I(l){if(typeof l=="object"&&l!==null){var O=l.$$typeof;switch(O){case e:switch(l=l.type,l){case r:case n:case i:case p:case v:return l;default:switch(l=l&&l.$$typeof,l){case s:case o:case a:case m:case R:case u:return l;default:return O}}case t:return O}}}return C.ContextConsumer=o,C.ContextProvider=u,C.Element=e,C.ForwardRef=a,C.Fragment=r,C.Lazy=m,C.Memo=R,C.Portal=t,C.Profiler=n,C.StrictMode=i,C.Suspense=p,C.SuspenseList=v,C.isAsyncMode=function(){return!1},C.isConcurrentMode=function(){return!1},C.isContextConsumer=function(l){return I(l)===o},C.isContextProvider=function(l){return I(l)===u},C.isElement=function(l){return typeof l=="object"&&l!==null&&l.$$typeof===e},C.isForwardRef=function(l){return I(l)===a},C.isFragment=function(l){return I(l)===r},C.isLazy=function(l){return I(l)===m},C.isMemo=function(l){return I(l)===R},C.isPortal=function(l){return I(l)===t},C.isProfiler=function(l){return I(l)===n},C.isStrictMode=function(l){return I(l)===i},C.isSuspense=function(l){return I(l)===p},C.isSuspenseList=function(l){return I(l)===v},C.isValidElementType=function(l){return typeof l=="string"||typeof l=="function"||l===r||l===n||l===i||l===p||l===v||l===x||typeof l=="object"&&l!==null&&(l.$$typeof===m||l.$$typeof===R||l.$$typeof===u||l.$$typeof===o||l.$$typeof===a||l.$$typeof===y||l.getModuleId!==void 0)},C.typeOf=I,C}var ot;function Ut(){return ot||(ot=1,He.exports=qt()),He.exports}Ut();var Gt=0;function gt(){}function _t(e,t){if(e){var r=At(e,{boundary:t,block:"nearest",scrollMode:"if-needed"});r.forEach(function(i){var n=i.el,u=i.top,o=i.left;n.scrollTop=u,n.scrollLeft=o})}}function ut(e,t,r){var i=e===t||t instanceof r.Node&&e.contains&&e.contains(t);return i}function pt(e,t){var r;function i(){r&&clearTimeout(r)}function n(){for(var u=arguments.length,o=new Array(u),s=0;s<u;s++)o[s]=arguments[s];i(),r=setTimeout(function(){r=null,e.apply(void 0,o)},t)}return n.cancel=i,n}function _(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){for(var n=arguments.length,u=new Array(n>1?n-1:0),o=1;o<n;o++)u[o-1]=arguments[o];return t.some(function(s){return s&&s.apply(void 0,[i].concat(u)),i.preventDownshiftDefault||i.hasOwnProperty("nativeEvent")&&i.nativeEvent.preventDownshiftDefault})}}function Ee(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(i){t.forEach(function(n){typeof n=="function"?n(i):n&&(n.current=i)})}}function zt(){return String(Gt++)}function Le(e,t){return!e||!t?e:Object.keys(e).reduce(function(r,i){return r[i]=mt(t,i)?t[i]:e[i],r},{})}function mt(e,t){return e[t]!==void 0}function Yt(e){var t=e.key,r=e.keyCode;return r>=37&&r<=40&&t.indexOf("Arrow")!==0?"Arrow"+t:t}function Re(e,t,r,i,n){var u=r.length;if(u===0)return-1;var o=u-1;(typeof e!="number"||e<0||e>o)&&(e=t>0?-1:o+1);var s=e+t;s<0?s=o:s>o&&(s=0);var a=Te(s,t<0,r,i,n);return a===-1?e>=u?-1:e:a}function Te(e,t,r,i,n){n===void 0&&(n=!1);var u=r.length;if(t){for(var o=e;o>=0;o--)if(!i(r[o],o))return o}else for(var s=e;s<u;s++)if(!i(r[s],s))return s;return n?Te(t?u-1:0,t,r,i):-1}function at(e,t,r,i){return i===void 0&&(i=!0),r&&t.some(function(n){return n&&(ut(n,e,r)||i&&ut(n,r.document.activeElement,r))})}var Xt=pt(function(e){vt(e).textContent=""},500);function vt(e){var t=e.getElementById("a11y-status-message");return t||(t=e.createElement("div"),t.setAttribute("id","a11y-status-message"),t.setAttribute("role","status"),t.setAttribute("aria-live","polite"),t.setAttribute("aria-relevant","additions text"),Object.assign(t.style,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px"}),e.body.appendChild(t),t)}function Qt(e,t){if(!(!e||!t)){var r=vt(t);r.textContent=e,Xt(t)}}function Zt(e){var t=e?.getElementById("a11y-status-message");t&&t.remove()}var It={highlightedIndex:-1,isOpen:!1,selectedItem:null,inputValue:""};function Jt(e,t,r){var i=e.props,n=e.type,u={};Object.keys(t).forEach(function(o){en(o,e,t,r),r[o]!==t[o]&&(u[o]=r[o])}),i.onStateChange&&Object.keys(u).length&&i.onStateChange(T({type:n},u))}function en(e,t,r,i){var n=t.props,u=t.type,o="on"+je(e)+"Change";n[o]&&i[e]!==void 0&&i[e]!==r[e]&&n[o](T({type:u},i))}function tn(e,t){return t.changes}var st=pt(function(e,t){Qt(e,t)},200),nn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?d.useLayoutEffect:d.useEffect,rn="useId"in Me?function(t){var r=t.id,i=t.labelId,n=t.menuId,u=t.getItemId,o=t.toggleButtonId,s=t.inputId,a="downshift-"+Me.useId();r||(r=a);var p=d.useRef({labelId:i||r+"-label",menuId:n||r+"-menu",getItemId:u||function(v){return r+"-item-"+v},toggleButtonId:o||r+"-toggle-button",inputId:s||r+"-input"});return p.current}:function(t){var r=t.id,i=r===void 0?"downshift-"+zt():r,n=t.labelId,u=t.menuId,o=t.getItemId,s=t.toggleButtonId,a=t.inputId,p=d.useRef({labelId:n||i+"-label",menuId:u||i+"-menu",getItemId:o||function(v){return i+"-item-"+v},toggleButtonId:s||i+"-toggle-button",inputId:a||i+"-input"});return p.current};function on(e,t,r,i){var n,u;if(e===void 0){if(t===void 0)throw new Error(i);n=r[t],u=t}else u=t===void 0?r.indexOf(e):t,n=e;return[n,u]}function je(e){return""+e.slice(0,1).toUpperCase()+e.slice(1)}function yt(e){var t=d.useRef(e);return t.current=e,t}function un(e,t,r,i){var n=d.useRef(),u=d.useRef(),o=d.useCallback(function(x,y){u.current=y,x=Le(x,y.props);var I=e(x,y),l=y.props.stateReducer(x,T({},y,{changes:I}));return l},[e]),s=d.useReducer(o,t,r),a=s[0],p=s[1],v=yt(t),R=d.useCallback(function(x){return p(T({props:v.current},x))},[v]),m=u.current;return d.useEffect(function(){var x=Le(n.current,m?.props),y=m&&n.current&&!i(x,a);y&&Jt(m,x,a),n.current=a},[a,m,i]),[a,R]}var pe={itemToString:function(t){return t?String(t):""},itemToKey:function(t){return t},stateReducer:tn,scrollIntoView:_t,environment:typeof window>"u"?void 0:window};function ee(e,t,r){r===void 0&&(r=It);var i=e["default"+je(t)];return i!==void 0?i:r[t]}function me(e,t,r){r===void 0&&(r=It);var i=e[t];if(i!==void 0)return i;var n=e["initial"+je(t)];return n!==void 0?n:ee(e,t,r)}function an(e){var t=me(e,"selectedItem"),r=me(e,"isOpen"),i=hn(e),n=me(e,"inputValue");return{highlightedIndex:i<0&&t&&r?e.items.findIndex(function(u){return e.itemToKey(u)===e.itemToKey(t)}):i,isOpen:r,selectedItem:t,inputValue:n}}function ve(e,t,r){var i=e.items,n=e.initialHighlightedIndex,u=e.defaultHighlightedIndex,o=e.isItemDisabled,s=e.itemToKey,a=t.selectedItem,p=t.highlightedIndex;return i.length===0?-1:n!==void 0&&p===n&&!o(i[n],n)?n:u!==void 0&&!o(i[u],u)?u:a?i.findIndex(function(v){return s(a)===s(v)}):r<0&&!o(i[i.length-1],i.length-1)?i.length-1:r>0&&!o(i[0],0)?0:-1}function sn(e,t,r){var i=d.useRef({isMouseDown:!1,isTouchMove:!1,isTouchEnd:!1});return d.useEffect(function(){if(!e)return gt;var n=r.map(function(v){return v.current});function u(){i.current.isTouchEnd=!1,i.current.isMouseDown=!0}function o(v){i.current.isMouseDown=!1,at(v.target,n,e)||t()}function s(){i.current.isTouchEnd=!1,i.current.isTouchMove=!1}function a(){i.current.isTouchMove=!0}function p(v){i.current.isTouchEnd=!0,!i.current.isTouchMove&&!at(v.target,n,e,!1)&&t()}return e.addEventListener("mousedown",u),e.addEventListener("mouseup",o),e.addEventListener("touchstart",s),e.addEventListener("touchmove",a),e.addEventListener("touchend",p),function(){e.removeEventListener("mousedown",u),e.removeEventListener("mouseup",o),e.removeEventListener("touchstart",s),e.removeEventListener("touchmove",a),e.removeEventListener("touchend",p)}},[r,e,t]),i.current}var ln=function(){return gt};function dn(e,t,r,i){i===void 0&&(i={});var n=i.document,u=Ae();d.useEffect(function(){if(!(!e||u||!n)){var o=e(t);st(o,n)}},r),d.useEffect(function(){return function(){st.cancel(),Zt(n)}},[n])}function cn(e){var t=e.highlightedIndex,r=e.isOpen,i=e.itemRefs,n=e.getItemNodeFromIndex,u=e.menuElement,o=e.scrollIntoView,s=d.useRef(!0);return nn(function(){t<0||!r||!Object.keys(i.current).length||(s.current===!1?s.current=!0:o(n(t),u))},[t]),s}function lt(e,t,r){var i;r===void 0&&(r=!0);var n=((i=e.items)==null?void 0:i.length)&&t>=0;return T({isOpen:!1,highlightedIndex:-1},n&&T({selectedItem:e.items[t],isOpen:ee(e,"isOpen"),highlightedIndex:ee(e,"highlightedIndex")},r&&{inputValue:e.itemToString(e.items[t])}))}function fn(e,t){return e.isOpen===t.isOpen&&e.inputValue===t.inputValue&&e.highlightedIndex===t.highlightedIndex&&e.selectedItem===t.selectedItem}function Ae(){var e=Me.useRef(!0);return Me.useEffect(function(){return e.current=!1,function(){e.current=!0}},[]),e.current}function Ne(e){var t=ee(e,"highlightedIndex");return t>-1&&e.isItemDisabled(e.items[t],t)?-1:t}function hn(e){var t=me(e,"highlightedIndex");return t>-1&&e.isItemDisabled(e.items[t],t)?-1:t}var Se={environment:c.shape({addEventListener:c.func.isRequired,removeEventListener:c.func.isRequired,document:c.shape({createElement:c.func.isRequired,getElementById:c.func.isRequired,activeElement:c.any.isRequired,body:c.any.isRequired}).isRequired,Node:c.func.isRequired}),itemToString:c.func,itemToKey:c.func,stateReducer:c.func},bt=T({},Se,{getA11yStatusMessage:c.func,highlightedIndex:c.number,defaultHighlightedIndex:c.number,initialHighlightedIndex:c.number,isOpen:c.bool,defaultIsOpen:c.bool,initialIsOpen:c.bool,selectedItem:c.any,initialSelectedItem:c.any,defaultSelectedItem:c.any,id:c.string,labelId:c.string,menuId:c.string,getItemId:c.func,toggleButtonId:c.string,onSelectedItemChange:c.func,onHighlightedIndexChange:c.func,onStateChange:c.func,onIsOpenChange:c.func,scrollIntoView:c.func});function gn(e,t,r){var i=t.type,n=t.props,u;switch(i){case r.ItemMouseMove:u={highlightedIndex:t.disabled?-1:t.index};break;case r.MenuMouseLeave:u={highlightedIndex:-1};break;case r.ToggleButtonClick:case r.FunctionToggleMenu:u={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:ve(n,e,0)};break;case r.FunctionOpenMenu:u={isOpen:!0,highlightedIndex:ve(n,e,0)};break;case r.FunctionCloseMenu:u={isOpen:!1};break;case r.FunctionSetHighlightedIndex:u={highlightedIndex:n.isItemDisabled(n.items[t.highlightedIndex],t.highlightedIndex)?-1:t.highlightedIndex};break;case r.FunctionSetInputValue:u={inputValue:t.inputValue};break;case r.FunctionReset:u={highlightedIndex:Ne(n),isOpen:ee(n,"isOpen"),selectedItem:ee(n,"selectedItem"),inputValue:ee(n,"inputValue")};break;default:throw new Error("Reducer called without proper action type.")}return T({},e,u)}ce(ce({},bt),{items:c.array.isRequired,isItemDisabled:c.func});ce(ce({},pe),{isItemDisabled:function(){return!1}});var Fe=0,Be=1,$e=2,We=3,qe=4,Ue=5,Ge=6,_e=7,ze=8,Oe=9,Ye=10,xt=11,wt=12,Xe=13,Ct=14,Et=15,Rt=16,St=17,Mt=18,Qe=19,Dt=20,Tt=21,Ze=22,Ot=Object.freeze({__proto__:null,ControlledPropUpdatedSelectedItem:Ze,FunctionCloseMenu:St,FunctionOpenMenu:Rt,FunctionReset:Tt,FunctionSelectItem:Qe,FunctionSetHighlightedIndex:Mt,FunctionSetInputValue:Dt,FunctionToggleMenu:Et,InputBlur:Oe,InputChange:ze,InputClick:Ye,InputKeyDownArrowDown:Fe,InputKeyDownArrowUp:Be,InputKeyDownEnd:qe,InputKeyDownEnter:_e,InputKeyDownEscape:$e,InputKeyDownHome:We,InputKeyDownPageDown:Ge,InputKeyDownPageUp:Ue,ItemClick:Xe,ItemMouseMove:wt,MenuMouseLeave:xt,ToggleButtonClick:Ct});function pn(e){var t=an(e),r=t.selectedItem,i=t.inputValue;return i===""&&r&&e.defaultInputValue===void 0&&e.initialInputValue===void 0&&e.inputValue===void 0&&(i=e.itemToString(r)),T({},t,{inputValue:i})}T({},bt,{items:c.array.isRequired,isItemDisabled:c.func,inputValue:c.string,defaultInputValue:c.string,initialInputValue:c.string,inputId:c.string,onInputValueChange:c.func});function mn(e,t,r,i){var n=d.useRef(),u=un(e,t,r,i),o=u[0],s=u[1],a=Ae();return d.useEffect(function(){if(mt(t,"selectedItem")){if(!a){var p=t.itemToKey(t.selectedItem)!==t.itemToKey(n.current);p&&s({type:Ze,inputValue:t.itemToString(t.selectedItem)})}n.current=o.selectedItem===n.current?t.selectedItem:o.selectedItem}},[o.selectedItem,t.selectedItem]),[Le(o,t),s]}var vn=T({},pe,{isItemDisabled:function(){return!1}});function In(e,t){var r,i=t.type,n=t.props,u=t.altKey,o;switch(i){case Xe:o={isOpen:ee(n,"isOpen"),highlightedIndex:Ne(n),selectedItem:n.items[t.index],inputValue:n.itemToString(n.items[t.index])};break;case Fe:e.isOpen?o={highlightedIndex:Re(e.highlightedIndex,1,n.items,n.isItemDisabled,!0)}:o={highlightedIndex:u&&e.selectedItem==null?-1:ve(n,e,1),isOpen:n.items.length>=0};break;case Be:e.isOpen?u?o=lt(n,e.highlightedIndex):o={highlightedIndex:Re(e.highlightedIndex,-1,n.items,n.isItemDisabled,!0)}:o={highlightedIndex:ve(n,e,-1),isOpen:n.items.length>=0};break;case _e:o=lt(n,e.highlightedIndex);break;case $e:o=T({isOpen:!1,highlightedIndex:-1},!e.isOpen&&{selectedItem:null,inputValue:""});break;case Ue:o={highlightedIndex:Re(e.highlightedIndex,-10,n.items,n.isItemDisabled,!0)};break;case Ge:o={highlightedIndex:Re(e.highlightedIndex,10,n.items,n.isItemDisabled,!0)};break;case We:o={highlightedIndex:Te(0,!1,n.items,n.isItemDisabled)};break;case qe:o={highlightedIndex:Te(n.items.length-1,!0,n.items,n.isItemDisabled)};break;case Oe:o=T({isOpen:!1,highlightedIndex:-1},e.highlightedIndex>=0&&((r=n.items)==null?void 0:r.length)&&t.selectItem&&{selectedItem:n.items[e.highlightedIndex],inputValue:n.itemToString(n.items[e.highlightedIndex])});break;case ze:o={isOpen:!0,highlightedIndex:Ne(n),inputValue:t.inputValue};break;case Ye:o={isOpen:!e.isOpen,highlightedIndex:e.isOpen?-1:ve(n,e,0)};break;case Qe:o={selectedItem:t.selectedItem,inputValue:n.itemToString(t.selectedItem)};break;case Ze:o={inputValue:t.inputValue};break;default:return gn(e,t,Ot)}return T({},e,o)}var yn=["onMouseLeave","refKey","ref"],bn=["item","index","refKey","ref","onMouseMove","onMouseDown","onClick","onPress","disabled"],xn=["onClick","onPress","refKey","ref"],wn=["onKeyDown","onChange","onInput","onBlur","onChangeText","onClick","refKey","ref"];Pt.stateChangeTypes=Ot;function Pt(e){e===void 0&&(e={});var t=T({},vn,e),r=t.items,i=t.scrollIntoView,n=t.environment,u=t.getA11yStatusMessage,o=mn(In,t,pn,fn),s=o[0],a=o[1],p=s.isOpen,v=s.highlightedIndex,R=s.selectedItem,m=s.inputValue,x=d.useRef(null),y=d.useRef({}),I=d.useRef(null),l=d.useRef(null),O=Ae(),w=rn(t),W=d.useRef(),D=yt({state:s,props:t}),Y=d.useCallback(function(g){return y.current[w.getItemId(g)]},[w]);dn(u,s,[p,v,R,m],n);var X=cn({menuElement:x.current,highlightedIndex:v,isOpen:p,itemRefs:y,scrollIntoView:i,getItemNodeFromIndex:Y});d.useEffect(function(){var g=me(t,"isOpen");g&&I.current&&I.current.focus()},[]),d.useEffect(function(){O||(W.current=r.length)});var P=sn(n,d.useCallback(function(){D.current.state.isOpen&&a({type:Oe,selectItem:!1})},[a,D]),d.useMemo(function(){return[x,l,I]},[x.current,l.current,I.current])),q=ln();d.useEffect(function(){p||(y.current={})},[p]),d.useEffect(function(){var g;!p||!(n!=null&&n.document)||!(I!=null&&(g=I.current)!=null&&g.focus)||n.document.activeElement!==I.current&&I.current.focus()},[p,n]);var Q=d.useMemo(function(){return{ArrowDown:function(f){f.preventDefault(),a({type:Fe,altKey:f.altKey})},ArrowUp:function(f){f.preventDefault(),a({type:Be,altKey:f.altKey})},Home:function(f){D.current.state.isOpen&&(f.preventDefault(),a({type:We}))},End:function(f){D.current.state.isOpen&&(f.preventDefault(),a({type:qe}))},Escape:function(f){var h=D.current.state;(h.isOpen||h.inputValue||h.selectedItem||h.highlightedIndex>-1)&&(f.preventDefault(),a({type:$e}))},Enter:function(f){var h=D.current.state;!h.isOpen||f.which===229||(f.preventDefault(),a({type:_e}))},PageUp:function(f){D.current.state.isOpen&&(f.preventDefault(),a({type:Ue}))},PageDown:function(f){D.current.state.isOpen&&(f.preventDefault(),a({type:Ge}))}}},[a,D]),M=d.useCallback(function(g){return T({id:w.labelId,htmlFor:w.inputId},g)},[w]),oe=d.useCallback(function(g,f){var h,b=g===void 0?{}:g,L=b.onMouseLeave,N=b.refKey,j=N===void 0?"ref":N,V=b.ref,k=xe(b,yn),A=f===void 0?{}:f;return A.suppressRefError,T((h={},h[j]=Ee(V,function(F){x.current=F}),h.id=w.menuId,h.role="listbox",h["aria-labelledby"]=k&&k["aria-label"]?void 0:""+w.labelId,h.onMouseLeave=_(L,function(){a({type:xt})}),h),k)},[a,q,w]),fe=d.useCallback(function(g){var f,h,b=g===void 0?{}:g,L=b.item,N=b.index,j=b.refKey,V=j===void 0?"ref":j,k=b.ref,A=b.onMouseMove,F=b.onMouseDown,ne=b.onClick;b.onPress;var $=b.disabled,le=xe(b,bn);$!==void 0&&console.warn('Passing "disabled" as an argument to getItemProps is not supported anymore. Please use the isItemDisabled prop from useCombobox.');var B=D.current,Ie=B.props,ye=B.state,be=on(L,N,Ie.items,"Pass either item or index to getItemProps!"),Pe=be[0],G=be[1],de=Ie.isItemDisabled(Pe,G),Z="onClick",re=ne,J=function(){P.isTouchEnd||G===ye.highlightedIndex||(X.current=!1,a({type:wt,index:G,disabled:de}))},ie=function(){a({type:Xe,index:G})},kt=function(Vt){return Vt.preventDefault()};return T((f={},f[V]=Ee(k,function(ge){ge&&(y.current[w.getItemId(G)]=ge)}),f["aria-disabled"]=de,f["aria-selected"]=G===ye.highlightedIndex,f.id=w.getItemId(G),f.role="option",f),!de&&(h={},h[Z]=_(re,ie),h),{onMouseMove:_(A,J),onMouseDown:_(F,kt)},le)},[a,w,D,P,X]),K=d.useCallback(function(g){var f,h=g===void 0?{}:g,b=h.onClick;h.onPress;var L=h.refKey,N=L===void 0?"ref":L,j=h.ref,V=xe(h,xn),k=D.current.state,A=function(){a({type:Ct})};return T((f={},f[N]=Ee(j,function(F){l.current=F}),f["aria-controls"]=w.menuId,f["aria-expanded"]=k.isOpen,f.id=w.toggleButtonId,f.tabIndex=-1,f),!V.disabled&&T({},{onClick:_(b,A)}),V)},[a,D,w]),H=d.useCallback(function(g,f){var h,b=g===void 0?{}:g,L=b.onKeyDown,N=b.onChange,j=b.onInput,V=b.onBlur;b.onChangeText;var k=b.onClick,A=b.refKey,F=A===void 0?"ref":A,ne=b.ref,$=xe(b,wn),le=f===void 0?{}:f;le.suppressRefError;var B=D.current.state,Ie=function(J){var ie=Yt(J);ie&&Q[ie]&&Q[ie](J)},ye=function(J){a({type:ze,inputValue:J.target.value})},be=function(J){if(n!=null&&n.document&&B.isOpen&&!P.isMouseDown){var ie=J.relatedTarget===null&&n.document.activeElement!==n.document.body;a({type:Oe,selectItem:!ie})}},Pe=function(){a({type:Ye})},G="onChange",de={};if(!$.disabled){var Z;de=(Z={},Z[G]=_(N,j,ye),Z.onKeyDown=_(L,Ie),Z.onBlur=_(V,be),Z.onClick=_(k,Pe),Z)}return T((h={},h[F]=Ee(ne,function(re){I.current=re}),h["aria-activedescendant"]=B.isOpen&&B.highlightedIndex>-1?w.getItemId(B.highlightedIndex):"",h["aria-autocomplete"]="list",h["aria-controls"]=w.menuId,h["aria-expanded"]=B.isOpen,h["aria-labelledby"]=$&&$["aria-label"]?void 0:w.labelId,h.autoComplete="off",h.id=w.inputId,h.role="combobox",h.value=B.inputValue,h),de,$)},[a,w,n,Q,D,P,q]),te=d.useCallback(function(){a({type:Et})},[a]),U=d.useCallback(function(){a({type:St})},[a]),S=d.useCallback(function(){a({type:Rt})},[a]),ue=d.useCallback(function(g){a({type:Mt,highlightedIndex:g})},[a]),ae=d.useCallback(function(g){a({type:Qe,selectedItem:g})},[a]),se=d.useCallback(function(g){a({type:Dt,inputValue:g})},[a]),he=d.useCallback(function(){a({type:Tt})},[a]);return{getItemProps:fe,getLabelProps:M,getMenuProps:oe,getInputProps:H,getToggleButtonProps:K,toggleMenu:te,openMenu:S,closeMenu:U,setHighlightedIndex:ue,setInputValue:se,selectItem:ae,reset:he,highlightedIndex:v,isOpen:p,selectedItem:R,inputValue:m}}Se.stateReducer,Se.itemToKey,Se.environment,c.array,c.array,c.array,c.func,c.number,c.number,c.number,c.func,c.func,c.string,c.string;pe.itemToKey,pe.stateReducer,pe.environment;function Cn({item:e,index:t,isSelected:r,getItemProps:i,getDisplayText:n,getItemKey:u,isProviderDropdown:o=!1,renderIcon:s,itemClassName:a}){const p=i({index:t,item:e,className:z(o?"px-2 py-0 cursor-pointer text-xs rounded-md mx-0 my-0 h-6 flex items-center":"px-2 py-2 cursor-pointer text-sm rounded-md mx-0 my-0.5","text-white focus:outline-none font-normal",{"bg-[#C9B974] text-black":r,"hover:bg-[#5C5D62]":!r,"hover:bg-[#C9B974] hover:text-black":r},a)});return E.jsx("li",{...p,children:E.jsxs("div",{className:"flex items-center gap-2",children:[s&&s(e),E.jsx("span",{className:"font-medium",children:n(e)})]})},u(e))}function En({isOpen:e,filteredItems:t,inputValue:r,highlightedIndex:i,selectedItem:n,getMenuProps:u,getItemProps:o,onScroll:s,menuRef:a,renderItem:p,renderEmptyState:v,stickyTopItem:R,stickyFooterItem:m,testId:x,numberOfRecentItems:y=0}){if(!e)return null;const l=!(t.length>0)&&!R&&!m;return E.jsx("div",{className:"relative",children:E.jsxs("div",{className:z("absolute z-10 w-full bg-[#454545] border border-[#727987] rounded-lg shadow-none","focus:outline-none mt-1 z-[9999]","max-h-60"),children:[E.jsx("ul",{...u({ref:a,className:z("w-full overflow-auto p-1 custom-scrollbar-always",R||m?"max-h-[calc(15rem-3rem)]":"max-h-60"),onScroll:s,"data-testid":x}),children:l?v(r):E.jsxs(E.Fragment,{children:[R,t.map((O,w)=>E.jsxs(E.Fragment,{children:[p(O,w,i,n,o),y>0&&w===y-1&&E.jsx("div",{className:"border-b border-[#727987] bg-[#454545] pb-1 mb-1 h-[1px]"})]}))]})}),m&&E.jsx("div",{className:"border-t border-[#727987] bg-[#454545] p-1 rounded-b-lg",children:m})]})})}const Rn=e=>d.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",...e},d.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M15.3235 10.9352L11.5016 14.2111L7.67969 10.9352L8.6152 9.84375L11.5016 12.3178L14.388 9.84375L15.3235 10.9352Z",fill:"currentColor"}));function Sn({isOpen:e,disabled:t,getToggleButtonProps:r,iconClassName:i}){return E.jsx("button",{...r({disabled:t,className:z("text-[#fff]","disabled:cursor-not-allowed disabled:opacity-60")}),type:"button","aria-label":"Toggle menu",children:E.jsx(Rn,{className:z("w-4 h-4 transition-transform",e&&"rotate-180",i)})})}function Mn({hasSelection:e,testId:t="dropdown-loading"}){return E.jsx("div",{className:z("absolute top-1/2 transform -translate-y-1/2",e?"right-11":"right-6"),children:E.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-500 border-t-transparent rounded-full","data-testid":t})})}function Dn({isError:e,message:t="Failed to load data",testId:r="dropdown-error"}){return e?E.jsx("div",{className:"text-red-500 text-sm mt-1","data-testid":r,children:t}):null}function Tn({inputValue:e,searchMessage:t="No items found",emptyMessage:r="No items available",testId:i="dropdown-empty"}){return E.jsx("li",{className:"px-3 py-2 text-[#B7BDC2] text-sm rounded-lg mx-0.5 my-0.5","data-testid":i,children:e?t:r})}function An({providers:e,value:t,placeholder:r="Select Provider",className:i,errorMessage:n,disabled:u=!1,isLoading:o=!1,onChange:s,inputClassName:a,toggleButtonClassName:p,itemClassName:v}){const[R,m]=d.useState(""),[x,y]=d.useState(t||null),I=M=>{switch(M){case"github":return"GitHub";case"gitlab":return"GitLab";case"bitbucket":return"Bitbucket";case"enterprise_sso":return"Enterprise SSO";default:return M.charAt(0).toUpperCase()+M.slice(1)}},l=d.useMemo(()=>x&&R===I(x)||!R||!R.trim()?e:e.filter(M=>I(M).toLowerCase().includes(R.toLowerCase())),[e,R,x]),{isOpen:O,getToggleButtonProps:w,getMenuProps:W,getInputProps:D,highlightedIndex:Y,getItemProps:X,selectedItem:P}=Pt({items:l,itemToString:M=>M?I(M):"",selectedItem:x,onSelectedItemChange:({selectedItem:M})=>{y(M||null),s?.(M||null)},onInputValueChange:({inputValue:M})=>{m(M||"")},inputValue:R});d.useEffect(()=>{t!==x&&y(t||null)},[t,x]),d.useEffect(()=>{P&&!O?m(I(P)):P||m("")},[P,O]);const q=(M,oe,fe,K,H)=>E.jsx(Cn,{item:M,index:oe,isSelected:M===K,getItemProps:H,getDisplayText:I,getItemKey:te=>te,isProviderDropdown:!0,itemClassName:v},M),Q=M=>E.jsx(Tn,{inputValue:M,searchMessage:"No providers found",emptyMessage:"No providers available",testId:"git-provider-dropdown-empty"});return E.jsxs("div",{className:z("relative",i),children:[E.jsxs("div",{className:"relative",children:[P&&E.jsx("div",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 z-10",children:E.jsx(Ht,{gitProvider:P,className:"min-w-[14px] min-h-[14px] w-[14px] h-[14px]"})}),E.jsx("input",{...D({disabled:u,placeholder:r,readOnly:!0,className:z("w-29.5 h-6 py-0 border border-[#727987] rounded shadow-none h-6 min-h-6 max-h-6 ","bg-[#454545] text-[#A3A3A3] placeholder:text-[#A3A3A3]","focus:outline-none focus:ring-0 focus:border-[#727987]","disabled:bg-[#363636] disabled:cursor-not-allowed disabled:opacity-60","pl-1.5 pr-[1px] cursor-pointer text-xs font-normal leading-5",P&&"pl-6",a)}),"data-testid":"git-provider-dropdown"}),E.jsx("div",{className:"absolute right-0 top-1/2 transform -translate-y-1/2 flex items-center gap-1",children:E.jsx(Sn,{isOpen:O,disabled:u,getToggleButtonProps:w,iconClassName:z("w-[23px] h-[23px] translate-y-[1px]",p)})}),o&&E.jsx(Mn,{hasSelection:!!P})]}),E.jsx(En,{isOpen:O,filteredItems:l,inputValue:R,highlightedIndex:Y,selectedItem:P,getMenuProps:W,getItemProps:X,renderItem:q,renderEmptyState:Q}),E.jsx(Dn,{isError:!!n,message:n})]})}function Fn(e,t){const[r,i]=d.useState(e);return d.useEffect(()=>{const n=setTimeout(()=>i(e),t);return()=>clearTimeout(n)},[e,t]),r}const On=e=>{const{data:t}=ct(),{data:r}=Nt(),{providers:i}=ht();return ft({queryKey:["installations",i||[],e],queryFn:()=>De.getUserInstallationIds(e),enabled:r&&!!e&&dt(e,t?.APP_MODE),staleTime:1e3*60*5,gcTime:1e3*60*15})};function Bn(e){const{provider:t,pageSize:r=30,enabled:i=!0}=e,{providers:n}=ht(),{data:u}=ct(),{data:o}=On(t),s=t?dt(t,u?.APP_MODE):!1,a=Lt({queryKey:["repositories",n||[],t,s,r,...s?[o||[]]:[]],queryFn:async({pageParam:v})=>{if(!t)throw new Error("Provider is required");if(s){const{repoPage:R,installationIndex:m}=v;if(!o)throw new Error("Missing installation list");return De.retrieveInstallationRepositories(t,m||0,o,R||1,r)}return De.retrieveUserGitRepositories(t,v,r)},getNextPageParam:v=>{if(s){const m=v;return m.nextPage?{installationIndex:m.installationIndex,repoPage:m.nextPage}:m.installationIndex!==null?{installationIndex:m.installationIndex,repoPage:1}:null}return v.nextPage},initialPageParam:s?{installationIndex:0,repoPage:1}:1,enabled:i&&(n||[]).length>0&&!!t&&(!s||Array.isArray(o)&&o.length>0),staleTime:1e3*60*5,gcTime:1e3*60*15,refetchOnWindowFocus:!1}),p=()=>{a.hasNextPage&&!a.isFetchingNextPage&&a.fetchNextPage()};return{data:a.data,isLoading:a.isLoading,isError:a.isError,hasNextPage:a.hasNextPage,isFetchingNextPage:a.isFetchingNextPage,fetchNextPage:a.fetchNextPage,onLoadMore:p}}function $n(e,t,r,i=100){return ft({queryKey:["repositories","search",e,t,i],queryFn:()=>De.searchGitRepositories(e,i,t||void 0),enabled:!!e&&!!t&&!r,staleTime:1e3*60*5,gcTime:1e3*60*15})}export{Cn as D,Tn as E,En as G,Sn as T,Pt as a,Dn as b,Bn as c,$n as d,An as e,At as r,Fn as u};
